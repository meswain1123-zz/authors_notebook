(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{146:function(e,t,a){},165:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},183:function(e,t,a){e.exports=a(227)},188:function(e,t,a){},189:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),s=a.n(i),l=(a(188),a(9)),o=a(12),c=a(14),u=a(13),d=a(15),p=(a(189),a(29)),m=a(10),h=a(261),f=a(262),g=a(232),y=a(259),E=a(258),b=a(234),v=a(163),T=a.n(v);function w(e){return{type:"SELECT_PAGE",payload:e}}function N(e){return{type:"SET_WORLDS",payload:e}}function O(e){return{type:"SET_PUBLIC_WORLDS",payload:e}}function W(e){return{type:"SELECT_WORLD",payload:e}}function S(e){return{type:"SET_TYPES",payload:e}}function _(e){return{type:"ADD_TYPE",payload:e}}function j(e){return{type:"SET_THINGS",payload:e}}function k(e){return{type:"ADD_THING",payload:e}}function x(e){return{type:"UPDATE_TYPE",payload:e}}function D(e){return{type:"UPDATE_SELECTED_TYPE",payload:e}}function A(e){return{type:"UPDATE_THING",payload:e}}function C(e){return{type:"UPDATE_SELECTED_THING",payload:e}}var I=a(263),P=a(279),F=a(28),V=a(7),L=a.n(V),M=a(19);function R(e){this.name="UnauthorizedError",this.message=e}R.prototype=new Error;var B=function(){var e;return{getInstance:function(){return e||(e=new U),e}}}(),U=function e(){var t=this;Object(l.a)(this,e),this.logErrorReason=function(e){return console.log("Response error reason:",e),Promise.reject(e)},this.checkStatus=function(e){if(e.status>=200&&e.status<300)return e;if(401===e.status){var t=new R(e.statusText);return t.response=e,Promise.reject(t)}var a=new Error(e.statusText);return a.response=e,Promise.reject(a)},this.getVersion=Object(M.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/version");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",{version:"0.0.1"});case 8:case"end":return e.stop()}}),e)}))),this.login=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/user/login",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",{_id:"-1",email:"fake@fakemail.com",firstName:"Liar Liar",lastName:"Pants on Fire"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){var e=Object(M.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=3;break}return e.next=3,t.postData("/user/logout");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/user/register",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendReset=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/user/sendReset",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWorldsForUser=Object(M.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getWorldsForUser");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",[{_id:-1,OwnerID:-1,Name:"Alice in Wonderland",Public:!0}]);case 8:case"end":return e.stop()}}),e)}))),this.getPublicWorlds=Object(M.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getPublicWorlds");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",[{_id:-1,OwnerID:-1,Name:"Alice in Wonderland",Public:!0}]);case 8:case"end":return e.stop()}}),e)}))),this.createWorld=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/world/createWorld",{world:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteWorld=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/world/deleteWorld",{worldID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateWorld=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/world/updateWorld",{world:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.selectWorld=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/world/selectWorld",{worldID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTypesForWorld=Object(M.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getTypesForWorld");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",[{_id:-1,WorldID:-1,Name:"Character"}]);case 8:case"end":return e.stop()}}),e)}))),this.getType=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getType/".concat(a));case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",{_id:-1,WorldID:-1,Name:"Character",Description:"",Attributes:{}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createType=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/world/createType",{type:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteType=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/world/deleteType",{typeID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateType=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/world/updateType",{type:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getThingsForWorld=Object(M.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getThingsForWorld");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",[{_id:-1,WorldID:-1,Name:"Alice"}]);case 8:case"end":return e.stop()}}),e)}))),this.getThing=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/world/getThing/".concat(a));case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",{_id:-1,WorldID:-1,Types:[-1],Name:"Alice",Description:""});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createThing=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/world/createThing",{thing:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteThing=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/world/deleteThing",{thingID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateThing=function(){var e=Object(M.a)(L.a.mark((function e(a){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/world/updateThing",{thing:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetchData=function(){var e=Object(M.a)(L.a.mark((function e(a){var n,r=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch("".concat(a),Object(F.a)({mode:"cors",credentials:"include"},n,{headers:Object(F.a)({Accept:"application/json"},n.headers)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postData=function(){var e=Object(M.a)(L.a.mark((function e(a,n){var r,i=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(F.a)({mode:"cors",credentials:"include"},r,{headers:Object(F.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"POST",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.putData=function(){var e=Object(M.a)(L.a.mark((function e(a,n){var r,i=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(F.a)({mode:"cors",credentials:"include"},r,{headers:Object(F.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PUT",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.patchData=function(){var e=Object(M.a)(L.a.mark((function e(a,n){var r,i=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(F.a)({mode:"cors",credentials:"include"},r,{headers:Object(F.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PATCH",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.deleteData=function(){var e=Object(M.a)(L.a.mark((function e(a,n){var r,i=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(F.a)({mode:"cors",credentials:"include"},r,{headers:Object(F.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"DELETE",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.processResponse=function(){var e=Object(M.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,200===t.status){e.next=7;break}throw Error(a.message);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.real=!0},J=B,H=(a(146),a(257)),G=a(25),Y=a.n(G),z=a(260),$=a(161),Z=a.n($),q=a(162),K=a.n(q),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={version:"0"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,"Home")}}]),t}(n.Component),X=Object(m.b)()(Q);var ee=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-sm-12"},"Template Page")}}]),t}(n.Component),te=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage}}),(function(e){return{selectPage:function(t){return e(w(t))}}}))(ee),ae=[{path:"/",name:"Home",icon:Z.a,component:X},{path:"/Forums",name:"Forums",icon:K.a,component:te}];var ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.api.getPublicWorlds().then((function(t){e.props.setPublicWorlds(t.worlds)})),null!==this.props.user&&this.api.getWorldsForUser().then((function(t){void 0!==t.worlds&&e.props.setWorlds(t.worlds)}))}},{key:"links",value:function(){return r.a.createElement("div",null,ae.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/details/".concat(e._id)},"string"===typeof e.icon?r.a.createElement(E.a,{className:"marginLeft"},e.icon):r.a.createElement(e.icon,{className:"marginLeft"}),"\xa0",r.a.createElement(y.a,{primary:e.name,className:"marginLeft"})))})))}},{key:"publicWorlds",value:function(){var e=void 0===this.props.publicWorlds||null===this.props.publicWorlds||void 0!==this.props.publicWorlds.message?"":this.props.publicWorlds.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))}));return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(y.a,{display:"none",primary:"Public Worlds"})),e)}},{key:"myWorlds",value:function(){if(null===this.props.user||void 0===this.props.user)return"";var e=void 0===this.props.worlds?"":this.props.worlds.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))}));return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"My Worlds"})),r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/create"},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New"}))),e)}},{key:"render",value:function(){return r.a.createElement(z.a,null,this.links(),this.publicWorlds(),this.myWorlds())}}]),t}(n.Component),re=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},setWorlds:function(t){return e(N(t))},setPublicWorlds:function(t){return e(O(t))}}}))(ne);var ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).menuClick=function(){a.props.toggleMenu()},a.state={},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loadFromStorage()}},{key:"render",value:function(){return r.a.createElement(h.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(I.a,{container:!0,spacing:0},r.a.createElement(I.a,{item:!0,xs:!0},r.a.createElement(b.a,{style:{color:"white"},"aria-label":"Menu",onClick:this.menuClick},r.a.createElement(T.a,null))),r.a.createElement(I.a,{item:!0,xs:!0},r.a.createElement(g.a,{className:"curvedButton"},r.a.createElement(y.a,{primary:null===this.props.selectedWorld?"Welcome!":this.props.selectedWorld.Name}))),r.a.createElement(I.a,{item:!0,xs:!0},r.a.createElement(p.b,{className:"float-right blue whiteFont",to:"/User/Login",activeClassName:"active"},r.a.createElement(g.a,{className:"curvedButton float-right"},r.a.createElement(E.a,null,"person"),r.a.createElement(y.a,{primary:null===this.props.user||void 0===this.props.user.firstName?" Login/Register":" ".concat(this.props.user.firstName," ").concat(this.props.user.lastName)})))))),this.props.mobileMenuOpen?r.a.createElement(P.a,{display:{xs:"inline",sm:"none"}},r.a.createElement(re,null)):"")}}]),t}(n.Component),se=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,user:e.app.user,selectedWorld:e.app.selectedWorld,mobileMenuOpen:!e.app.menuOpen}}),(function(e){return{selectPage:function(t){return e(w(t))},setWorlds:function(t){return e(N(t))},loadFromStorage:function(){return e({type:"LOAD_FROM_STORAGE",payload:{}})},toggleMenu:function(){return e({type:"TOGGLE_MENU",payload:{}})}}}))(ie),le=a(165),oe=a.n(le),ce=a(265);var ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.api.getPublicWorlds().then((function(t){console.log(t),e.props.setPublicWorlds(t.worlds)})),setTimeout((function(){null!==e.props.user&&e.api.getWorldsForUser().then((function(t){void 0!==t.worlds&&e.props.setWorlds(t.worlds)}))}),500)}},{key:"links",value:function(){return r.a.createElement("div",null,ae.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:e.path},"string"===typeof e.icon?r.a.createElement(E.a,{className:"marginLeft"},e.icon):r.a.createElement(e.icon,{className:"marginLeft"}),"\xa0",r.a.createElement(y.a,{primary:e.name,className:"marginLeft"})))})))}},{key:"brand",value:function(){return r.a.createElement(p.b,{to:"/",className:"blue blackFont",activeClassName:"active"},r.a.createElement(g.a,{button:!0,className:"curvedButton"},r.a.createElement("img",{src:oe.a,alt:"logo",className:"App-logo"}),r.a.createElement(y.a,{primary:this.props.logoText})))}},{key:"publicWorlds",value:function(){var e=void 0===this.props.publicWorlds||null===this.props.publicWorlds||void 0!==this.props.publicWorlds.message?"":this.props.publicWorlds.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))}));return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(y.a,{display:"none",primary:"Public Worlds"})),e)}},{key:"myWorlds",value:function(){if(null===this.props.user||void 0===this.props.user)return"";var e=void 0===this.props.worlds?"":this.props.worlds.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))}));return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"My Worlds"})),r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/world/create"},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New"}))),e)}},{key:"render",value:function(){return r.a.createElement(z.a,{className:"Sidebar"},this.brand(),r.a.createElement(ce.a,{light:!0}),this.links(),this.publicWorlds(),this.myWorlds())}}]),t}(n.Component),de=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},setWorlds:function(t){return e(N(t))},setPublicWorlds:function(t){return e(O(t))}}}))(ue),pe=a(61);var me=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return null===this.props.selectedPage||"/".concat(this.props.selectedPage)===window.location.pathname?r.a.createElement("div",{className:"col-sm-12"},"Forum Menu Page!"):r.a.createElement(pe.a,{to:"/".concat(this.props.selectedPage)})}}]),t}(n.Component),he=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage}}),(function(e){return{selectPage:function(t){return e(w(t))}}}))(me),fe=a(31),ge=a(276),ye=a(151),Ee=a(159),be=a(158),ve=a(266),Te=a(114),we=a.n(Te),Ne=a(115),Oe=a.n(Ne),We=a(152),Se=a(267),_e=a(268),je=a(133);var ke=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.state.email&&(a.validateField("email"),a.validateField("password"),a.setState({remember:!0}))},a.handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.handleClickShowPassword=function(){a.setState({showPassword:!a.state.showPassword})},a.handleMouseDownPassword=function(e){e.preventDefault()},a.validateField=function(e){var t=!0,n="",r=a.state[e];switch(e){case"email":n=(t=null!==r.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid";break;case"password":n=(t=r.length>=6)?"":"Password is too short";break;case"confirmEmail":n=(t=r===a.state.email)?"":"Confirm Email doesn't match Email";break;case"confirmPassword":n=(t=r===a.state.password)?"":"Confirm Password doesn't match Password";break;case"firstName":n=(t=r.length>=2)?"":"First Name is too short";break;case"lastName":n=(t=r.length>=2)?"":"Last Name is too short"}return{valid:t,message:n}},a.validateForm=function(e){var t=a.validateField("email"),n={valid:!0,message:""},r={valid:!0,message:""},i={valid:!0,message:""},s={valid:!0,message:""},l={valid:!0,message:""};switch(a.state.formMode){case"Login":r=a.validateField("password");break;case"Register":n=a.validateField("confirmEmail"),r=a.validateField("password"),i=a.validateField("confirmPassword"),s=a.validateField("firstName"),l=a.validateField("lastName")}var o=t.valid&&r.valid&&n.valid&&i.valid&&s.valid&&l.valid,c=a.state.fieldValidation;c.email=t,c.password=r,c.confirmEmail=n,c.confirmPassword=i,c.firstName=s,c.lastName=l,a.setState({formValid:o,fieldValidation:c},e)},a.onSubmit=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e={email:a.state.email,password:a.state.password,firstName:a.state.firstName,lastName:a.state.lastName};"login"===a.state.formMode?a.api.login(e).then((function(e){if(null===e.user){var t=a.state.fieldValidation;t.loginError={message:e.message,valid:!1,show:!0},a.setState({fieldValidation:t,waiting:!1})}else{if(a.state.remember){var n=new je.a;n.set("email",a.state.email),n.set("password",a.state.password)}a.api.getWorldsForUser(e.user._id).then((function(e){a.props.setWorlds(e.worlds)})),a.props.userLogin(e.user),a.setState({redirectTo:"/"})}})).catch((function(e){return console.log(e)})):"register"===a.state.formMode?a.api.register(e).then((function(e){a.setState({message:e.message,formMode:"login",fieldValidation:{email:{valid:!1,message:""},password:{valid:!1,message:""},confirmEmail:{valid:!1,message:""},confirmPassword:{valid:!1,message:""},firstName:{valid:!1,message:""},lastName:{valid:!1,message:""},waiting:!1}})})).catch((function(e){return console.log(e)})):"password"===a.state.formMode&&a.api.sendReset(e).then((function(e){a.setState({message:e.message,formMode:"login",fieldValidation:{email:{valid:!1,message:""},password:{valid:!1,message:""},confirmEmail:{valid:!1,message:""},confirmPassword:{valid:!1,message:""},firstName:{valid:!1,message:""},lastName:{valid:!1,message:""}},waiting:!1})})).catch((function(e){return console.log(e)}))},a.loginClick=function(){a.setState({formMode:"login"})},a.registerClick=function(){a.setState({formMode:"register"})},a.passwordClick=function(){a.setState({formMode:"password"})};var n=new je.a,r=n.get("email"),i=n.get("password");return a.state={formMode:"login",email:void 0===r?"":r,password:void 0===i?"":i,confirmEmail:"",confirmPassword:"",fieldValidation:{email:{valid:!0,message:""},password:{valid:!0,message:""},confirmEmail:{valid:!0,message:""},confirmPassword:{valid:!0,message:""},firstName:{valid:!0,message:""},lastName:{valid:!0,message:""}},formValid:!1,remember:!1,message:"",firstName:"",lastName:"",redirectTo:null},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return null!==this.state.redirectTo&&null!==this.props.user&&void 0!==this.props.user&&void 0!==this.props.user.firstName&&""!==this.props.user.firstName?r.a.createElement(pe.a,{to:this.state.redirectTo}):"login"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"email"},"Email"),r.a.createElement(Ee.a,{id:"email",name:"email",type:"email",error:!this.state.fieldValidation.email.valid,value:this.state.email,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.email.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(Ee.a,{id:"outlined-adornment-password",name:"password",type:this.state.showPassword?"text":"password",value:this.state.password,error:!this.state.fieldValidation.password.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ve.a,{position:"end"},r.a.createElement(b.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(we.a,null):r.a.createElement(Oe.a,null))),labelWidth:70,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.password.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(Se.a,{control:r.a.createElement(ge.a,{checked:this.state.remember,onChange:this.handleUserInput,name:"remember",color:"primary"}),label:"Remember Me"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(_e.a,{onClick:this.registerClick},"Register")," ",r.a.createElement(_e.a,{onClick:this.passwordClick},"Forgot Password")),r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):"register"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Register"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"firstName"},"First Name"),r.a.createElement(Ee.a,{id:"firstName",name:"firstName",type:"text",value:this.state.firstName,error:!this.state.fieldValidation.firstName.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:80,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.firstName.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"lastName"},"Last Name"),r.a.createElement(Ee.a,{id:"lastName",name:"lastName",type:"text",value:this.state.lastName,error:!this.state.fieldValidation.lastName.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:80,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.lastName.message))))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"email"},"Email"),r.a.createElement(Ee.a,{id:"email",name:"email",type:"email",value:this.state.email,error:!this.state.fieldValidation.email.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.email.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"confirmEmail"},"Confirm Email"),r.a.createElement(Ee.a,{id:"confirmEmail",name:"confirmEmail",type:"email",error:!this.state.fieldValidation.confirmEmail.valid,value:this.state.confirmEmail,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:100,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.confirmEmail.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(Ee.a,{id:"outlined-adornment-password",name:"password",type:this.state.showPassword?"text":"password",value:this.state.password,error:!this.state.fieldValidation.password.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ve.a,{position:"end"},r.a.createElement(b.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(we.a,null):r.a.createElement(Oe.a,null))),labelWidth:70,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.password.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"confirm-password"},"Confirm Password"),r.a.createElement(Ee.a,{id:"confirm-password",name:"confirmPassword",type:this.state.showPassword?"text":"password",value:this.state.confirmPassword,error:!this.state.fieldValidation.confirmPassword.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ve.a,{position:"end"},r.a.createElement(b.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(we.a,null):r.a.createElement(Oe.a,null))),labelWidth:130,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.confirmPassword.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(_e.a,{onClick:this.loginClick},"Login")," ",r.a.createElement(_e.a,{onClick:this.passwordClick},"Forgot Password")," "),r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{className:"w200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):"password"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Forgot Password?"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"email"},"Email"),r.a.createElement(Ee.a,{id:"email",name:"email",type:"email",value:this.state.email,error:!this.state.fieldValidation.email.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.email.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(_e.a,{onClick:this.registerClick},"Register")," ",r.a.createElement(_e.a,{onClick:this.loginClick},"Login")),r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{className:"w200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):void 0}}]),t}(n.Component),xe=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,user:e.app.user,loginError:e.app.loginError}}),(function(e){return{selectPage:function(t){return e(w(t))},userLogin:function(t){return e({type:"LOGIN",payload:t})},setWorlds:function(t){return e(N(t))}}}))(ke);var De=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-sm-12"},"Profile Page")}}]),t}(n.Component),Ae=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage}}),(function(e){return{selectPage:function(t){return e(w(t))}}}))(De),Ce=a(43),Ie=a.n(Ce),Pe=a(278),Fe=a(270),Ve=a(269),Le=a(116),Me=a.n(Le),Re=a(117),Be=a.n(Re),Ue=a(118),Je=a.n(Ue),He=a(280);var Ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange_old=function(e){return function(t,n){a.setState({expandedPanel:!!n&&e})}},a.handleChange=function(e){a.setState({expandedPanel:a.state.expandedPanel!==e&&e})},a.state={expandedPanel:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"renderListForType",value:function(e){var t=this.props.things.filter((function(t){return t.TypeIDs.includes(e._id)}));return r.a.createElement("div",{className:"Things"},r.a.createElement(z.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/create/type_id_".concat(e._id)},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New ".concat(e.Name)}))),t.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"})))}))))}},{key:"renderMajorTypelessThings",value:function(){var e=this.props.things.filter((function(e){return 0===e.Types.filter((function(e){return e.Major})).length}));return r.a.createElement("div",{className:"Things"},r.a.createElement(z.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/create"},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New Thing"}))),e.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"})))}))))}},{key:"render_old",value:function(){var e=this,t=this.props.things.filter((function(e){return 0===e.Types.filter((function(e){return e.Major})).length}));return r.a.createElement("div",null,r.a.createElement(Pe.a,{expanded:"TYPES"===this.state.expandedPanel,onChange:this.handleChange("TYPES")},r.a.createElement(Ve.a,{expandIcon:r.a.createElement(Me.a,null)},"Types (",this.props.types.length,")"),r.a.createElement(Fe.a,null,r.a.createElement(z.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/create"},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New Type"}))),this.props.types.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"})))}))))),this.props.types.filter((function(e){return e.Major})).map((function(t,a){var n=e.props.things.filter((function(e){return e.TypeIDs.includes(t._id)}));return r.a.createElement(Pe.a,{key:a,expanded:e.state.expandedPanel===t._id,onChange:e.handleChange(t._id)},r.a.createElement(Ve.a,{expandIcon:r.a.createElement(Me.a,null)},t.Name,"s (",n.length,")"),r.a.createElement(Fe.a,null,r.a.createElement(z.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/create/type_id_".concat(t._id)},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New ".concat(t.Name)}))),n.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"})))})))))})),r.a.createElement(Pe.a,{expanded:"OTHER"===this.state.expandedPanel,onChange:this.handleChange("OTHER")},r.a.createElement(Ve.a,{expandIcon:r.a.createElement(Me.a,null)},"Other Things (",t.length,")"),r.a.createElement(Fe.a,null,r.a.createElement(z.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/create"},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New Thing"}))),t.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"})))}))))))}},{key:"render",value:function(){var e=this,t=this.props.things.filter((function(e){return 0===e.Types.filter((function(e){return e.Major})).length}));return r.a.createElement("div",null,r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"TYPES"===this.state.expandedPanel?r.a.createElement(He.a,{title:"Collapse Types"},r.a.createElement(H.a,{onClick:function(t){e.handleChange("TYPES")}},r.a.createElement(Be.a,null))):r.a.createElement(He.a,{title:"Expand Types"},r.a.createElement(H.a,{onClick:function(t){e.handleChange("TYPES")}},r.a.createElement(Je.a,null))),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},"Types (".concat(this.props.types.length,")")),null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id?"":r.a.createElement(He.a,{title:"Create New Type"},r.a.createElement(H.a,{href:"/type/create"},r.a.createElement(Y.a,null)))),"TYPES"===this.state.expandedPanel?r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,{style:{maxWidth:"300px"}},this.props.types.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(He.a,{title:"Details for ".concat(t.Name)},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(t._id)},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),null===e.props.selectedWorld||e.props.selectedWorld.Public||null!==e.props.user&&e.props.selectedWorld.Owner===e.props.user._id?"":r.a.createElement("div",null,r.a.createElement(He.a,{title:"Create New ".concat(t.Name)},r.a.createElement(H.a,{href:"/thing/create/type_id_".concat(t._id)},r.a.createElement(Y.a,null))),r.a.createElement(He.a,{title:"Edit ".concat(t.Name)},r.a.createElement(H.a,{href:"/type/edit/".concat(t._id)},r.a.createElement(Ie.a,null)))))})))):"")),this.props.types.filter((function(e){return e.Major})).map((function(t,a){var n=e.props.things.filter((function(e){return e.TypeIDs.includes(t._id)}));return r.a.createElement(g.a,{key:a},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},e.state.expandedPanel===t._id?r.a.createElement(He.a,{title:"Collapse ".concat(t.Name,"s")},r.a.createElement(H.a,{onClick:function(a){e.handleChange(t._id)}},r.a.createElement(Be.a,null))):r.a.createElement(He.a,{title:"Expand ".concat(t.Name,"s")},r.a.createElement(H.a,{onClick:function(a){e.handleChange(t._id)}},r.a.createElement(Je.a,null))),r.a.createElement(He.a,{title:"Details for ".concat(t.Name)},r.a.createElement(H.a,{href:"/type/details/".concat(t._id)},r.a.createElement(y.a,null,t.Name,"s (",n.length,")"))),null===e.props.selectedWorld||e.props.selectedWorld.Public||null!==e.props.user&&e.props.selectedWorld.Owner===e.props.user._id?"":r.a.createElement("div",null,r.a.createElement(He.a,{title:"Create New ".concat(t.Name)},r.a.createElement(H.a,{href:"/thing/create/type_id_".concat(t._id)},r.a.createElement(Y.a,null))),r.a.createElement(He.a,{title:"Edit ".concat(t.Name)},r.a.createElement(H.a,{href:"/type/edit/".concat(t._id)},r.a.createElement(Ie.a,null))))),e.state.expandedPanel===t._id?r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,{style:{maxWidth:"300px"}},n.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(He.a,{title:"Details for ".concat(t.Name)},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(t._id)},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),null===e.props.selectedWorld||e.props.selectedWorld.Public||null!==e.props.user&&e.props.selectedWorld.Owner===e.props.user._id?"":r.a.createElement(He.a,{title:"Edit ".concat(t.Name)},r.a.createElement(H.a,{href:"/thing/edit/".concat(t._id)},r.a.createElement(Ie.a,null))))})))):""))})),r.a.createElement(g.a,null,r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"OTHER"===this.state.expandedPanel?r.a.createElement(He.a,{title:"Collapse Other Things"},r.a.createElement(H.a,{onClick:function(t){e.handleChange("OTHER")}},r.a.createElement(Be.a,null))):r.a.createElement(He.a,{title:"Expand Other Things"},r.a.createElement(H.a,{onClick:function(t){e.handleChange("OTHER")}},r.a.createElement(Je.a,null))),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},"Other Things (".concat(t.length,")")),null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id?"":r.a.createElement(He.a,{title:"Create New Thing"},r.a.createElement(H.a,{href:"/thing/create"},r.a.createElement(Y.a,null)))),"OTHER"===this.state.expandedPanel?r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,{style:{maxWidth:"300px"}},t.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(He.a,{title:"Details for ".concat(t.Name)},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(t._id)},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),null===e.props.selectedWorld||e.props.selectedWorld.Public||null!==e.props.user&&e.props.selectedWorld.Owner===e.props.user._id?"":r.a.createElement(He.a,{title:"Edit ".concat(t.Name)},r.a.createElement(H.a,{href:"/thing/edit/".concat(t._id)},r.a.createElement(Ie.a,null))))})))):""))))}}]),t}(n.Component),Ye=Object(m.b)((function(e){return{things:e.app.things,types:e.app.types,selectedWorld:e.app.selectedWorld,user:e.app.user}}),(function(e){return{}}))(Ge),ze=a(76),$e=a.n(ze),Ze=a(277),qe=a(273);var Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).delete=function(e){a.api.deleteWorld(a.props.selectedWorldID).then((function(e){var t=a.props.worlds.filter((function(e){return e._id!==a.props.selectedWorldID}));a.props.setWorlds(t),t=a.props.publicWorlds.filter((function(e){return e._id!==a.props.selectedWorldID})),a.props.setPublicWorlds(t),a.api.selectWorld(null),a.props.selectWorld(null),a.setState({modalOpen:!1,redirectTo:"/"})}))},a.getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},a.state={world:null,modalOpen:!1,redirectTo:null},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.selectWorld(t),setTimeout((function(){e.api.selectWorld(t).then((function(t){e.getTypes()}))}),500)}},{key:"getTypes",value:function(){var e=this;this.api.getTypesForWorld().then((function(t){if(void 0!==t&&void 0===t.message){var a=t.types;a.forEach((function(e){e.Supers=[],e.SuperIDs.forEach((function(t){e.Supers=e.Supers.concat(a.filter((function(e){return e._id===t})))}))})),e.props.setTypes(a),e.getThings()}}))}},{key:"getThings",value:function(){var e=this;this.api.getThingsForWorld().then((function(t){if(console.log(t),void 0!==t&&void 0===t.message){var a=t.things;a.forEach((function(t){t.Types=[],t.TypeIDs.forEach((function(a){t.Types=t.Types.concat(e.props.types.filter((function(e){return e._id===a})))}))})),e.props.setThings(a)}}))}},{key:"render",value:function(){var e=this;return null!==this.state.redirectTo?r.a.createElement(pe.a,{to:this.state.redirectTo}):null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id?r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},null===this.props.selectedWorld?"":r.a.createElement(I.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(I.a,{item:!0,xs:9},r.a.createElement("h2",null,this.props.selectedWorld.Name)),r.a.createElement(I.a,{item:!0,xs:3},null!==this.props.user&&null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id?r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Edit ".concat(this.props.selectedWorld.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",href:"/world/edit/".concat(this.props.selectedWorld._id)},r.a.createElement(Ie.a,null)))),r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Delete ".concat(this.props.selectedWorld.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement($e.a,null))))):"")),r.a.createElement(I.a,{item:!0},r.a.createElement(Ye,null)),r.a.createElement(Ze.a,{"aria-labelledby":"delete-thing-modal","aria-describedby":"delete-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Are you sure you want to delete ",null!==this.props.selectedWorld?this.props.selectedWorld.Name:"","?"),r.a.createElement(I.a,{item:!0},"(All external references to it will be left alone and may not work correctly)"),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel"))))))):r.a.createElement(pe.a,{to:"/"})}}]),t}(n.Component),Qe=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,types:e.app.types,things:e.app.things,user:e.app.user}}),(function(e){return{selectWorld:function(t){return e(W(t))},setTypes:function(t){return e(S(t))},setThings:function(t){return e(j(t))},setWorlds:function(t){return e(N(t))},setPublicWorlds:function(t){return e(O(t))}}}))(Ke);var Xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;void 0!==r[t]&&r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.validateField=function(e){var t=null,n=!0,r="";switch(e){case"Name":(n=null!==(t=a.state[e]).match(/^[a-zA-Z0-9 ]*$/i))?t.length<4?(n=!1,r="World Name is too short"):(n=0===a.props.worlds.filter((function(e){return e.Name===t&&e._id!==a.state._id})).length)||(r="This World Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in World Names"}return{valid:n,message:r}},a.validateForm=function(e){var t=a.validateField("Name"),n=t.valid,r=a.state.fieldValidation;r.Name=t,a.setState({formValid:n,fieldValidation:r},e)},a.onSubmit=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e={_id:a.state._id,Name:a.state.Name,Public:a.state.Public,Owner:a.props.user._id};null===e._id?a.api.createWorld(e).then((function(t){void 0!==t.message?a.setState({message:t.message}):(e._id=t.worldID,a.props.addWorld(e),a.setState({waiting:!1,redirectTo:"/world/details/".concat(t.worldID)}))})).catch((function(e){return console.log(e)})):a.api.updateWorld(e).then((function(t){t.message!=="World ".concat(e.Name," updated!")?a.setState({message:t.message}):(a.props.updateWorld(e),a.setState({waiting:!1,redirectTo:"/world/details/".concat(a.props.selectedWorld._id)}))})).catch((function(e){return console.log(e)}))},a.state={_id:null,Name:"",Public:!1,fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){if(void 0!==e.props.match.params.id){var t=e.props.match.params.id,a=e.props.worlds.filter((function(e){return e._id===t}));a.length>0&&(a=a[0],e.setState({Name:a.Name,Public:a.Public,_id:t}),e.api.selectWorld(t),e.props.selectWorld(t))}else e.api.selectWorld(null),e.props.selectWorld(null)}),500)}},{key:"render",value:function(){var e=this;return null!==this.state.redirectTo?r.a.createElement(pe.a,{to:this.state.redirectTo}):null===this.props.user||null!==this.props.selectedWorld&&this.props.selectedWorld.Owner!==this.props.user._id?r.a.createElement(pe.a,{to:"/"}):r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},r.a.createElement("h2",null,null===this.state._id?"Create New World":"Edit World")),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"name"},"Name"),r.a.createElement(Ee.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(I.a,{item:!0},r.a.createElement(Se.a,{control:r.a.createElement(ge.a,{checked:this.state.Public,onChange:this.handleUserInput,name:"Public",color:"primary"}),label:"Public"})),r.a.createElement(I.a,{item:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{variant:"contained",color:"primary",className:"w-200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit"),r.a.createElement(H.a,{variant:"contained",style:{marginLeft:"4px"},disabled:this.state.waiting,onClick:function(t){e.setState({redirectTo:"/"})},type:"button"},"Cancel"))),r.a.createElement(I.a,{item:!0},this.state.message),r.a.createElement(I.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))))}}]),t}(n.Component),et=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},selectWorld:function(t){return e(W(t))},addWorld:function(t){return e({type:"ADD_WORLD",payload:t})},updateWorld:function(t){return e({type:"UPDATE_WORLD",payload:t})}}}))(Xe);var tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},a.delete=function(e){a.api.deleteType(a.state._id).then((function(e){var t=a.props.types.filter((function(e){return e._id!==a.state._id}));a.props.setTypes(t),a.setState({redirectTo:"/world/details/".concat(a.props.selectedWorldID)})}))},a.state={_id:null,Name:"",Description:"",Supers:[],Major:!1,Attributes:[],fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,modalOpen:!1},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e.props.match.params.id;void 0!==t?e.api.getType(t).then((function(a){if(void 0===a.message){var n=e.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));e.setState({Name:a.Name,Description:a.Description,_id:t,Supers:n,Major:a.Major}),e.props.updateSelectedType(a)}else console.log(a.message)})):e.props.updateSelectedType({_id:null,Name:"",Description:"",Supers:[],AttributesArr:[],Major:!1})}),500)}},{key:"render",value:function(){var e=this;if(null!==this.state.redirectTo)return r.a.createElement(pe.a,{to:this.state.redirectTo});if(null===this.props.user||null!==this.props.selectedWorld&&!this.props.selectedWorld.Public&&this.props.selectedWorld.Owner!==this.props.user._id)return r.a.createElement(pe.a,{to:"/"});var t=this.props.types.filter((function(t){return void 0!==t.ReferenceIDs&&t.ReferenceIDs.includes(e.state._id)}));return r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(I.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement("h2",null,this.state.Name)),r.a.createElement(I.a,{item:!0,sm:3,xs:6},r.a.createElement("h3",null,this.state.Major?"Major Type":"")),r.a.createElement(I.a,{item:!0,sm:3,xs:12},null!==this.props.user&&null!==this.props.selectedWorld&&this.props.selectedWorld.Owner===this.props.user._id?r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Create New ".concat(this.state.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",href:"/thing/create/type_id_".concat(this.state._id)},r.a.createElement(Y.a,null)))),r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Edit ".concat(this.state.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",href:"/type/edit/".concat(this.state._id)},r.a.createElement(Ie.a,null)))),r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Delete ".concat(this.state.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement($e.a,null))))):"")),r.a.createElement(I.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(I.a,{item:!0,sm:9,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(I.a,{item:!0},this.state.Description),r.a.createElement(I.a,{item:!0},"Attributes",r.a.createElement(z.a,null,null===this.props.selectedType||void 0===this.props.selectedType?"":this.props.selectedType.AttributesArr.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(y.a,null,t.Name,":\xa0","Options"===t.Type?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)}))):"Type"===t.Type?r.a.createElement(H.a,{variant:"contained",color:"primary",href:"/type/details/".concat(t.Type2)},r.a.createElement(y.a,{primary:e.props.types.filter((function(e){return e._id===t.Type2}))[0].Name})):"List"===t.Type?r.a.createElement("span",null,"List:\xa0","Options"===t.ListType?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)}))):"Type"===t.ListType?r.a.createElement(H.a,{variant:"contained",color:"primary",href:"/type/details/".concat(t.Type2)},r.a.createElement(y.a,{primary:e.props.types.filter((function(e){return e._id===t.Type2}))[0].Name})):t.ListType):t.Type))}))))),r.a.createElement(I.a,{item:!0,sm:3,xs:12,container:!0,spacing:0,direction:"column"},0===this.state.Supers.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Super Types"})),this.state.Supers.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))),0===this.props.subTypes.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Sub Types"})),this.props.subTypes.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))),0===t.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Referenced in:"})),t.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))),0===this.props.instances.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Instances"})),this.props.instances.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))))),r.a.createElement(Ze.a,{"aria-labelledby":"delete-type-modal","aria-describedby":"delete-type-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Are you sure you want to delete ",this.state.Name,"?"),r.a.createElement(I.a,{item:!0},"(All references to it will be left alone and may not work correctly)"),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}}]),t}(n.Component),at=Object(m.b)((function(e){var t=e.app.selectedType,a=null===t?[]:e.app.types.filter((function(e){return e.SuperIDs.includes(t._id)})),n=null===t?[]:e.app.things.filter((function(e){return e.TypeIDs.includes(t._id)}));return{selectedPage:e.app.selectedPage,selectedType:t,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,subTypes:a,instances:n,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},updateSelectedType:function(t){return e(D(t))},addType:function(t){return e(_(t))},updateType:function(t){return e(x(t))},setTypes:function(t){return e(S(t))}}}))(tt),nt=a(26),rt=a(167),it=a(169),st=a(113),lt=a(168),ot=a.n(lt),ct=a(275),ut=a(274),dt=a(86),pt=a.n(dt),mt=function(e,t){var a=t.attribute;if(a.Type2=e.target.value,"new"===e.target.value){t.onNewType((function(e){a.Type2=e._id,t.onChange(a)}))}else t.onChange(a)},ht=function(e,t){var a=t.attribute;a.Options=e,t.onChange(a)};function ft(e){var t=Object(n.useState)(e.attribute.Name),a=Object(st.a)(t,2),i=a[0],s=a[1],l=["Text","Number","True/False","Options","Type","List"],o=""===e.attribute.Type?l[0]:e.attribute.Type;return r.a.createElement(I.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,sm:3,xs:12},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"AttrName"},"Name"),r.a.createElement(Ee.a,{disabled:e.attribute.FromSupers.length>0,id:"AttrName",name:"AttrName",type:"text",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,Name:i,Type:e.attribute.Type,Options:e.attribute.Options,ListType:e.attribute.ListType,FromSupers:e.attribute.FromSupers,Type2:e.attribute.Type2,AttributeTypes:e.attribute.AttributeTypes};e.onChange(a)},labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,e.message))),r.a.createElement(I.a,{item:!0,sm:3,xs:12},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"attribute-type",id:"attribute-type-label"},"Attribute Type"),r.a.createElement(ct.a,{labelId:"attribute-type-label",id:"attribute-type",disabled:e.attribute.FromSupers.length>0,value:e.attribute.Type,onChange:function(t){!function(e,t){var a=t.attribute;a.Type=e.target.value,t.onChange(a)}(t,e)},fullWidth:!0,labelWidth:100},l.map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e},e)}))))),r.a.createElement(I.a,{item:!0,sm:3,xs:12},"Options"===o?r.a.createElement(pt.a,{variant:"outlined",disabled:e.attribute.FromSupers.length>0,defaultValue:e.attribute.Options,onChange:function(t){return ht(t,e)}}):"Type"===o?r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"type2",id:"type2-label"},"Defined Type"),r.a.createElement(ct.a,{labelId:"type2-label",id:"type2",disabled:e.attribute.FromSupers.length>0,value:e.attribute.Type2,onChange:function(t){mt(t,e)},fullWidth:!0,labelWidth:100},r.a.createElement(ut.a,{value:"new"},"+ Create New Type"),e.types.map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e._id},e.Name)})))):"List"===o?r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"list-type",id:"list-type-label"},"List Type"),r.a.createElement(ct.a,{labelId:"list-type-label",id:"list-type",disabled:e.attribute.FromSupers.length>0,value:e.attribute.ListType,onChange:function(t){!function(e,t){var a=t.attribute;a.ListType=e.target.value,t.onChange(a)}(t,e)},fullWidth:!0,labelWidth:70},["Text","Options","Type"].map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e},e)}))))),"Type"===e.attribute.ListType?r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"type2",id:"type2-label"},"Defined Type"),r.a.createElement(ct.a,{labelId:"type2-label",id:"type2",disabled:e.attribute.FromSupers.length>0,value:e.attribute.Type2,onChange:function(t){mt(t,e)},fullWidth:!0,labelWidth:100},r.a.createElement(ut.a,{value:"new"},"+ Create New Type"),e.types.map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e._id},e.Name)}))))):"Options"===e.attribute.ListType?r.a.createElement(I.a,{item:!0},r.a.createElement(pt.a,{variant:"outlined",disabled:e.attribute.FromSupers.length>0,defaultValue:e.attribute.Options,onChange:function(t){return ht(t,e)}})):""):""),r.a.createElement(I.a,{item:!0,sm:3,xs:12},r.a.createElement(H.a,{variant:"contained",color:"primary",className:"w200",fullWidth:!0,disabled:e.attribute.FromSupers.length>0,onClick:function(t){return e.onDelete(e.attribute)},type:"submit"},r.a.createElement(ot.a,null))))}function gt(){var e=Object(rt.a)(["\n  padding: 0 0 4px;\n  line-height: 1.5;\n  display: block;\n"]);return gt=function(){return e},e}var yt=Object(it.a)("label")(gt());var Et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).newAttribute=function(){var e=a.props.selectedType;e.AttributesArr.push({index:e.AttributesArr.length,Name:"",Type:"Text",Options:[],Type2:"",ListType:"",FromSupers:[],AttributeTypes:["Text","Number","True/False","Options","Type","List"]}),a.props.updateSelectedType(e)},a.changeAttribute=function(e){var t=a.props.selectedType;t.AttributesArr[e.index]={index:e.index,Name:e.Name,Type:e.Type,Options:e.Options,Type2:e.Type2,ListType:e.ListType,FromSupers:e.FromSupers,AttributeTypes:["Text","Number","True/False","Options","Type","List"]},a.props.updateSelectedType(t)},a.blurAttribute=function(e){},a.deleteAttribute=function(e){var t=a.props.selectedType,n=[];t.AttributesArr.forEach((function(t){t.index!==e.index&&(t.index>e.index&&t.index--,n.push(t))})),t.AttributesArr=[],a.props.updateSelectedType(t),setTimeout((function(){t.AttributesArr=n,a.props.updateSelectedType(t)}),500)},a.getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},a.addNewType=function(e){a.setState({modalOpen:!0,modalSubmit:e})},a.handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;void 0!==r[t]&&r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.validateField=function(e){var t=null,n=!0,r="";switch(e){case"Name":(n=null!==(t=a.state[e]).match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(n=!1,r="Type Name is too short"):(n=0===a.props.types.filter((function(e){return e.Name===t&&e._id!==a.state._id})).length)||(r="This Type Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Type Names"}return{valid:n,message:r}},a.validateForm=function(e){var t=a.validateField("Name"),n=t.valid,r=a.state.fieldValidation;r.Name=t,a.setState({formValid:n,fieldValidation:r},e)},a.saveNewType=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e={_id:null,Name:a.state.Name,Description:"",SuperIDs:[],AttributesArr:[],WorldID:a.props.selectedWorldID,Major:!1};a.api.createType(e).then((function(t){void 0!==t.typeID?(e._id=t.typeID,a.props.addType(e),a.state.modalSubmit(e),a.setState({waiting:!1,modalOpen:!1})):void 0!==t.message&&a.setState({waiting:!1,message:t.message})})).catch((function(e){return console.log(e)}))},a.state={modalOpen:!1,Name:"",fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",waiting:!1},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(I.a,{item:!0},r.a.createElement(yt,null,"Attributes")),r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:this.newAttribute},r.a.createElement(Y.a,null),r.a.createElement(y.a,{primary:"Create New"}))),null===this.props.selectedType||void 0===this.props.selectedType?"":this.props.selectedType.AttributesArr.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(ft,{typeID:e.props.selectedType._id,attribute:t,onChange:e.changeAttribute,onDelete:e.deleteAttribute,onBlur:e.blurAttribute,types:e.props.types,onNewType:e.addNewType}))})))),r.a.createElement(Ze.a,{"aria-labelledby":"new-type-modal","aria-describedby":"new-type-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Just give the new Type a name."),r.a.createElement(I.a,{item:!0},"(You can do the rest later.)"),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"name"},"Name"),r.a.createElement(Ee.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.saveNewType},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}}]),t}(n.Component),bt=Object(m.b)((function(e){return{selectedType:e.app.selectedType,attributesArr:e.app.attributesArr,types:e.app.types,selectedWorldID:e.app.selectedWorldID}}),(function(e){return{updateSelectedType:function(t){return e(D(t))},updateAttributesArr:function(t){return e({type:"UPDATE_ATTRIBUTES_ARR",payload:t})},addType:function(t){return e(_(t))}}}))(Et),vt=a(66);var Tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;void 0!==r[t]&&r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.validateField=function(e){var t=null,n=!0,r="";switch(e){case"Name":t=a.state[e],(n=null!==t.match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(n=!1,r="Type Name is too short"):(n=0===a.props.types.filter((function(e){return e.Name===t&&e._id!==a.state._id})).length)||(r="This Type Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Type Names";break;case"AttributesArr":n=!0,t=a.props.selectedType[e],r="";for(var i=function(e){return t.filter((function(a){return a.Name===t[e].Name})).length>1?(n=!1,r="Attribute Names must be unique","break"):"Type"!==t[e].Type&&("List"!==t[e].Type||"Type"!==t[e].ListType)||void 0!==t[e].Type2&&null!==t[e].Type2&&""!==t[e].Type2?"Options"!==t[e].Type&&("List"!==t[e].Type||"Options"!==t[e].ListType)||void 0!==t[e].Options&&null!==t[e].Options&&0!==t[e].Options.length?void 0:(n=!1,r="At least one Option must be set for ".concat(t[e].Name,"."),"break"):(n=!1,r="A Defined Type must be selected for ".concat(t[e].Name,"."),"break")},s=0;s<t.length;s++){if("break"===i(s))break}}return{valid:n,message:r}},a.validateForm=function(e){var t=a.validateField("Name"),n=a.validateField("AttributesArr"),r=t.valid&&n.valid,i=a.state.fieldValidation;i.Name=t,i.AttributesArr=n,a.setState({formValid:r,fieldValidation:i},e)},a.onSubmit=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e=a.state.Supers.map((function(e){return e._id})),t={_id:a.state._id,Name:a.state.Name,Description:a.state.Description,SuperIDs:e,AttributesArr:a.props.selectedType.AttributesArr,WorldID:a.props.selectedWorld._id,Major:a.state.Major,ReferenceIDs:[]};a.props.selectedType.AttributesArr.filter((function(e){return"Type"===e.Type||"List"===e.Type&&"Type"===e.ListType})).forEach((function(e){t.ReferenceIDs.includes(e.Type2)||t.ReferenceIDs.push(e.Type2)})),null===t._id?a.api.createType(t).then((function(e){void 0!==e.typeID?(t._id=e.typeID,a.props.addType(t),a.setState({waiting:!1,redirectTo:"/world/details/".concat(a.props.selectedWorld._id)})):void 0!==e.message&&a.setState({waiting:!1,message:e.message})})).catch((function(e){return console.log(e)})):a.api.updateType(t).then((function(e){e.message==="Type ".concat(t.Name," updated!")?(a.props.updateType(t),a.setState({waiting:!1,redirectTo:"/world/details/".concat(a.props.selectedWorld._id)})):a.setState({waiting:!1,message:e.message})})).catch((function(e){return console.log(e)}))},a.supersChange=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i),n=n.concat(i.Supers)}a.setState({Supers:n})},a.addSuper=function(e,t){t.Supers.forEach((function(t){0===e.filter((function(e){return e._id===t._id})).length&&e.push(t)}));for(var n=a.props.selectedType,r=Object(nt.a)(n.AttributesArr),i=function(e){var a=t.AttributesArr[e];a.FromSupers.push(t._id);var n=r.filter((function(e){return e.Name===a.Name}));if(0===n.length)a.index=r.length,r.push(a);else{for(var i=Object(nt.a)(n[0].FromSupers),s=0;s<a.FromSupers.length;s++){var l=a.FromSupers[s];i.includes(l)||i.push(l)}n[0].FromSupers=i}},s=0;s<t.AttributesArr.length;s++)i(s);a.setState({Supers:e}),n.AttributesArr=r,a.props.updateSelectedType(n)},a.removeSuper=function(e,t){for(var n=[],r=[t._id],i=function(e){var i=a.props.types.filter((function(t){return t._id===a.state.Supers[e]._id}))[0];i._id===t._id||i.SuperIDs.includes(t._id)?r.push(i._id):n.push(i)},s=0;s<a.state.Supers.length;s++)i(s);for(var l=a.props.selectedType,o=Object(nt.a)(l.AttributesArr),c=0;c<o.length;c++)for(var u=o[c],d=0;d<u.FromSupers.length;){var p=u.FromSupers[d];r.includes(p)?u.FromSupers.splice(d,1):d++}a.setState({Supers:n}),l.AttributesArr=o,a.props.updateSelectedType(l)},a.state={_id:null,Name:"",Description:"",Supers:[],Attributes:[],Major:!1,fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e.props.match.params.id;void 0!==t?e.api.getType(t).then((function(a){if(void 0===a.message){var n=e.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));e.setState({Name:a.Name,Description:a.Description,_id:t,Supers:n,Major:a.Major}),e.props.updateSelectedType(a)}else e.setState({message:a.message})})):e.props.updateSelectedType({_id:null,Name:"",Description:"",Supers:[],AttributesArr:[],Major:!1})}),500)}},{key:"render",value:function(){var e=this;if(null!==this.state.redirectTo)return r.a.createElement(pe.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id){var t=void 0===this.props.types||null===this.state._id?this.props.types:this.props.types.filter((function(t){return t._id!==e.state._id}));return r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},r.a.createElement("h2",null,null===this.state._id?"Create New Type":"Edit Type")),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"name"},"Name"),r.a.createElement(Ee.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"description"},"Description"),r.a.createElement(Ee.a,{id:"description",name:"Description",type:"text",value:this.state.Description,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:82,fullWidth:!0}))),r.a.createElement(I.a,{item:!0},r.a.createElement(Se.a,{control:r.a.createElement(ge.a,{checked:this.state.Major,onChange:this.handleUserInput,name:"Major",color:"primary"}),label:"Major Type"})),r.a.createElement(I.a,{item:!0},r.a.createElement(vt.Multiselect,{placeholder:"Super Types",options:t,selectedValues:this.state.Supers,onSelect:this.addSuper,onRemove:this.removeSuper,displayValue:"Name"})),r.a.createElement(I.a,{item:!0},r.a.createElement(bt,null)),r.a.createElement(I.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))),r.a.createElement(I.a,{item:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{variant:"contained",color:"primary",className:"w-200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit"),r.a.createElement(H.a,{variant:"contained",style:{marginLeft:"4px"},disabled:this.state.waiting,onClick:function(t){null===e.props.selectedType._id?e.setState({redirectTo:"/world/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/type/details/".concat(e.props.selectedType._id)})},type:"button"},"Cancel"))),r.a.createElement(I.a,{item:!0},this.state.message))}return r.a.createElement(pe.a,{to:"/"})}}]),t}(n.Component),wt=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,selectedType:e.app.selectedType,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},updateSelectedType:function(t){return e(D(t))},addType:function(t){return e(_(t))},updateType:function(t){return e(x(t))}}}))(Tt);var Nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},a.delete=function(e){a.api.deleteThing(a.state._id).then((function(e){var t=a.props.things.filter((function(e){return e._id!==a.state._id}));a.props.setThings(t),a.setState({redirectTo:"/world/details/".concat(a.props.selectedWorldID)})}))},a.state={_id:null,Name:"",Description:"",Types:[],Attributes:[],fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,modalOpen:!1},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e.props.match.params.id;void 0!==t?e.api.getThing(t).then((function(a){if(console.log(a),void 0===a.message){var n=[];a.TypeIDs.forEach((function(t){n=n.concat(e.props.types.filter((function(e){return e._id===t})))})),e.setState({Name:a.Name,Description:a.Description,_id:t,Types:n}),e.props.updateSelectedThing(a)}else console.log(a.message)})):e.props.updateSelectedThing({_id:null,Name:"",Description:"",Types:[],AttributesArr:[]})}),500)}},{key:"render",value:function(){var e=this;if(null!==this.state.redirectTo)return r.a.createElement(pe.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id){console.log(this.props.things);var t=this.props.things.filter((function(t){return void 0!==t.ReferenceIDs&&t.ReferenceIDs.includes(e.state._id)}));return r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(I.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(I.a,{item:!0,xs:9},r.a.createElement("h2",null,this.state.Name)),r.a.createElement(I.a,{item:!0,xs:3},null!==this.props.user&&null!==this.props.selectedWorld&&this.props.selectedWorld.Owner===this.props.user._id?r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Edit ".concat(this.state.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",href:"/thing/edit/".concat(this.state._id)},r.a.createElement(Ie.a,null)))),r.a.createElement(g.a,null,r.a.createElement(He.a,{title:"Delete ".concat(this.state.Name)},r.a.createElement(qe.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement($e.a,null))))):"")),r.a.createElement(I.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(I.a,{item:!0,sm:9,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(I.a,{item:!0},this.state.Description),r.a.createElement(I.a,{item:!0},"Attributes",r.a.createElement(z.a,null,null===this.props.selectedThing||void 0===this.props.selectedThing?"":this.props.selectedThing.AttributesArr.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(y.a,null,t.Name,":\xa0","Type"===t.Type&&""!==t.Value?r.a.createElement(H.a,{variant:"contained",color:"primary",href:"/thing/details/".concat(t.Value)},r.a.createElement(y.a,{primary:e.props.things.filter((function(e){return e._id===t.Value}))[0].Name})):"List"===t.Type?t.ListValues.map((function(a,n){return r.a.createElement("span",{key:n},"Type"===t.ListType?r.a.createElement("span",null,r.a.createElement(H.a,{variant:"contained",color:"primary",href:"/thing/details/".concat(a)},r.a.createElement(y.a,{primary:e.props.things.filter((function(e){return e._id===a}))[0].Name})),"\xa0"):n>0?", ".concat(a):"".concat(a))})):t.Value))}))))),r.a.createElement(I.a,{item:!0,sm:3,xs:12,container:!0,spacing:0,direction:"column"},0===this.state.Types.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Types"})),this.state.Types.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/type/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))),0===t.length?"":r.a.createElement(I.a,{item:!0},r.a.createElement(z.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Referenced in:"})),t.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",href:"/thing/details/".concat(e._id)},r.a.createElement(y.a,{primary:e.Name})))})))))),r.a.createElement(Ze.a,{"aria-labelledby":"delete-thing-modal","aria-describedby":"delete-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Are you sure you want to delete ",this.state.Name,"?"),r.a.createElement(I.a,{item:!0},"(All references to it will be left alone and may not work correctly)"),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}return r.a.createElement(pe.a,{to:"/"})}}]),t}(n.Component),Ot=Object(m.b)((function(e){var t=e.app.selectedThing;return{selectedPage:e.app.selectedPage,selectedThing:t,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,things:e.app.things,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},updateSelectedThing:function(t){return e(C(t))},addThing:function(t){return e(k(t))},updateThing:function(t){return e(A(t))},setThings:function(t){return e(j(t))}}}))(Nt);function Wt(e){var t=Object(n.useState)(e.attribute.Value),a=Object(st.a)(t,2),i=a[0],s=a[1],l=""===e.attribute.Type?"Text":e.attribute.Type,o=[],c=[];if("List"===l&&"Options"===e.attribute.ListType)e.attribute.Options.forEach((function(e){o.push({Name:e})})),e.attribute.ListValues.forEach((function(e){c.push({Name:e})}));else if("List"===l&&"Type"===e.attribute.ListType){var u=e.types.filter((function(t){return t._id===e.attribute.Type2}))[0];o.push({Name:"+ Create New ".concat(u.Name),_id:"new"}),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.Type2)})).forEach((function(e){o.push({Name:e.Name,_id:e._id})})),o.filter((function(t){return e.attribute.ListValues.includes(t._id)})).forEach((function(e){c.push(e)}))}return r.a.createElement(I.a,{item:!0},"Text"===l?r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"Name"},e.attribute.Name),r.a.createElement(Ee.a,{id:"Name",name:"Name",type:"text",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,Name:e.attribute.Name,Type:e.attribute.Type,Options:e.attribute.Options,Type2:e.attribute.Type2,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},labelWidth:9*e.attribute.Name.length,fullWidth:!0}),r.a.createElement(We.a,null,e.message)):"Number"===l?r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"Name"},e.attribute.Name),r.a.createElement(Ee.a,{id:"Name",name:"Name",type:"number",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,Name:e.attribute.Name,Type:e.attribute.Type,Options:e.attribute.Options,Type2:e.attribute.Type2,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},labelWidth:9*e.attribute.Name.length,fullWidth:!0}),r.a.createElement(We.a,null,e.message)):"True/False"===l?"T/F":"Options"===l?r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"options-select",id:"options-select-label"},e.attribute.Name),r.a.createElement(ct.a,{labelId:"options-select-label",id:"options-select",value:i,onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,Name:e.attribute.Name,Type:e.attribute.Type,Options:e.attribute.Options,Type2:e.attribute.Type2,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},fullWidth:!0,labelWidth:9*e.attribute.Name.length},e.attribute.Options.map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e},e)})))):"Type"===l?r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"type-select",id:"type-select-label"},e.attribute.Name),r.a.createElement(ct.a,{labelId:"type-select-label",id:"type-select",value:i,onChange:function(t){!function(e,t,a){if("new"===e.target.value){t.onNewThing((function(e){a(e._id)}),t.types.filter((function(e){return e._id===t.attribute.Type2}))[0])}else a(e.target.value)}(t,e,s)},onBlur:function(t){var a={index:e.attribute.index,Name:e.attribute.Name,Type:e.attribute.Type,Options:e.attribute.Options,Type2:e.attribute.Type2,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},fullWidth:!0,labelWidth:9*e.attribute.Name.length},r.a.createElement(ut.a,{value:"new"},"+ Create New ",e.types.filter((function(t){return t._id===e.attribute.Type2}))[0].Name),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.Type2)})).map((function(e,t){return r.a.createElement(ut.a,{key:t,value:e._id},e.Name)})))):"List"===l?r.a.createElement("span",null,"Text"===e.attribute.ListType?r.a.createElement(pt.a,{placeholder:e.attribute.Name,variant:"outlined",defaultValue:e.attribute.ListValues,onChange:function(t){return function(e,t){var a=t.attribute;a.ListValues=e,t.onChange(a)}(t,e)}}):"Options"===e.attribute.ListType?r.a.createElement(vt.Multiselect,{placeholder:e.attribute.Name,options:o,selectedValues:c,onSelect:function(t,a){!function(e,t){var a=t.attribute;a.ListValues.push(e.Name),t.onChange(a)}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.attribute;a.ListValues=[],e.forEach((function(e){a.ListValues.push(e.Name)})),t.onChange(a)}(t,e)},displayValue:"Name"}):"Type"===e.attribute.ListType?r.a.createElement(vt.Multiselect,{placeholder:e.attribute.Name,options:o,selectedValues:c,onSelect:function(t,a){!function(e,t){if("new"===e._id){t.onNewThing((function(e){var a=t.attribute;a.ListValues.push(e._id),t.onChange(a)}),t.types.filter((function(e){return e._id===t.attribute.Type2}))[0])}else{var a=t.attribute;a.ListValues.push(e._id),t.onChange(a)}}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.attribute;a.ListValues=[],e.forEach((function(e){a.ListValues.push(e._id)})),t.onChange(a)}(t,e)},displayValue:"Name"}):""):"")}var St=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).newAttribute=function(){var e=a.props.selectedThing;e.AttributesArr.push({index:e.AttributesArr.length,Name:"",Type:"Text",Options:[],Type2:"",ListType:"",FromTypes:[],Value:"",ListValues:[]}),a.props.updateSelectedThing(e)},a.changeAttribute=function(e){var t=a.props.selectedThing;t.AttributesArr[e.index]={index:e.index,Name:e.Name,Type:e.Type,Options:e.Options,Type2:e.Type2,ListType:e.ListType,FromTypes:e.FromTypes,Value:e.Value,ListValues:e.ListValues},a.props.updateSelectedThing(t)},a.blurAttribute=function(e){},a.deleteAttribute=function(e){var t=a.props.selectedThing;t.AttributesArr.splice(e.index),a.props.updateSelectedThing(t)},a.optionsChange=function(e,t){},a.addNewThing=function(e,t){a.setState({modalOpen:!0,modalSubmit:e,newThingType:t})},a.getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},a.handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;void 0!==r[t]&&r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.validateField=function(e){var t=null,n=!0,r="";switch(e){case"Name":(n=null!==(t=a.state[e]).match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(n=!1,r="Thing Name is too short"):(n=0===a.props.things.filter((function(e){return e.Name===t&&e._id!==a.state._id})).length)||(r="This Thing Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Thing Names"}return{valid:n,message:r}},a.validateForm=function(e){var t=a.validateField("Name"),n=t.valid,r=a.state.fieldValidation;r.Name=t,a.setState({formValid:n,fieldValidation:r},e)},a.saveNewThing=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e=a.props.types.filter((function(e){return e._id===a.state.newThingType._id||a.state.newThingType.SuperIDs.includes(e._id)})),t=e.map((function(e){return e._id})),n={_id:a.state._id,Name:a.state.Name,Description:"",TypeIDs:t,AttributesArr:[],WorldID:a.props.selectedWorldID};a.api.createThing(n).then((function(t){void 0!==t.thingID?(n._id=t.thingID,n.Types=e,a.props.addThing(n),a.state.modalSubmit(n),a.setState({waiting:!1,modalOpen:!1})):void 0!==t.message&&a.setState({waiting:!1,message:t.message})})).catch((function(e){return console.log(e)}))},a.state={modalOpen:!1,Name:"",fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",waiting:!1,newThingType:null},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Attributes"),null===this.props.selectedThing||void 0===this.props.selectedThing?"":this.props.selectedThing.AttributesArr.map((function(t,a){return r.a.createElement(Wt,{key:a,thingID:e.props.selectedThing._id,attribute:t,onChange:e.changeAttribute,onDelete:e.deleteAttribute,onBlur:e.blurAttribute,things:e.props.things,types:e.props.types,onNewThing:e.addNewThing})})),r.a.createElement(Ze.a,{"aria-labelledby":"new-thing-modal","aria-describedby":"new-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(I.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},"Just give the new ",null===this.state.newThingType?"":this.state.newThingType.Name," a name."),r.a.createElement(I.a,{item:!0},"(You can do the rest later.)"),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"name"},"Name"),r.a.createElement(Ee.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(I.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.saveNewThing},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(H.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}}]),t}(n.Component),_t=Object(m.b)((function(e){return{selectedThing:e.app.selectedThing,things:e.app.things,types:e.app.types,selectedWorldID:e.app.selectedWorldID}}),(function(e){return{updateSelectedThing:function(t){return e(C(t))},addThing:function(t){return e(k(t))}}}))(St);var jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).createThingFromType=function(e){var t=[];t.push(e),e.Supers.forEach((function(e){if(0===t.filter((function(t){return t._id===e._id})).length){var n=a.props.types.filter((function(t){return t._id===e._id}));n.length>0&&t.push(n[0])}}));for(var n={_id:null,Name:"",Description:"",Types:[],AttributesArr:[]},r=[],i=function(t){var a=Object(F.a)({},e.AttributesArr[t]);a.FromTypes=Object(nt.a)(a.FromSupers),delete a.FromSupers,a.FromTypes.push(e._id);var n=r.filter((function(e){return e.Name===a.Name}));if(0===n.length)a.Value="",a.ListValues=[],r.push(a);else{for(var i=Object(nt.a)(n[0].FromTypes),s=0;s<a.FromTypes.length;s++){var l=a.FromTypes[s];i.includes(l)||i.push(l)}n[0].FromTypes=i}},s=0;s<e.AttributesArr.length;s++)i(s);a.setState({Types:t}),n.AttributesArr=r,a.props.updateSelectedThing(n)},a.handleUserInput=function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;a.setState(Object(fe.a)({},t,n))},a.inputBlur=function(e){var t=e.target.name,n=a.validateField(t),r=a.state.fieldValidation;void 0!==r[t]&&r[t].valid!==n.valid&&(r[t].valid=n.valid,r[t].message=n.message,a.setState({fieldValidation:r}))},a.validateField=function(e){var t=null,n=!0,r="";switch(e){case"Name":t=a.state[e],(n=null!==t.match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(n=!1,r="Thing Name is too short"):(n=0===a.props.things.filter((function(e){return e.Name===t&&e._id!==a.state._id})).length)||(r="This Thing Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Thing Names";break;case"AttributesArr":n=!0,t=a.props.selectedThing[e];for(var i=function(e){if(t.filter((function(a){return a.Name===t[e].Name})).length>1)return n=!1,"break"},s=0;s<t.length;s++){if("break"===i(s))break}r=n?"":"Attribute Names must be unique"}return{valid:n,message:r}},a.validateForm=function(e){var t=a.validateField("Name"),n=a.validateField("AttributesArr"),r=t.valid&&n.valid,i=a.state.fieldValidation;i.Name=t,i.AttributesArr=n,a.setState({formValid:r,fieldValidation:i},e)},a.onSubmit=function(){a.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},a.submitThroughAPI=function(){var e=a.state.Types.map((function(e){return e._id})),t={_id:a.state._id,Name:a.state.Name,Description:a.state.Description,TypeIDs:e,AttributesArr:a.props.selectedThing.AttributesArr,WorldID:a.props.selectedWorld._id,ReferenceIDs:[]};a.props.selectedThing.AttributesArr.filter((function(e){return"Type"===e.Type})).forEach((function(e){t.ReferenceIDs.includes(e.Value)||t.ReferenceIDs.push(e.Type2)})),a.props.selectedThing.AttributesArr.filter((function(e){return"List"===e.Type&&"Type"===e.ListType})).forEach((function(e){e.ListValues.forEach((function(e){t.ReferenceIDs.includes(e)||t.ReferenceIDs.push(e)}))})),null===t._id?a.api.createThing(t).then((function(e){t._id=e.thingID,t.Types=a.state.Types,a.props.addThing(t),a.setState({waiting:!1,redirectTo:"/world/details/".concat(a.props.selectedWorld._id)})})).catch((function(e){return console.log(e)})):a.api.updateThing(t).then((function(e){t.Types=a.state.Types,a.props.updateThing(t),a.setState({waiting:!1,redirectTo:"/world/details/".concat(a.props.selectedWorld._id)})})).catch((function(e){return console.log(e)}))},a.typesChange=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i),n=n.concat(i.Types)}a.setState({Types:n})},a.addType=function(e,t){t.Supers.forEach((function(t){if(0===e.filter((function(e){return e._id===t._id})).length){var n=a.props.types.filter((function(e){return e._id===t._id}));n.length>0&&e.push(n[0])}}));for(var n=a.props.selectedThing,r=Object(nt.a)(n.AttributesArr),i=function(e){var a=t.AttributesArr[e];void 0===a.FromTypes&&(a.FromTypes=[]),a.FromTypes.push(t._id);var n=r.filter((function(e){return e.Name===a.Name}));if(0===n.length)a.Value="",a.ListValues=[],r.push(a);else{for(var i=Object(nt.a)(n[0].FromTypes),s=0;s<a.FromTypes.length;s++){var l=a.FromTypes[s];i.includes(l)||i.push(l)}n[0].FromTypes=i}},s=0;s<t.AttributesArr.length;s++)i(s);a.setState({Types:e}),n.AttributesArr=r,a.props.updateSelectedThing(n)},a.removeType=function(e,t){var n=[],r=[];a.state.Types.forEach((function(e){e._id===t._id||e.SuperIDs.includes(t._id)?r.push(e._id):n.push(e)}));for(var i=a.props.selectedThing,s=Object(nt.a)(i.AttributesArr),l=0;l<s.length;l++){var o=s[l];void 0===o.FromTypes&&(o.FromTypes=[]);for(var c=0;c<o.FromTypes.length;){var u=o.FromTypes[c];r.includes(u)?o.FromTypes.splice(c,1):c++}}a.setState({Types:n}),i.AttributesArr=s,a.props.updateSelectedThing(i)},a.state={_id:null,Name:"",Description:"",Types:[],Attributes:[],fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1},a.api=J.getInstance(),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=e.props.match.params.id;if(void 0!==t)if(t.includes("type_id_")){var a=t.substring(8),n=e.props.types.filter((function(e){return e._id===a}));n.length>0?(n=n[0],e.createThingFromType(n)):e.setState({message:"Invalid Type"})}else e.api.getThing(t).then((function(a){console.log(a);var n=e.props.things.filter((function(e){return a._id!==e._id})),r=[];a.TypeIDs.forEach((function(t){r=r.concat(e.props.types.filter((function(e){return e._id===t})))}));var i=Object(nt.a)(a.AttributesArr);r.forEach((function(e){for(var t=function(t){var a=Object(F.a)({},e.AttributesArr[t]);a.FromTypes=Object(nt.a)(a.FromSupers),delete a.FromSupers,a.FromTypes.push(e._id);var n=i.filter((function(e){return e.Name===a.Name}));if(0===n.length)a.Value="",a.ListValues=[],i.push(a);else{for(var r=Object(nt.a)(n[0].FromTypes),s=0;s<a.FromTypes.length;s++){var l=a.FromTypes[s];r.includes(l)||r.push(l)}n[0].FromTypes=r}},a=0;a<e.AttributesArr.length;a++)t(a)})),a.AttributesArr=i,e.setState({Name:a.Name,Description:a.Description,_id:t,Things:n,Types:r}),e.props.updateSelectedThing(a)}));else e.props.updateSelectedThing({_id:null,Name:"",Description:"",Types:[],AttributesArr:[]})}),500)}},{key:"renderHeader",value:function(){var e="Thing";return this.state.Types.forEach((function(t){t.Major&&("Thing"===e?e=t.Name:e+="/"+t.Name)})),r.a.createElement("h2",null,null===this.state._id?"Create New ".concat(e):"Edit ".concat(e))}},{key:"render",value:function(){var e=this;return null!==this.state.redirectTo?r.a.createElement(pe.a,{to:this.state.redirectTo}):null===this.props.user||null!==this.props.selectedWorld&&this.props.selectedWorld.Owner!==this.props.user._id?r.a.createElement(pe.a,{to:"/"}):r.a.createElement(I.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(I.a,{item:!0},this.renderHeader()),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"name"},"Name"),r.a.createElement(Ee.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(We.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(I.a,{item:!0},r.a.createElement(ye.a,{variant:"outlined",fullWidth:!0},r.a.createElement(be.a,{htmlFor:"description"},"Description"),r.a.createElement(Ee.a,{id:"description",name:"Description",type:"text",value:this.state.Description,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:82,fullWidth:!0}))),r.a.createElement(I.a,{item:!0},r.a.createElement(vt.Multiselect,{placeholder:"Types",options:this.props.types,selectedValues:this.state.Types,onSelect:this.addType,onRemove:this.removeType,displayValue:"Name"})),r.a.createElement(I.a,{item:!0},r.a.createElement(_t,null),r.a.createElement(We.a,null,this.state.fieldValidation.AttributesArr.message)),r.a.createElement(I.a,{item:!0},r.a.createElement("div",{className:"float-right"},r.a.createElement(H.a,{variant:"contained",color:"primary",className:"w200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit"),r.a.createElement(H.a,{variant:"contained",style:{marginLeft:"4px"},disabled:this.state.waiting,onClick:function(t){null===e.props.selectedThing._id?e.setState({redirectTo:"/world/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/thing/details/".concat(e.props.selectedThing._id)})},type:"button"},"Cancel"))),r.a.createElement(I.a,{item:!0},this.state.message),r.a.createElement(I.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))))}}]),t}(n.Component),kt=Object(m.b)((function(e){return{selectedPage:e.app.selectedPage,selectedThing:e.app.selectedThing,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,things:e.app.things,types:e.app.types,user:e.app.user}}),(function(e){return{selectPage:function(t){return e(w(t))},updateSelectedThing:function(t){return e(C(t))},addThing:function(t){return e(k(t))},updateThing:function(t){return e(A(t))}}}))(jt),xt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={version:"0"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(I.a,{item:!0,xs:12,className:"h-100 margined"},r.a.createElement(pe.d,null,r.a.createElement(pe.b,{exact:!0,path:"/",component:X}),r.a.createElement(pe.b,{exact:!0,path:"/home",component:X}),r.a.createElement(pe.b,{exact:!0,path:"/User/Login",component:xe}),r.a.createElement(pe.b,{exact:!0,path:"/profile",component:Ae}),r.a.createElement(pe.b,{exact:!0,path:"/forums",component:he}),r.a.createElement(pe.b,{exact:!0,path:"/world/details/:id",component:Qe}),r.a.createElement(pe.b,{exact:!0,path:"/world/create",component:et}),r.a.createElement(pe.b,{exact:!0,path:"/world/edit/:id",component:et}),r.a.createElement(pe.b,{exact:!0,path:"/type/create",component:wt}),r.a.createElement(pe.b,{exact:!0,path:"/type/details/:id",component:at}),r.a.createElement(pe.b,{exact:!0,path:"/type/edit/:id",component:wt}),r.a.createElement(pe.b,{exact:!0,path:"/thing/create",component:kt}),r.a.createElement(pe.b,{exact:!0,path:"/thing/create/:id",component:kt}),r.a.createElement(pe.b,{exact:!0,path:"/thing/details/:id",component:Ot}),r.a.createElement(pe.b,{exact:!0,path:"/thing/edit/:id",component:kt})))}}]),t}(n.Component),Dt=Object(m.b)()(xt),At=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={version:"0",width:0,marginLeft:220},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"updateDimensions",value:function(){var e=window.innerWidth;e>=600?(e-=200,this.setState({width:e,marginLeft:220,innerWidth:window.innerWidth})):this.setState({width:e,marginLeft:0,innerWidth:window.innerWidth})}},{key:"render",value:function(){return r.a.createElement(p.a,null,this.props.menuOpen?r.a.createElement(P.a,{display:{xs:"none",sm:"inline"},className:"Sidebar"},r.a.createElement(de,{className:"",logoText:"Author's Notebook"})):"",r.a.createElement(I.a,{container:!0},r.a.createElement(I.a,{item:!0,xs:12,style:{marginLeft:"".concat(this.props.menuOpen?this.state.marginLeft:0,"px"),width:"".concat(this.props.menuOpen?this.state.width:this.state.innerWidth,"px")}},r.a.createElement(se,null)),r.a.createElement(I.a,{item:!0,xs:12,style:{marginLeft:"".concat(this.props.menuOpen?this.state.marginLeft+10:10,"px"),width:"".concat(this.props.menuOpen?this.state.width-20:this.state.innerWidth-20,"px"),marginRight:"10px",marginTop:"10px"}},r.a.createElement(Dt,null))))}}]),t}(n.Component),Ct=Object(m.b)((function(e){return{menuOpen:e.app.menuOpen}}))(At);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=a(85),Pt=a(132),Ft={selectedPage:"Test",articles:[],user:null,loginError:"",worlds:[],publicWorlds:[],selectedWorld:null,selectedWorldID:null,types:[],things:[],selectedType:null,attributesArr:[],selectedThing:null,loadIt:!0,menuOpen:!0};var Vt={app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;if("LOAD_FROM_STORAGE"===t.type){var a=JSON.parse(sessionStorage.getItem("user")),n=JSON.parse(sessionStorage.getItem("worlds")),r=JSON.parse(sessionStorage.getItem("publicWorlds")),i=JSON.parse(sessionStorage.getItem("selectedWorld")),s=sessionStorage.getItem("selectedWorldID"),l=JSON.parse(sessionStorage.getItem("types")),o=JSON.parse(sessionStorage.getItem("things"));return Object.assign({},e,{user:a,worlds:null===n?[]:n,publicWorlds:null===r?[]:r,selectedWorld:i,selectedWorldID:s,types:null===l?[]:l,things:null===o?[]:o})}if("SELECT_PAGE"===t.type)return Object.assign({},e,{selectedPage:t.payload});if("ADD_ARTICLE"===t.type)return Object.assign({},e,{articles:e.articles.concat(t.payload)});if("LOGIN"===t.type)return sessionStorage.setItem("user",JSON.stringify(t.payload)),Object.assign({},e,{user:t.payload});if("LOG_OUT"===t.type)return sessionStorage.removeItem("user"),Object.assign({},e,{user:null});if("SET_WORLDS"===t.type){if(void 0===t.payload.message){if(sessionStorage.setItem("worlds",JSON.stringify(t.payload)),null!==e.selectedWorldID&&null===e.selectedWorld){var c=t.payload.filter((function(t){return t._id===e.selectedWorldID}));if(c.length>0){var u=c[0];return sessionStorage.setItem("selectedWorld",JSON.stringify(u)),Object.assign({},e,{worlds:t.payload,selectedWorld:u})}return Object.assign({},e,{worlds:t.payload})}return Object.assign({},e,{worlds:t.payload})}return Object.assign({},e,{})}if("SET_PUBLIC_WORLDS"===t.type){if(void 0===t.payload.message){if(sessionStorage.setItem("publicWorlds",JSON.stringify(t.payload)),null!==e.selectedWorldID&&null===e.selectedWorld){var d=t.payload.filter((function(t){return t._id===e.selectedWorldID}));if(d.length>0){var p=d[0];return sessionStorage.setItem("selectedWorld",JSON.stringify(p)),Object.assign({},e,{publicWorlds:t.payload,selectedWorld:p})}return Object.assign({},e,{publicWorlds:t.payload})}return Object.assign({},e,{publicWorlds:t.payload})}return Object.assign({},e,{})}if("ADD_WORLD"===t.type){if(t.payload.Public){var m=e.worlds.concat(t.payload),h=e.publicWorlds.concat(t.payload);return sessionStorage.setItem("worlds",JSON.stringify(m)),sessionStorage.setItem("publicWorlds",JSON.stringify(h)),Object.assign({},e,{worlds:m,publicWorlds:h})}var f=e.worlds.concat(t.payload);return sessionStorage.setItem("worlds",JSON.stringify(f)),Object.assign({},e,{worlds:e.worlds.concat(t.payload)})}if("UPDATE_WORLD"===t.type){var g=Object(nt.a)(e.worlds),y=Object(nt.a)(e.publicWorlds),E=g.filter((function(e){return e._id===t.payload._id}))[0];E.Name=t.payload.Name;var b=E.Public;if(E.Public=t.payload.Public,sessionStorage.setItem("worlds",JSON.stringify(g)),E.Public){if(b){var v=y.filter((function(e){return e._id===E._id}))[0];v.Name=E.Name}else y=y.concat(E);return sessionStorage.setItem("publicWorlds",JSON.stringify(y)),Object.assign({},e,{worlds:g,publicWorlds:y})}return b?(y=y.filter((function(e){return e._id!==E._id})),sessionStorage.setItem("publicWorlds",JSON.stringify(y)),Object.assign({},e,{worlds:g,publicWorlds:y})):Object.assign({},e,{worlds:g})}if("SELECT_WORLD"===t.type){var T=e.worlds.filter((function(e){return e._id===t.payload}));return 0===T.length&&(T=e.publicWorlds.filter((function(e){return e._id===t.payload}))),T.length>0?(sessionStorage.setItem("selectedWorldID",t.payload),sessionStorage.setItem("selectedWorld",JSON.stringify(T[0])),Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:T[0]})):(sessionStorage.setItem("selectedWorldID",t.payload),sessionStorage.removeItem("selectedWorld"),Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:null}))}if("SET_TYPES"===t.type)return sessionStorage.setItem("types",JSON.stringify(t.payload)),Object.assign({},e,{types:t.payload});if("ADD_TYPE"===t.type){var w=e.types.concat(t.payload);return sessionStorage.setItem("types",JSON.stringify(w)),Object.assign({},e,{types:w})}if("SET_THINGS"===t.type)return sessionStorage.setItem("things",JSON.stringify(t.payload)),Object.assign({},e,{things:t.payload});if("ADD_THING"===t.type){var N=e.things.concat(t.payload);return sessionStorage.setItem("things",JSON.stringify(N)),Object.assign({},e,{things:N})}if("UPDATE_SELECTED_TYPE"===t.type){var O=Object(F.a)({},t.payload,{changedAt:Date.now()});return Object.assign({},e,{selectedType:O})}if("UPDATE_TYPE"===t.type){var W=Object(nt.a)(e.types),S=W.filter((function(e){return e._id===t.payload._id}))[0];return S.Name=t.payload.Name,S.Description=t.payload.Description,S.Supers=t.payload.Supers,S.Attributes=t.payload.Attributes,sessionStorage.setItem("types",JSON.stringify(W)),Object.assign({},e,{types:W})}if("UPDATE_ATTRIBUTES_ARR"===t.type)return Object.assign({},e,{attributesArr:t.payload});if("UPDATE_SELECTED_THING"===t.type){var _=Object(F.a)({},t.payload,{changedAt:Date.now()});return Object.assign({},e,{selectedThing:_})}if("UPDATE_THING"===t.type){var j=Object(nt.a)(e.things),k=j.filter((function(e){return e._id===t.payload._id}))[0];return k.Name=t.payload.Name,k.Description=t.payload.Description,k.Types=t.payload.Types,k.Attributes=t.payload.Attributes,sessionStorage.setItem("things",JSON.stringify(j)),Object.assign({},e,{things:j})}return"TOGGLE_MENU"===t.type?Object.assign({},e,{menuOpen:!e.menuOpen}):e},session:Pt.sessionReducer},Lt=Object(It.b)(Vt),Mt=Object(It.c)(Lt),Rt={refreshFromLocalStorage:!0,refreshOnCheckAuth:!0,redirectPath:"/home",driver:"COOKIES",validateSession:function(e){return!0}};Pt.sessionService.initSessionService(Mt,Rt).then((function(){return console.log("Redux React Session is ready and a session was refreshed from your storage")})).catch((function(){return console.log("Redux React Session is ready and there is no session in your storage")}));var Bt=Mt;s.a.render(r.a.createElement(m.a,{store:Bt},r.a.createElement(Ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[183,1,2]]]);
//# sourceMappingURL=main.9b25fbff.chunk.js.map