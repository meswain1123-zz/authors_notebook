{"version":3,"sources":["ANB/assets/img/under_construction.png","ANB/assets/img/under_construction_white.png","VTT/assets/img/Fog.jpg","ANB/assets/img/ANB.png","VTT/assets/img/maps/basic/Basement-Study.jpg","VTT/assets/img/maps/basic/Castle-Wall.jpg","VTT/assets/img/maps/basic/Cave-Lair.jpg","VTT/assets/img/maps/basic/Crossroads.jpg","VTT/assets/img/maps/basic/Farmstead.jpg","VTT/assets/img/maps/basic/Forest-Lair.jpg","VTT/assets/img/maps/basic/Monster-Lair.jpg","VTT/assets/img/maps/basic/Snow-Village.jpg","VTT/assets/img/maps/basic/Swamp-Lair.jpg","VTT/assets/img/maps/basic/Tavern.jpg","VTT/assets/img/maps/basic/Underground-Complex.jpg","VTT/assets/img/maps/basic/Urban-Lair.jpg","VTT/assets/img/maps/basic/Wagon-Trail-and-Shrine.jpg","VTT/assets/img/maps/basic/Waterfall-Cavern.jpg","VTT/assets/img/maps/drawn/Abandoned Warehouse.png","VTT/assets/img/maps/drawn/DaggerAlley.png","VTT/assets/img/maps/drawn/UnderDaggerAlley.png","VTT/assets/img/maps/drawn/TrollSkullAlleyBasement.png","VTT/assets/img/maps/drawn/TrollSkullAlleyHouse.png","VTT/assets/img/maps/drawn/WeddingRing.png","VTT/assets/img/maps/phandelver/cragmaw castle.jpg","VTT/assets/img/maps/phandelver/cragmaw hideout.jpg","VTT/assets/img/maps/phandelver/phandalin.jpg","VTT/assets/img/maps/phandelver/redbrand hideout.jpg","VTT/assets/img/maps/phandelver/ruins of thundertree.jpg","VTT/assets/img/maps/phandelver/sword coast.jpg","VTT/assets/img/maps/phandelver/wave echo cave.jpg","VTT/assets/img/maps/waterdeep/Waterdeep.jpg","VTT/assets/img/maps/waterdeep/waterdeep_with_wards.jpg","VTT/assets/img/maps/city_buildings/restaurant.jpg","VTT/assets/img/maps/city_buildings/CrimsonBrush.png","VTT/assets/img/maps/graveyards/GraveyardPath.png","VTT/assets/img/maps/graveyards/GraveyardPumpkinPatch.jpg","VTT/assets/img/maps/graveyards/MausoleumCrypts.jpg","VTT/assets/img/tokens/characters/Bald.png","VTT/assets/img/tokens/characters/Bard.png","VTT/assets/img/tokens/characters/BlondeHair.png","VTT/assets/img/tokens/characters/BlondeWoman.png","VTT/assets/img/tokens/characters/BlueSkin.png","VTT/assets/img/tokens/characters/BlueSkin2.png","VTT/assets/img/tokens/characters/DarkSkin.png","VTT/assets/img/tokens/characters/DarkSkinF.png","VTT/assets/img/tokens/characters/Dragonborn.png","VTT/assets/img/tokens/characters/DragonbornFighter.png","VTT/assets/img/tokens/characters/DwarfMale.png","VTT/assets/img/tokens/characters/ElvenFemale.png","VTT/assets/img/tokens/characters/ElvenFighter.png","VTT/assets/img/tokens/characters/Eyebrows.png","VTT/assets/img/tokens/characters/Eyebrows2.png","VTT/assets/img/tokens/characters/Fedora.png","VTT/assets/img/tokens/characters/GnomeMale.png","VTT/assets/img/tokens/characters/GoliathBarb.png","VTT/assets/img/tokens/characters/GreyHair.png","VTT/assets/img/tokens/characters/HalflingMale.png","VTT/assets/img/tokens/characters/Hood.png","VTT/assets/img/tokens/characters/Hood2.png","VTT/assets/img/tokens/characters/Human.png","VTT/assets/img/tokens/characters/HumanFemale.png","VTT/assets/img/tokens/characters/HumanFemale2.png","VTT/assets/img/tokens/characters/HumanFighterF.png","VTT/assets/img/tokens/characters/HumanFighterM.png","VTT/assets/img/tokens/characters/HumanMale.png","VTT/assets/img/tokens/characters/HumanMale2.png","VTT/assets/img/tokens/characters/idk.png","VTT/assets/img/tokens/characters/Knight.png","VTT/assets/img/tokens/characters/OldWoman.png","VTT/assets/img/tokens/characters/OldWoman2.png","VTT/assets/img/tokens/characters/RedHair.png","VTT/assets/img/tokens/characters/RedSkin.png","VTT/assets/img/tokens/characters/Samurai.png","VTT/assets/img/tokens/characters/Scarf.png","VTT/assets/img/tokens/characters/TieflingFemale.png","VTT/assets/img/tokens/characters/Wizard.png","VTT/assets/img/tokens/animals/Rat.png","VTT/assets/img/tokens/monsters/Wererat.png","VTT/assets/img/tokens/monsters/Werewolf.png","VTT/assets/img/tokens/monsters/mimics/Rug.png","VTT/assets/img/tokens/items/PitTrapWSpikes.png","VTT/assets/img/tokens/items/SewerGrate.png","VTT/assets/img/tokens/characters/Air Genasi Ranger F.png","VTT/assets/img/tokens/characters/Air Genasi Ranger M.png","VTT/assets/img/tokens/characters/bugbear.png","VTT/assets/img/tokens/characters/drow archer.png","VTT/assets/img/tokens/characters/drow fighter.png","VTT/assets/img/tokens/characters/drow fighter 2.png","VTT/assets/img/tokens/characters/drow rogue.png","VTT/assets/img/tokens/characters/drow witch.png","VTT/assets/img/tokens/characters/goblin archer.png","VTT/assets/img/tokens/characters/Goblin Rogue.png","VTT/assets/img/tokens/characters/goblin spearman.png","VTT/assets/img/tokens/characters/hobgoblin.png","VTT/assets/img/tokens/characters/Human Hexblade.png","VTT/assets/img/tokens/characters/Tabaxi Monk.png","VTT/assets/img/tokens/characters/Tiefling Cleric.png","VTT/assets/img/tokens/characters/Tiefling Paladin.png","VTT/assets/img/tokens/characters/Tiefling Swordsman.png","VTT/assets/img/tokens/characters/White Dragonborn Mage.png","VTT/assets/img/tokens/animals/snow leopard.png","VTT/assets/img/tokens/animals/spider.png","VTT/assets/img/tokens/monsters/ash-zombie.png","VTT/assets/img/tokens/monsters/beholder.png","VTT/assets/img/tokens/monsters/beholder 2.png","VTT/assets/img/tokens/monsters/cube.png","VTT/assets/img/tokens/monsters/drider.png","VTT/assets/img/tokens/monsters/flameskull.png","VTT/assets/img/tokens/monsters/skeleton.png","VTT/assets/img/tokens/monsters/venomfang.png","VTT/assets/img/tokens/monsters/zombie.png","VTT/assets/img/tokens/monsters/twig blight.png","VTT/assets/img/tokens/items/Web 1 3x3 A.png","VTT/assets/img/tokens/monsters/Vampire.png","VTT/assets/img/tokens/monsters/Wererat Knife.png","VTT/assets/img/tokens/monsters/Wererat Mage.png","VTT/assets/img/tokens/monsters/Wererat Rogue.png","VTT/assets/img/tokens/monsters/Wererat Rogue 2.png","VTT/assets/img/tokens/monsters/Werewolf 2.png","VTT/assets/img/tokens/monsters/Werewolf 3.png","VTT/assets/img/tokens/monsters/Werewolf 4.png","VTT/assets/img/tokens/items/Clue1.png","VTT/assets/img/tokens/items/Clue2.png","VTT/assets/img/tokens/items/Clue3.png","VTT/assets/img/tokens/items/Glyph.png","VTT/assets/img/tokens/items/Map.png","VTT/assets/img/tokens/characters/DuergarMale.png","VTT/assets/img/tokens/characters/Birdman.png","VTT/assets/img/tokens/items/Daggers.png","VTT/assets/img/tokens/items/TrollSkull.png","VTT/assets/img/tokens/items/Crimson Brush.png","VTT/assets/img/tokens/monsters/mimics/Book.png","VTT/assets/img/tokens/monsters/mimics/Chair.png","VTT/assets/img/tokens/monsters/mimics/Chest.png","VTT/assets/img/tokens/monsters/mimics/Pumpkin.png","VTT/assets/img/tokens/monsters/mimics/Wall.png","VTT/assets/img/tokens/monsters/mimics/Cake.png","VTT/assets/img/tokens/monsters/mimics/Jack.png","VTT/assets/img/tokens/monsters/mimics/Marty.png","VTT/assets/img/tokens/monsters/mimics/Harvey.png","VTT/assets/img/tokens/items/rug.png","VTT/assets/img/tokens/monsters/Tabaxi Mummy.png","VTT/assets/img/tokens/characters/Gravedigger.png","VTT/assets/img/tokens/animals/Dog.png","VTT/assets/img/tokens/animals/Beep Beep.png","VTT/assets/img/tokens/animals/bird.png","VTT/assets/img/tokens/animals/Ram.png","VTT/assets/img/tokens/animals/Sheep.png","VTT/assets/img/tokens/animals/Sheep2.png","VTT/assets/img/tokens/monsters/ghosts/Wizard.png","VTT/assets/img/tokens/monsters/ghosts/Blue Woman.png","VTT/assets/img/tokens/monsters/ghosts/White Woman.png","VTT/assets/img/tokens/monsters/ghosts/Heart Woman.png","VTT/assets/img/tokens/monsters/ghosts/Lizardfolk.png","VTT/assets/img/tokens/monsters/ghosts/Screaming.png","VTT/assets/img/tokens/monsters/ghosts/Skeletal.png","VTT/assets/img/tokens/monsters/ghosts/Specter.png","VTT/assets/img/tokens/monsters/ghosts/Wraith.png","VTT/assets/img/tokens/monsters/ghosts/Wraith2.png","ANB/redux/actions/index.js","ANB/redux/constants/actionTypes.js","ANB/smartAPI.js","ANB/components/Displays/MediaPlayer.js","ANB/components/Displays/MediaCard.js","ANB/views/Home.js","ANB/components/Inputs/ReactQuill.js","ANB/components/Inputs/AutocompleteTextField.js","ANB/components/Inputs/TextBox.js","ANB/components/Inputs/CommentControl.js","ANB/components/Inputs/CommentsControl.js","ANB/views/Discussion/GeneralDiscussion.js","ANB/components/Navigation/routes.js","ANB/components/Navigation/MobileMenu.js","ANB/components/Navigation/UserMenu.js","ANB/components/Navigation/Navbar.js","ANB/components/Navigation/Sidebar.js","ANB/views/User/Profile.js","ANB/views/World/Index.js","ANB/components/Displays/TypeSummary.js","ANB/components/Displays/ThingSummary.js","ANB/components/Modals/TemplateModal.js","ANB/components/Displays/WorldMap.js","ANB/components/WorldTemplateControls/ImportTemplatesControl.js","ANB/components/WorldTemplateControls/ImportingTemplatesControl.js","ANB/views/World/Details.js","ANB/views/World/Edit.js","ANB/views/User/LoginControl.js","ANB/views/World/Collaborate.js","ANB/views/World/EditCollaborators.js","ANB/views/Type/Details.js","ANB/views/Type/AttributeControl.js","ANB/views/Type/AttributeDefaultControl.js","ANB/views/Type/AttributesControl.js","ANB/components/Modals/NewTypeModal.js","ANB/components/Modals/NewThingModal.js","ANB/views/Type/Edit.js","ANB/components/Displays/ThingTable.js","ANB/views/Thing/Details.js","ANB/views/Thing/AttributeControl.js","ANB/views/Thing/AttributesControl.js","ANB/views/Thing/Edit.js","ANB/views/User/ResetPassword.js","ANB/views/User/ConfirmEmail.js","ANB/views/MainPage.js","ANB/App.tsx","ANB/redux/reducers/index.js","ANB/redux/store/index.js","VTT/views/Home.js","VTT/models/Campaign.ts","VTT/models/Map.ts","VTT/models/Token.ts","VTT/models/FavoriteToken.ts","VTT/models/PlayToken.ts","VTT/models/Mask.ts","VTT/models/PlayMap.ts","VTT/models/Player.ts","VTT/smartAPI.js","VTT/components/CreateCampaign.tsx","VTT/components/LoadCampaign.tsx","VTT/components/CreatePlayMap.tsx","VTT/components/LoadPlayMap.tsx","VTT/components/my-react-pan-zoom.tsx","VTT/components/DisplayPlayMap.tsx","VTT/views/DMPage.tsx","VTT/views/PlayerPage.tsx","VTT/views/MainPage.tsx","VTT/App.tsx","VTT/redux/reducers/index.js","VTT/redux/store/index.js","VTT/redux/constants/actionTypes.js","serviceWorker.ts","index.tsx"],"names":["module","exports","logout","payload","type","setWorlds","setTemplates","setAllUsers","addAndSelectWorld","updateWorld","setPublicWorlds","selectWorld","setAttributes","setTypes","addType","setThings","addThing","updateType","updateSelectedType","updateThing","updateSelectedThing","toggleMenu","toggleLogin","notFromLogin","setFollowingWorlds","UnauthorizedError","message","this","name","prototype","Error","API","instance","getInstance","APIClass","logErrorReason","reason","console","log","Promise","reject","checkStatus","response","status","unauthorizedError","statusText","error","getVersion","a","real","fetchData","processResponse","version","getAllUsers","getAllUsersFromAPI","data","getSessionData","res","_id","OwnerID","Name","Public","login","user","stayLoggedIn","sessionObj","body","expiresAt","localStorage","setItem","JSON","stringify","postData","email","username","removeItem","register","confirmEmail","code","patchData","sendReset","checkResetPasswordCode","resetPassword","newPassword","emailTest","updateUser","retry","relogin","createTemplate","template","getTemplates","getTemplatesFromAPI","worldID","getWorlds","refresh","getPublicWorlds","publicWorlds","getWorldsForUser","userWorlds","templates","allUsers","getWorldsForUserFromAPI","getPublicWorldsFromAPI","getWorld","getAttributesForWorld","attributes","getTypesForWorld","types","getThingsForWorld","things","attributesByID","attributesByName","forEach","attribute","TypeIDs","t","Supers","SuperIDs","sID","concat","filter","t2","AttributesArr","Attributes","attr","attrID","undefined","push","index","length","trim","AttributeType","Options","DefinedType","ListType","defHash","Defaults","def","DefaultsHash","Types","tID","getWorldByTypeID","typeID","getWorldIDByTypeID","getWorldByThingID","thingID","getWorldIDByThingID","createWorld","world","deleteWorld","deleteData","generateCollabLink","addNewCollaborator","userID","emailCollaborator","deleteCollab","collabID","updateCollaboratorPermission","editPermission","checkCollabID","requestToCollaborate","declineCollabInvite","acceptCollabInvite","acceptCollabRequest","getAttributesForWorldFromAPI","getAttribute","Description","createAttribute","upsertAttributes","getTypesForWorldFromAPI","cleanEditDT","getType","createType","deleteType","getThingsForWorldFromAPI","list","EditDT","Date","parse","getThing","createThing","thing","deleteThing","getComments","objectType","objectID","addComment","comment","updateComment","getViews","tempViews","v","ViewDT","upsertView","view","path","options","fetch","mode","credentials","headers","Accept","then","catch","method","putData","sessionName","noExpiry","json","setHours","getHours","processResponseProgress","reader","getReader","receivedLength","chunks","result","read","done","value","chunksAll","Uint8Array","position","chunk","set","TextDecoder","decode","finalResult","sessionStr","getItem","MediaPlayer","props","url","width","useStyles","makeStyles","root","MediaCard","classes","Card","className","CardActionArea","CardContent","Typography","gutterBottom","variant","component","title","color","description","Page","state","redirectTo","fromLogin","to","Component","HomePage","connect","app","dispatch","ReactQuill","dirtyProps","cleanProps","generation","editor","editingArea","refInput","selection","lastDeltaChangeSet","regenerationSnapshot","unprivilegedEditor","onEditorChange","eventName","rangeOrDelta","oldRangeOrDelta","source","onEditorChangeText","innerHTML","onEditorChangeSelection","isControlled","defaultValue","React","createRef","Children","count","children","child","only","nextProps","nextState","validateProps","prevContents","getEditorContents","nextContents","isEqualValue","setEditorContents","readOnly","setEditorReadOnly","some","prop","isEqual","instantiateEditor","destroyEditor","prevProps","prevState","shouldComponentRegenerate","delta","getContents","getSelection","setState","setContents","postpone","setEditorSelection","createEditor","getEditingArea","getEditorConfig","unhookEditor","bounds","formats","modules","placeholder","scrollingContainer","tabIndex","theme","element","config","Quill","setEditorTabIndex","hookEditor","makeUnprivilegedEditor","on","off","ops","nextValue","isDelta","sel","getEditorSelection","clipboard","convert","range","getLength","Math","max","min","setSelection","scroll","domNode","disable","enable","e","getHTML","bind","getText","getBounds","ReactDOM","findDOMNode","nodeType","preserveWhitespace","properties","key","ref","cloneElement","id","style","onKeyPress","onKeyDown","onKeyUp","onBlur","_","onBlur2","renderEditingArea","onChange","nextSelection","currentSelection","hasGainedFocus","hasLostFocus","onChangeSelection","onFocus","focus","blur","fn","resolve","displayName","defaultProps","toolbar","AutocompleteTextField","handleKeyDown","event","helperVisible","keyCode","preventDefault","resetHelper","handleSelection","setValue","handleChange","sanitizeConf","allowedTags","allowedAttributes","sanitize","html","sanitizeHtml","left","matchLength","matchStart","top","recentValue","caret","updateHelper","str","providedOptions","trigger","matchAny","regex","re","RegExp","triggerLength","triggerMatch","match","last","i","substring","triggerIdx","isTrigger","matchedSlug","slug","idx","Display","toLowerCase","indexOf","substr","spaceRemovers","spacer","old","target","end","old2","str2","enableSpaceRemovers","getMatch","newValue","slice","current","suggestionType","part1","part2","searched","part1Sub","openerEndIndex","updateCaretPosition","setTimeout","input","getEditor","clientHeight","minChars","onRequestOptions","requestOnlyIfNoOptions","maxOptions","offsetX","offsetY","optionNumber","helperOptions","map","val","highlightStart","onClick","onMouseEnter","renderAutocompleteList","disabled","Control","getValue","Value","fieldName","Grid","container","spacing","direction","item","InputLabel","htmlFor","autoComplete","FormControl","fullWidth","multiline","OutlinedInput","labelWidth","FormHelperText","TextBox","vote","theVote","changeWaiting","votes","updatedComment","rootComment","replies","r","cleanReply","api","object","comments","prepComment","changeComments","err","reply","newReply","voteSum","u","time","Object","values","reduce","total","CommentControl","useState","changeValue","replying","changeReplying","toLocaleDateString","toLocaleTimeString","dangerouslySetInnerHTML","__html","text","CardActions","disableSpacing","IconButton","aria-label","Owner","Collaborators","c","fontWeight","marginLeft","xs","marginTop","newComments","newWaiting","suggestions","shiftKey","endsWith","CommentsControl","waiting","loadComments","changeLoadComments","desc","Button","commentID","saveComment","commentsChange","GeneralDiscussionPage","userSuggestions","worldSuggestions","menuRoutes","icon","Home","Forum","Menu","toggleFollow","follow","followingWorlds","splice","handleUserInput","checked","browse","Filter","worlds","ListItem","activeClassName","button","Icon","ListItemText","primary","otherWorlds","w","includes","List","Fab","size","Star","links","display","Tooltip","Search","Add","myWorlds","MobileMenu","selectedPage","worldIDs","StyledMenu","withStyles","paper","border","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","UserMenu","anchorEl","setAnchorEl","aria-controls","aria-haspopup","cursor","currentTarget","keepMounted","open","Boolean","onClose","MenuItem","onLogout","Bar","loadFromStorage","AppBar","Toolbar","selectedWorld","mobileMenuOpen","Box","sm","NavBar","menuOpen","page","src","logo","alt","logoText","brand","Divider","light","Sidebar","inputBlur","validation","validateField","fieldValidation","valid","validateForm","respond","nameValid","emailValid","formValid","onSubmit","submitThroughAPI","errors","loginError","show","userLogin","onLogin","load","finishLoading","loaded","Helmet","ProfilePage","attrs","Index","panel","updateIndexExpandedPanel","indexExpandedPanel","majorless","Major","createButtons","NeedsWork","height","marginBottom","UnderConstruction","maxWidth","UnderConstructionWhite","Edit","PluralName","j","ThingIndex","TypeSummary","defaults","d","DefaultValue","DefaultListValues","superTypes","aKey","attributeType","dKey","defThing","ThingSummary","attributeValue","ListValues","selected","newSelected","typeIDs","superType","attrType","Default","thingIDs","defaultThing","removeType","subTypes","subType","references","ReferenceIDs","removeUs","removeMe","removeThing","thingAttr","attrThing","typesWithDefault","typeWithDefault","TemplateModal","changeName","changeMessage","nameMessage","changeNameMessage","changeSelected","changeValid","expandedPanel","changeExpanded","selectedType","changeSelectedType","selectedThing","changeSelectedThing","typeless","selectedTypeless","n","validate","Checkbox","overflowY","overflowX","selectedThings","templateName","onSave","saveTemplate","onCancel","WorldMap","dingus","Things","typeKey","thingKey","ImportTemplatesControl","selectedTemplate","changeSelectedTemplate","selectedTemplateIDs","changeSelectedTemplates","newSelectedTemplateIDs","takeNextStep","play","stepInProgress","reallyTakeNextStep","importingTypes","dumbImportType","importingAttributes","attributesStatus","importingThings","existingThing","thingMap","templateThing","dumbImportThing","importType","importThing","onComplete","typeMap","attributeMap","upsertUs","upsert","templateAttribute","selectedWorldID","existingAttribute","attrOptions","o","upserted","a2","existingType","templateType","dumbType","EditUserID","dumbThing","s","superID","theDefault","d2","TypeIDS","templateID","ImportingTemplatesControl","typeSuggestions","thingSuggestions","delete","res2","modalOpen","getModalStyle","round","window","innerHeight","innerWidth","transform","templateMode","importMode","loading","loadViews","recentTypeChanges","recentThingChanges","typeViews","thingViews","updatePublicWorldForCollab","respondToInvite","invite","updateTemplates","expandRecentChanges","getTypes","updateAttributes","getThings","params","shift","People","Delete","AcceptingCollaborators","editedByUser","toDateString","Modal","aria-labelledby","aria-describedby","WorldDetailsPage","a11yProps","cleanWYSIWYG","tempSelectedTemplateIDs","ArrowBack","FormControlLabel","control","label","keys","WorldEditPage","componentDidMount","remember","handleClickShowPassword","showPassword","handleMouseDownPassword","password","confirmEmailValid","passwordValid","confirmPasswordValid","usernameValid","formMode","confirmPassword","users","loginClick","registerClick","passwordClick","cookies","Cookies","emailCookie","get","passCookie","endAdornment","InputAdornment","onMouseDown","edge","Link","LoginControl","accept","accepted","submitAccept","refreshWorld","onLoginAccept","decline","submitDecline","codeValid","CollaboratePage","TabPanel","p","selectedUser","collabs","inviteMessage","inviteEmail","collaborator","permission","collabLink","collabLinkCopied","collab","acceptCollab","copyCollabLink","generatedLink","select","document","execCommand","actuallyFinishLoading","newCollaborators","newCollabTab","collabTab","invites","requests","userMenuItems","Tabs","Tab","Select","labelId","FileCopyOutlined","fontColor","direcion","Check","EditCollaboratorPage","redirectToNext","inheritedAttributes","definedType","option","sub","instances","TypeDetails","handleDefinedTypeChange","onNewType","handleOptionsChange","AttributeControl","attributeTypes","listTypes","selectedListType","selectedDefinedType","fromTypes","FromTypeIDs","handleTypeChange","chips","handleListTypeChange","onDelete","AttributeDefaultControl","selectedTypeValue","listOptions","listOptionValues","onNewThing","handleTextListChange","selectedValues","onSelect","selectedItem","addOption","onRemove","selectedList","removeOption","displayValue","addThingOfType","newAttribute","uuid","changeAttribute","changeDefault","blurAttribute","deleteAttribute","addNewType","addNewThing","defaultsMode","inheritedAttribute","AttributesControl","NewTypeModal","saveNewType","NewThingModal","newThingType","saveNewThing","resetForm","resetting","attrByName","attrArrValid","addMore","superIDs","typeAttributes","DefaultReferenceIDs","FromTypeID","supersChange","supers","addSuper","s2","duplicateAttributes","addSelectedAttribute","browseAttributesSelected","browseTypesSelected","addBrowsedType","removeSuper","removedItem","checkMe","renderAttributes","typeModalOpen","putTypeOnAttribute","thingModalOpen","putThingOnAttribute","browseAttributes","newType","formHeight","additionalAttributes","selectedAttributeTypes","selectedAttributeName","found","opacity","checkedIcon","TypeEditPage","addAttributes","rows","descendingComparator","b","orderBy","ThingTableHead","order","onRequestSort","columnMap","TableHead","TableRow","headCell","TableCell","align","numeric","padding","disablePadding","sortDirection","TableSortLabel","active","property","visuallyHidden","useToolbarStyles","paddingLeft","paddingRight","highlight","palette","secondary","main","backgroundColor","lighten","dark","flex","ThingTableToolbar","table","clip","margin","overflow","ThingTable","newRow","allThings","Type","setOrder","setOrderBy","setSelected","setPage","rowsPerPage","setRowsPerPage","Paper","TableContainer","Table","numSelected","onSelectAllClick","newSelecteds","rowCount","TableBody","array","comparator","stabilizedThis","el","sort","stableSort","getComparator","row","isItemSelected","hover","role","aria-checked","column","buttonClick","TablePagination","rowsPerPageOptions","onChangePage","newPage","onChangeRowsPerPage","parseInt","finishDelete","majorType","listValue","ThingDetails","FromTypes","blurBehavior","infoModal","infoAttribute","optionsChange","onInfo","modalSubmit","infoModalOpen","createThingFromType","newAttributes","existing","finishResettingForm","handleInfoAttrNameChange","inputBlur2","attr2","attrValid","validateAttrForm","infoAttributeName","typesChange","newTypes","addType2","selectNewTypeForAttribute","newTypeForAttribute","saveInfoAttribute","submitAttributeThroughAPI","deleteInfoAttribute","theType","newFromTypeIDs","browseAttributesFilter","refDescription","typeStr","connectedTypes","otherTypes","fontSize","newThing","renderHeader","ThingEditPage","resetPasswordCode","ResetPasswordPage","confirmEmailCode","ConfirmEmailPage","loginOpen","exact","EditCollaboratorsPage","TypeDetailsPage","ThingDetailsPage","minHeight","MainPage","connector","setWidth","setHeight","setAPI","updateDimensions","addEventListener","removeEventListener","marginRight","initialState","articles","redirectToURL","loadIt","collabSuggestions","views","rootReducer","reducers","action","assign","worldArr","wasPublic","publicWorld","changedType","changedAt","now","changedThing","session","sessionReducer","reducer","combineReducers","store","createStore","refreshFromLocalStorage","refreshOnCheckAuth","redirectPath","driver","validateSession","sessionService","initSessionService","Campaign","selectedPlayMapID","turnPlayerID","lastUpdate","toDBObj","MapFile","BasementStudy","CastleWall","CaveLair","Crossroads","Farmstead","ForestLair","MonsterLair","SnowVillage","SwampLair","Tavern","UndergroundComplex","UrbanLair","WagonTrailandShrine","WaterfallCavern","AbandonedWarehouse","DaggerAlley","UnderDaggerAlley","TrollSkullAlleyBasement","TrollSkullAlleyHouse","WeddingRing","CragmawCastle","CragmawHideout","Phandalin","RedbrandHideout","RuinsOfThundertree","SwordCoast","WaveEchoCave","Waterdeep","WaterdeepWithWards","Restaurant","CrimsonBrush","GraveyardPath","GraveyardPumpkinPatch","MausoleumCrypts","Map","category","fileName","file","gridWidth","gridHeight","TokenFile","Bald","Bard","BlondeHair","BlondeWoman","BlueSkin","BlueSkin2","DarkSkin","DarkSkinF","Dragonborn","DragonbornFighter","DwarfMale","ElvenFemale","ElvenFighter","Eyebrows","Eyebrows2","Fedora","GnomeMale","GoliathBarb","GreyHair","HalflingMale","Hood","Hood2","Human","HumanFemale","HumanFemale2","HumanFighterF","HumanFighterM","HumanMale","HumanMale2","IDK","Knight","OldWoman","OldWoman2","RedHair","RedSkin","Samurai","Scarf","TieflingFemale","Wizard","Rat","Wererat","Werewolf","RugOfSmothering","PitTrapWSpikes","SewerGrate","AirGenasiRangerF","AirGenasiRangerM","Bugbear","DrowArcher","DrowFighter","DrowFighter2","DrowRogue","DrowWitch","GoblinArcher","GoblinRogue","GoblinSpearman","Hobgoblin","HumanHexblade","TabaxiMonk","TieflingCleric","TieflingPaladin","TieflingSwordsman","WhiteDragonbornMage","SnowLeopard","Spider","AshZombie","Beholder","Beholder2","Cube","Drider","FlameSkull","Skeleton","GreenDragon","Zombie","TwigBlight","Web","Vampire","WereratKnife","WereratMage","WereratRogue","WereratRogue2","Werewolf2","Werewolf3","Werewolf4","Clue1","Clue2","Clue3","Glyph","DuergarMale","Birdman","Daggers","TrollSkull","BookMimic","ChairMimic","ChestMimic","PumpkinMimic","WallMimic","CakeMimic","Jack","Marty","Harvey","TabaxiMummy","Rug","GraveDigger","Dog","BeepBeep","Bird","Ram","Sheep","Sheep2","GhostWizard","GhostBlueWoman","GhostWhiteWoman","GhostHeartWoman","GhostLizardfolk","GhostScreaming","GhostSkeletal","Specter","Wraith","Wraith2","Token","FavoriteToken","campaignID","token","tokenID","PlayToken","x","y","stealth","moving","owner","ownerID","MaskPoint","maskID","maskType","toClipPathPoint","Mask","points","toClipPath","clipPath","point","PlayMap","tokens","movingToken","lightMasks","darkMasks","fogMasks","zoom","dx","dy","playTokens","l","mapID","Player","campaign","lastPing","refreshIndex","getAllVTT","getCampaigns","campaigns","getMaps","maps","getTokens","getPlayMaps","playMaps","getFavoriteTokens","favoriteTokens","getPlayers","players","getPlayersFromAPI","vttID","createPlayer","player","deletePlayer","playerID","updatePlayer","playerPing","getMapsFromAPI","createMap","deleteMap","updateMap","getTokensFromAPI","createToken","deleteToken","updateToken","getCampaignsFromAPI","getCampaign","createCampaign","deleteCampaign","updateCampaign","getPlayMapsFromAPI","getPlayMap","playMapID","createPlayMap","playMap","deletePlayMap","updatePlayMap","getFavoriteTokensFromAPI","createFavoriteToken","favoriteToken","deleteFavoriteToken","favoriteTokenID","updateFavoriteToken","sessionStorage","addCampaign","processing","campaignObj","newCampaign","toString","selectCampaign","renderMain","selectedCampaign","loadCampaign","renderMapList","addPlayMap","selectMap","month","getMonth","date","getDate","selectedMap","getFullYear","mapObj","newPlayMap","selectPlayMap","changeCategory","selectedCategory","renderCategorySelect","categories","renderSelectedMap","m","loadPlayMap","ReactPanZoom","getInitialState","pandx","pandy","dragData","dragging","matrixData","panWrapper","panContainer","enableClick","pageX","pageY","enablePan","newDragData","stopPropagation","nativeEvent","stopImmediatePropagation","onMouseUp","onPan","getNewMatrixData","deltaX","deltaY","getNewMatrixData2","onMouseMove","singleSelect","newMatrixData","userSelect","Container","css","ControlsContainer","styled","div","PlayersContainer","Heading","Icons","strong","selectedPlayer","selectedPlayMap","addFavoriteToken","setPlayers","getCurrentRefreshIndex","campaignFinder","refreshCampaign","countdown","noChanges","toggleIt","refreshing","lastRefresh","toggleSingleSelect","playMapFinder","mapFinder","m2","tokenFinder","playToken","playTokenFinder","playerFinder","secs","getSeconds","floor","zoomIn","zoomOut","clearSelectAndHover","mapMode","shiftHeld","addNewToken","selectedToken","tokenCount","tokenName","tokenSize","selectedFavoriteToken","deletePlayToken","adjustPlayToken","theToken","selectedTokens","addNewFavorite","obj","newFavorite","deleteFavorite","adjustFavorite","deselecting","ctrlHeld","hovered","thePoint","selectedMasks","selectedPoints","selectedPoint","renderFavoriteTokenList","edit","parseFloat","renderTokenList","renderPlayTokenList","pKey","moveLMP","lmp","xy","maskFinder","pointFinder","addNewPoint","mask","theMask","firstPoint","deletePoint","deleteMask","masks","renderMaskList","controlSubMode","selectedMask","pkey","addNewMask","renderControls","controlMode","renderPlayers","threshold","getTime","saveCampaign","slideSelected","xChange","yChange","selToken","selPoint","running","StyledReactPanZoom","FogOfWar","onMouseLeave","mkey","borderRadius","savePlayMap","useSelectedPlayMap","selectedTokenID","hoveredTokenID","selectPlayer","endTurn","changePlayer","setCampaigns","setMaps","setPlayMaps","setTokens","setFavoriteTokens","createPlayToken","DMPage","PlayerPage","AppLayout","rel","href","App","isOn","favoriteTokenFinder","location","hostname","render","VTTstore","getElementById","ANBstore","navigator","serviceWorker","ready","registration","unregister"],"mappings":"0FAAAA,EAAOC,QAAU,kgZ,iDCAjBD,EAAOC,QAAU,IAA0B,sD,6BCA3CD,EAAOC,QAAU,m/B,wICAjBD,EAAOC,QAAU,02G,oBCAjBD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,iD,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,oD,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,iD,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,qD,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,mD,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,iD,gBCA3CD,EAAOC,QAAU,IAA0B,iD,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,mD,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,sC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,cCA3CD,EAAOC,QAAU,s9Z,cCAjBD,EAAOC,QAAU,k6U,gBCAjBD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,iC,gBCA3CD,EAAOC,QAAU,IAA0B,yC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QA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","file":"static/js/main.9f4a090d.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/under_construction_white.378ee889.png\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAARAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMi4xMwAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgACgAKAwEhAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/n/ooAKKAP/Z\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/Basement-Study.a68280cb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Castle-Wall.4fa9735d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Cave-Lair.e48ad0f2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Crossroads.b70bce05.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Farmstead.1802a7fa.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Forest-Lair.8706baa2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Monster-Lair.906aa148.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Snow-Village.e08e1847.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Swamp-Lair.625e577e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Tavern.9c60ea48.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Underground-Complex.ef43ba2b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Urban-Lair.f9494f9d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Wagon-Trail-and-Shrine.ad53d0a1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Waterfall-Cavern.8d0ffe05.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Abandoned Warehouse.ffbf8673.png\";","module.exports = __webpack_public_path__ + \"static/media/DaggerAlley.469bcf6d.png\";","module.exports = __webpack_public_path__ + \"static/media/UnderDaggerAlley.4588f8f4.png\";","module.exports = __webpack_public_path__ + \"static/media/TrollSkullAlleyBasement.a7ce5ec0.png\";","module.exports = __webpack_public_path__ + \"static/media/TrollSkullAlleyHouse.9a7bd522.png\";","module.exports = __webpack_public_path__ + \"static/media/WeddingRing.cade6e88.png\";","module.exports = __webpack_public_path__ + \"static/media/cragmaw castle.d024ee0d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/cragmaw hideout.3f3519e6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/phandalin.82f129f7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/redbrand hideout.325d5f0b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ruins of thundertree.141d208c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/sword coast.981afcfa.jpg\";","module.exports = __webpack_public_path__ + \"static/media/wave echo cave.cd71945f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Waterdeep.6201085e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/waterdeep_with_wards.4b54ded3.jpg\";","module.exports = __webpack_public_path__ + \"static/media/restaurant.96632202.jpg\";","module.exports = __webpack_public_path__ + \"static/media/CrimsonBrush.601bd196.png\";","module.exports = __webpack_public_path__ + \"static/media/GraveyardPath.3556d85c.png\";","module.exports = __webpack_public_path__ + \"static/media/GraveyardPumpkinPatch.b6c0d1c1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MausoleumCrypts.6707dc41.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Bald.741a853e.png\";","module.exports = __webpack_public_path__ + \"static/media/Bard.94af444d.png\";","module.exports = __webpack_public_path__ + \"static/media/BlondeHair.4fcc70e3.png\";","module.exports = __webpack_public_path__ + \"static/media/BlondeWoman.9762d835.png\";","module.exports = __webpack_public_path__ + \"static/media/BlueSkin.df8f5004.png\";","module.exports = __webpack_public_path__ + \"static/media/BlueSkin2.2603a58a.png\";","module.exports = __webpack_public_path__ + \"static/media/DarkSkin.e48fb0f3.png\";","module.exports = __webpack_public_path__ + \"static/media/DarkSkinF.ad2949fb.png\";","module.exports = __webpack_public_path__ + \"static/media/Dragonborn.ab16b141.png\";","module.exports = __webpack_public_path__ + \"static/media/DragonbornFighter.c21c5f7d.png\";","module.exports = __webpack_public_path__ + \"static/media/DwarfMale.2c31b739.png\";","module.exports = __webpack_public_path__ + \"static/media/ElvenFemale.4b6ed688.png\";","module.exports = __webpack_public_path__ + \"static/media/ElvenFighter.855d86de.png\";","module.exports = __webpack_public_path__ + \"static/media/Eyebrows.9e1fe3ec.png\";","module.exports = __webpack_public_path__ + \"static/media/Eyebrows2.e428b8ea.png\";","module.exports = __webpack_public_path__ + \"static/media/Fedora.ae081514.png\";","module.exports = __webpack_public_path__ + \"static/media/GnomeMale.0a1ba63d.png\";","module.exports = __webpack_public_path__ + \"static/media/GoliathBarb.33cfc33d.png\";","module.exports = __webpack_public_path__ + \"static/media/GreyHair.c1b9e380.png\";","module.exports = __webpack_public_path__ + \"static/media/HalflingMale.639efdd9.png\";","module.exports = __webpack_public_path__ + \"static/media/Hood.9db2c27f.png\";","module.exports = __webpack_public_path__ + \"static/media/Hood2.70d96a27.png\";","module.exports = __webpack_public_path__ + \"static/media/Human.52eda96a.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanFemale.81c31b30.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanFemale2.a4ff5aca.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanFighterF.533cf974.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanFighterM.77a0b7de.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanMale.69efd308.png\";","module.exports = __webpack_public_path__ + \"static/media/HumanMale2.19c85bbc.png\";","module.exports = __webpack_public_path__ + \"static/media/idk.8cdd4c94.png\";","module.exports = __webpack_public_path__ + \"static/media/Knight.7d208560.png\";","module.exports = __webpack_public_path__ + \"static/media/OldWoman.b670e555.png\";","module.exports = __webpack_public_path__ + \"static/media/OldWoman2.28ceea26.png\";","module.exports = __webpack_public_path__ + \"static/media/RedHair.75d09fc6.png\";","module.exports = __webpack_public_path__ + \"static/media/RedSkin.bd87a612.png\";","module.exports = __webpack_public_path__ + \"static/media/Samurai.cbbf87ae.png\";","module.exports = __webpack_public_path__ + \"static/media/Scarf.e6d10ad6.png\";","module.exports = __webpack_public_path__ + \"static/media/TieflingFemale.1ee22c7c.png\";","module.exports = __webpack_public_path__ + \"static/media/Wizard.6cbb3902.png\";","module.exports = __webpack_public_path__ + \"static/media/Rat.7b728608.png\";","module.exports = __webpack_public_path__ + \"static/media/Wererat.d2f36299.png\";","module.exports = __webpack_public_path__ + \"static/media/Werewolf.17e32e13.png\";","module.exports = __webpack_public_path__ + \"static/media/Rug.47a56dde.png\";","module.exports = __webpack_public_path__ + \"static/media/PitTrapWSpikes.9c811852.png\";","module.exports = __webpack_public_path__ + \"static/media/SewerGrate.0e429248.png\";","module.exports = __webpack_public_path__ + \"static/media/Air Genasi Ranger F.4972c7bc.png\";","module.exports = __webpack_public_path__ + \"static/media/Air Genasi Ranger M.3f727552.png\";","module.exports = __webpack_public_path__ + \"static/media/bugbear.7a07c7b8.png\";","module.exports = __webpack_public_path__ + \"static/media/drow archer.d2412394.png\";","module.exports = __webpack_public_path__ + \"static/media/drow fighter.79c9dc2b.png\";","module.exports = __webpack_public_path__ + \"static/media/drow fighter 2.53631671.png\";","module.exports = __webpack_public_path__ + \"static/media/drow rogue.6822a210.png\";","module.exports = __webpack_public_path__ + \"static/media/drow witch.260bda57.png\";","module.exports = __webpack_public_path__ + \"static/media/goblin archer.08b5e9f0.png\";","module.exports = __webpack_public_path__ + \"static/media/Goblin Rogue.d14b69de.png\";","module.exports = __webpack_public_path__ + \"static/media/goblin spearman.1ffe71b9.png\";","module.exports = __webpack_public_path__ + \"static/media/hobgoblin.8b7bf17b.png\";","module.exports = __webpack_public_path__ + \"static/media/Human Hexblade.3e28b0be.png\";","module.exports = __webpack_public_path__ + \"static/media/Tabaxi Monk.15bfcf2a.png\";","module.exports = __webpack_public_path__ + \"static/media/Tiefling Cleric.fcb5150d.png\";","module.exports = __webpack_public_path__ + \"static/media/Tiefling Paladin.f80ed937.png\";","module.exports = __webpack_public_path__ + \"static/media/Tiefling Swordsman.4e4713ca.png\";","module.exports = __webpack_public_path__ + \"static/media/White Dragonborn Mage.51ad7179.png\";","module.exports = __webpack_public_path__ + \"static/media/snow leopard.5c2bb400.png\";","module.exports = __webpack_public_path__ + \"static/media/spider.518aaa52.png\";","module.exports = __webpack_public_path__ + \"static/media/ash-zombie.580732f6.png\";","module.exports = __webpack_public_path__ + \"static/media/beholder.d522d997.png\";","module.exports = __webpack_public_path__ + \"static/media/beholder 2.3fb0bf14.png\";","module.exports = __webpack_public_path__ + \"static/media/cube.116623f2.png\";","module.exports = __webpack_public_path__ + \"static/media/drider.3e0f29bf.png\";","module.exports = __webpack_public_path__ + \"static/media/flameskull.537ccc42.png\";","module.exports = __webpack_public_path__ + \"static/media/skeleton.6a558d8e.png\";","module.exports = __webpack_public_path__ + \"static/media/venomfang.6b1b3e1f.png\";","module.exports = __webpack_public_path__ + \"static/media/zombie.ec028f6d.png\";","module.exports = __webpack_public_path__ + \"static/media/twig blight.2d640bad.png\";","module.exports = __webpack_public_path__ + \"static/media/Web 1 3x3 A.0849f71d.png\";","module.exports = __webpack_public_path__ + \"static/media/Vampire.374a43d6.png\";","module.exports = __webpack_public_path__ + \"static/media/Wererat Knife.edf56994.png\";","module.exports = __webpack_public_path__ + \"static/media/Wererat Mage.ee8919cf.png\";","module.exports = __webpack_public_path__ + \"static/media/Wererat Rogue.faf2db90.png\";","module.exports = __webpack_public_path__ + \"static/media/Wererat Rogue 2.998733f8.png\";","module.exports = __webpack_public_path__ + \"static/media/Werewolf 2.91ad1914.png\";","module.exports = __webpack_public_path__ + \"static/media/Werewolf 3.5322f5cf.png\";","module.exports = __webpack_public_path__ + \"static/media/Werewolf 4.0b66c026.png\";","module.exports = __webpack_public_path__ + \"static/media/Clue1.e2041204.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnMAAAJzCAMAAABTbmU8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADGUExURQAAAP///+Pj44uLi39/f4+Pj/Pz89vb21xcXEBAQCgoKBgYGCAgIExMTNfX1+/v75eXl3R0dGRkZIeHh8vLy/f395+fn3h4eGBgYIODg8PDw6enp7+/v2xsbHBwcKOjo/v7+9PT07Ozs+fn57e3t5OTk6urq8fHx9/f33x8fBwcHCQkJAQEBDg4OFhYWEhISAwMDCwsLM/PzxAQEDw8POvr66+vrxQUFAgICERERFBQUFRUVDQ0NLu7uzAwMGhoaJubmwAAAHqhhZMAAABCdFJOU///////////////////////////////////////////////////////////////////////////////////////AEQWEAAAAAAJcEhZcwAADsIAAA7CARUoSoAAACVASURBVHhe7Z1pe9S4tkYrDIGEQJgSAh0gEIYAoTvMgQaa8///1C3tLduSLNWUnPdp7lnrA8RDVdnby5ptTf4DoAXnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnsAAAJ7CAMAAACs6qelAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADGUExURQAAAP///8/Pz4ODg2BgYIeHh9fX1+Pj44+Pj39/f5+fn6+vr7+/v9vb27e3t+vr6/f392xsbJubm9PT06Ojo/Pz87u7u3R0dFhYWEBAQCAgIAgICBQUFCwsLERERMfHx/v7++fn52hoaIuLi5OTk7Ozs+/v78vLyxwcHDQ0NJeXl3h4eN/f36urq0hISAQEBAwMDHx8fFxcXDg4ODw8PHBwcCgoKExMTGRkZBgYGCQkJMPDw6enpxAQEDAwMFBQUFRUVAAAABad2v8AAABCdFJOU///////////////////////////////////////////////////////////////////////////////////////AEQWEAAAAAAJcEhZcwAADsIAAA7CARUoSoAAAB2aSURBVHhe7ZxpW9TI14dBcQFBUMEFXFgUdQZtdRT3ceb7f6l/cs5JUlsa57n0+b257xdeJt2dpKvuOnVqaVb+BdCAe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK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\"","module.exports = __webpack_public_path__ + \"static/media/Glyph.5993ac4e.png\";","module.exports = __webpack_public_path__ + \"static/media/Map.292f5a52.png\";","module.exports = __webpack_public_path__ + \"static/media/DuergarMale.3d9b37b3.png\";","module.exports = __webpack_public_path__ + \"static/media/Birdman.ddcd6b44.png\";","module.exports = __webpack_public_path__ + \"static/media/Daggers.4859a4fe.png\";","module.exports = __webpack_public_path__ + \"static/media/TrollSkull.d2dd64ab.png\";","module.exports = __webpack_public_path__ + \"static/media/Crimson Brush.04b7b847.png\";","module.exports = __webpack_public_path__ + \"static/media/Book.7bb750a3.png\";","module.exports = __webpack_public_path__ + \"static/media/Chair.f219050b.png\";","module.exports = __webpack_public_path__ + \"static/media/Chest.c13a46b1.png\";","module.exports = __webpack_public_path__ + \"static/media/Pumpkin.3e3f323e.png\";","module.exports = __webpack_public_path__ + \"static/media/Wall.2977fb54.png\";","module.exports = __webpack_public_path__ + \"static/media/Cake.f5c12594.png\";","module.exports = __webpack_public_path__ + \"static/media/Jack.06daf12d.png\";","module.exports = __webpack_public_path__ + \"static/media/Marty.f4855d67.png\";","module.exports = __webpack_public_path__ + \"static/media/Harvey.785616bf.png\";","module.exports = __webpack_public_path__ + \"static/media/rug.655cb4e1.png\";","module.exports = __webpack_public_path__ + \"static/media/Tabaxi Mummy.19aa8c76.png\";","module.exports = __webpack_public_path__ + \"static/media/Gravedigger.e2bd769d.png\";","module.exports = __webpack_public_path__ + \"static/media/Dog.d1d7d8aa.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvIAAAJ0CAMAAABHrDe7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJUExURQAAAP///wAAAHPGg3EAAAADdFJOU///ANfKDUEAAAAJcEhZcwAAEnMAABJzAYwiuQcAAB6kSURBVHhe7dfbuqvMrYThmf/+LzogfbaxhwE1O7dQvQfJMHQ3UKrMZ61//4mUospLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqfEb/PnBZIpRWJjR8FstkiVLKglavYrnMUUIZ0OYwtsk3Sqd71LgVu+WTkukcBX73vw9c/sQR8kax9IzqvlDxOaya4CB5USb9orUP1HoNq584TB6USLeorKHOUex64EAxiqNTtHVEj9uwFxwqA4XRJZo6osIbcIDjYFHle0RLB5R3M44xHF6egugPFR1Q3F04asT5xSmG7tDPYwo/4rgRjyhNIfSGch5W+BFHjnhKYYqgLxTz2MYPOHXAg+pSAn2hlxT1SJw84FFVqfJdoZS09GAcPuBpNanyPaGRVPR4nF+786p8R+gj/TwDTyjdeVW+H7SRdp6EhxQuvSrfDapINU/DY+p2XpXvhheRYp7JH1S286p8L7yGtPJc/qgBj65Fle+Ed5BOns6fFu88y2/xPxJVvhPeKBp5Pn9cpMIsfMOtnFT5PniV6OMV/IFr7WXRFyxISJU/E/UAF7/yFdTxGv7IhbdiwRxWpaPKH49KLGDhhF2mi1exZ85Xl9tLWJmLKn8oqhDDnpFfoIqX8ad+by63wIbXlgdWZ6LKH4YSNJrspVUXsscO/CUmuG5YO8ENw4ZEVPljUICNflX5uc5zdcC6P7g9Yk8aqvwBmP1f9ANcnMWyS/HotxpwacCir1gyYFsWqvxezH2KUsxi2QduXo2n8zUDLrR8BjtzUOX3YeZPtCGELQ9cvRyP54OeX8TdRSzN1XlVfg8GDnrQhK0jrlyP579/EvfWsDpTjVT57Zi2owKb7D9hH3++VYE/uRHAhkQ9UuW3YtSG8W93xBk7+Fe8PorLMezxVBJQ5bdhziMmn5p/yabGp+u8Kr8FQx4x9uT4GMe1OPYRTu9U+Q0Y8YCZ58f3jLjSgp3E0zlVvhnzHTDwW+CTNn4Ue0mob6p8K6Z7r8IP9n0Vu8moa6p8I2Z7t8IP9n2W7U7ReVW+CYO9Y+Ottfy1heeSoE+qfAvGesvC7+bRkFTHVPkGPlQ1foaHQ1b9UuXjfKRq/CyPh7S6pcqH+UBV+HkkRF69UuWjmCfTlW88IgLrlSof5NNU45d5SETWKVU+xmepxq+xlMisU6p8iE1SjV/nOZFan1T5CB+kGh/gSZFbl1T5AB+jGh/hURFcl1T5dT5FNT7GwyK6Hqnyq3yGanyUpUV2PVLl19gE1fg4z4v0OqTKr/EJMk4JsMBIr0Oq/AqbnxrfwhIjvg6p8stsfGp8E8+MAPujyi/y6anybSwzEuyPKr/IhqfGN/LUiLA7qvwSnx2DlDCLjQy7o8ovsMmp8e0sN0Lsjiq/wCanyrfz4EixN2krf0Go9gg1fgtLjhh7k7TyFukD147mhzPDLfbuT8w+nRx7k7LyFug77hzJD2aGbXwruFaKfTg59iZj5S3Pv7h7FD+UETbwfW+4U4h/N0l2JmHlPc7vWHIEO48Jhtmmv7hbiH02SXYmX+UtzMEz2Hes2s1Ps/EF+Y7vWFKHfTVRdiZr5Ul25BcmWLiLn8QTInzDm+llW1OIfTRZdiZd5S3LPw3yqy8s3s6P4fRVvnqC66M/F0qwjybLzuSsPLm+sztPLN/Iz+DgFb72hctP36/enH0zYXYmW+Utytn++F2wYxM/gVMX+coHLr6bv3Nf9s2E2ZmUlSfWb+z+A3va+XaOXOILwbU/lu/elH0zcfblbpUf2BKwq5Vv5rx5vgxc+2bt/h3ZNxNnX5JV3oJs6iIb29hOzppli8ClGYElt2PfTJx9yVh5Ql1kCw07W/hGTprhawxX5gWX3Yp9Mnn25a6V31V628UxM2yJ4cKi8ML7sE8mz77ct/LbS+97OOQrXzHiwoqGpXdhn0ygfblz5SfVZHuM7eCEb+y+4cKqpsX3YJ9MoH25d+Un7eSAAF/PAV/4/QG/AxqX34F9Mon25eaVnxSUE9bZanb/ZXcNFyJa19+AfTKJ9iVZ5Td0vrn0tpa9f9jNEb9j2ndkZ19MoJ0pUPnGzvtStn7wewN+B23Ykp19Mol2JmXlm+vjuwacssTWse+D3RrxO2rLnuTsk0m0M9kqv+mf+ZbO+zK2vfE7A36HbduVm30ykXYmZ+U39Mf3zY+B2449b7i14dnbduVm30y0nUlX+d2d//vFXH/Dpheub34wP6qwbybfzmSt/JYKsfPtk7n0DbsMl9T4IP9oMu5Mvso/W0q6Ddj4/GZ+zmPfcyM/W2zfmZl9Myn3JmHlX00l3zj2+Ufz94rpNjujCRurNV6VP5oF+vAIeOR5L2Hhvz+F5/7rrIcdvWXfhp3Z2Vczrd6krPziP9CEPodVb7g1wY0p7ixgoS3lL+e3C7GvZlbdyVn5tf+jhOS/YskDVz9x94Xrc1j1FUsKsc9mVN1JWvnV0i8UjfsjrnzDigeufsWSOawqxL+bQXUnbeUHnuwSRvCGWwMuzGKZ49on7s5jXSn24QypP5krj1e6FvUHpvDE5VgXWWq4NMGNBSysxr6dmfTnBpV/Z3G/YxCGS+EysnzEFXDxDbeGe/xRk4fBPPpzu8qPPPMJZtHe+AE7BlwYcGGKO0I6jKJDt6z8yHJ/mQyjtZ5sGvy5AK6L8UwYQ4duW/mRh4/nMNobyj7fyZ8PtkBePBYm0KNbV37gA3jDaFqwc9jLfzvuypRHQ/w9unvlBz6DJybThr1T3JF3Hg7Rd6lA5d9Lz2RasfuBq/LJ4yH3PpWo/KT0TKYd+w2X5C8PiNT7VKTyj9IzmC38gAG/5QtPiMg7VaXyPgsGs40focYv8IQsbXLvUJHK+ywYzFZ+iDo/j4ReiL8rqnyDY065MQ/oHRPoR43Ke/jMZTs/Rp2fRUCfmEInSlTeg2csexx20E15Pl8wiC7krDxBvnB9hq9hLLscd9I9vfLxv56YRA9SVp4Y29hI9jrwqBI8L8Psfq9O5RcxoXWNy+XVeob3c6p8CONT5bfwzAaM78dU+W2YpkSQWSedV+U3YpoSQmhdtC1j5Ynvt5ilxJBaD3VT5bdilhLkqTHCX7p55Z9Rn8AnKVGeGjP8oYSV9+hCJlEfzw6XMGJjir+jym9mh0scuTHGn7l15d+S3uPrKX66xBEcc/yVO1f+Lec9vp9jV6WFB8ccfyVf5T22iGnMu8ycY5elhQfHJH/kxpWfhrzL3EF+XVpYcEzyR1T5dXPn2HVp4skxyt+4b+WnEe8ye5DfkCYeHbP8iZtXnr93mT3Ibkgbj45Z/sRtKz8NeJf5g/yOtLHomOVP3LXyk3h3mj/J70gjy45h/oIqv2b+ILsjrSw7hvkLN638JNydFk7yW9LIw2OaP3DnyvP3Pgsn2S1pZuExzR+4Z+Un0e60dJLfk1aeHuO83i0rP012p6WT7J60s/QY5/VU+UWLJ/lNaWbpMc7r3bHyk1z3WjzJbko7S49xXi9f5dc7P8l1p+WT/K40s/SY5vVuWPlJrHstn2R3ZQOLj3Fe7q6V5+997CRV/ngWH+O8XMLKr3R+EupeKyfZbdnA4mOal7td5SeZzov9T2LtKL8v7Sw+pnm5jJVf7Pwk0znrK5ytW1roC6SZpccwL3e3yk8ineErIp1fXWYLZAOLj2leLWXlFzr/CnSGLTBcmLW+yldIO4uPYV6tVuXt7hMX56yvsRWygcXHMK+Ws/LLneevPzztCa5/F14i7Sw+Znm1pJVf/P9gvyPsN9z6anWBKr+dxccor5a18o2dJ+m/uP/Xym3ja6Sdxcckr1ai8uT8FUv+WLz5z+/YGtnA4mOSV0taeYsshpDnse7Dwi27+fhv2cLSY5ZXy1l5SyyChJex9sPsDT/1+YdsYOkxzKtlrLzlZeZbOSDdCHYEvbbYX9LO0mOcV0tYeYtrNI3vA7fi2Bcx2eB/SjNLj3leLV/lLa0B4b18vRhnhwZMl/O3tLL0GOjV0lXewhqQ3ZE4eRFLVfl9LD0merVklbeoBiR3OI6fw6rR529pYekx06vlqrwlNSC4U/CIL1jg/l6ROEuPoV4tVeUtqAG5nYfnTHHn6etFibHwGOrlMlXeghqQ2/mWHrdwS9ZYeEz1cvkqT2q/1tO7pGPhMdXLJaq85aTG34Glx1gvl6fyFlM3LevqZbKx8N6a51euKWOayhMKof1cVy+TjYXHXJ+TBRdPlKXyBEJmv9fX2yRj4b3NdcpvnCdJ5UmDyDrQ2evkYuG9pvrJR36aVJUnsR709j6ZWHZLGPpJclTekyCxLnT3QolYdu8+7jD2c6SovOdALF3o740S8fCeuOr8EnM/hyq/SXcvlIhl98C1F7vK3M+RofKWQl8F6++N8rDsHFem/AaTP0WCynsIJNKJDl8pDctuwM9Pdo/Rn0KV36LDV0rDs5sPz+4y+lP0X3mLoLN6dfhKaaxlZ/eZ/SmSVJ44etHjOyVh0S1mZwsY/hlU+S16fKck1qOzFQz/DN1X3gLorF49vlMSgehsBdM/Q47KE0YvenynJALR2RKmf4beK2/fr8rfhSWnyi+y7yeLXtg7qfIbRJKzJUz/FKp8ux7fKQdLTpVfZN/fWb16fKccQsnZGsZ/igyVJ4te9PhOKVhwq8nZIsZ/ClW+lb2SKr9BLDlbxPhPocq36vCVcrDgYo0vXHn/fsLoQ4evlEMwOFvF+M+RoPJk0YkOXykFy209OV/F+M+hyrexN1Llm3lu68HZKqZ/ElW+TX9vlILFFm28Kk8aXbAXUuVbeWyB3GwZwz+LKv+FPfbbc2dvyBKPLdp4Vf6qhtmz3nBjYu66LPHUeml8+crbE2aw5GXmsizy1CKx+UJmf5qalbdzV7H46ftVWeap9dP4SpW3wxqw7WnmsiyKp+YLmfyJbl95O6IRW98t3ZM58dRYyeRPdNPK28Y27JwVWyVvPLSuGn+rytvqRmxd17hcBp5ZZ42/QeVtTSO2Nti6rzLPrLfGZ6j8XGR+M45tmxxwRDlk1lvjO6/80j/zdmsdq/c58qwiiKy/xt+18qw5yCmH3hqJxTJjKSM/XYbKf8/Nb01x43AnH39DJBbKjJXXFbHzygf+mefXea56zl2Q14grS1h5YQ8TV/4a9gIDfsoa8hpwYRFLr6xhisr/sG/+fDU+jsB6LXz/lf/xP/P29AE/ZV1DYiy9uIM5Kv+jyvmzB/yWiGhitm7EpK/SfeV/2Hl/sgrfKJiZLRsx58uo8nP8uQN+S1AoNV80YMoX6r/yP+q8P3XAbwkLxGZLRsz4Sgkq/4vO+yMH/JYGq8HZghEDvlaeyl/YPh444IK0WInOb4+Y78UyVP7izvO0ARek0VJ4ds8w3MulqPyVnedRI65Iq/n07I5jtNfLUflH509vIY8ZcUXazeVn1x1z/YUklb+k8zzCcEk2+RqhXXQM9TeyVP7Z+bPKyOmOa7LRlxDtkmOiv5Km8qd2npPBRdnsT4x2wTHO38lT+VfnD+4khz5wVXb4SNJ/Oob5Q4kqPy39UcXktAluyC6TKO3PBwb5U6kqP+38zm5yyF/cl12eUdofYIi/lqvy76Vv7SebZrzGJLt5lvafDwzw97JV/rP0sZKydN7zXDbIPh7mhM+uC/kq/7f0hqzfcGvF9FA2yl4e54NH3ImMlR8Q5W4cN/DfDEx28jQdAXcjaeUHBLoRhzz5VQYme3mcI/LtSN7KD0g1il1f2QLmJbtZnD32fZC68iPCXcbaeb6Mecl+Hijp9iV95R884zfcibD1TEuOYImSbl9uU/ldbD6q/JEsUeLtiyo/svkwKzmERUq8fVHlRzYfZiWHsEiJty+q/MDGo8ofyiIl376o8gMbD6OSg1ioBNwVVX5g02FSchALlYC7osqr8eewVEm4K6q8Kn8OS5WEu6LKq/LnsFRJuCuqvCp/DkuVhLuiynvjVfmjWapE3BVVXv/In8NiJeKuqPKq/DksViLuiiqvzp/DUiXhrqjyqvw5LFUS7ooqr8qfw1Il4a6o8lRenT+YhUrCXVHlBzYdJiUHsVAJuCuq/MCmo84fyzIl4K6o8gObjjp/LIuUgLuiyo9sPKr8oSxS8u2KKm9sPur8kSxR4u2KKu9sQCr9gSxP0u2KKu9sQAPmJbtZnKTbFVUeNqEBA5O9LE3C7Yoq/2AjGjEy2ceyJNuuqPIvNqQBM5NdLEqS7YoqP2FTGjE12c6DJNiuqPJTPqcBc5PNLEZi7Ysq/84mNWJyspGFSKh9UeU/2KgMs5NNLEIy7Ysq/4cNyzA92cACJNG+qPJ/2bQc85NWHh+B9kWV/8YHZhihtLHsSLMzqvx3NjLDDKWJRUeWnVHl59jQBsxQWnh0JNkZVX6Wj02V38KSI8feqPKzbGxq/CYWHTn2RpWfZWNjhNLEolPl07GxMUNpYtERY3dU+Vk2N2YoLSw5VT4fmxtDlBaWnCqfj82NIUoDC67fYqnys2xwTFHiLLeOe6XKz7LJMUaJs9xU+ZRsdMxRoiy1nmulys+z2TFIibLUVPmcbHYMUoIstK5bpcrPs+ExSYmxzPoulSo/z6bHKCXEIlPl0/LxMUwJ8MQ675Qqv8DmxzRlneXVe+NV+SU2QMaZ3BUfYnF133hVfolNkHnmZl8y4OcZeEL/hVLll9gMGWlq9iHg0sE4PEGfVPklNkRmmpp9yAtXj8O5GRqvyi+yKTLV1OxD3nDjGJyZovGq/CKfI3NNzD/D/nOKu3txWo7Cq/IrbJJM9hAHHxdjX2GN5K8JlmzGMSOPrHuq/CKfJdM9wMHHBdlTH5XkxxTLNuCAkZ+egCq/zKbJfA9gx11eep76nDU/37G2ARsdRyegyi/zeTLj/fy4qzvPQ99mzaVP7FjD6icOTUGVX2ETZdD72WkDfl6Eh37OmqtfsfMbVrxwXBaq/AqfKtPezU/rpPIj7uzAQXmo8mt8sJRnLz9swO9r8MzZWXN7C07IRJVf46OlPDv5WYYrV+CJK/1kTQM2ZqPKr/L5Up9d/CTHpSvwxFBHWbmK5Rmp8ut8yPRnBz/ngYsX4IEtPWXDVyxJS5Vf55OmP9v5MS9cPh2PG/A9YWy7WUdU+QAfPA3ayg+Z4sbZeNqAzwljmypfkE+eCm3iJ3zg3sl42ICvCWObKl8Qo6dDG3DAJ+6eikeN+JowtqnyFTF7WtSM7f9eJfL/4vap/EmGjwljmypfEsOnRo3YPGTNH8+/WHAif47jW8LYpsrXxPQpUgt2WtL8+az8+Z3nOcY+pAHbVPmiGD9NimOfB83f4w/+YtVZeIqzV2jANlW+KuZPl4LY9KgNP+wXf7LwJDzE2Ss0YJsqXxXzbykpGwYfZ0x/sPYcPMPZUxuwTZUvivEb+rSCxQOO+CwRP1h+Bp4Af2oc21T5ohi/o1FLWDnihAEXHlf4xY7j+fGbq8s2Vb4oxv9AqeawasR+w6XnNX6y6XB+uir/RpWPYvwT9Oov7ht2g4uvq/xm48H87O3VZdvNOnKzzzkR43/9mzmiW1Pccex94vLkOhdOKb2fvL26bLtZR272OSdi/JMGPVCw97KP2DnBjekdrpzQeT938gh/YBzbmvf17WafcyLGb4Hx5zLb9YFbb/e4dHzn7dTpE+xxDdjWvK9vN/ucEzF+AuPHPF/2iZvvd7l2dOf90OkD7GkN2Na8r283+5wTMf5XYPz+hhV/cf9zAVfp6jH8yOnxzbNmW/O+vt3sc07E+N8C49Ibbn3Hmj+LuExbj8CJ09ObZ8225n19u9nnnIjxfwmMG5EoWfl3KdePK70f9364/4pjW/O+vt3sc07E+PcFxhlfDuHGUZ33wz7O5mfc1n1du9nnnIjx7wuMM74dwp1jSu8ncfLuyt+rJPf6mjMx/X2Bccb3Q7h3QOc5iHNV+Tf3+pozMf19gXHGzCHc3N15juHUHa/OvnuV5F5fcyamvy8wzpg7hLs7S88ZnDngQvurs+9eJbnX15yJ6e8LjDPmD+H+ntJzAAeOuNL+6uy7V0nu9TVnYvr7AuOMhUNYMKDBrdjNcYZL7a/OvnuV5F5fcyamvy8wzlg6hBUDOtyEre8P4Fr7q7PvXiW519ecienvC4wzlg9hzYAex7Hv43wutr86++5Vknt9zZmY/r7AOGPtEFaN6HIIW/4cz9X2V2ffvUpyr685E9PfFxhnrB/CuhF9Xsf6v6dzuf3V2Xevktzra87E9HcGxiHrp7DOUOllrP12NDfaX5199yrJvb7mTEx/Z2AcEjmFlaDYM1g0YvcbbjW/O9vuVZJ7fc2ZmP7OwDgkdgprH6j3H9w27PzAzeZ3Z9u9SnKvrzkT098ZGIeET2H5Ey1/4vIDuz5xt/nd2Xavktzra87E9HcGxiENp7Ahgh1/cb/53dl2r5Lc62vOxPR3BsYhbaewZxlrv2JJ87uz7V4ludfXnInp7wyMQzaXbw7LZrBo81P5eQ/3+pozMf2dgXHIplPY+hf357Gu+alsu1dJ7vU1Z2L6OwPjkM2nsP2JyytY3PxUtt2rJPf6mjMx/Z2BccjFsfNQVX6kykcxfVU+O1U+iumXqvxjI7/uQZWPYvolK3+rlqjyUQxflc9OlY9i+Kp8dqp8FMNX5bNT5aMYviqfnSofxfBV+exU+SiGr8pnp8pHMXxVPjtVPorhq/LZqfJRDF+Vz06Vj2L4qnx2qnwUw1fls1Ploxi+Kp+dKh/F8FX57FT5KIavymenykcxfFU+O1U+iuGr8tmp8lEMX5XPTpWPYviqfHaqfBTDV+WzU+WjGL4qn50qH8XwVfnsVPkohl+r8o+d/LoFVT6K4des/J1qospHMfu9gXHKtbnzTFV+pMpHMXtVPjtVPorZq/LZqfJRzF6Vz06Vj2L2qnx2qnwUs1fls1Plo5h9yspvfyr7VPmKmL0qn50qH8XsVfnsVPkoZq/KZ6fKRzF7VT47VT6K2avy2anyUcxelc9OlY9i9qp8dqp8FLNX5bNT5aOYvSqfnSofxexV+exU+Shmr8pnp8pHMXtVPjtVPorZq/LZqfJRzL5Y5R87+XUHqnwUsy9a+Rv1RJWPYvSqfHaqfBSjV+WzU+WjGL0qn50qH8XoVfnsVPkoRq/KZ6fKRzF6VT47VT6K0avy2anyUYxelc9OlY9i9Kp8dqp8FKNX5bNT5aMYvSqfnSofxehV+exU+ShGr8pnp8pHMXpVPjtVPorR7w6MY64Nnmeq8gNVPorRq/LZqfJRjF6Vz06Vj2L0qnx2qnwUo1fls1Ploxi9Kp+dKh/F6FX57FT5KEZfrfKPrfy6AVU+itFXrfx9iqLKRzF5VT47VT6Kyavy2anyUUw+Z+V3PJWNqnw9TF6Vz06Vj2Lyqnx2qnwUk1fls1Plo5i8Kp+dKh/F5FX57FT5KCavymenykcxeVU+O1U+ismr8tmp8lFMXpXPTpWPYvKqfHaqfBSTV+WzU+WjmLwqn50qH8XkVfnsVPkoJq/KZ6fKRzF5VT47VT6Kyavy2anyUUxelc9OlY9i8uUq/9jKr/xU+SgmX7byt2mKKh/F4FX57FT5KAavymenykcxeFU+O1U+isGr8tmp8lEMXpXPTpWPYvD7A+Oca5Pnmaq8Kh/H4FX57FT5KAavymenykcxeFU+O1U+isGr8tmp8lEMXpXPTpWPYvCqfHaqfBSDV+WzU+UvR4NU+R9R5Wugtqq8Kl8FtVXlVfkqqK0qr8rLKhqvyovkpMpLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqrwUo8pLMaq8FKPKSzGqvBSjyksxqryU8t9//wdNTFW25qtYrQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/bird.964af789.png\";","module.exports = __webpack_public_path__ + \"static/media/Ram.9cd9a94b.png\";","module.exports = __webpack_public_path__ + \"static/media/Sheep.711f4666.png\";","module.exports = __webpack_public_path__ + \"static/media/Sheep2.59cefe38.png\";","module.exports = __webpack_public_path__ + \"static/media/Wizard.3691ff2d.png\";","module.exports = __webpack_public_path__ + \"static/media/Blue Woman.9b4329ca.png\";","module.exports = __webpack_public_path__ + \"static/media/White Woman.beecb9f4.png\";","module.exports = __webpack_public_path__ + \"static/media/Heart Woman.8fa06750.png\";","module.exports = __webpack_public_path__ + \"static/media/Lizardfolk.7c7d2fde.png\";","module.exports = __webpack_public_path__ + \"static/media/Screaming.afa347b0.png\";","module.exports = __webpack_public_path__ + \"static/media/Skeletal.8a2e243e.png\";","module.exports = __webpack_public_path__ + \"static/media/Specter.75c7e9e6.png\";","module.exports = __webpack_public_path__ + \"static/media/Wraith.628cf9f9.png\";","module.exports = __webpack_public_path__ + \"static/media/Wraith2.1484f2e0.png\";","import {\r\n  SET_API,\r\n  ADD_ARTICLE,\r\n  LOGIN,\r\n  LOGOUT,\r\n  REDIRECT_TO,\r\n  SET_WORLDS,\r\n  SET_PUBLIC_WORLDS,\r\n  SET_TEMPLATES,\r\n  SET_ALL_USERS,\r\n  ADD_WORLD,\r\n  ADD_AND_SELECT_WORLD,\r\n  UPDATE_WORLD,\r\n  UPDATE_PUBLIC_WORLD_COLLAB,\r\n  SELECT_WORLD,\r\n  SET_ATTRIBUTES,\r\n  ADD_ATTRIBUTES,\r\n  UPDATE_ATTRIBUTES,\r\n  SET_TYPES,\r\n  ADD_TYPE,\r\n  SET_THINGS,\r\n  ADD_THING,\r\n  UPDATE_TYPE,\r\n  UPDATE_SELECTED_TYPE,\r\n  UPDATE_THING,\r\n  UPDATE_SELECTED_THING,\r\n  LOAD_FROM_STORAGE,\r\n  TOGGLE_MENU,\r\n  TOGGLE_LOGIN,\r\n  NOT_FROM_LOGIN,\r\n  SET_FOLLOWING_WORLDS,\r\n  SET_WIDTH,\r\n  SET_HEIGHT,\r\n  UPDATE_INDEX_EXPANDED_PANEL,\r\n  SET_VIEWS\r\n} from \"../constants/actionTypes\";\r\n\r\nexport function updateIndexExpandedPanel(payload) {\r\n  return { type: UPDATE_INDEX_EXPANDED_PANEL, payload };\r\n}\r\nexport function setAPI(payload) {\r\n  return { type: SET_API, payload };\r\n}\r\nexport function addArticle(payload) {\r\n  return { type: ADD_ARTICLE, payload };\r\n}\r\nexport function userLogin(payload) {\r\n  return { type: LOGIN, payload };\r\n}\r\nexport function logout(payload) {\r\n  return { type: LOGOUT, payload };\r\n}\r\nexport function redirectTo(payload) {\r\n  return { type: REDIRECT_TO, payload };\r\n}\r\nexport function setWorlds(payload) {\r\n  return { type: SET_WORLDS, payload };\r\n}\r\nexport function setTemplates(payload) {\r\n  return { type: SET_TEMPLATES, payload };\r\n}\r\nexport function setAllUsers(payload) {\r\n  return { type: SET_ALL_USERS, payload };\r\n}\r\nexport function addWorld(payload) {\r\n  return { type: ADD_WORLD, payload };\r\n}\r\nexport function addAndSelectWorld(payload) {\r\n  return { type: ADD_AND_SELECT_WORLD, payload };\r\n}\r\nexport function updateWorld(payload) {\r\n  return { type: UPDATE_WORLD, payload };\r\n}\r\nexport function updatePublicWorldForCollab(payload) {\r\n  return { type: UPDATE_PUBLIC_WORLD_COLLAB, payload };\r\n}\r\nexport function setPublicWorlds(payload) {\r\n  return { type: SET_PUBLIC_WORLDS, payload };\r\n}\r\nexport function selectWorld(payload) {\r\n  return { type: SELECT_WORLD, payload };\r\n}\r\nexport function setAttributes(payload) {\r\n  return { type: SET_ATTRIBUTES, payload };\r\n}\r\nexport function addAttributes(payload) {\r\n  return { type: ADD_ATTRIBUTES, payload };\r\n}\r\nexport function updateAttributes(payload) {\r\n  return { type: UPDATE_ATTRIBUTES, payload };\r\n}\r\nexport function setTypes(payload) {\r\n  return { type: SET_TYPES, payload };\r\n}\r\nexport function addType(payload) {\r\n  return { type: ADD_TYPE, payload };\r\n}\r\nexport function setThings(payload) {\r\n  return { type: SET_THINGS, payload };\r\n}\r\nexport function addThing(payload) {\r\n  return { type: ADD_THING, payload };\r\n}\r\nexport function updateType(payload) {\r\n  return { type: UPDATE_TYPE, payload };\r\n}\r\nexport function updateSelectedType(payload) {\r\n  return { type: UPDATE_SELECTED_TYPE, payload };\r\n}\r\nexport function updateThing(payload) {\r\n  return { type: UPDATE_THING, payload };\r\n}\r\nexport function updateSelectedThing(payload) {\r\n  return { type: UPDATE_SELECTED_THING, payload };\r\n}\r\nexport function loadFromStorage(payload) {\r\n  return { type: LOAD_FROM_STORAGE, payload };\r\n}\r\nexport function toggleMenu(payload) {\r\n  return { type: TOGGLE_MENU, payload };\r\n}\r\nexport function toggleLogin(payload) {\r\n  return { type: TOGGLE_LOGIN, payload };\r\n}\r\nexport function notFromLogin(payload) {\r\n  return { type: NOT_FROM_LOGIN, payload };\r\n}\r\nexport function setFollowingWorlds(payload) {\r\n  return { type: SET_FOLLOWING_WORLDS, payload };\r\n}\r\nexport function setWidth(payload) {\r\n  return { type: SET_WIDTH, payload };\r\n}\r\nexport function setHeight(payload) {\r\n  return { type: SET_HEIGHT, payload };\r\n}\r\nexport function setViews(payload) {\r\n  return { type: SET_VIEWS, payload };\r\n}\r\n","\r\nexport const UPDATE_INDEX_EXPANDED_PANEL = \"UPDATE_INDEX_EXPANDED_PANEL\";\r\nexport const SET_API = \"SET_API\";\r\nexport const ADD_ARTICLE = \"ADD_ARTICLE\";\r\nexport const LOGIN = \"LOGIN\";\r\nexport const LOGOUT = \"LOGOUT\";\r\nexport const REDIRECT_TO = \"REDIRECT_TO\";\r\nexport const SET_WORLDS = \"SET_WORLDS\";\r\nexport const SET_PUBLIC_WORLDS = \"SET_PUBLIC_WORLDS\";\r\nexport const SET_TEMPLATES = \"SET_TEMPLATES\";\r\nexport const SET_ALL_USERS = \"SET_ALL_USERS\";\r\nexport const ADD_WORLD = \"ADD_WORLD\";\r\nexport const ADD_AND_SELECT_WORLD = \"ADD_AND_SELECT_WORLD\";\r\nexport const UPDATE_WORLD = \"UPDATE_WORLD\";\r\nexport const UPDATE_PUBLIC_WORLD_COLLAB = \"UPDATE_PUBLIC_WORLD_COLLAB\";\r\nexport const SELECT_WORLD = \"SELECT_WORLD\";\r\nexport const SET_TYPES = \"SET_TYPES\";\r\nexport const ADD_TYPE = \"ADD_TYPE\";\r\nexport const SET_THINGS = \"SET_THINGS\";\r\nexport const ADD_THING = \"ADD_THING\";\r\nexport const UPDATE_TYPE = \"UPDATE_TYPE\";\r\n// export const UPDATE_ATTRIBUTES_ARR = \"UPDATE_ATTRIBUTES_ARR\";\r\nexport const SET_ATTRIBUTES = \"SET_ATTRIBUTES\";\r\nexport const ADD_ATTRIBUTES = \"ADD_ATTRIBUTES\";\r\nexport const UPDATE_ATTRIBUTES = \"UPDATE_ATTRIBUTES\";\r\nexport const UPDATE_SELECTED_TYPE = \"UPDATE_SELECTED_TYPE\";\r\nexport const UPDATE_THING = \"UPDATE_THING\";\r\nexport const UPDATE_SELECTED_THING = \"UPDATE_SELECTED_THING\";\r\nexport const LOAD_FROM_STORAGE = \"LOAD_FROM_STORAGE\";\r\nexport const TOGGLE_MENU = \"TOGGLE_MENU\";\r\nexport const TOGGLE_LOGIN = \"TOGGLE_LOGIN\";\r\nexport const NOT_FROM_LOGIN = \"NOT_FROM_LOGIN\";\r\nexport const SET_FOLLOWING_WORLDS = \"SET_FOLLOWING_WORLDS\";\r\nexport const SET_WIDTH = \"SET_WIDTH\";\r\nexport const SET_HEIGHT = \"SET_HEIGHT\";\r\nexport const SET_VIEWS = \"SET_VIEWS\";\r\n","\r\n// This is our special type of Error that represents\r\n// when a request got a 401 Unauthorized response\r\nfunction UnauthorizedError(message) {\r\n  this.name = \"UnauthorizedError\";\r\n  this.message = message;\r\n}\r\nUnauthorizedError.prototype = new Error();\r\n\r\nvar API = (function() {\r\n  var instance;\r\n\r\n  function createInstance() {\r\n    var api = new APIClass();\r\n    return api;\r\n  }\r\n\r\n  return {\r\n    getInstance: function() {\r\n      if (!instance) {\r\n        instance = createInstance();\r\n      }\r\n      return instance;\r\n    }\r\n  };\r\n})();\r\n\r\nclass APIClass {\r\n  constructor() {\r\n    this.real = true;\r\n  }\r\n\r\n  logErrorReason = reason => {\r\n    // log the error reason but keep the rejection\r\n    console.log(\"Response error reason:\", reason);\r\n    return Promise.reject(reason);\r\n  };\r\n\r\n  checkStatus = response => {\r\n    if (response.status >= 200 && response.status < 300) {\r\n      return response;\r\n    } else if (response.status === 401) {\r\n      var unauthorizedError = new UnauthorizedError(response.statusText);\r\n      unauthorizedError.response = response;\r\n      return Promise.reject(unauthorizedError);\r\n    } else {\r\n      var error = new Error(response.statusText);\r\n      error.response = response;\r\n      return Promise.reject(error);\r\n    }\r\n  };\r\n\r\n  getVersion = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\"/version\");\r\n      return this.processResponse(response);\r\n    } else {\r\n      return { version: \"0.0.1\" };\r\n    }\r\n  };\r\n\r\n  // User\r\n  getAllUsers = async (refresh = false) => {\r\n    if (refresh) {\r\n      return this.getAllUsersFromAPI();\r\n    }\r\n    else {\r\n      const data = this.getSessionData(\"allUsers\");\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getAllUsersFromAPI();\r\n      }\r\n    }\r\n  };\r\n  getAllUsersFromAPI = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\"/api/user/getAllUsers\");\r\n      const res = this.processResponse(response, null, \"allUsers\");\r\n      return res;\r\n    } else {\r\n      return [\r\n        { _id: -1, OwnerID: -1, Name: \"Alice in Wonderland\", Public: true }\r\n      ];\r\n    }\r\n  };\r\n\r\n  login = async (user, stayLoggedIn) => {\r\n    if (this.real) {\r\n      if (stayLoggedIn) {\r\n        const sessionObj = {\r\n          body: user,\r\n          expiresAt: \"never\"\r\n        };\r\n        localStorage.setItem(\"loginUser\", JSON.stringify(sessionObj));\r\n      }\r\n      const response = await this.postData(\"/api/user/login\", user);\r\n      return this.processResponse(response, null, \"user\", stayLoggedIn);\r\n    } else {\r\n      return {\r\n        _id: \"-1\",\r\n        email: \"fake@fakemail.com\",\r\n        username: \"Liar Liar\"\r\n      };\r\n    }\r\n  }\r\n\r\n  logout = async user => {\r\n    if (this.real) {\r\n      await this.postData(\"/api/user/logout\");\r\n      localStorage.removeItem(\"user\");\r\n    }\r\n  };\r\n\r\n  register = async user => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/user/register\", user);\r\n      return this.processResponse(response);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  confirmEmail = async (code) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/user/confirmEmail\", {code});\r\n      return this.processResponse(response);\r\n    } else {\r\n      return {\r\n        _id: \"-1\",\r\n        email: \"fake@fakemail.com\",\r\n        username: \"Liar Liar\"\r\n      };\r\n    }\r\n  };\r\n\r\n  sendReset = async user => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/user/sendReset\", user);\r\n      return this.processResponse(response);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  checkResetPasswordCode = async code => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/user/checkResetPasswordCode\", {code});\r\n      return this.processResponse(response);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  resetPassword = async (code, newPassword) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/user/resetPassword\", {code, newPassword});\r\n      return this.processResponse(response);\r\n    } else {\r\n      return {\r\n        _id: \"-1\",\r\n        email: \"fake@fakemail.com\",\r\n        username: \"Liar Liar\"\r\n      };\r\n    }\r\n  };\r\n\r\n  emailTest = async user => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/user/emailTest\", user);\r\n      return this.processResponse(response);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  updateUser = async user => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/user/update\", user);\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/user/update\", user);\r\n        return this.processResponse(response, null);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return {\r\n        _id: \"-1\",\r\n        email: \"fake@fakemail.com\",\r\n        username: \"Liar Liar\"\r\n      };\r\n    }\r\n  };\r\n\r\n  // Templates\r\n  createTemplate = async (template) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/createTemplate\", { template: template });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/createTemplate\", { template: template });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  getTemplates = async (refresh = false) => {\r\n    if (refresh) {\r\n      return this.getTemplatesFromAPI();\r\n    }\r\n    else {\r\n      const data = this.getSessionData(\"templates\");\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getTemplatesFromAPI();\r\n      }\r\n    }\r\n  }\r\n  getTemplatesFromAPI = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getTemplates/`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getTemplates/`\r\n        );\r\n        return this.processResponse(response, null, `templates`);\r\n      }\r\n      return this.processResponse(response, retry, `templates`);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Alice\" }];\r\n    }\r\n  }\r\n\r\n  // World\r\n  getWorlds = async (refresh = false) => {\r\n    try {\r\n      const publicWorlds = await this.getPublicWorlds(refresh);\r\n      const userWorlds = await this.getWorldsForUser(refresh);\r\n      const templates = await this.getTemplates(refresh);\r\n      const allUsers = await this.getAllUsers(refresh);\r\n\r\n      return {\r\n        publicWorlds,\r\n        userWorlds,\r\n        templates,\r\n        allUsers\r\n      };\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  getWorldsForUser = async (refresh = false) => {\r\n    if (refresh) {\r\n      return this.getWorldsForUserFromAPI();\r\n    }\r\n    else {\r\n      const data = this.getSessionData(\"worlds\");\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getWorldsForUserFromAPI();\r\n      }\r\n    }\r\n  };\r\n  getWorldsForUserFromAPI = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(`/api/world/getWorldsForUser`);\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(`/api/world/getWorldsForUser`);\r\n        return this.processResponse(response, null, \"worlds\");\r\n      }\r\n      const res = this.processResponse(response, retry, \"worlds\");\r\n      return res;\r\n    } else {\r\n      return [\r\n        { _id: -1, OwnerID: -1, Name: \"Alice in Wonderland\", Public: true }\r\n      ];\r\n    }\r\n  };\r\n\r\n  getPublicWorlds = async (refresh = false) => {\r\n    if (refresh) {\r\n      return this.getPublicWorldsFromAPI();\r\n    }\r\n    else {\r\n      const data = this.getSessionData(\"publicWorlds\");\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getPublicWorldsFromAPI();\r\n      }\r\n    }\r\n  };\r\n  getPublicWorldsFromAPI = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\"/api/world/getPublicWorlds\");\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\"/api/world/getPublicWorlds\");\r\n        return this.processResponse(response, null, \"publicWorlds\");\r\n      }\r\n      return this.processResponse(response, retry, \"publicWorlds\");\r\n    } else {\r\n      return [\r\n        { _id: -1, OwnerID: -1, Name: \"Alice in Wonderland\", Public: true }\r\n      ];\r\n    }\r\n  };\r\n\r\n  getWorld = async (worldID, refresh = false) => {\r\n    try {\r\n      let attributes = await this.getAttributesForWorld(worldID, refresh);\r\n      attributes = attributes.attributes;\r\n      let types = await this.getTypesForWorld(worldID, refresh);\r\n      // types = types.types;\r\n      let things = await this.getThingsForWorld(worldID, refresh);\r\n      // things = things.things;\r\n\r\n      // Now connect them all as is appropriate.\r\n      const attributesByID = {};\r\n      const attributesByName = {};\r\n      attributes.forEach(attribute => {\r\n        attribute.TypeIDs = [];\r\n        attributesByID[attribute._id] = attribute;\r\n        attributesByName[attribute.Name] = attribute;\r\n      });\r\n      types.forEach(t=> {\r\n        t.Supers = [];\r\n        t.SuperIDs.forEach(sID=> {\r\n          t.Supers = t.Supers.concat(types.filter(t2=>t2._id === sID));\r\n        });\r\n        t.AttributesArr = [];\r\n        t.Attributes.forEach(a => {\r\n          const attr = attributesByID[a.attrID];\r\n          if (attr === undefined) {\r\n          }\r\n          else {\r\n            attr.TypeIDs.push(t._id);\r\n            t.AttributesArr.push({\r\n              index: t.AttributesArr.length,\r\n              Name: attr.Name.trim(),\r\n              AttributeType: attr.AttributeType,\r\n              Options: attr.Options,\r\n              DefinedType: attr.DefinedType,\r\n              ListType: attr.ListType,\r\n              attrID: a.attrID,\r\n              TypeIDs: attr.TypeIDs\r\n            });\r\n          }\r\n        });\r\n        const defHash = {};\r\n        if (t.Defaults !== undefined) {\r\n          t.Defaults.forEach(def => {\r\n            defHash[def.attrID] = def;\r\n          });\r\n        }\r\n        t.DefaultsHash = defHash;\r\n      });\r\n      things.forEach(t=> {\r\n        t.Types = [];\r\n        t.TypeIDs.forEach(tID=> {\r\n          t.Types = t.Types.concat(types.filter(t2=>t2._id === tID));\r\n        });\r\n      });\r\n      return {\r\n        attributes,\r\n        attributesByID,\r\n        attributesByName,\r\n        types,\r\n        things\r\n      };\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  getWorldByTypeID = async (typeID, refresh = false) => {\r\n    try {\r\n      let worldID = await this.getWorldIDByTypeID(typeID);\r\n      worldID = worldID.worldID;\r\n      let attributes = await this.getAttributesForWorld(worldID, refresh);\r\n      attributes = attributes.attributes;\r\n      let types = await this.getTypesForWorld(worldID, refresh);\r\n      // types = types.types;\r\n      let things = await this.getThingsForWorld(worldID, refresh);\r\n      // things = things.things;\r\n\r\n      // Now connect them all as is appropriate.\r\n      const attributesByID = {};\r\n      const attributesByName = {};\r\n      attributes.forEach(attribute => {\r\n        attribute.TypeIDs = [];\r\n        attributesByID[attribute._id] = attribute;\r\n        attributesByName[attribute.Name] = attribute;\r\n      });\r\n      types.forEach(t=> {\r\n        t.Supers = [];\r\n        t.SuperIDs.forEach(sID=> {\r\n          t.Supers = t.Supers.concat(types.filter(t2=>t2._id === sID));\r\n        });\r\n        t.AttributesArr = [];\r\n        t.Attributes.forEach(a => {\r\n          const attr = attributesByID[a.attrID];\r\n          if (attr === undefined) {\r\n          }\r\n          else {\r\n            attr.TypeIDs.push(t._id);\r\n            t.AttributesArr.push({\r\n              index: t.AttributesArr.length,\r\n              Name: attr.Name.trim(),\r\n              AttributeType: attr.AttributeType,\r\n              Options: attr.Options,\r\n              DefinedType: attr.DefinedType,\r\n              ListType: attr.ListType,\r\n              attrID: a.attrID,\r\n              TypeIDs: attr.TypeIDs\r\n            });\r\n          }\r\n        });\r\n        const defHash = {};\r\n        if (t.Defaults !== undefined) {\r\n          t.Defaults.forEach(def => {\r\n            defHash[def.attrID] = def;\r\n          });\r\n        }\r\n        t.DefaultsHash = defHash;\r\n      });\r\n      things.forEach(t=> {\r\n        t.Types = [];\r\n        t.TypeIDs.forEach(tID=> {\r\n          t.Types = t.Types.concat(types.filter(t2=>t2._id === tID));\r\n        });\r\n      });\r\n      return {\r\n        worldID,\r\n        attributes,\r\n        attributesByID,\r\n        attributesByName,\r\n        types,\r\n        things\r\n      };\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  getWorldIDByTypeID = async (typeID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getWorldIDByTypeID/${typeID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getWorldIDByTypeID/${typeID}`\r\n        );\r\n        return this.processResponse(response, null);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Character\" }];\r\n    }\r\n  };\r\n\r\n  getWorldByThingID = async (thingID, refresh = false) => {\r\n    try {\r\n      let worldID = await this.getWorldIDByThingID(thingID);\r\n      worldID = worldID.worldID;\r\n      let attributes = await this.getAttributesForWorld(worldID, refresh);\r\n      attributes = attributes.attributes;\r\n      let types = await this.getTypesForWorld(worldID, refresh);\r\n      // types = types.types;\r\n      let things = await this.getThingsForWorld(worldID, refresh);\r\n      // things = things.things;\r\n\r\n      // Now connect them all as is appropriate.\r\n      const attributesByID = {};\r\n      const attributesByName = {};\r\n      attributes.forEach(attribute => {\r\n        attribute.TypeIDs = [];\r\n        attributesByID[attribute._id] = attribute;\r\n        attributesByName[attribute.Name] = attribute;\r\n      });\r\n      types.forEach(t=> {\r\n        t.Supers = [];\r\n        t.SuperIDs.forEach(sID=> {\r\n          t.Supers = t.Supers.concat(types.filter(t2=>t2._id === sID));\r\n        });\r\n        t.AttributesArr = [];\r\n        t.Attributes.forEach(a => {\r\n          const attr = attributesByID[a.attrID];\r\n          if (attr === undefined) {\r\n          }\r\n          else {\r\n            attr.TypeIDs.push(t._id);\r\n            t.AttributesArr.push({\r\n              index: t.AttributesArr.length,\r\n              Name: attr.Name.trim(),\r\n              AttributeType: attr.AttributeType,\r\n              Options: attr.Options,\r\n              DefinedType: attr.DefinedType,\r\n              ListType: attr.ListType,\r\n              attrID: a.attrID,\r\n              TypeIDs: attr.TypeIDs\r\n            });\r\n          }\r\n        });\r\n        const defHash = {};\r\n        if (t.Defaults !== undefined) {\r\n          t.Defaults.forEach(def => {\r\n            defHash[def.attrID] = def;\r\n          });\r\n        }\r\n        t.DefaultsHash = defHash;\r\n      });\r\n      things.forEach(t=> {\r\n        t.Types = [];\r\n        t.TypeIDs.forEach(tID=> {\r\n          t.Types = t.Types.concat(types.filter(t2=>t2._id === tID));\r\n        });\r\n      });\r\n      return {\r\n        worldID,\r\n        attributes,\r\n        attributesByID,\r\n        attributesByName,\r\n        types,\r\n        things\r\n      };\r\n    }\r\n    catch (error) {\r\n      console.log(error);\r\n      return { error };\r\n    }\r\n  };\r\n\r\n  getWorldIDByThingID = async (thingID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getWorldIDByThingID/${thingID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getWorldIDByThingID/${thingID}`\r\n        );\r\n        return this.processResponse(response, null);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Character\" }];\r\n    }\r\n  };\r\n\r\n  createWorld = async (world) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/createWorld\", { world: world });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/createWorld\", { world: world });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteWorld = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/world/deleteWorld\", { worldID: worldID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.deleteData(\"/api/world/deleteWorld\", { worldID: worldID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateWorld = async (world) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/updateWorld\", { world: world });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/updateWorld\", { world: world });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  generateCollabLink = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/generateCollabLink\", { worldID: worldID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/generateCollabLink\", { worldID: worldID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  addNewCollaborator = async (worldID, userID, email) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/addNewCollaborator\", { worldID, userID, email });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/addNewCollaborator\", { worldID, userID, email });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  emailCollaborator = async (worldID, email) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/emailCollaborator\", { worldID, email });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/emailCollaborator\", { worldID, email });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  deleteCollab = async (worldID, collabID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/world/deleteCollab\", { worldID, collabID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.deleteData(\"/api/world/deleteCollab\", { worldID, collabID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateCollaboratorPermission = async (worldID, collabID, editPermission) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/updateCollaboratorPermission\", { worldID, collabID, editPermission });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/updateCollaboratorPermission\", { worldID, collabID, editPermission });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  checkCollabID = async (worldID, collabID) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/checkCollabID\", {worldID, collabID});\r\n      return this.processResponse(response);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  requestToCollaborate = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/requestToCollaborate\", { worldID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/requestToCollaborate\", { worldID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  declineCollabInvite = async (worldID, collabID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/world/declineCollabInvite\", { worldID, collabID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.deleteData(\"/api/world/declineCollabInvite\", { worldID, collabID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  acceptCollabInvite = async (worldID, collabID) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/acceptCollabInvite\", { worldID, collabID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/acceptCollabInvite\", { worldID, collabID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  acceptCollabRequest = async (worldID, collabID) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/acceptCollabRequest\", { worldID, collabID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/acceptCollabRequest\", { worldID, collabID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  selectWorld = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/selectWorld\", { worldID: worldID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/selectWorld\", { worldID: worldID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  // Attribute\r\n  getAttributesForWorld = async (worldID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getAttributesForWorldFromAPI(worldID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`attributes_${worldID}`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getAttributesForWorldFromAPI(worldID);\r\n      }\r\n    }\r\n  };\r\n  getAttributesForWorldFromAPI = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getAttributesForWorld/${worldID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getAttributesForWorld/${worldID}`\r\n        );\r\n        return this.processResponse(response, null, `attributes_${worldID}`);\r\n      }\r\n      return this.processResponse(response, retry, `attributes_${worldID}`);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Character\" }];\r\n    }\r\n  };\r\n\r\n  getAttribute = async (worldID, attrID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getAttribute/${worldID}/${attrID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getAttribute/${worldID}/${attrID}`\r\n        );\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return {\r\n        _id: -1,\r\n        worldID: -1,\r\n        Name: \"Character\",\r\n        Description: \"\",\r\n        // AttributesArr: {},\r\n        Attributes: {}\r\n      };\r\n    }\r\n  };\r\n\r\n  createAttribute = async (attribute) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/createAttribute\", { attribute: attribute });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/createAttribute\", { attribute: attribute });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  // deleteAttribute = async (worldID, attrID) => {\r\n  //   if (this.real) {\r\n  //     const response = await this.deleteData(\"/api/world/deleteAttribute\", { worldID: worldID, attrID: attrID });\r\n  //     return this.processResponse(response);\r\n  //   } else {\r\n  //     return \"success\";\r\n  //   }\r\n  // };\r\n\r\n  // updateAttribute = async (attribute) => {\r\n  //   if (this.real) {\r\n  //     const response = await this.patchData(\"/api/world/updateAttribute\", { attribute: attribute });\r\n  //     return this.processResponse(response);\r\n  //   } else {\r\n  //     return \"success\";\r\n  //   }\r\n  // };\r\n\r\n  upsertAttributes = async (worldID, attributes) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/upsertAttributes\", { worldID, attributes: attributes });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/upsertAttributes\", { worldID, attributes: attributes });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  // Type\r\n  getTypesForWorld = async (worldID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getTypesForWorldFromAPI(worldID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`types_${worldID}`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getTypesForWorldFromAPI(worldID);\r\n      }\r\n    }\r\n  };\r\n  getTypesForWorldFromAPI = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getTypesForWorld/${worldID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getTypesForWorld/${worldID}`\r\n        );\r\n        return this.processResponse(response, null, `types_${worldID}`);\r\n      }\r\n      const data = await this.processResponse(response, retry, `types_${worldID}`);\r\n      return this.cleanEditDT(data.types);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Character\" }];\r\n    }\r\n  };\r\n\r\n  getType = async (worldID, typeID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getType/${worldID}/${typeID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getType/${worldID}/${typeID}`\r\n        );\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return {\r\n        _id: -1,\r\n        worldID: -1,\r\n        Name: \"Character\",\r\n        Description: \"\",\r\n        // AttributesArr: {},\r\n        Attributes: {}\r\n      };\r\n    }\r\n  };\r\n\r\n  createType = async (type) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/createType\", { type: type });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/createType\", { type: type });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteType = async (worldID, typeID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/world/deleteType\", { worldID: worldID, typeID: typeID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.deleteData(\"/api/world/deleteType\", { worldID: worldID, typeID: typeID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateType = async (type) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/updateType\", { type: type });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/updateType\", { type: type });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  // Thing\r\n  getThingsForWorld = async (worldID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getThingsForWorldFromAPI(worldID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`things_${worldID}`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getThingsForWorldFromAPI(worldID);\r\n      }\r\n    }\r\n  };\r\n  getThingsForWorldFromAPI = async (worldID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/world/getThingsForWorld/${worldID}`\r\n      );\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(\r\n          `/api/world/getThingsForWorld/${worldID}`\r\n        );\r\n        return this.processResponse(response, null, `things_${worldID}`);\r\n      }\r\n      const data = await this.processResponse(response, retry, `things_${worldID}`);\r\n      return this.cleanEditDT(data.things);\r\n    } else {\r\n      return [{ _id: -1, worldID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n  cleanEditDT = (list) => {\r\n    list.forEach(t => {\r\n      t.EditDT = Date.parse(t.EditDT);\r\n    });\r\n    return list;\r\n  };\r\n\r\n  getThing = async (worldID, thingID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(`/api/world/getThing/${worldID}/${thingID}`);\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.fetchData(`/api/world/getThing/${worldID}/${thingID}`);\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return {\r\n        _id: -1,\r\n        worldID: -1,\r\n        Types: [-1],\r\n        Name: \"Alice\",\r\n        Description: \"\"\r\n      };\r\n    }\r\n  };\r\n\r\n  createThing = async (thing) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/createThing\", { thing: thing });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/createThing\", { thing: thing });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteThing = async (worldID, thingID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/world/deleteThing\", { worldID: worldID, thingID: thingID });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.deleteData(\"/api/world/deleteThing\", { worldID: worldID, thingID: thingID });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateThing = async (thing) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/updateThing\", { thing: thing });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/updateThing\", { thing: thing });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  // Comments\r\n  getComments = async (worldID, objectType, objectID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(`/api/world/getComments/${worldID}/${objectType}/${objectID}`);\r\n      return this.processResponse(response);\r\n    } else {\r\n      return {\r\n        _id: -1,\r\n        worldID: -1,\r\n        Types: [-1],\r\n        Name: \"Alice\",\r\n        Description: \"\"\r\n      };\r\n    }\r\n  }\r\n\r\n  addComment = async (comment) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/addComment\", { comment });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/addComment\", { comment });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  updateComment = async (comment) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/world/updateComment\", { comment });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.patchData(\"/api/world/updateComment\", { comment });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  // Views\r\n  getViews = async (worldID, userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(`/api/world/getViews/${worldID}/${userID}`);\r\n      const tempViews = await this.processResponse(response);\r\n      tempViews.forEach(v => {\r\n        v.ViewDT = Date.parse(v.ViewDT);\r\n      });\r\n      return tempViews;\r\n    } else {\r\n      return {\r\n        _id: -1,\r\n        worldID: -1,\r\n        Types: [-1],\r\n        Name: \"Alice\",\r\n        Description: \"\"\r\n      };\r\n    }\r\n  }\r\n\r\n  upsertView = async (view) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/world/upsertView\", { view });\r\n      const retry = async () => {\r\n        await this.relogin();\r\n        const response = await this.postData(\"/api/world/upsertView\", { view });\r\n        return this.processResponse(response);\r\n      }\r\n      return this.processResponse(response, retry);\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  // Core API Calls\r\n  fetchData = async (path, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        ...options.headers\r\n      }\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  postData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  putData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  patchData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  deleteData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"DELETE\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  processResponse = async (response, retry = null, sessionName = null, noExpiry = false) => {\r\n    // return this.processResponseProgress(response, retry, sessionName, noExpiry);\r\n    const body = await response.json();\r\n    if (response.status !== 200) { \r\n      throw Error(body.message);\r\n    }\r\n    else if (body.error !== undefined && retry !== null) {\r\n      return retry();\r\n    } \r\n    else {\r\n      if (sessionName !== null) {\r\n        let expiresAt = new Date();\r\n        if (noExpiry) \r\n          expiresAt = \"never\";\r\n        else \r\n          expiresAt.setHours(expiresAt.getHours() + 1);\r\n        const sessionObj = {\r\n          expiresAt,\r\n          body\r\n        };\r\n        localStorage.setItem(sessionName, JSON.stringify(sessionObj));\r\n      }\r\n      return body;\r\n    }\r\n  };\r\n\r\n  processResponseProgress = async (response, retry = null, sessionName = null, noExpiry = false) => {\r\n    const reader = response.body.getReader();\r\n    \r\n    if (response.status !== 200) { \r\n      const body = await response.json();\r\n      throw Error(body.message);\r\n    }\r\n    else {\r\n      // const contentLength = +response.headers.get('Content-Length');\r\n      // console.log(`Content Length: ${contentLength}`);\r\n      let receivedLength = 0; // received that many bytes at the moment\r\n      let chunks = []; // array of received binary chunks (comprises the body)\r\n      let result = null;\r\n      try {\r\n        while(true) {\r\n          const {done, value} = await reader.read();\r\n\r\n          if (done) {\r\n            break;\r\n          }\r\n\r\n          chunks.push(value);\r\n          receivedLength += value.length;\r\n\r\n          // console.log(`Received ${receivedLength} of ${contentLength}`)\r\n        }\r\n\r\n        let chunksAll = new Uint8Array(receivedLength); // (4.1)\r\n        let position = 0;\r\n        for(let chunk of chunks) {\r\n          chunksAll.set(chunk, position); // (4.2)\r\n          position += chunk.length;\r\n        }\r\n        result = new TextDecoder(\"utf-8\").decode(chunksAll);\r\n      } catch (e) {\r\n        return retry();\r\n      }\r\n      if (result === null) {\r\n        return retry();\r\n      } else {\r\n        let finalResult = JSON.parse(result);\r\n        if (sessionName !== null) {\r\n          let expiresAt = new Date();\r\n          if (noExpiry) \r\n            expiresAt = \"never\";\r\n          else \r\n            expiresAt.setHours(expiresAt.getHours() + 1);\r\n          const sessionObj = {\r\n            expiresAt,\r\n            finalResult\r\n          };\r\n          localStorage.setItem(sessionName, JSON.stringify(sessionObj));\r\n        }\r\n        return finalResult;\r\n      }\r\n    }\r\n  };\r\n\r\n  relogin = async () => {\r\n    try {\r\n      const user = this.getSessionData(\"loginUser\");\r\n      if (user !== null) {\r\n        const response = await this.postData(\"/api/user/login\", user);\r\n        this.processResponse(response, null, \"user\", true);\r\n      }\r\n    }\r\n    catch {}\r\n  }\r\n\r\n  getSessionData = (sessionName) => {\r\n    const sessionStr = localStorage.getItem(sessionName);\r\n    if (sessionStr !== null) {\r\n      const sessionObj = JSON.parse(sessionStr);\r\n      if (sessionObj.expiresAt !== undefined && \r\n        (sessionObj.expiresAt === \"never\" || sessionObj.expiresAt > new Date())) {\r\n        return sessionObj.body;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\nexport default API;\r\n","import React from 'react';\r\nimport ReactPlayer from 'react-player'; // npm install react-player --save\r\n// import YouTube from 'react-youtube'; // npm install react-youtube\r\n\r\n// const _onReady = (event) => {\r\n//   // access to player in all event handlers via event.target\r\n//   event.target.pauseVideo();\r\n// }\r\n\r\nexport default function MediaPlayer(props) {\r\n  return (\r\n    <ReactPlayer\r\n      // className='react-player fixed-bottom'\r\n      url= 'https://youtu.be/kksVfoN2bR8'\r\n      width='100%'\r\n      // height='100%'\r\n      // controls = {true}\r\n    />\r\n  );\r\n  // <ReactPlayer url='https://www.youtube.com/watch?v=ysz5S6PUM-U' />;\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\n// import CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\n// import CardMedia from '@material-ui/core/CardMedia'; // Don't forget about this one.  It looks like it could be useful.\r\n// import Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MediaPlayer from './MediaPlayer';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    // maxWidth: 345,\r\n  },\r\n});\r\n\r\nexport default function MediaCard(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea>\r\n        <CardContent>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {props.title}\r\n          </Typography>\r\n          <MediaPlayer url=\"urlGoesHere.mov\" />\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {props.description}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  notFromLogin\r\n} from \"../redux/actions/index\";\r\nimport MediaCard from \"../components/Displays/MediaCard\";\r\n// import ContentEditableBox from \"../components/Inputs/ContentEditableBox\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    fromLogin: state.app.fromLogin\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    notFromLogin: () => dispatch(notFromLogin({}))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      version: \"0\",\r\n      redirectTo: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  render() {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <h3>Author's Notebook</h3>\r\n\r\n          <MediaCard title=\"Getting Started\" description=\"This video explains the basics of how to use the website and its tools.  It covers the basic concepts, navigation, creating a project, importing templates, creating types, creating attributes, and creating things.\" />\r\n{/* \r\n          <p>\r\n            This is something that I've been wanting to build for a while. It's\r\n            purpose is to provide a place for keeping track of various aspects of\r\n            books that an author is writing. It is able to keep track of details\r\n            about characters, organizations, systems, and even storylines. I would\r\n            like to make it so it's publicly available, and that any authors\r\n            (aspiring and published) can use it to help them organize their\r\n            stories. I want to make it automate a number of things, but the\r\n            biggest part is to make it very dynamic and to allow for storage of\r\n            all different kinds of notes. In order to make it publicly available\r\n            however, it needs to at least be able to pay for itself. I'm not\r\n            talking about the time I spent/spend working on it, but the costs of\r\n            hosting the website, the db, and the url. Until I'm sure it's capable\r\n            of doing those things, I can't let everyone have access to it.\r\n          </p>\r\n          <p>\r\n            This is version 1 of instructions of how to use it. If I make it\r\n            available for anyone, I'll update it with some video instructions.\r\n          </p>\r\n          <p>\r\n            One thing you need to know is that this is a hobby project of mine.\r\n            I'm working on it by myself for now. I've got a real job, and I've got\r\n            a family, so this isn't my top priority, but that being said I do care\r\n            about this probject, and I do plan to get to all the things that are\r\n            on my to do list.\r\n          </p>\r\n          <p>\r\n            If you want to do more than just look at the things others have put on\r\n            (and which they're allowing you to see), then you'll have to register.\r\n            Making it use Facebook and/or Google authentication is on my to do\r\n            list. I know how to do that, but I just haven't gotten around to it.\r\n            So, for now, just register and login. It currently doesn't send any\r\n            emails, so if you forget your password or something, you'll have to\r\n            reach out to me, and I can straighten it out. Again, that kind of\r\n            thing is also on my to do list.\r\n          </p>\r\n          <p>\r\n            Once you're logged in then you're able to start keeping track of\r\n            things.\r\n          </p>\r\n          <p>\r\n            The first thing you create is currently called a World. This is a\r\n            holdover from when I was calling this my World Building App because I\r\n            was aiming it for Fantasy/Sci-Fi authors (like me), but I realized\r\n            that it could be used for anything really. If anyone has any\r\n            suggestions for something to call this instead of World, I'm open to\r\n            considering other options. Currently I'm considering changing it to\r\n            'Project', and I may do that before showing it to anyone other than\r\n            family and close friends. Anyway, a World is basically the root of\r\n            everything. Different Worlds aren't connected to each other. Each\r\n            World has a Name, and you can choose whether or not to make it Public.\r\n            If it's not Public then only the Owner (whoever created it) is able to\r\n            see it. If it is Public then anyone can see it, but only the Owner can\r\n            edit it. (Planned Future Features: When you create a new world you can\r\n            use a template which will include generic Types common to that type of\r\n            World, such as Character, Location, etc. I'm also planning to add the\r\n            ability for Owners to add Collaborators to their World. Collaborators\r\n            would be able to see the World, and the Owner would be able to control\r\n            their other permissions as well (create/edit type, delete type,\r\n            create/edit thing, and delete thing.). Only the Owner will have the\r\n            ability to Edit or Delete the World itself, but they will be able to\r\n            make someone else the Owner.)\r\n          </p>\r\n          <p>\r\n            Within a World you are able to define Types. Basically a Type is just\r\n            that. It's a Type of Thing that you want to keep track of. In each\r\n            Type you are able to define attributes which that Type of Thing share,\r\n            such as Characters having Age, Race, Gender, Height, Weight, Skin\r\n            Color, Eye Color, etc. Types can also be hierarchical through\r\n            inheritance. For example, in Harry Potter I would have a 'Character'\r\n            Type with all the attributes I listed above, but then I could have a\r\n            'Witch or Wizard' Type which has 'Character' as a Super Type. This\r\n            means that 'Witch or Wizard' already has all those same Attributes as\r\n            'Character', but you can add more Attributes like Wand, Known Spells,\r\n            etc. The way to set the Super Types for a type is with a control\r\n            called a Multi Select. It's basically a textbox, but as you type it\r\n            gives you suggestions. You click a suggestion and it adds a chip\r\n            showing it as selected. Clicking the x on the right of the chip\r\n            unselects it. When selecting a Type to be a Super Type it adds all the\r\n            Attributes of that Type to the Type you're creating or editing, but\r\n            they are greyed out and disabled for editing. The reason they're grey\r\n            and disabled is that they come from a Super Type, so their definition\r\n            is there. If a Super Type is removed then the Attributes remain, but\r\n            are no longer grey and disabled. They can then be edited. There are a\r\n            few more things to note however. First is that when adding a Super\r\n            Type which has Super Types, those Super Types will be added as well.\r\n            An example of this could be the 'Animagus' Type in Harry Potter.\r\n            'Animagus' has the Super Type 'Witch or Wizard', which has the Super\r\n            Type 'Character', so when defining 'Animagus' I could add 'Witch or\r\n            Wizard' as a Super Type, and that will automatically add 'Character'\r\n            as well. Removing a Super Type of other Super Types will remove all\r\n            Sub Types of the Super Type removed. An example of that would be\r\n            removing 'Character' from 'Animagus'. This would automatically remove\r\n            'Witch or Wizard' as well. It doesn't make sense to do that for\r\n            'Animagus', but it may be necessary for you if you want to rethink how\r\n            you're organizing things. The last thing to note about removing Super\r\n            Types is that so long as a single Super Type exists which has an\r\n            Attribute with that name, it will be greyed out and disabled. Another\r\n            note about Attributes is that their names have to be unique on the\r\n            Type (or Thing). It's generally a good idea to make sure that any\r\n            Attributes you define with the same name also have the same Attribute\r\n            type as well, otherwise you may run into Attribute name collisions.\r\n            One last thing about Types. I've added an option to Types called Major\r\n            Type. If it's checked then the Type is considered a Major Type and\r\n            will show up in places of the UI where a regular Type will not. This\r\n            makes finding, creating, and editing Things of that Type easier. I\r\n            would make 'Character' a Major Type, but 'Witch or Wizard' and\r\n            'Animagus' would be regular Types. (Planned Future Features: Template\r\n            Types like I have above for Template Worlds, but they're individual\r\n            Types. Also add Plural Name field which will be used in the UI for\r\n            places where we put the plural name of something. Currently it just\r\n            adds an 's' to the end of the Type name, and I want to continue to do\r\n            that if the Plural Name is left empty, but if it's not empty then\r\n            display the Plural Name instead.)\r\n          </p>\r\n          <p>\r\n            Types have Attributes (as mentioned above). Things (which I'll get\r\n            into more below) also have Attributes. The same Attributes really. In\r\n            the Harry Potter World the Attributes on the 'Character' Type would\r\n            then be given to every character you create afterward, but now instead\r\n            of naming the Attribute and saying what type of Attribute it is, you\r\n            get to specify a value for the Attribute.\r\n          </p>\r\n          <p>\r\n            An Attribute is anything you may wish to keep track of for anything.\r\n            These do not include Name or Description, because all Types and Things\r\n            always have Name and Description by default. Attributes are for\r\n            anything else you want to keep track of. It could be a relationship\r\n            like 'Friend', 'Family Member', 'Significant Other', 'Coworker', etc.\r\n            It could be skills and abilities, or possessions, or jobs, or home\r\n            address, or work or school schedule. Really anything you want to keep\r\n            track of which is part of something can be an Attribute. Currently\r\n            there are six types of Attributes that are supported: Text, Number,\r\n            True/False, Options, Type, and List. Text is just that. A Text\r\n            Attribute gives you a textbox where you can type anything you want to\r\n            keep track of. Number gives you a number box, which is like a textbox\r\n            but it only accepts numbers, and it has arrows on the right which can\r\n            be used to increment or decrement the number. True/False gives you a\r\n            checkbox. Options allows you to specify possible choices for the\r\n            Attribute, and then they show up in a drop down list (A quick example\r\n            of this could be 'Gender' having 'Male', 'Female', and others if you\r\n            wanted. They can have as many options as you want, and it can be used\r\n            for whatever Attribute you want.). Specifying the choices is done\r\n            using a control called a Chip Input. This looks like a regular\r\n            textbox, but whenever you hit enter the text in it is added as a chip.\r\n            Chips show the text, but have an x on their right which can be used to\r\n            remove them. It's basically like the Multiselect except without the\r\n            suggestions. The Chips are the choices that will be in the drop down\r\n            list which the user has when creating or editing a Thing with that\r\n            Attribute.\r\n          </p>\r\n          <p>The last two Attribute types are a little more complicated.</p>\r\n          <p>\r\n            When adding Attributes to a Type, the 'Type' Attribute type allows you\r\n            to then choose from the various Types you've defined for the World,\r\n            and then when you're creating or editing a Thing (such as the\r\n            'Character' 'Harry Potter') you would get all the Things of that Type\r\n            as choices in a drop down list. For example you could have a 'Best\r\n            Friend' Attribute which has the Attribute type of 'Type' and uses the\r\n            Defined Type of 'Character'. Then when editing Harry you would have a\r\n            drop down list which shows all the 'Characters' you've added to the\r\n            World as possible 'Best Friends'. You would of course then choose 'Ron\r\n            Weasley' (Sorry, Hermione, but you're a close second.).\r\n          </p>\r\n          <p>\r\n            The Attribute Type 'List' is still more complicated than 'Type'. It\r\n            allows you to decide which type of 'List' it's going to be. For now it\r\n            only supports 'Text', 'Options', and 'Type'. (I'm not planning to add\r\n            any others, but if it's requested I may consider it. A List of Text\r\n            could be anything really, so other types shouldn't be necessary.) If\r\n            an Attribute is defined as a List of Text then when creating or\r\n            editing a Thing the Attribute gives a Chip Input, which works the same\r\n            as it does for Options (described above). A List of Options allows you\r\n            to define the choices when creating or editing the Type, the same as\r\n            with a regular Options Attribute, and then when creating or editing a\r\n            Thing of that Type it gives a Multiselect which works the same as when\r\n            choosing Super Types (described above) with the Options defined\r\n            previously on the Type as the suggestions. A List of 'Type' allows you\r\n            to choose a Defined Type (like with the Attribute type 'Type'), but\r\n            when creating or editing a Thing it gives you a Multiselect instead of\r\n            a regular drop down list so you can select more than one. With all\r\n            'List' Attributes, the items in the list are displayed separated by\r\n            commas when looking at the details page rather than creating or\r\n            editing.\r\n          </p>\r\n          <p>\r\n            One last note about Attributes of type 'Type' or 'List' of 'Type'.\r\n            I've made it so that if you want to choose a Defined Type which you\r\n            haven't defined yet you can choose '+ Create New Type' and it opens a\r\n            quick little window (modal for those who care) which lets you define a\r\n            Type using just the name you want it to have. You'll have to edit that\r\n            Type later to give it any Super Types or Attributes it should have,\r\n            but you can create it there so you can continue defining the Type\r\n            you're already working on rather than having to leave and come back to\r\n            it. The same thing can be done when creating or editing a Thing with\r\n            an Attribute of type 'Type' or 'List' of 'Type', but for Things the\r\n            Type has already been chosen. Now you will be creating a Thing of that\r\n            Type. An example of this would be if you're editing the 'Character'\r\n            'Harry Potter', but when you get to 'Best Friend' you realize you\r\n            haven't added the 'Ron Weasley' 'Character' yet. You would choose '+\r\n            Create New Character', and then in the quick little window you would\r\n            type 'Ron Weasley'. He would get added as a blank character with just\r\n            his Name, but he would then be selected as Harry's 'Best Friend', and\r\n            you could finish defining Harry, and get to Ron later.\r\n          </p>\r\n          <p>\r\n            And one more thing about Attributes in general.  I added the ability to\r\n            set Default values for attributes on the Type.  Default Values will \r\n            automatically be set on any Things of that Type.  I made it as user \r\n            friendly as I could think to make it.\r\n          </p>\r\n          <p>\r\n            (Planned Future Features: Other Attribute types, including: Image,\r\n            Event, and External Link. If you have any suggestions of others, feel\r\n            free to recommend them.  Also need to put in validation to detect \r\n            Name and Default collisions.)\r\n          </p>\r\n          <p>\r\n            And that brings us to Things. If you've gotten to this point, then you\r\n            probably already understand what Things are, but I'll outline it\r\n            anyway. The generic term Thing is used to mean any actual thing you're\r\n            keeping track of. This would be your Characters, your Places, your\r\n            Items, Spells, whatever. When creating or editing a Thing you are able\r\n            to choose Types for the Thing (works the same as Super Types for\r\n            Types), and all the Attributes of those Types are added to the Thing,\r\n            but now you're able to give values for them. Again remember to avoid\r\n            Attribute Name collisions (If for some reason you've defined 2\r\n            unrelated Types with an Attribute that has the same name but different\r\n            Attribute types then you won't be able to have a Thing of both\r\n            Types.). If a Type is edited to remove an Attribute, Things which use\r\n            that Type and existed already will still have that Attribute. It will\r\n            just be an orphaned Attribute. Currently there's no way to remove\r\n            Attributes from Things. If a Type is edited to add Attributes then\r\n            Things which already existed will gain those Attributes as soon as\r\n            they're edited again. If a Type is edited and an Attribute is\r\n            changed... I'm not actually sure what would happen to Things that\r\n            already exist which have that Type. I'll have to test that. That's\r\n            really it for Things. They're the simple part. (Planned Future\r\n            Features: I'm planning to add the ability to add/remove/edit orphaned\r\n            Attributes for Things. When I do, I'll probably try to find a way to\r\n            make it so with adding/editing orphaned Attributes you'll be able to\r\n            add the Attribute to a selected Type already on the Thing.)\r\n          </p>\r\n          <p>I probably should have put Attributes below Things, but oh well.</p>\r\n          <p>Other Planned Future Features:</p>\r\n          <div>\r\n            <p>\r\n              Direct Messages: I'll add a simple messaging system to allow people\r\n              to communicate directly with one another.\r\n            </p>\r\n            <p>\r\n              Auto-links: For both comments and DMs I'll allow users to put links to\r\n              pages through a simple system similar to hashtags in Social Media.\r\n              I'm thinking I also want to add this capability to Descriptions on\r\n              Types and Things.\r\n            </p>\r\n            <p>\r\n              Following Public Worlds: Currently all Public Worlds are listed in\r\n              the menu, but I should make it so only those that the user follows\r\n              are shown there, and have a button to pull up the full list, and add\r\n              a button for people who neither own or collaborate on a Public World\r\n              to 'Follow' the World.\r\n            </p>\r\n            <p>\r\n              Home Page content: I'm planning to have actual Home Page content.\r\n              This will have a link to a video tutorial for new users (which I\r\n              have yet to make, and will need occasional updating after it's\r\n              made), as well as things like recent software changes. I also want\r\n              to make it so it can automatically have links to recently added or\r\n              edited Types or Things and recent comments which may be of\r\n              interest to the user.\r\n            </p>\r\n          </div> */}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst HomePage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default HomePage;\r\n","/*\r\nReact-Quill\r\nhttps://github.com/zenoamaro/react-quill\r\n*/\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport isEqual from 'lodash/isEqual';\r\n\r\nimport Quill, {\r\n  // QuillOptionsStatic,\r\n  // DeltaStatic,\r\n  // RangeStatic,\r\n  // BoundsStatic,\r\n  // StringMap,\r\n  // Sources,\r\n} from 'quill';\r\n\r\n\r\nclass ReactQuill extends React.Component {\r\n\r\n  static displayName = 'React Quill'\r\n\r\n  /*\r\n  Export Quill to be able to call `register`\r\n  */\r\n  static Quill = Quill;\r\n\r\n  /*\r\n  Changing one of these props should cause a full re-render and a\r\n  re-instantiation of the Quill editor.\r\n  */\r\n  dirtyProps = [\r\n    'modules',\r\n    'formats',\r\n    'bounds',\r\n    'theme',\r\n    'children',\r\n  ]\r\n\r\n  /*\r\n  Changing one of these props should cause a regular update. These are mostly\r\n  props that act on the container, rather than the quillized editing area.\r\n  */\r\n  cleanProps = [\r\n    'id',\r\n    'className',\r\n    'style',\r\n    'placeholder',\r\n    'tabIndex',\r\n    'onChange',\r\n    'onChangeSelection',\r\n    'onFocus',\r\n    'onBlur',\r\n    'onKeyPress',\r\n    'onKeyDown',\r\n    'onKeyUp',\r\n    // 'ref'\r\n  ]\r\n\r\n  static defaultProps = {\r\n    theme: 'snow',\r\n    modules: {},\r\n    readOnly: false,\r\n  }\r\n\r\n  state = {\r\n    generation: 0,\r\n  }\r\n\r\n  /*\r\n  The Quill Editor instance.\r\n  */\r\n  editor = null\r\n\r\n  /*\r\n  Reference to the element holding the Quill editing area.\r\n  */\r\n  editingArea = null\r\n\r\n  /*\r\n  Tracks the internal value of the Quill editor\r\n  */\r\n  value = null\r\n\r\n  refInput = null\r\n\r\n  /*\r\n  Tracks the internal selection of the Quill editor\r\n  */\r\n  selection = null\r\n\r\n  /*\r\n  Used to compare whether deltas from `onChange` are being used as `value`.\r\n  */\r\n  lastDeltaChangeSet = null\r\n\r\n  /*\r\n  Stores the contents of the editor to be restored after regeneration.\r\n  */\r\n  regenerationSnapshot = {}\r\n\r\n  /*\r\n  A weaker, unprivileged proxy for the editor that does not allow accidentally\r\n  modifying editor state.\r\n  */\r\n  unprivilegedEditor = null\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const value = this.isControlled()? props.value : props.defaultValue;\r\n    // So at this point value includes the span.  Need to figure out where it's getting stripped out.\r\n    this.value = value ?? '';\r\n    this.refInput = React.createRef();\r\n  }\r\n\r\n  validateProps(props) {\r\n    if (React.Children.count(props.children) > 1) throw new Error(\r\n      'The Quill editing area can only be composed of a single React element.'\r\n    );\r\n\r\n    if (React.Children.count(props.children)) {\r\n      const child = React.Children.only(props.children);\r\n      if (child !== null && child.type === 'textarea') throw new Error(\r\n        'Quill does not support editing on a <textarea>. Use a <div> instead.'\r\n      );\r\n    }\r\n\r\n    if (\r\n      this.lastDeltaChangeSet &&\r\n      props.value === this.lastDeltaChangeSet\r\n    ) throw new Error(\r\n      'You are passing the `delta` object from the `onChange` event back ' +\r\n      'as `value`. You most probably want `editor.getContents()` instead. ' +\r\n      'See: https://github.com/zenoamaro/react-quill#using-deltas'\r\n    );\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    this.validateProps(nextProps);\r\n\r\n    // If the editor hasn't been instantiated yet, or the component has been\r\n    // regenerated, we already know we should update.\r\n    if (!this.editor || this.state.generation !== nextState.generation) {\r\n      return true;\r\n    }\r\n\r\n    // Handle value changes in-place\r\n    if ('value' in nextProps) {\r\n      const prevContents = this.getEditorContents();\r\n      const nextContents = nextProps.value ?? '';\r\n\r\n      // NOTE: Seeing that Quill is missing a way to prevent edits, we have to\r\n      //       settle for a hybrid between controlled and uncontrolled mode. We\r\n      //       can't prevent the change, but we'll still override content\r\n      //       whenever `value` differs from current state.\r\n      // NOTE: Comparing an HTML string and a Quill Delta will always trigger a\r\n      //       change, regardless of whether they represent the same document.\r\n      if (!this.isEqualValue(nextContents, prevContents)) {\r\n        this.setEditorContents(this.editor, nextContents);\r\n      }\r\n    }\r\n\r\n    // Handle read-only changes in-place\r\n    if (nextProps.readOnly !== this.props.readOnly) {\r\n      this.setEditorReadOnly(this.editor, !nextProps.readOnly);\r\n    }\r\n\r\n    // Clean and Dirty props require a render\r\n    return [...this.cleanProps, ...this.dirtyProps].some((prop) => {\r\n      return !isEqual(nextProps[prop], this.props[prop]);\r\n    });\r\n  }\r\n\r\n  shouldComponentRegenerate(nextProps) {\r\n    // Whenever a `dirtyProp` changes, the editor needs reinstantiation.\r\n    return this.dirtyProps.some((prop) => {\r\n      return !isEqual(nextProps[prop], this.props[prop]);\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.instantiateEditor();\r\n    this.setEditorContents(this.editor, this.getEditorContents());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.destroyEditor();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // If we're changing one of the `dirtyProps`, the entire Quill Editor needs\r\n    // to be re-instantiated. Regenerating the editor will cause the whole tree,\r\n    // including the container, to be cleaned up and re-rendered from scratch.\r\n    // Store the contents so they can be restored later.\r\n    if (this.editor && this.shouldComponentRegenerate(prevProps)) {\r\n      const delta = this.editor.getContents();\r\n      const selection = this.editor.getSelection();\r\n      this.regenerationSnapshot = {delta, selection};\r\n      this.setState({generation: this.state.generation + 1});\r\n      this.destroyEditor();\r\n    }\r\n\r\n    // The component has been regenerated, so it must be re-instantiated, and\r\n    // its content must be restored to the previous values from the snapshot.\r\n    if (this.state.generation !== prevState.generation) {\r\n      const {delta, selection} = this.regenerationSnapshot;\r\n      delete this.regenerationSnapshot;\r\n      this.instantiateEditor();\r\n      const editor = this.editor;\r\n      editor.setContents(delta);\r\n      postpone(() => this.setEditorSelection(editor, selection));\r\n    }\r\n  }\r\n\r\n  instantiateEditor() {\r\n    if (this.editor) return;\r\n    this.editor = this.createEditor(\r\n      this.getEditingArea(),\r\n      this.getEditorConfig()\r\n    );\r\n  }\r\n\r\n  destroyEditor() {\r\n    if (!this.editor) return;\r\n    this.unhookEditor(this.editor);\r\n    delete this.editor;\r\n  }\r\n\r\n  /*\r\n  We consider the component to be controlled if `value` is being sent in props.\r\n  */\r\n  isControlled() {\r\n    return 'value' in this.props;\r\n  }\r\n\r\n  getEditorConfig() {\r\n    return {\r\n      bounds: this.props.bounds,\r\n      formats: this.props.formats,\r\n      modules: this.props.modules,\r\n      placeholder: this.props.placeholder,\r\n      readOnly: this.props.readOnly,\r\n      scrollingContainer: this.props.scrollingContainer,\r\n      tabIndex: this.props.tabIndex,\r\n      theme: this.props.theme,\r\n    };\r\n  }\r\n\r\n  getEditor() {\r\n    if (!this.editor) throw new Error('Accessing non-instantiated editor');\r\n    return this.editor;\r\n  }\r\n\r\n  /**\r\n  Creates an editor on the given element. The editor will be passed the\r\n  configuration, have its events bound,\r\n  */\r\n  createEditor(element, config) {\r\n    const editor = new Quill(element, config);\r\n    if (config.tabIndex != null) {\r\n      this.setEditorTabIndex(editor, config.tabIndex);\r\n    }\r\n    this.hookEditor(editor);\r\n    return editor;\r\n  }\r\n\r\n  hookEditor(editor) {\r\n    // Expose the editor on change events via a weaker, unprivileged proxy\r\n    // object that does not allow accidentally modifying editor state.\r\n    this.unprivilegedEditor = this.makeUnprivilegedEditor(editor);\r\n    // Using `editor-change` allows picking up silent updates, like selection\r\n    // changes on typing.\r\n    editor.on('editor-change', this.onEditorChange);\r\n  }\r\n\r\n  unhookEditor(editor) {\r\n    editor.off('editor-change', this.onEditorChange);\r\n  }\r\n\r\n  getEditorContents() {\r\n    return this.value;\r\n  }\r\n\r\n  getEditorSelection() {\r\n    return this.selection;\r\n  }\r\n\r\n  /*\r\n  True if the value is a Delta instance or a Delta look-alike.\r\n  */\r\n  isDelta(value) {\r\n    return value && value.ops;\r\n  }\r\n\r\n  /*\r\n  Special comparison function that knows how to compare Deltas.\r\n  */\r\n  isEqualValue(value, nextValue) {\r\n    if (this.isDelta(value) && this.isDelta(nextValue)) {\r\n      return isEqual(value.ops, nextValue.ops);\r\n    } else {\r\n      return isEqual(value, nextValue);\r\n    }\r\n  }\r\n\r\n  /*\r\n  Replace the contents of the editor, but keep the previous selection hanging\r\n  around so that the cursor won't move.\r\n  */\r\n  setEditorContents(editor, value) {\r\n    this.value = value;\r\n    const sel = this.getEditorSelection();\r\n    if (typeof value === 'string') {\r\n      editor.setContents(editor.clipboard.convert(value));\r\n    } else {\r\n      editor.setContents(value);\r\n    }\r\n    postpone(() => this.setEditorSelection(editor, sel));\r\n  }\r\n\r\n  setEditorSelection(editor, range) {\r\n    this.selection = range;\r\n    if (range) {\r\n      // Validate bounds before applying.\r\n      const length = editor.getLength();\r\n      range.index = Math.max(0, Math.min(range.index, length-1));\r\n      range.length = Math.max(0, Math.min(range.length, (length-1) - range.index));\r\n      \r\n      editor.setSelection(range);\r\n    }\r\n  }\r\n\r\n  setEditorTabIndex(editor, tabIndex) {\r\n    if (editor?.scroll?.domNode) {\r\n      (editor.scroll.domNode).tabIndex = tabIndex;\r\n    }\r\n  }\r\n\r\n  setEditorReadOnly(editor, value) {\r\n    if (value) {\r\n      editor.disable();\r\n    } else {\r\n      editor.enable();\r\n    }\r\n  }\r\n\r\n  /*\r\n  Returns a weaker, unprivileged proxy object that only exposes read-only\r\n  accessors found on the editor instance, without any state-modifying methods.\r\n  */\r\n  makeUnprivilegedEditor(editor) {\r\n    const e = editor;\r\n    return {\r\n      getHTML:      () => e.root.innerHTML,\r\n      getLength:    e.getLength.bind(e),\r\n      getText:      e.getText.bind(e),\r\n      getContents:  e.getContents.bind(e),\r\n      getSelection: e.getSelection.bind(e),\r\n      getBounds:    e.getBounds.bind(e),\r\n      setSelection: e.setSelection.bind(e) // Trying to add the ability to select from outside\r\n    };\r\n  }\r\n\r\n  getEditingArea() {\r\n    if (!this.editingArea) {\r\n      throw new Error('Instantiating on missing editing area');\r\n    }\r\n    const element = ReactDOM.findDOMNode(this.editingArea);\r\n    if (!element) {\r\n      throw new Error('Cannot find element for editing area');\r\n    }\r\n    if (element.nodeType === 3) {\r\n      throw new Error('Editing area cannot be a text node');\r\n    }\r\n    return element;\r\n  }\r\n\r\n  /*\r\n  Renders an editor area, unless it has been provided one to clone.\r\n  */\r\n  renderEditingArea() {\r\n    const {children, preserveWhitespace} = this.props;\r\n    const {generation} = this.state;\r\n\r\n    const properties = {\r\n      key: generation,\r\n      ref: (instance) => {\r\n        this.editingArea = instance\r\n      },\r\n    };\r\n\r\n    if (React.Children.count(children)) {\r\n      return React.cloneElement(\r\n        React.Children.only(children),\r\n        properties\r\n      );\r\n    }\r\n\r\n    return preserveWhitespace ?\r\n      <pre {...properties}/> :\r\n      <div {...properties}/>;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        ref={this.refInput}\r\n        id={this.props.id}\r\n        style={this.props.style}\r\n        key={this.state.generation}\r\n        className={`quill ${this.props.className ?? ''}`}\r\n        onKeyPress={this.props.onKeyPress}\r\n        onKeyDown={this.props.onKeyDown}\r\n        onKeyUp={this.props.onKeyUp}\r\n        onBlur={_ => {\r\n          if (this.props.onBlur2 !== undefined)\r\n            this.props.onBlur2();\r\n        }}\r\n      >\r\n        {this.renderEditingArea()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onEditorChange = (\r\n    eventName,\r\n    rangeOrDelta,\r\n    oldRangeOrDelta,\r\n    source,\r\n  ) => {\r\n    if (eventName === 'text-change') {\r\n      this.onEditorChangeText(\r\n        this.editor.root.innerHTML,\r\n        rangeOrDelta,\r\n        source,\r\n        this.unprivilegedEditor\r\n      );\r\n    } else if (eventName === 'selection-change') {\r\n      this.onEditorChangeSelection(\r\n        rangeOrDelta,\r\n        source,\r\n        this.unprivilegedEditor\r\n      );\r\n    }\r\n  };\r\n\r\n  onEditorChangeText(\r\n    value,\r\n    delta,\r\n    source,\r\n    editor,\r\n  ) {\r\n    if (!this.editor) return;\r\n\r\n    // We keep storing the same type of value as what the user gives us,\r\n    // so that value comparisons will be more stable and predictable.\r\n    const nextContents = this.isDelta(this.value)\r\n      ? editor.getContents()\r\n      : editor.getHTML();\r\n\r\n    if (nextContents !== this.getEditorContents()) {\r\n      // Taint this `delta` object, so we can recognize whether the user\r\n      // is trying to send it back as `value`, preventing a likely loop.\r\n      this.lastDeltaChangeSet = delta;\r\n\r\n      this.value = nextContents;\r\n      this.props.onChange(value, delta, source, editor);\r\n    }\r\n  }\r\n\r\n  onEditorChangeSelection(\r\n    nextSelection,\r\n    source,\r\n    editor,\r\n  ) {\r\n    if (!this.editor) return;\r\n    const currentSelection = this.getEditorSelection();\r\n    const hasGainedFocus = !currentSelection && nextSelection;\r\n    const hasLostFocus = currentSelection && !nextSelection;\r\n\r\n    if (isEqual(nextSelection, currentSelection)) return;\r\n\r\n    this.selection = nextSelection;\r\n    if (this.props.onChangeSelection !== undefined)\r\n      this.props.onChangeSelection(nextSelection, source, editor);\r\n\r\n    if (hasGainedFocus) {\r\n      if (this.props.onFocus !== undefined)\r\n        this.props.onFocus(nextSelection, source, editor);\r\n    } else if (hasLostFocus) {\r\n      if (this.props.onBlur !== undefined)\r\n        this.props.onBlur(currentSelection, source, editor);\r\n    }\r\n  }\r\n\r\n  focus() {\r\n    if (!this.editor) return;\r\n    this.editor.focus();\r\n  }\r\n\r\n  blur() {\r\n    if (!this.editor) return;\r\n    this.selection = null;\r\n    this.editor.blur();\r\n  }\r\n}\r\n\r\n/*\r\nSmall helper to execute a function in the next micro-tick.\r\n*/\r\nfunction postpone(fn) {\r\n  Promise.resolve().then(fn);\r\n}\r\n\r\n// Compatibility Export to avoid `require(...).default` on CommonJS.\r\n// See: https://github.com/Microsoft/TypeScript/issues/2719\r\nexport default ReactQuill;\r\n","// import React, { createRef } from 'react';\r\n// import PropTypes from 'prop-types';\r\n// // import getCaretCoordinates from './textarea-caret';\r\n// // import getCaretCoordinates from 'textarea-caret';\r\n// import getInputSelection, { setCaretPosition } from 'get-input-selection';\r\nimport '../../assets/css/AutocompleteTextField.css';\r\n// import {\r\n//   Button\r\n//   // FormControl,\r\n//   // OutlinedInput,\r\n//   // InputLabel,\r\n//   // FormHelperText\r\n// } from \"@material-ui/core\";\r\n// import Quill, {\r\n//   // QuillOptionsStatic,\r\n//   // DeltaStatic,\r\n//   RangeStatic,\r\n//   // BoundsStatic,\r\n//   // StringMap,\r\n//   // Sources,\r\n// } from 'quill';\r\n// import ContentEditable from \"react-contenteditable\";\r\n// import ContentEditable from \"./ContentEditable\";\r\nimport sanitizeHtml from \"sanitize-html\";\r\n// import \"../../assets/css/editable-content.css\";\r\n\r\n\r\nimport React, { createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n// import ReactQuill from 'react-quill';\r\nimport ReactQuill from './ReactQuill';\r\n  \r\nconst modules = {\r\n  toolbar: [\r\n    [\r\n      // { 'header': [1, 2, false] }\r\n    ],\r\n    [\r\n      'bold', 'italic', 'underline','strike', 'blockquote'\r\n    ],\r\n    [\r\n      {'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}\r\n    ],\r\n    [\r\n      'link', \r\n      'image'\r\n    ],\r\n    [\r\n      'clean'\r\n    ]\r\n  ],\r\n};\r\n\r\nconst formats = [\r\n  'header',\r\n  'bold', \r\n  'italic', 'underline', 'strike', 'blockquote',\r\n  'list', 'bullet', 'indent',\r\n  'link', \r\n  'image'\r\n];\r\n\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_RETURN = 13;\r\nconst KEY_ENTER = 14;\r\nconst KEY_ESCAPE = 27;\r\nconst KEY_TAB = 9;\r\n\r\nconst propTypes = {\r\n  Component: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.func,\r\n  ]),\r\n  defaultValue: PropTypes.string,\r\n  disabled: PropTypes.bool,\r\n  maxOptions: PropTypes.number,\r\n  onBlur: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  onKeyDown: PropTypes.func,\r\n  onRequestOptions: PropTypes.func,\r\n  // options: PropTypes.arrayOf(PropTypes.Object),\r\n  regex: PropTypes.string,\r\n  matchAny: PropTypes.bool,\r\n  minChars: PropTypes.number,\r\n  requestOnlyIfNoOptions: PropTypes.bool,\r\n  spaceRemovers: PropTypes.arrayOf(PropTypes.string),\r\n  spacer: PropTypes.string,\r\n  trigger: PropTypes.string,\r\n  value: PropTypes.string,\r\n  offsetX: PropTypes.number,\r\n  offsetY: PropTypes.number,\r\n};\r\n\r\nconst defaultProps = {\r\n  Component: 'textarea',\r\n  defaultValue: '',\r\n  disabled: false,\r\n  maxOptions: 6,\r\n  onBlur: () => { },\r\n  onChange: () => { },\r\n  onKeyDown: () => { },\r\n  onRequestOptions: () => { },\r\n  options: [],\r\n  regex: '^[A-Za-z0-9\\\\-_]+$',\r\n  matchAny: false,\r\n  minChars: 0,\r\n  requestOnlyIfNoOptions: true,\r\n  spaceRemovers: [',', '.', '!', '?'],\r\n  spacer: ' ',\r\n  trigger: '@',\r\n  offsetX: 0,\r\n  offsetY: -10,\r\n  value: null,\r\n};\r\n\r\nclass AutocompleteTextField extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      helperVisible: false,\r\n      left: 0,\r\n      matchLength: 0,\r\n      matchStart: 0,\r\n      options: [],\r\n      selection: 0,\r\n      top: 0,\r\n      value: props.value\r\n    };\r\n\r\n    this.recentValue = props.defaultValue;\r\n    this.refInput = createRef();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { options } = this.props;\r\n    const { caret } = this.state;\r\n\r\n    if (options.length !== prevProps.options.length) {\r\n      this.updateHelper(this.recentValue, caret, options);\r\n    }\r\n  }\r\n\r\n  getMatch(str, caret, providedOptions) {\r\n    const { trigger, matchAny, regex } = this.props;\r\n    const re = new RegExp(regex);\r\n    const triggerLength = trigger.length;\r\n    const triggerMatch = trigger.match(re);\r\n\r\n    let last = str[caret - 1];\r\n    // The Quill control I'm using puts things inside of a <p>.  \r\n    // I need to back the caret up to be before it.\r\n    while (last === \">\") {\r\n      while (last !== \"<\") {\r\n        caret--;\r\n        last = str[caret - 1];\r\n      }\r\n      caret--;\r\n      last = str[caret - 1];\r\n    }\r\n    // string change event happens before keydown event with Quill control, \r\n    // which is preventing tabs from causing selection.\r\n    // This should fix it.\r\n    if (last === \"\t\") {\r\n      caret--;\r\n      last = str[caret - 1];\r\n    }\r\n    for (let i = caret - 1; i >= 0; --i) {\r\n      const substr = str.substring(i, caret);\r\n      const match = substr.match(re);\r\n      let matchStart = -1;\r\n\r\n      if (triggerLength > 0) {\r\n        const triggerIdx = triggerMatch ? i : i - triggerLength + 1;\r\n\r\n        if (triggerIdx < 0) { // out of input\r\n          return null;\r\n        }\r\n\r\n        if (this.isTrigger(str, triggerIdx)) {\r\n          matchStart = triggerIdx + triggerLength;\r\n        }\r\n\r\n        if (!match && matchStart < 0) {\r\n          return null;\r\n        }\r\n      } else {\r\n        if (match && i > 0) { // find first non-matching character or begin of input\r\n          continue;\r\n        }\r\n        matchStart = i === 0 && match ? 0 : i + 1;\r\n\r\n        if (caret - matchStart === 0) { // matched slug is empty\r\n          return null;\r\n        }\r\n      }\r\n\r\n      if (matchStart >= 0) {\r\n        const matchedSlug = str.substring(matchStart, caret);\r\n        const options = providedOptions.filter((slug) => {\r\n          // TODO: Change this to work with object\r\n          const idx = slug.Display.toLowerCase().indexOf(matchedSlug.toLowerCase());\r\n          return idx !== -1 && (matchAny || idx === 0);\r\n        });\r\n\r\n        const matchLength = matchedSlug.length;\r\n\r\n        return { matchStart, matchLength, options };\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  isTrigger(str, i) {\r\n    const { trigger } = this.props;\r\n\r\n    if (!trigger || !trigger.length) {\r\n      return true;\r\n    }\r\n\r\n    if (str.substr(i, trigger.length) === trigger) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  handleChange(e) {\r\n    const {\r\n      onChange,\r\n      options,\r\n      spaceRemovers,\r\n      spacer,\r\n      value,\r\n    } = this.props;\r\n    const old = this.recentValue;\r\n    let str = e.target === undefined || e.target.value === undefined ? this.state.value : e.target.value;\r\n\r\n    let end = -1;\r\n    if (old.length === 0) {\r\n      end = str.length - 1;\r\n    } else if (str.length === 0) {\r\n      end = 0;\r\n    } else {\r\n      let old2 = old.trim();\r\n      let str2 = str.trim();\r\n      if (old2.substring(old2.length - 6) === \"&nbsp;\") {\r\n        old2 = old2.substring(0, old2.length - 6);\r\n      }\r\n      if (str2.substring(str2.length - 6) === \"&nbsp;\") {\r\n        str2 = str2.substring(0, str2.length - 6);\r\n      }\r\n      if (old2 !== str2) {\r\n        // let inSpan = false;\r\n            \r\n        for (let i = 1; i <= Math.min(str2.length, old2.length); i++) {\r\n          if (str2.length < i || old2.length < i || str2[str2.length - i] !== old2[old2.length - i]) {\r\n            end = str2.length - i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const caret = end + 1;\r\n\r\n    if (!str.length) {\r\n      this.setState({ helperVisible: false });\r\n    }\r\n\r\n    this.recentValue = str;\r\n\r\n    this.setState({ caret, value: e });\r\n\r\n    if (!str.length || !caret) {\r\n      return onChange(e);\r\n    }\r\n\r\n    // '@wonderjenny ,|' -> '@wonderjenny, |'\r\n    if (this.enableSpaceRemovers && spaceRemovers.length && str.length > 2 && spacer.length) {\r\n      for (let i = 0; i < Math.max(old.length, str.length); ++i) {\r\n        if (old[i] !== str[i]) {\r\n          if (\r\n            i >= 2\r\n            && str[i - 1] === spacer\r\n            && spaceRemovers.indexOf(str[i - 2]) === -1\r\n            && spaceRemovers.indexOf(str[i]) !== -1\r\n            && this.getMatch(str.substring(0, i - 2), caret - 3, options) // TODO: Change this to work with objects\r\n          ) {\r\n            const newValue = (`${str.slice(0, i - 1)}${str.slice(i, i + 1)}${str.slice(i - 1, i)}${str.slice(i + 1)}`);\r\n\r\n            this.refInput.current.value = newValue;\r\n\r\n            if (!value) {\r\n              this.setState({ value: newValue });\r\n            }\r\n\r\n            return onChange(newValue);\r\n          }\r\n\r\n          break;\r\n        }\r\n      }\r\n\r\n      this.enableSpaceRemovers = false;\r\n    }\r\n\r\n    this.updateHelper(str, caret, options);\r\n\r\n    if (!value) {\r\n      this.setState({ value: e });\r\n    }\r\n    return onChange(e);\r\n  }\r\n\r\n  handleKeyDown = (event) => {\r\n    const { helperVisible, options, selection } = this.state;\r\n    const { onKeyDown } = this.props;\r\n\r\n    if (helperVisible) {\r\n      switch (event.keyCode) {\r\n        case KEY_ESCAPE:\r\n          event.preventDefault();\r\n          this.resetHelper();\r\n          break;\r\n        case KEY_UP:\r\n          event.preventDefault();\r\n          this.setState({ selection: ((options.length + selection) - 1) % options.length });\r\n          break;\r\n        case KEY_DOWN:\r\n          event.preventDefault();\r\n          this.setState({ selection: (selection + 1) % options.length });\r\n          break;\r\n        case KEY_ENTER:\r\n        case KEY_RETURN:\r\n        case KEY_TAB:\r\n          event.preventDefault();\r\n          this.handleSelection(selection);\r\n          break;\r\n        default:\r\n          onKeyDown(event);\r\n          break;\r\n      }\r\n    } else {\r\n      onKeyDown(event);\r\n    }\r\n  }\r\n\r\n  handleSelection(idx) {\r\n    const { matchStart, matchLength, options } = this.state;\r\n    // const { spacer } = this.props;\r\n\r\n    // const slug = `<span id='myid' style=\"color: blue\">${options[idx]}</span>`;\r\n    let slug = `<a href='/${options[idx].suggestionType}/details/${options[idx]._id}' rel=\"noopener noreferrer\" target=\"_blank\">${options[idx].Display}</a>`;\r\n    const value = this.recentValue;\r\n    const part1 = value.substring(0, matchStart - 1); // - 1 to remove the @\r\n    const part2 = value.substring(matchStart + matchLength);\r\n    \r\n    if (part2 === \"\") {\r\n      slug += \"&nbsp;\";\r\n    }\r\n    this.setState({ value: `${part1}${slug}${part2}` });\r\n    let caret = 0;\r\n    let searched = 0;\r\n    let part1Sub = part1;\r\n    while (searched < part1.length) {\r\n      // I'll need some way in the future to make it so <> can be used in these.\r\n      // Probably something like catching them and putting an escape character before them.\r\n      // Of course then it will also have to do escape characters for escape characters as well.\r\n      // Actually, it looks like I don't.  It's automatically converting < and > to &lt; and &gt;.\r\n\r\n      const index = part1Sub.indexOf(\"<\");\r\n      if (index > -1) {\r\n        if (index > 0) \r\n          caret += index;\r\n        searched += index; // everything before the tag;\r\n        part1Sub = part1Sub.substring(index);\r\n        let openerEndIndex = part1Sub.indexOf(\">\");\r\n        if (openerEndIndex === -1) {\r\n          // Probably an error because I haven't done the escape character thing yet.\r\n          throw Error(\"What the Pizza Sauce\");\r\n        } else {\r\n          searched += openerEndIndex + 1;\r\n          part1Sub = part1Sub.substring(openerEndIndex + 1);\r\n        }\r\n      } else if (part1Sub.length > 0) {\r\n        searched += part1Sub.length;\r\n        caret += part1Sub.length;\r\n        part1Sub = \"\";\r\n      }\r\n      if (part1Sub.length === 0 && searched < part1.length) {\r\n        throw Error(\"OMGOSH\");\r\n      }\r\n    }\r\n    caret += options[idx].Display.length;\r\n    this.updateCaretPosition(caret);\r\n  }\r\n\r\n  updateCaretPosition(index) {\r\n    setTimeout(() => {\r\n      let input = this.refInput.current;\r\n      \r\n      const editor = input.getEditor();\r\n      const unprivilegedEditor = input.makeUnprivilegedEditor(editor);\r\n      \r\n      const length = unprivilegedEditor.getLength();\r\n      // Caret at the end\r\n      // const range = {\r\n      //   index: length - 1,\r\n      //   length: 0\r\n      // };\r\n      const range = {\r\n        index: Math.max(0, Math.min(index, length-1)),\r\n        length: 0\r\n      };\r\n      unprivilegedEditor.setSelection(range);\r\n    }, 500);\r\n  }\r\n\r\n  setValue = (event) => {\r\n    this.setState({ value: event }, _ => { \r\n      this.handleChange(event);\r\n    });\r\n  }\r\n\r\n  updateHelper(str, caret, options) {\r\n    const slug = this.getMatch(str, caret, options);\r\n    if (slug) {\r\n      let input = this.refInput.current;\r\n      let element = input.refInput.current;\r\n      const top = element.clientHeight;\r\n      const left = 0;\r\n\r\n      const { minChars, onRequestOptions, requestOnlyIfNoOptions } = this.props;\r\n\r\n      if (\r\n        slug.matchLength >= minChars\r\n        && (\r\n          slug.options.length > 1\r\n          || (\r\n            slug.options.length === 1\r\n            && slug.options[0].Display.length !== slug.matchLength\r\n          )\r\n        )\r\n      ) {\r\n        this.setState({\r\n          helperVisible: true,\r\n          top,\r\n          left,\r\n          ...slug,\r\n        });\r\n      } else {\r\n        if (!requestOnlyIfNoOptions || !slug.options.length) {\r\n          onRequestOptions(str.substr(slug.matchStart, slug.matchLength));\r\n        }\r\n\r\n        this.resetHelper();\r\n      }\r\n    } else {\r\n      this.resetHelper();\r\n    }\r\n  }\r\n\r\n  resetHelper() {\r\n    this.setState({ helperVisible: false, selection: 0 });\r\n  }\r\n\r\n  renderAutocompleteList() {\r\n    const {\r\n      helperVisible,\r\n      left,\r\n      matchStart,\r\n      matchLength,\r\n      options,\r\n      selection,\r\n      top,\r\n      value,\r\n    } = this.state;\r\n\r\n    if (!helperVisible) {\r\n      return null;\r\n    }\r\n\r\n    const { maxOptions, offsetX, offsetY } = this.props;\r\n\r\n    if (options.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    if (selection >= options.length) {\r\n      this.setState({ selection: 0 });\r\n\r\n      return null;\r\n    }\r\n\r\n    const optionNumber = maxOptions === 0 ? options.length : maxOptions;\r\n\r\n    const helperOptions = options.slice(0, optionNumber).map((val, idx) => {\r\n      const highlightStart = val.Display.toLowerCase().indexOf(value.substr(matchStart, matchLength).toLowerCase());\r\n\r\n      return (\r\n        <li\r\n          className={idx === selection ? 'active' : null}\r\n          key={val.Display}\r\n          onClick={() => { this.handleSelection(idx); }}\r\n          onMouseEnter={() => { this.setState({ selection: idx }); }}\r\n        >\r\n          {val.Display.slice(0, highlightStart)}\r\n          <strong>{val.Display.substr(highlightStart, matchLength)}</strong>\r\n          {val.Display.slice(highlightStart + matchLength)}\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <ul className=\"react-autocomplete-input\" style={{ left: left + offsetX, top: top + offsetY }}>\r\n        {helperOptions}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  sanitizeConf = {\r\n    allowedTags: [\"b\", \"i\", \"em\", \"strong\", \"a\", \"p\", \"h1\"],\r\n    allowedAttributes: { a: [\"href\"] }\r\n  };\r\n\r\n  sanitize = (onBlur) => {\r\n    this.setState({ html: sanitizeHtml(this.state.html, this.sanitizeConf) }, onBlur);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div style={{position: \"relative\"}}>\r\n        <ReactQuill \r\n          theme=\"snow\"\r\n          modules={modules}\r\n          formats={formats} \r\n          value={this.state.value} \r\n          onChange={ e => {\r\n              this.setValue(e);\r\n            }\r\n          }\r\n          onBlur={_ => {\r\n            if (this.props.onBlur !== undefined) {\r\n              this.props.onBlur(this.state.value.trim());\r\n            }\r\n          }}\r\n          onBlur2={_ => {\r\n            if (this.props.onBlur !== undefined) {\r\n              this.props.onBlur(this.state.value.trim());\r\n            }\r\n          }}\r\n          onKeyDown={this.handleKeyDown}\r\n          ref={this.refInput}\r\n        />\r\n        {this.renderAutocompleteList()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAutocompleteTextField.propTypes = propTypes;\r\nAutocompleteTextField.defaultProps = defaultProps;\r\n\r\nexport default AutocompleteTextField;\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormHelperText,\r\n  Grid,\r\n  // Box\r\n} from \"@material-ui/core\";\r\n// import TextInput from 'react-autocomplete-input';\r\nimport AutocompleteTextField from \"./AutocompleteTextField\";\r\n// import AutocompleteTextField from 'react-autocomplete-input';\r\n// import 'react-autocomplete-input/dist/bundle.css';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    // selectedPage: state.app.selectedPage,\r\n    // selectedType: state.app.selectedType,\r\n    // selectedWorld: state.app.selectedWorld,\r\n    // selectedWorldID: state.app.selectedWorldID,\r\n    // types: state.app.types,\r\n    // things: state.app.things,\r\n    // user: state.app.user,\r\n    // attributesByID: state.app.attributesByID,\r\n    // attributesByName: state.app.attributesByName,\r\n    // fromLogin: state.app.fromLogin,\r\n    // typeSuggestions: state.app.typeSuggestions,\r\n    // thingSuggestions: state.app.thingSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    // updateSelectedType: type => dispatch(updateSelectedType(type)),\r\n    // addType: type => dispatch(addType(type)),\r\n    // updateType: type => dispatch(updateType(type)),\r\n    // addAttributes: attrs => dispatch(addAttributes(attrs)),\r\n    // setAttributes: attrs => dispatch(setAttributes(attrs)),\r\n    // setTypes: types => dispatch(setTypes(types)),\r\n    // setThings: things => dispatch(setThings(things)),\r\n    // notFromLogin: () => dispatch(notFromLogin({})),\r\n    // addThing: thing => dispatch(addThing(thing)),\r\n    // toggleLogin: () => dispatch(toggleLogin({})),\r\n    // logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // value: \"<a href=\\\"type_5e75999efb4bae172d3fa0ef\\\" rel=\\\"noopener noreferrer\\\" target=\\\"_blank\\\">pizza</a> <span id='type_5e75999efb4bae172d3fa0ef' style=\\\"color: blue\\\">y/Component</span> <em>lasagna</em> \"\r\n      value: props.Value\r\n    };\r\n  }\r\n  // 0123456789112345678921234567893123456789412345678951234567896123456789712345678981234567899123456789\r\n  // pizza <span id='type_5e75999efb4bae172d3fa0ef' style=\"color: blue\">y/Component</span> lasagna \r\n\r\n  getValue = () => {\r\n    return this.state.value;\r\n  }\r\n  \r\n  render() {\r\n    // const [value, changeValue] = useState(props.Value === undefined || props.Value === null ? \"\" : props.Value);\r\n    const displayName = this.props.displayName === undefined ? this.props.fieldName : this.props.displayName;\r\n    \r\n    if (this.props.options !== undefined) {\r\n      return (\r\n        <Grid container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            <InputLabel htmlFor={`text_field_${this.props.fieldName}`}>{displayName}</InputLabel>\r\n          </Grid>\r\n          <Grid item>\r\n            <AutocompleteTextField\r\n              id={`text_field_${this.props.fieldName}`}\r\n              name={`text_field_${this.props.fieldName}`}\r\n              type=\"text\"\r\n              autoComplete=\"Off\"\r\n              // multiline\r\n              // error={this.props.message !== undefined && this.props.message !== \"\"}\r\n              // multiline=\"multiline\"\r\n              error={this.props.message}\r\n              value={this.state.value}\r\n              onChange={e => {\r\n                this.setState({ value: e });\r\n                if (this.props.onChange !== undefined) {\r\n                  this.props.onChange(e);\r\n                }\r\n                // if (this.props.onBlur !== undefined) {\r\n                //   this.props.onBlur(e);\r\n                // }\r\n              }}\r\n              onKeyDown={e => {\r\n                if (this.props.onKeyPress !== undefined) {\r\n                  this.props.onKeyPress(e);\r\n                }\r\n              }}\r\n              onBlur={e => {\r\n                if (this.props.onBlur !== undefined) {\r\n                  this.props.onBlur(this.state.value);\r\n                }\r\n              }}\r\n              // labelWidth={this.props.labelWidth}\r\n              // fullWidth\r\n              options={this.props.options}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return (\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <InputLabel htmlFor={`text_field_${this.props.fieldName}`}>{displayName}</InputLabel>\r\n          { this.props.multiline !== undefined && this.props.multiline ?\r\n            <OutlinedInput\r\n              id={`text_field_${this.props.fieldName}`}\r\n              name={`text_field_${this.props.fieldName}`}\r\n              type=\"text\"\r\n              autoComplete=\"Off\"\r\n              multiline\r\n              error={this.props.message !== undefined && this.props.message !== \"\"}\r\n              value={this.state.value}\r\n              onChange={e => {\r\n                this.setState({ value: e.target.value });\r\n              }}\r\n              onBlur={e => {\r\n                this.props.onBlur(this.state.value.trim());\r\n              }}\r\n              labelWidth={this.props.labelWidth}\r\n              fullWidth\r\n            />\r\n          :\r\n            <OutlinedInput\r\n              id={`text_field_${this.props.fieldName}`}\r\n              name={`text_field_${this.props.fieldName}`}\r\n              type=\"text\"\r\n              autoComplete=\"Off\"\r\n              error={this.props.message !== undefined && this.props.message !== \"\"}\r\n              value={this.state.value}\r\n              onChange={e => {\r\n                this.setState({ value: e.target.value });\r\n              }}\r\n              onBlur={e => {\r\n                this.props.onBlur(this.state.value.trim());\r\n              }}\r\n              labelWidth={this.props.labelWidth}\r\n              fullWidth\r\n            />\r\n          }\r\n          <FormHelperText>\r\n            {this.props.message}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst TextBox = connect(mapStateToProps, mapDispatchToProps)(Control);\r\nexport default TextBox;","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  // FormControl,\r\n  // OutlinedInput,\r\n  // InputLabel,\r\n  Grid,\r\n  // Button,\r\n  Typography,\r\n  Card, CardContent, CardActions,\r\n  IconButton, \r\n  // Tooltip\r\n} from \"@material-ui/core\";\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport ReplyIcon from '@material-ui/icons/Reply';\r\nimport TextBox from \"./TextBox\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    // maxWidth: 345,\r\n  },\r\n});\r\n\r\nconst vote = (comment, theVote, props) => {\r\n  if (props.user === null) {\r\n    return;\r\n  }\r\n  props.changeWaiting(true);\r\n  if (comment.votes[props.user._id] !== undefined && comment.votes[props.user._id] !== theVote) {\r\n    delete comment.votes[props.user._id];\r\n  } else {\r\n    comment.votes[props.user._id] = theVote;\r\n  }\r\n\r\n  const updatedComment = {...props.rootComment};\r\n  delete updatedComment.user;\r\n  // updatedComment.replies.forEach(r => {\r\n  //   cleanReply(r);\r\n  // });\r\n  updatedComment.replies = [];\r\n  props.rootComment.replies.forEach(r => {\r\n    updatedComment.replies.push(cleanReply(r));\r\n  });\r\n  // Calls API\r\n  props.api\r\n    .updateComment(updatedComment)\r\n    .then(res => {\r\n      if (res.error === undefined) {\r\n        props.api.getComments(props.world._id, props.objectType, props.object._id).then(res => {\r\n          res.comments.forEach(comment => {\r\n            prepComment(comment, props);\r\n          });\r\n          props.changeComments(res.comments);\r\n          props.changeWaiting(false);\r\n        });\r\n      } else {\r\n        console.log(res.error);\r\n      }\r\n      props.changeWaiting(false);\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n/**\r\n * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p><p><br></p>\r\n * gets translated to \r\n * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p>\r\n */\r\nconst cleanWYSIWYG = (str) => {\r\n  if (str.endsWith(\"<p><br></p>\")) {\r\n    str = str.substring(0, str.length - 11);\r\n  }\r\n  return str;\r\n}\r\n\r\nconst reply = (text, props, changeReplying, changeValue) => {\r\n  if (props.user === null) {\r\n    return;\r\n  }\r\n  props.changeWaiting(true);\r\n\r\n  const rootComment = {...props.rootComment};\r\n  // Need to search for the right comment\r\n  // Actually in theory, adding it to props.comment should put it in the right place\r\n  const comment = props.comment;\r\n  // Then add the reply\r\n  comment.replies.push({\r\n    time: new Date(),\r\n    user: props.user,\r\n    userID: props.user._id,\r\n    text: cleanWYSIWYG(text),\r\n    votes: {},\r\n    voteSum: 0,\r\n    replies: []\r\n  });\r\n  changeValue(\"\");\r\n  changeReplying(false);\r\n  props.changeWaiting(true);\r\n\r\n  const updatedComment = {...rootComment};\r\n  delete updatedComment.user;\r\n  updatedComment.replies = [];\r\n  rootComment.replies.forEach(r => {\r\n    updatedComment.replies.push(cleanReply(r));\r\n  });\r\n  // updatedComment.replies.forEach(r => {\r\n  //   cleanReply(r);\r\n  // });\r\n  \r\n  // Calls API\r\n  props.api\r\n    .updateComment(updatedComment)\r\n    .then(res => {\r\n      if (res.error === undefined) {\r\n        props.api.getComments(props.world._id, props.objectType, props.object._id).then(res => {\r\n          res.comments.forEach(comment => {\r\n            prepComment(comment, props);\r\n          });\r\n          props.changeComments(res.comments);\r\n          props.changeWaiting(false);\r\n        });\r\n      } else {\r\n        console.log(res.error);\r\n      }\r\n      props.changeWaiting(false);\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\nconst cleanReply = (reply) => {\r\n  const newReply = {...reply};\r\n  delete newReply.user;\r\n  delete newReply.voteSum;\r\n  newReply.replies = [];\r\n  for (let i = 0; i < reply.replies.length; i++) {\r\n    newReply.replies.push(cleanReply(reply.replies[i]));\r\n  }\r\n  return newReply;\r\n}\r\n\r\nconst prepComment = (comment, props) => {\r\n  comment.user = props.allUsers.filter(u => u._id === comment.userID)[0];\r\n  if (comment.user === undefined || comment.user === null) {\r\n    comment.user = {\r\n      _id: comment.userID,\r\n      username: \"Unknown\"\r\n    }\r\n  }\r\n  comment.time = new Date(comment.time);\r\n  comment.voteSum = Object.values(comment.votes).reduce((total, vote) => total + vote, 0);\r\n  comment.replies.forEach(r => {\r\n    prepComment(r, props);\r\n  });\r\n}\r\n\r\nexport default function CommentControl(props) {\r\n  const classes = useStyles();\r\n\r\n  const [value, changeValue] = useState(\"\");\r\n  // const [waiting, changeWaiting] = useState(false);\r\n  const [replying, changeReplying] = useState(false);\r\n  \r\n  return (\r\n    <Grid container spacing={0} direction=\"column\">\r\n      <Grid item>\r\n        <Card className={classes.root}>\r\n          <CardContent>\r\n            <Typography variant=\"body2\" color=\"textSecondary\">\r\n              {props.comment.user.username}: {props.comment.time.toLocaleDateString()} {props.comment.time.toLocaleTimeString()}\r\n            </Typography>\r\n            <Typography component=\"p\">\r\n              <span  dangerouslySetInnerHTML={{__html: props.comment.text}} />\r\n              {/* {props.comment.text} */}\r\n            </Typography>\r\n          </CardContent>\r\n          <CardActions disableSpacing>\r\n            { props.user === null || props.comment.votes[props.user._id] !== 1 ?\r\n              <IconButton \r\n                aria-label=\"upvote comment\"\r\n                onClick={_ => {\r\n                  if (props.user !== null && (props.world.Owner === props.user._id || (props.world.Collaborators !== undefined && props.world.Collaborators.filter(c=> c.userID === props.user._id && c.type === \"collab\").length === 0))) {\r\n                    vote(props.comment, 1, props);\r\n                  }\r\n                }}>\r\n                <ArrowUpwardIcon />\r\n              </IconButton>\r\n            :\r\n              <IconButton \r\n                aria-label=\"upvote comment\"\r\n                color=\"primary\"\r\n                // style={{ color: \"green\" }}\r\n                onClick={_ => {\r\n                  // vote(comment, 1, props);\r\n                }}>\r\n                <ArrowUpwardIcon />\r\n              </IconButton>\r\n            }\r\n            <span style={{ fontWeight: \"bold\", color: props.user === null || props.comment.votes[props.user._id] === undefined ? \"black\" : props.comment.votes[props.user._id] === 1 ? \"blue\" : props.comment.votes[props.user._id] === -1 ? \"red\" : \"black\" }}>{props.comment.voteSum}</span>\r\n            { props.user === null || props.comment.votes[props.user._id] !== -1 ?\r\n              <IconButton \r\n                aria-label=\"downvote comment\"\r\n                onClick={_ => {\r\n                  if (props.user !== null && (props.world.Owner === props.user._id || (props.world.Collaborators !== undefined && props.world.Collaborators.filter(c=> c.userID === props.user._id && c.type === \"collab\").length === 0))) {\r\n                    vote(props.comment, -1, props);\r\n                  }\r\n                }}>\r\n                <ArrowDownwardIcon />\r\n              </IconButton>\r\n            :\r\n              <IconButton \r\n                aria-label=\"downvote comment\"\r\n                color=\"secondary\"\r\n                onClick={_ => {\r\n                  // vote(comment, -1, props);\r\n                }}>\r\n                <ArrowDownwardIcon />\r\n              </IconButton>\r\n            }\r\n            <IconButton style={{ marginLeft: \"auto\" }}\r\n              onClick={_ => {\r\n                if (props.user !== null && (props.world.Owner === props.user._id || (props.world.Collaborators !== undefined && props.world.Collaborators.filter(c=> c.userID === props.user._id && c.type === \"collab\").length === 0))) {\r\n                  // Open a reply box under the card\r\n                  changeReplying(!replying);\r\n                }\r\n              }}\r\n              aria-label=\"reply\">\r\n              <ReplyIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n        </Card>\r\n      </Grid>\r\n\r\n      { props.comment.replies.length > 0 &&\r\n        <Grid item container spacing={0} direction=\"row\">\r\n          <Grid item xs={2}>&nbsp;</Grid>\r\n          <Grid item xs={10} container spacing={0} direction=\"column\">\r\n            {props.comment.replies.map((reply, key) => {\r\n              return (\r\n                <Grid item key={key} style={{ marginTop: \"4px\" }}>\r\n                  <CommentControl \r\n                    comment={reply} \r\n                    user={props.user} \r\n                    world={props.world}\r\n                    object={props.object}\r\n                    objectType={props.objectType}\r\n                    api={props.api}\r\n                    rootComment={props.rootComment}\r\n                    allUsers={props.allUsers} \r\n                    changeComments={newComments => {\r\n                      props.changeComments(newComments);\r\n                    }} \r\n                    changeWaiting={newWaiting => {\r\n                      props.changeWaiting(newWaiting);\r\n                    }}\r\n                    suggestions={props.suggestions}\r\n                  />\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </Grid>\r\n      }\r\n      { replying &&\r\n        <Grid item>\r\n          {/* <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor={`text_field_reply`}>New Reply</InputLabel>\r\n            <OutlinedInput\r\n              id={`text_field_reply`}\r\n              name={`text_field_reply`}\r\n              type=\"text\"\r\n              autoComplete=\"Off\"\r\n              multiline\r\n              value={value}\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onKeyPress={e => {\r\n                if (e.key === 'Enter' && !e.shiftKey) {\r\n                  reply(value,  \r\n                    props, changeReplying, \r\n                    changeValue);\r\n                }\r\n              }}\r\n              labelWidth={80}\r\n              fullWidth\r\n            />\r\n          </FormControl> */}\r\n          <TextBox \r\n            Value={value} \r\n            fieldName=\"New Reply\" \r\n            multiline={true}\r\n            onChange={e => {\r\n              changeValue(e);\r\n              // changeValue(e.target.value);\r\n            }}\r\n            // onBlur={reply => {\r\n            //   changeValue(reply);\r\n            // }}\r\n            onKeyPress={e => {\r\n              if (e.key === 'Enter' && !e.shiftKey) {\r\n                reply(value,  \r\n                  props, changeReplying, \r\n                  changeValue);\r\n              }\r\n            }}\r\n            options={props.suggestions}\r\n            labelWidth={110}\r\n          />\r\n        </Grid>\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  Grid,\r\n  Button\r\n} from \"@material-ui/core\";\r\nimport CommentControl from \"./CommentControl\";\r\nimport TextBox from \"./TextBox\";\r\n\r\n\r\n/**\r\n * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p><p><br></p>\r\n * gets translated to \r\n * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p>\r\n */\r\nconst cleanWYSIWYG = (str) => {\r\n  if (str.endsWith(\"<p><br></p>\")) {\r\n    str = str.substring(0, str.length - 11);\r\n  }\r\n  return str;\r\n}\r\n\r\nconst saveComment = (text, props, changeWaiting, comments, changeComments, changeValue) => {\r\n  changeWaiting(true);\r\n  const comment = {\r\n    _id: null,\r\n    time: new Date(),\r\n    userID: props.user._id,\r\n    worldID: props.world._id,\r\n    objectType: props.objectType,\r\n    objectID: props.object._id,\r\n    text: cleanWYSIWYG(text),\r\n    votes: {},\r\n    replies: []\r\n  };\r\n\r\n  // Calls API\r\n  props.api\r\n    .addComment(comment)\r\n    .then(res => {\r\n      if (res.error === undefined) {\r\n        comment._id = res.commentID;\r\n        comment.user = props.user;\r\n        comment.voteSum = 0;\r\n        const newComments = [...comments];\r\n        newComments.push(comment);\r\n        changeComments(newComments);\r\n        changeValue(\"\");\r\n      } else {\r\n        console.log(res.error);\r\n      }\r\n      changeWaiting(false);\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\nconst prepComment = (comment, allUsers) => {\r\n  comment.user = allUsers.filter(u => u._id === comment.userID)[0];\r\n  if (comment.user === undefined || comment.user === null) {\r\n    comment.user = {\r\n      _id: comment.userID,\r\n      username: \"Unknown\"\r\n    }\r\n  }\r\n  comment.time = new Date(comment.time);\r\n  comment.voteSum = Object.values(comment.votes).reduce((total, vote) => total + vote, 0);\r\n  comment.replies.forEach(r => {\r\n    prepComment(r, allUsers);\r\n  });\r\n}\r\n\r\nexport default function CommentsControl(props) {\r\n  const [value, changeValue] = useState(\"\");\r\n  const [waiting, changeWaiting] = useState(false);\r\n  const [comments, changeComments] = useState([]);\r\n  const [loadComments, changeLoadComments] = useState(true);\r\n  \r\n  if (loadComments && props.allUsers.length > 0) {\r\n    changeLoadComments(false);\r\n    setTimeout(() => {\r\n      props.api.getComments(props.world._id, props.objectType, props.object._id).then(res => {\r\n        res.comments.forEach(comment => {\r\n          prepComment(comment, props.allUsers);\r\n        });\r\n        changeComments(res.comments);\r\n      });\r\n    }, 500);\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"column\">\r\n      { props.objectType !== \"General\" &&\r\n        <Grid item>\r\n          <b>Comments:</b>\r\n        </Grid>\r\n      }\r\n      { comments.map((comment, key) => {\r\n        return (\r\n          <Grid item key={key} container spacing={1} direction=\"column\">\r\n            <CommentControl \r\n              comment={comment} \r\n              rootComment={comment}\r\n              user={props.user} \r\n              world={props.world}\r\n              object={props.object}\r\n              objectType={props.objectType}\r\n              allUsers={props.allUsers} \r\n              api={props.api} \r\n              changeComments={newComments => {\r\n                changeComments(newComments);\r\n              }} \r\n              changeWaiting={changeWaiting}\r\n              suggestions={props.suggestions}\r\n            />\r\n          </Grid>\r\n        );\r\n      })}\r\n      { props.objectType === \"General\" && comments.length === 0 ? \r\n        <Grid item>\r\n          No discussions yet\r\n        </Grid>\r\n      : comments.length === 0 &&\r\n        <Grid item>\r\n          No comments yet\r\n        </Grid>\r\n      }\r\n      { !waiting &&\r\n        <Grid item>\r\n          { (props.user !== null && (props.world.Owner === props.user._id || (props.world.Collaborators !== undefined && props.world.Collaborators.filter(c=> c.userID === props.user._id && c.type === \"collab\").length === 0))) ?\r\n            <TextBox \r\n              Value={value} \r\n              fieldName=\"New Comment\" \r\n              multiline={true}\r\n              onChange={comment => {\r\n                changeValue(comment);\r\n              }}\r\n              onBlur={comment => {\r\n                changeValue(comment);\r\n              }}\r\n              options={props.suggestions}\r\n              labelWidth={110}\r\n            />\r\n          : (props.user !== null && props.objectType === \"General\") ?\r\n            <TextBox \r\n              Value={value} \r\n              fieldName=\"New Discussion\" \r\n              multiline={true}\r\n              onBlur={desc => {\r\n                changeValue(desc);\r\n              }}\r\n              options={props.suggestions}\r\n              labelWidth={110}\r\n            />\r\n          : (props.user === null && props.objectType === \"General\") ?\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"fake_comments_label\">\r\n                You have to log in to start a discussion\r\n              </InputLabel>\r\n              <OutlinedInput\r\n                id=\"fake_comments_label\"\r\n                name=\"fake_comments_label\"\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                disabled={true}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          :\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"fake_comments_label\">\r\n                You have to log in to leave comments\r\n              </InputLabel>\r\n              <OutlinedInput\r\n                id=\"fake_comments_label\"\r\n                name=\"fake_comments_label\"\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                disabled={true}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          }\r\n        </Grid>\r\n      }\r\n      <Grid item>\r\n        <Button\r\n          fullWidth\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          disabled={waiting || value === \"\"}\r\n          onClick={_ => {\r\n            saveComment(value, props, changeWaiting, comments, changeComments, changeValue);\r\n          }}>\r\n          {waiting ? \"Please Wait\" : \"Submit\"}\r\n        </Button>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport {\r\n  // selectWorld, setTypes, setThings, setWorlds, \r\n  // setPublicWorlds, \r\n  // updatePublicWorldForCollab,\r\n  // setAttributes, \r\n  // setTemplates,\r\n  // updateAttributes,\r\n  // setAllUsers,\r\n  notFromLogin,\r\n  toggleLogin\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\nimport { \r\n  Grid\r\n} from \"@material-ui/core\";\r\nimport CommentsControl \r\nfrom \"../../components/Inputs/CommentsControl\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    // selectedPage: state.app.selectedPage,\r\n    // selectedWorld: state.app.selectedWorld,\r\n    // selectedWorldID: state.app.selectedWorldID,\r\n    // worlds: state.app.worlds,\r\n    publicWorlds: state.app.publicWorlds,\r\n    // types: state.app.types,\r\n    // things: state.app.things,\r\n    user: state.app.user,\r\n    // attributesByID: state.app.attributesByID,\r\n    // attributesByName: state.app.attributesByName,\r\n    fromLogin: state.app.fromLogin,\r\n    templates: state.app.templates,\r\n    allUsers: state.app.allUsers,\r\n    userSuggestions: state.app.userSuggestions,\r\n    worldSuggestions: state.app.worldSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    // selectWorld: worldID => dispatch(selectWorld(worldID)),\r\n    // setTypes: types => dispatch(setTypes(types)),\r\n    // setThings: things => dispatch(setThings(things)),\r\n    // setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    // setTemplates: templates => dispatch(setTemplates(templates)),\r\n    // setPublicWorlds: worlds => dispatch(setPublicWorlds(worlds)),\r\n    // updatePublicWorldForCollab: world => dispatch(updatePublicWorldForCollab(world)),\r\n    // setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    // updateAttributes: attributes => dispatch(updateAttributes(attributes)),\r\n    // setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({}))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n  componentDidMount() {\r\n  }\r\n  render() {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    return (\r\n      <Grid item xs={12} container spacing={0} direction=\"column\">\r\n        <Grid item>\r\n          <h3>General Discussion Board</h3>\r\n        </Grid>\r\n        <Grid item>\r\n          This is a place where anyone can discuss anything related to \r\n          writing in general, or to look for collaborators, or something\r\n          to collaborate on.\r\n        </Grid>\r\n        <Grid item>\r\n          I plan to add filtering capabilities in the future.\r\n        </Grid>\r\n        <Grid item>\r\n          <CommentsControl \r\n            user={this.props.user} \r\n            allUsers={this.props.allUsers}\r\n            object={{_id: \"General\"}}\r\n            objectType=\"General\"\r\n            world={{_id: \"General\"}}\r\n            api={this.api} \r\n            onChange={this.commentsChange}\r\n          /> \r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\nconst GeneralDiscussionPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default GeneralDiscussionPage;\r\n","\r\nimport Home from \"@material-ui/icons/Home\";\r\nimport Forum from \"@material-ui/icons/Forum\";\r\nimport HomePage from \"../../views/Home\";\r\nimport GeneralDiscussionPage from \"../../views/Discussion/GeneralDiscussion\";\r\n\r\n\r\nconst menuRoutes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Home\",\r\n    icon: Home,\r\n    component: HomePage,\r\n  },\r\n  {\r\n    path: \"/discussion\",\r\n    name: \"Discussion\",\r\n    icon: Forum,\r\n    component: GeneralDiscussionPage,\r\n  }\r\n];\r\n\r\nexport default menuRoutes;\r\n","import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\nimport {\r\n  // Button,\r\n  Grid,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Icon,\r\n  FormControl,\r\n  InputLabel,\r\n  OutlinedInput,\r\n  Fab,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport { Add, Star, Search } from \"@material-ui/icons\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport StarBorderIcon from \"@material-ui/icons/StarBorder\";\r\nimport { connect } from \"react-redux\";\r\nimport menuRoutes from \"./routes\";\r\nimport {\r\n  setWorlds,\r\n  setPublicWorlds,\r\n  setTemplates,\r\n  setAllUsers,\r\n  setFollowingWorlds,\r\n  toggleMenu,\r\n  logout,\r\n  // toggleLogin\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    worlds: state.app.worlds,\r\n    publicWorlds: state.app.publicWorlds,\r\n    user: state.app.user,\r\n    followingWorlds: state.app.followingWorlds,\r\n    width: state.app.width\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    setPublicWorlds: worlds => dispatch(setPublicWorlds(worlds)),\r\n    setTemplates: templates => dispatch(setTemplates(templates)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    setFollowingWorlds: worldIDs => dispatch(setFollowingWorlds(worldIDs)),\r\n    toggleMenu: () => dispatch(toggleMenu({})),\r\n    // toggleLogin: () => dispatch(toggleLogin({}))\r\n    logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Menu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      browse: false,\r\n      Filter: \"\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.api.getWorlds(true).then(res => {\r\n      this.props.setPublicWorlds(res.publicWorlds.worlds);\r\n      this.props.setTemplates(res.templates.templates);\r\n      this.props.setAllUsers(res.allUsers);\r\n      \r\n      if (this.props.user !== null) {\r\n        if (res.userWorlds.worlds === undefined) {\r\n          this.props.logout();\r\n        } else {\r\n          this.props.setWorlds(res.userWorlds.worlds);\r\n        }\r\n      }\r\n    });\r\n    // this.api.getPublicWorlds().then(res => {\r\n    //   this.props.setPublicWorlds(res.worlds);\r\n    // });\r\n    // if (this.props.user !== null) {\r\n    //   this.api.getWorldsForUser().then(res => {\r\n    //     if (res.worlds !== undefined) {\r\n    //       this.props.setWorlds(res.worlds);\r\n    //     }\r\n    //     else {\r\n    //       // User's login is no longer valid.\r\n    //       this.props.logout();\r\n    //     }\r\n    //   });\r\n    // }\r\n  }\r\n\r\n  links() {\r\n    return (\r\n      <div>\r\n        {menuRoutes.map((prop, key) => (\r\n          <ListItem key={key} className=\"curvedButton\">\r\n            <NavLink\r\n              to={prop.path}\r\n              onClick={_ => {\r\n                this.props.toggleMenu();\r\n              }}\r\n              style={{\r\n                width: `${this.props.width}px`\r\n              }}\r\n              className=\"MyButton\"\r\n              activeClassName=\"active\"\r\n            >\r\n              <ListItem button>\r\n                {typeof prop.icon === \"string\" ? (\r\n                  <Icon className=\"marginLeft\">{prop.icon}</Icon>\r\n                ) : (\r\n                  <prop.icon className=\"marginLeft\" />\r\n                )}\r\n                &nbsp;\r\n                <ListItemText primary={prop.name} className=\"marginLeft\" />\r\n              </ListItem>\r\n            </NavLink>\r\n          </ListItem>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  toggleFollow = (worldID, follow) => {\r\n    let followingWorlds = [...this.props.followingWorlds];\r\n    if (follow) {\r\n      followingWorlds.push(worldID);\r\n    } else {\r\n      const index = followingWorlds.indexOf(worldID);\r\n      followingWorlds.splice(index, 1);\r\n    }\r\n    if (this.props.user !== null) {\r\n      const user = { ...this.props.user };\r\n      user.followingWorlds = followingWorlds;\r\n      this.props.setFollowingWorlds(followingWorlds);\r\n      this.api.updateUser(user);\r\n    } else {\r\n      this.props.setFollowingWorlds(followingWorlds);\r\n    }\r\n  };\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value =\r\n      e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  publicWorlds() {\r\n    const followingWorlds = [];\r\n    const otherWorlds = [];\r\n    if (\r\n      this.props.publicWorlds !== undefined &&\r\n      this.props.publicWorlds !== null &&\r\n      this.props.publicWorlds.error === undefined\r\n    ) {\r\n      this.props.publicWorlds.forEach(w => {\r\n        if (this.state.browse) {\r\n          if (\r\n            this.state.Filter === \"\" ||\r\n            w.Name.toLowerCase().includes(this.state.Filter.toLowerCase())\r\n          ) {\r\n            if (this.props.followingWorlds.includes(w._id)) {\r\n              followingWorlds.push(w);\r\n            } else {\r\n              otherWorlds.push(w);\r\n            }\r\n          }\r\n        } else if (this.props.followingWorlds.includes(w._id)) {\r\n          followingWorlds.push(w);\r\n        }\r\n      });\r\n    }\r\n    if (this.state.browse) {\r\n      return (\r\n        <Grid container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"filter\">Filter</InputLabel>\r\n              <OutlinedInput\r\n                id=\"filter\"\r\n                name=\"Filter\"\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                value={this.state.Filter}\r\n                onChange={this.handleUserInput}\r\n                labelWidth={43}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item>\r\n            <List>\r\n              {followingWorlds.map((w, key) => (\r\n                <ListItem key={key} className=\"curvedButton\">\r\n                  <NavLink\r\n                    to={`/project/details/${w._id}`}\r\n                    onClick={_ => {\r\n                      this.props.toggleMenu();\r\n                    }}\r\n                    style={{\r\n                      width: `${this.props.width - 80}px`\r\n                    }}\r\n                    className=\"MySmallerButton\"\r\n                    activeClassName=\"active\"\r\n                  >\r\n                    <ListItem button>\r\n                      <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                    </ListItem>\r\n                  </NavLink>\r\n                  <Fab\r\n                    size=\"small\"\r\n                    color=\"primary\"\r\n                    onClick={e => {\r\n                      this.toggleFollow(w._id, false);\r\n                    }}\r\n                  >\r\n                    <Star />\r\n                  </Fab>\r\n                </ListItem>\r\n              ))}\r\n              {otherWorlds.map((w, key) => (\r\n                <ListItem key={key} className=\"curvedButton\">\r\n                  <NavLink\r\n                    to={`/project/details/${w._id}`}\r\n                    onClick={_ => {\r\n                      this.props.toggleMenu();\r\n                    }}\r\n                    style={{\r\n                      width: `${this.props.width - 80}px`\r\n                    }}\r\n                    className=\"MySmallerButton\"\r\n                    activeClassName=\"active\"\r\n                  >\r\n                    <ListItem button>\r\n                      <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                    </ListItem>\r\n                  </NavLink>\r\n                  <Fab\r\n                    size=\"small\"\r\n                    color=\"primary\"\r\n                    onClick={e => {\r\n                      this.toggleFollow(w._id, true);\r\n                    }}\r\n                  >\r\n                    <StarBorderIcon />\r\n                  </Fab>\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n    return followingWorlds.map((w, key) => (\r\n      <ListItem key={key} className=\"curvedButton\">\r\n        <NavLink\r\n          to={`/project/details/${w._id}`}\r\n          onClick={_ => {\r\n            this.props.toggleMenu();\r\n          }}\r\n          style={{\r\n            width: `${this.props.width}px`\r\n          }}\r\n          className=\"MyButton\"\r\n          activeClassName=\"active\"\r\n        >\r\n          <ListItem button>\r\n            <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n          </ListItem>\r\n        </NavLink>\r\n      </ListItem>\r\n    ));\r\n  }\r\n\r\n  myWorlds() {\r\n    if (this.props.user === null || this.props.user === undefined) {\r\n      return \"\";\r\n    } else {\r\n      const worldLinks =\r\n        this.props.worlds === undefined\r\n          ? \"\"\r\n          : this.props.worlds.map((w, key) => (\r\n              <ListItem key={key} className=\"curvedButton\">\r\n                <NavLink\r\n                  to={`/project/details/${w._id}`}\r\n                  onClick={_ => {\r\n                    this.props.toggleMenu();\r\n                  }}\r\n                  style={{\r\n                    width: `${this.props.width}px`\r\n                  }}\r\n                  className=\"MyButton\"\r\n                  activeClassName=\"active\"\r\n                >\r\n                  <ListItem button>\r\n                    <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                  </ListItem>\r\n                </NavLink>\r\n              </ListItem>\r\n            ));\r\n      return worldLinks;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <List>\r\n        {this.links()}\r\n        <ListItem>\r\n          <ListItemText display=\"none\" primary={\"Public Projects\"} />\r\n          <Tooltip title={`Browse Public Projects`}>\r\n            <Fab\r\n              size=\"small\"\r\n              color=\"primary\"\r\n              onClick={e => {\r\n                this.setState({ browse: !this.state.browse });\r\n              }}\r\n            >\r\n              <Search />\r\n            </Fab>\r\n          </Tooltip>\r\n        </ListItem>\r\n        {this.publicWorlds()}\r\n        { this.props.user !== null &&\r\n          <ListItem>\r\n            <ListItemText primary={\"My Projects\"} />\r\n          </ListItem>\r\n        }\r\n        { this.props.user !== null &&\r\n          <ListItem className=\"curvedButton\">\r\n            <NavLink \r\n            to={`/project/create`}\r\n            onClick={_ => {\r\n              this.props.toggleMenu();\r\n            }}\r\n            style={{\r\n              width: `${this.props.width}px`\r\n            }} \r\n            className=\"MyButton\" \r\n            activeClassName=\"active\">\r\n              <ListItem button>\r\n                <Add />\r\n                <ListItemText primary={\"Create New\"} />\r\n              </ListItem>\r\n            </NavLink>\r\n          </ListItem>\r\n        }\r\n        {this.myWorlds()}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nconst MobileMenu = connect(mapStateToProps, mapDispatchToProps)(Menu);\r\nexport default MobileMenu;\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport {\r\n  Menu, MenuItem,\r\n  ListItem, ListItemText\r\n} from '@material-ui/core';\r\nimport {\r\n  Person\r\n} from \"@material-ui/icons\";\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: '1px solid #d3d4d5',\r\n  },\r\n})((props) => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: 'bottom',\r\n      horizontal: 'center',\r\n    }}\r\n    transformOrigin={{\r\n      vertical: 'top',\r\n      horizontal: 'center',\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\n// const StyledMenuItem = withStyles((theme) => ({\r\n//   root: {\r\n//     '&:focus': {\r\n//       backgroundColor: theme.palette.primary.main,\r\n//       '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n//         color: theme.palette.common.white,\r\n//       },\r\n//     },\r\n//   },\r\n// }))(MenuItem);\r\n\r\nexport default function UserMenu(props) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  return (\r\n    <span className=\"float-right blue whiteFont\">\r\n      <ListItem \r\n        aria-controls=\"user-menu\" aria-haspopup=\"true\"\r\n        style={{cursor: \"pointer\"}} \r\n        onClick={handleClick} \r\n        className=\"curvedButton float-right\">\r\n        <Person/>\r\n        <ListItemText primary={` ${props.username}`}/>\r\n      </ListItem>\r\n      <StyledMenu\r\n        id=\"customized-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={_ => {setAnchorEl(null)}}\r\n      >\r\n        <MenuItem onClick={_ => {\r\n          // if (props.onProfile !== undefined)\r\n          //   props.onProfile();\r\n          setAnchorEl(null);\r\n        }}>\r\n          <NavLink\r\n            to=\"/User/Profile\"\r\n            // onClick={_ => {\r\n            //   this.props.toggleMenu();\r\n            // }}\r\n            style={{\r\n              color:\"black\"\r\n            }}\r\n            // className=\"MyButton\"\r\n            // activeClassName=\"active\"\r\n          >\r\n            <ListItemText primary=\"Profile\" />\r\n          </NavLink>\r\n        </MenuItem>\r\n        <MenuItem\r\n          style={{\r\n            color:\"black\"\r\n          }} \r\n          onClick={_ => {\r\n            if (props.onLogout !== undefined)\r\n              props.onLogout();\r\n            setAnchorEl(null);\r\n          }}>\r\n          <ListItemText primary=\"Logout\" />\r\n        </MenuItem>\r\n      </StyledMenu>\r\n    </span>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  AppBar, Toolbar, ListItem, \r\n  ListItemText, \r\n  // Icon, \r\n  IconButton, \r\n  // Button\r\n} from \"@material-ui/core\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport PersonIcon from '@material-ui/icons/Person';\r\n// import { NavLink } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  setWorlds,\r\n  loadFromStorage,\r\n  toggleMenu,\r\n  toggleLogin,\r\n  logout,\r\n  redirectTo\r\n} from \"../../redux/actions/index\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport API from \"../../smartAPI\";\r\nimport MobileMenu from \"./MobileMenu\";\r\nimport UserMenu from \"./UserMenu\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    user: state.app.user,\r\n    selectedWorld: state.app.selectedWorld,\r\n    mobileMenuOpen: !state.app.menuOpen // This defaults to closed instead of open\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    loadFromStorage: () => dispatch(loadFromStorage({})),\r\n    toggleMenu: () => dispatch(toggleMenu({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    redirectTo: page => dispatch(redirectTo(page))\r\n  };\r\n}\r\nclass Bar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.loadFromStorage();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Grid container spacing={0}>\r\n            <Grid item xs>\r\n              <IconButton\r\n                style={{ color: \"white\" }}\r\n                aria-label=\"Menu\"\r\n                onClick={_ => {\r\n                  this.props.toggleMenu();\r\n                }}\r\n              >\r\n                <MenuIcon />\r\n              </IconButton>\r\n            </Grid>\r\n            <Grid item xs>\r\n              <ListItem className=\"curvedButton\">\r\n                <ListItemText\r\n                  primary={\r\n                    this.props.selectedWorld === null\r\n                      ? \"Welcome!\"\r\n                      : this.props.selectedWorld.Name\r\n                  }\r\n                />\r\n              </ListItem>\r\n            </Grid>\r\n            <Grid item xs>\r\n              { this.props.user === null || this.props.user.username === undefined ? \r\n                <span style={{cursor: \"pointer\"}} \r\n                  onClick={_ => {\r\n                    this.props.toggleLogin();\r\n                  }}\r\n                  className=\"float-right blue whiteFont\">\r\n                  <ListItem className=\"curvedButton float-right\">\r\n                    <PersonIcon/>\r\n                    <ListItemText primary=\" Login/Register\"/>\r\n                  </ListItem>\r\n                </span>\r\n              : \r\n                <UserMenu \r\n                  username={this.props.user.username}\r\n                  onLogout={_ => {\r\n                    this.api.logout().then(_ => {\r\n                      this.props.logout();\r\n                    });\r\n                  }}\r\n                />\r\n              }\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n        {this.props.mobileMenuOpen &&\r\n          <Box display={{ xs: 'inline', sm: 'none' }}>\r\n            <MobileMenu />\r\n          </Box>\r\n        }\r\n      </AppBar>\r\n    );\r\n  }\r\n}\r\n\r\nconst NavBar = connect(mapStateToProps, mapDispatchToProps)(Bar);\r\nexport default NavBar;\r\n","import React, { Component } from \"react\";\r\nimport \"../../App.css\";\r\n// import logo from \"../../logo.svg\";\r\nimport logo from \"../../assets/img/ANB.png\";\r\nimport {\r\n  // Button,\r\n  Grid,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Icon,\r\n  Divider,\r\n  FormControl,\r\n  InputLabel,\r\n  OutlinedInput,\r\n  Fab,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport { Add, Star, Search } from \"@material-ui/icons\";\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport menuRoutes from \"./routes\";\r\nimport {\r\n  setWorlds,\r\n  setPublicWorlds,\r\n  setFollowingWorlds,\r\n  setTemplates,\r\n  setAllUsers,\r\n  logout\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    worlds: state.app.worlds,\r\n    publicWorlds: state.app.publicWorlds,\r\n    user: state.app.user,\r\n    followingWorlds: state.app.followingWorlds\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    setPublicWorlds: worlds => dispatch(setPublicWorlds(worlds)),\r\n    setFollowingWorlds: worldIDs => dispatch(setFollowingWorlds(worldIDs)),\r\n    setTemplates: templates => dispatch(setTemplates(templates)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Bar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      browse: false,\r\n      Filter: \"\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.api.getWorlds(true).then(res => {\r\n      this.props.setPublicWorlds(res.publicWorlds.worlds);\r\n      this.props.setTemplates(res.templates.templates);\r\n      this.props.setAllUsers(res.allUsers);\r\n      \r\n      if (this.props.user !== null) {\r\n        if (res.userWorlds.worlds === undefined) {\r\n          this.props.logout();\r\n        } else {\r\n          this.props.setWorlds(res.userWorlds.worlds);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  links() {\r\n    return (\r\n      menuRoutes.map((prop, key) => \r\n        <ListItem key={key} className=\"curvedButton\">\r\n          <NavLink to={prop.path} className=\"MyButton\" activeClassName=\"active\">\r\n            <ListItem button>\r\n              {typeof prop.icon === \"string\" ? (\r\n                <Icon className=\"marginLeft\">{prop.icon}</Icon>\r\n              ) : (\r\n                <prop.icon className=\"marginLeft\" />\r\n              )}\r\n              &nbsp;\r\n              <ListItemText primary={prop.name} className=\"marginLeft\" />\r\n            </ListItem>\r\n          </NavLink>\r\n        </ListItem>\r\n      )\r\n    );\r\n  }\r\n\r\n  brand() {\r\n    return (\r\n      <NavLink to={`/`} className=\"BlackTextButton\" activeClassName=\"active\">\r\n        <ListItem>\r\n          <img src={logo} alt=\"logo\" className=\"App-logo\" />\r\n          <ListItemText primary={this.props.logoText} />\r\n        </ListItem>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  toggleFollow = (worldID, follow) => {\r\n    let followingWorlds = [...this.props.followingWorlds];\r\n    if (follow) {\r\n      followingWorlds.push(worldID);\r\n    } else {\r\n      const index = followingWorlds.indexOf(worldID);\r\n      followingWorlds.splice(index, 1);\r\n    }\r\n    if (this.props.user !== null) {\r\n      const user = { ...this.props.user };\r\n      user.followingWorlds = followingWorlds;\r\n      this.props.setFollowingWorlds(followingWorlds);\r\n      this.api.updateUser(user);\r\n    } else {\r\n      this.props.setFollowingWorlds(followingWorlds);\r\n    }\r\n  };\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value =\r\n      e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  publicWorlds() {\r\n    const followingWorlds = [];\r\n    const otherWorlds = [];\r\n    if (this.props.publicWorlds !== undefined &&\r\n      this.props.publicWorlds !== null &&\r\n      this.props.publicWorlds.error === undefined) {\r\n      this.props.publicWorlds.forEach(w => {\r\n        if (this.state.browse) {\r\n          if (this.state.Filter === \"\" || w.Name.toLowerCase().includes(this.state.Filter.toLowerCase())) {\r\n            if (this.props.followingWorlds.includes(w._id)) {\r\n              followingWorlds.push(w);\r\n            }\r\n            else {\r\n              otherWorlds.push(w);\r\n            }\r\n          }\r\n        } else if (this.props.followingWorlds.includes(w._id)) {\r\n          followingWorlds.push(w);\r\n        }\r\n      });\r\n    }\r\n    if (this.state.browse) {\r\n      return (\r\n        <Grid container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"filter\">Filter</InputLabel>\r\n              <OutlinedInput\r\n                id=\"filter\"\r\n                name=\"Filter\"\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                value={this.state.Filter}\r\n                onChange={this.handleUserInput}\r\n                labelWidth={43}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item>\r\n            <List>\r\n              {\r\n                followingWorlds.map((w, key) => \r\n                  <ListItem key={key} className=\"curvedButton\">\r\n                    <NavLink to={`/project/details/${w._id}`} className=\"MySmallerButton\" activeClassName=\"active\">\r\n                      <ListItem button>\r\n                        <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                      </ListItem>\r\n                    </NavLink>\r\n                    <Fab\r\n                      size=\"small\"\r\n                      color=\"primary\"\r\n                      onClick={e => {\r\n                        this.toggleFollow(w._id, false);\r\n                      }}\r\n                    >\r\n                      <Star />\r\n                    </Fab>\r\n                  </ListItem>\r\n                )\r\n              }\r\n              {\r\n                otherWorlds.map((w, key) => \r\n                  <ListItem key={key} className=\"curvedButton\">\r\n                    <NavLink to={`/project/details/${w._id}`} className=\"MySmallerButton\" activeClassName=\"active\">\r\n                      <ListItem button>\r\n                        <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                      </ListItem>\r\n                    </NavLink>\r\n                    <Fab\r\n                      size=\"small\"\r\n                      color=\"primary\"\r\n                      onClick={e => {\r\n                        this.toggleFollow(w._id, true);\r\n                      }}\r\n                    >\r\n                      <StarBorderIcon />\r\n                    </Fab>\r\n                  </ListItem>\r\n                )\r\n              }\r\n            </List>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n    return (\r\n      followingWorlds.map((w, key) => \r\n        <ListItem key={key} className=\"curvedButton\">\r\n          <NavLink to={`/project/details/${w._id}`} className=\"MyButton\" activeClassName=\"active\">\r\n            <ListItem button>\r\n              <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n            </ListItem>\r\n          </NavLink>\r\n        </ListItem>\r\n      )\r\n    );\r\n  }\r\n\r\n  myWorlds() {\r\n    if (this.props.user === null || this.props.user === undefined) {\r\n      return \"\";\r\n    } else {\r\n      const worldLinks =\r\n        this.props.worlds === undefined\r\n          ? \"\"\r\n          : this.props.worlds.map((w, key) => \r\n              <ListItem key={key} className=\"curvedButton\">\r\n                <NavLink to={`/project/details/${w._id}`} className=\"MyButton\" activeClassName=\"active\">\r\n                  <ListItem button>\r\n                    <ListItemText primary={w.Name} className=\"marginLeft\" />\r\n                  </ListItem>\r\n                </NavLink>\r\n              </ListItem>\r\n            );\r\n      return (worldLinks);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <List>\r\n        {this.brand()}\r\n        <Divider light />\r\n        {this.links()}\r\n        <ListItem>\r\n          <ListItemText display=\"none\" primary={\"Public Projects\"} />\r\n          <Tooltip title={`Browse Public Projects`}>\r\n            <Fab\r\n              size=\"small\"\r\n              color=\"primary\"\r\n              onClick={e => {\r\n                this.setState({ browse: !this.state.browse });\r\n              }}\r\n            >\r\n              <Search />\r\n            </Fab>\r\n          </Tooltip>\r\n        </ListItem>\r\n        {this.publicWorlds()}\r\n        { this.props.user !== null &&\r\n          <ListItem>\r\n            <ListItemText primary={\"My Projects\"} />\r\n          </ListItem>\r\n        }\r\n        { this.props.user !== null &&\r\n          <ListItem className=\"curvedButton\">\r\n            <NavLink to={`/project/create`} className=\"MyButton\" activeClassName=\"active\">\r\n              <ListItem button>\r\n                <Add />\r\n                <ListItemText primary={\"Create New\"} />\r\n              </ListItem>\r\n            </NavLink>\r\n          </ListItem>\r\n        }\r\n        {this.myWorlds()}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nconst Sidebar = connect(mapStateToProps, mapDispatchToProps)(Bar);\r\nexport default Sidebar;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n// import uuid from 'react-uuid';\r\n// import { ArrowBack, Add, Search } from \"@material-ui/icons\";\r\nimport { \r\n  Grid, \r\n  //Button, \r\n  // Checkbox, FormControl, FormControlLabel,\r\n  // InputLabel, Tooltip, Fab,\r\n  // Select, MenuItem \r\n} from \"@material-ui/core\";\r\nimport { Helmet } from 'react-helmet';\r\n// import { Multiselect } from 'multiselect-react-dropdown';\r\nimport {\r\n  // updateSelectedType,\r\n  // addType,\r\n  // updateType,\r\n  // addAttributes,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  setAllUsers,\r\n  notFromLogin\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\n// import TextBox from \"../../components/Inputs/TextBox\";\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a Type.  It will allow the use of Template Types\r\n  and Super Types to make the process faster.\r\n*/\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    types: state.app.types,\r\n    user: state.app.user,\r\n    fromLogin: state.app.fromLogin,\r\n    allUsers: state.app.allUsers\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setAttributes: attrs => dispatch(setAttributes(attrs)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      email: \"\",\r\n      fieldValidation: {\r\n        username: { valid: true, message: \"\" },\r\n        email: { valid: true, message: \"\" },\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      waiting: false,\r\n      loaded: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      fieldValidation[name].valid !== validation.valid\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  }\r\n\r\n  validateField = fieldName => {\r\n    let value = null;\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"username\":\r\n        value = this.state.username;\r\n        // valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        // if (!valid)\r\n        //   message = \"Only Letters, Numbers, and Spaces allowed in Type Names\";\r\n        // else \r\n        if (value.length < 2) {\r\n          valid = false;\r\n          message = \"Username is too short\";\r\n        } else if (this.props.allUsers.filter(u=>u.username === value && u._id !== this.props.user._id).length !== 0) {\r\n          valid = false;\r\n          message = \"This Username is taken\";\r\n        }\r\n        break;\r\n      case \"email\":\r\n        value = this.state.email;\r\n        valid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i) !== null;\r\n        message = valid ? \"\" : \"Email is invalid\";\r\n        if (valid && value !== this.props.user.email)\r\n          message = \"You will be sent a confirmation email at your new email upon submission.  Please use the link.\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  }\r\n\r\n  validateForm = respond => {\r\n    const nameValid = this.validateField(\"username\");\r\n    const emailValid = this.validateField(\"email\");\r\n    const formValid = nameValid.valid && emailValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.Name = nameValid;\r\n    this.setState(\r\n      {\r\n        formValid: formValid,\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  }\r\n\r\n  onSubmit = () => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true }, this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  }\r\n\r\n  submitThroughAPI = () => {\r\n    const user = {\r\n      _id: this.props.user._id,\r\n      username: this.state.username.trim(),\r\n      email: this.state.email.trim()\r\n    };\r\n\r\n    this.api.updateUser(user).then(res => {\r\n      // Should do all the same stuff that is done on login.\r\n      if (res.user === null) {\r\n        let errors = this.state.fieldValidation;\r\n        errors.loginError = { message: res.error, valid: false, show: true };\r\n        this.setState({ fieldValidation: errors, waiting: false });\r\n      }\r\n      else {\r\n        this.props.userLogin(res.user);\r\n        this.api.getWorldsForUser(res.user._id).then(res => {\r\n          this.props.setWorlds(res.worlds);\r\n          this.props.onLogin(res.user);\r\n          // this.setState({ redirectTo: \"/\" });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  load = () => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        redirectTo: null,\r\n        message: \"Loading...\"\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    \r\n    // if (this.props.allUsers.length === 0) {\r\n    //   this.api.getAllUsers().then(res => {\r\n    //     this.props.setAllUsers(res);\r\n    //     this.setState({\r\n    //       // allUsers: res2, \r\n    //       username: this.props.user.username, \r\n    //       email: this.props.user.email,\r\n    //       loaded: true,\r\n    //       message: \"\"\r\n    //     });\r\n    //   });\r\n    // } else {\r\n      this.setState({\r\n        // allUsers: res2, \r\n        username: this.props.user.username, \r\n        email: this.props.user.email,\r\n        loaded: true,\r\n        message: \"\"\r\n      });\r\n    // }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loaded)\r\n      this.load();\r\n    if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.user === null) {\r\n      return <span>Please log in to be able to access your profile.</span>;\r\n    } else {\r\n      return (\r\n        <Grid item xs={12} container spacing={1} direction=\"column\">\r\n          <Helmet>\r\n            <title>{ `Author's Notebook: User Profile` }</title>\r\n          </Helmet>\r\n          <Grid item>\r\n            <h2>User Profile</h2>\r\n          </Grid>\r\n          <Grid item>\r\n            Username: {this.props.user.username}\r\n            {/* { this.state.loaded && <span>{this.state.username}</span> \r\n              // <TextBox \r\n              //   Value={this.state.username} \r\n              //   fieldName=\"username\" \r\n              //   displayName=\"Username\" \r\n              //   message={this.state.fieldValidation.username.message}\r\n              //   onBlur={name => {\r\n              //     this.setState({ username: name }, this.validateForm);\r\n              //   }}\r\n              //   labelWidth={70}/>\r\n            } */}\r\n          </Grid>\r\n          <Grid item>\r\n            Email: {this.props.user.email}\r\n            {/* { this.state.loaded &&  \r\n              <TextBox \r\n                Value={this.state.email} \r\n                fieldName=\"email\" \r\n                displayName=\"Email\" \r\n                message={this.state.fieldValidation.email.message}\r\n                onBlur={email => {\r\n                  this.setState({ email }, this.validateForm);\r\n                }}\r\n                labelWidth={43}/>\r\n            } */}\r\n          </Grid>\r\n          <Grid item>I'll add more profile elements here as the website grows</Grid>\r\n          {/* <Grid item>\r\n            {Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n              if (\r\n                this.state.fieldValidation[fieldName] !== undefined &&\r\n                this.state.fieldValidation[fieldName].message.length > 0\r\n              ) {\r\n                return (\r\n                  <p className=\"redFont\" key={i}>\r\n                    {this.state.fieldValidation[fieldName].message}\r\n                  </p>\r\n                );\r\n              } else {\r\n                return \"\";\r\n              }\r\n            })}\r\n          </Grid>\r\n          <Grid item>\r\n            <div className=\"float-right\">\r\n              <Button\r\n                variant=\"contained\" color=\"primary\"\r\n                style={{marginLeft: \"4px\"}}\r\n                className=\"w-200\"\r\n                disabled={this.state.waiting}\r\n                onClick={e => {this.onSubmit(false);}}\r\n                type=\"submit\"\r\n              >\r\n                {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n              </Button>\r\n            </div>\r\n          </Grid>\r\n          <Grid item style={{color:\"red\"}}>{this.state.message}</Grid> */}\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst ProfilePage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default ProfilePage;\r\n","import React, { Component } from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {\r\n  Add, Edit\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  Grid, List, ListItem, Button, Tooltip, Fab\r\n} from \"@material-ui/core\";\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\n// import Tooltip from '@material-ui/core/Tooltip';\r\n// import { Fab } from \"@material-ui/core\";\r\nimport {\r\n  updateIndexExpandedPanel\r\n} from \"../../redux/actions/index\";\r\nimport UnderConstruction from \"../../assets/img/under_construction.png\";\r\nimport UnderConstructionWhite from \"../../assets/img/under_construction_white.png\";\r\n\r\n/* \r\n  This component will be used by the WorldDetails component.  It will\r\n  have a link at the top for creating new Things, and will list all\r\n  Things in the selected World, allowing navigation to their Details.  \r\n  The List will have pagination and filtering controls to make it \r\n  easier to manage.\r\n*/\r\nconst mapStateToProps = state => {\r\n  return { \r\n    things: state.app.things,\r\n    types: state.app.types,\r\n    selectedWorld: state.app.selectedWorld,\r\n    user: state.app.user,\r\n    indexExpandedPanel: state.app.indexExpandedPanel\r\n  };\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateIndexExpandedPanel: panel => dispatch(updateIndexExpandedPanel(panel))\r\n  };\r\n}\r\nclass Index extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      redirectTo: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleChange = panel => {\r\n    this.props.updateIndexExpandedPanel(this.props.indexExpandedPanel === panel ? false : panel);\r\n  }\r\n\r\n  renderListForType(type) {\r\n    // TODO: Add a PluralName field to types so I can use it here.  It may end up being useful other places too.\r\n    const things = this.props.things.filter(thing => thing.TypeIDs.includes(type._id));\r\n    return (\r\n      <div className=\"Things\">\r\n        <List style={{ width: \"240px\" }}>\r\n          <ListItem>\r\n            <Button \r\n              fullWidth variant=\"contained\" color=\"primary\" \r\n              onClick={ _ => {this.setState({redirectTo:`/thing/create/type_id_${type._id}`})}}>\r\n              <Add/>{`Create New ${type.Name}`}\r\n            </Button>\r\n          </ListItem>\r\n          {\r\n            things.map((thing, i) => {\r\n              return (\r\n                <ListItem key={i}>\r\n                  <Button \r\n                    fullWidth variant=\"contained\" color=\"primary\" \r\n                    onClick={ _ => {this.setState({redirectTo:`/thing/details/${thing._id}`})}}>\r\n                    {thing.Name}\r\n                  </Button>\r\n                </ListItem>\r\n              );\r\n            })\r\n          }\r\n        </List>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    }\r\n    else {\r\n      const majorless = this.props.things.filter(thing => thing.Types.filter(t=>t.Major).length === 0);\r\n      const createButtons = this.props.selectedWorld !== null && \r\n        this.props.user !== null && \r\n        (this.props.selectedWorld.Owner === this.props.user._id || \r\n          this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\" && c.editPermission).length > 0);\r\n\r\n      return (\r\n        <div>\r\n          <Grid item container spacing={1} direction=\"column\">\r\n            <Grid item>\r\n              {this.props.indexExpandedPanel === \"TYPES\" ? \r\n                <Tooltip title={`Collapse Types`}>\r\n                  <Button \r\n                    onClick={_ => {this.handleChange(\"TYPES\")}}>\r\n                      <KeyboardArrowDownIcon/>\r\n                  </Button>\r\n                </Tooltip>\r\n              :\r\n                <Tooltip title={`Expand Types`}>\r\n                    <Button \r\n                      onClick={_ => {this.handleChange(\"TYPES\")}}>\r\n                      <KeyboardArrowRightIcon/>\r\n                    </Button>\r\n                  </Tooltip>\r\n              }\r\n              <span className={\"MuiTypography-root MuiListItemText-primary MuiTypography-body1\"}>\r\n                { this.props.types.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length > 0 ?\r\n                  <span>Types ({this.props.types.length}) ({this.props.types.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length} <img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstruction} alt=\"Needs Work\" />)</span>\r\n                :\r\n                  <span>Types ({this.props.types.length})</span>\r\n                }\r\n              </span>\r\n              { createButtons &&\r\n                <Tooltip title={`Create New Type`}>\r\n                  <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                    onClick={ _ => {this.setState({redirectTo:`/type/create`})}}>\r\n                    <Add/>\r\n                  </Fab>\r\n                </Tooltip> \r\n              }\r\n            </Grid>\r\n            { this.props.indexExpandedPanel === \"TYPES\" &&\r\n              <Grid item>\r\n                <List style={{ maxWidth: \"380px\" }}>\r\n                  {\r\n                    this.props.types.map((type, i) => {\r\n                      return (\r\n                        <ListItem key={i}>\r\n                          <Grid container spacing={1} direction=\"row\">\r\n                            <Grid item xs={8}>\r\n                              <Tooltip title={`Details for ${type.Name}`}>\r\n                                <Button \r\n                                  fullWidth variant=\"contained\" color=\"primary\" \r\n                                  onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}>\r\n                                  { type.NeedsWork &&\r\n                                    <span><img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />&nbsp;</span>\r\n                                  }\r\n                                  {type.Name}\r\n                                </Button>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            { createButtons &&\r\n                              <Grid item xs={2}>\r\n                                <Tooltip title={`Create New ${type.Name}`}>\r\n                                  <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                                    onClick={ _ => {this.setState({redirectTo:`/thing/create/type_id_${type._id}`})}}>\r\n                                    <Add/>\r\n                                  </Fab>\r\n                                </Tooltip>\r\n                              </Grid>\r\n                            }\r\n                            { createButtons &&\r\n                              <Grid item xs={2}>\r\n                                <Tooltip title={`Edit ${type.Name}`}>\r\n                                  <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                                    onClick={ _ => {this.setState({redirectTo:`/type/edit/${type._id}`})}}>\r\n                                    <Edit/>\r\n                                  </Fab>\r\n                                </Tooltip>\r\n                              </Grid>\r\n                            }\r\n                          </Grid>\r\n                        </ListItem>\r\n                      );\r\n                    })\r\n                  }\r\n                </List>\r\n              </Grid>\r\n            }\r\n            { this.props.types.filter(t=>t.Major).map((type, i) => {\r\n              const things = this.props.things.filter(thing => thing.TypeIDs.includes(type._id));\r\n              return (\r\n                <Grid key={i} item container spacing={1} direction=\"column\">\r\n                  <Grid item>\r\n                    {this.props.indexExpandedPanel === type._id ? \r\n                      <Tooltip title={`Collapse ${type.PluralName === undefined || type.PluralName === \"\" ? `${type.Name}s` : type.PluralName}`}>\r\n                        <Button \r\n                          onClick={_ => {this.handleChange(type._id)}}>\r\n                          <KeyboardArrowDownIcon/>\r\n                        </Button>\r\n                      </Tooltip>\r\n                      :\r\n                      <Tooltip title={`Expand ${type.PluralName === undefined || type.PluralName === \"\" ? `${type.Name}s` : type.PluralName}`}>\r\n                        <Button \r\n                          onClick={_ => {this.handleChange(type._id)}}>\r\n                          <KeyboardArrowRightIcon/>\r\n                        </Button>\r\n                      </Tooltip>\r\n                    }\r\n                    <Tooltip title={`Details for ${type.Name}`}>\r\n                      <Button variant=\"contained\" color=\"primary\" style={{ width: \"220px\" }}\r\n                        onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}>\r\n                        { things.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length > 0 ?\r\n                          <span>\r\n                            { type.NeedsWork &&\r\n                              <span><img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />&nbsp;</span>\r\n                            }\r\n                            {type.PluralName === undefined || type.PluralName === \"\" ? `${type.Name}s ` : `${type.PluralName} `}\r\n                            ({things.length}) \r\n                            ({things.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length} <img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />)\r\n                          </span>\r\n                        :\r\n                          <span>\r\n                            { type.NeedsWork &&\r\n                              <span><img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />&nbsp;</span>\r\n                            }\r\n                            {type.PluralName === undefined || type.PluralName === \"\" ? `${type.Name}s ` : `${type.PluralName} `} \r\n                            ({things.length})\r\n                          </span>\r\n                        }\r\n                      </Button>\r\n                    </Tooltip>\r\n                    { createButtons &&\r\n                      <span>\r\n                        <Tooltip title={`Create New ${type.Name}`}>\r\n                          <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                            onClick={ _ => {this.setState({redirectTo:`/thing/create/type_id_${type._id}`})}}>\r\n                            <Add/>\r\n                          </Fab>\r\n                        </Tooltip>\r\n                        <Tooltip title={`Edit ${type.Name}`}>\r\n                          <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                            onClick={ _ => {this.setState({redirectTo:`/type/edit/${type._id}`})}}>\r\n                            <Edit />\r\n                          </Fab>\r\n                        </Tooltip>\r\n                      </span>\r\n                    }\r\n                  </Grid>\r\n                  {this.props.indexExpandedPanel === type._id &&\r\n                    <Grid item>\r\n                      <List style={{ maxWidth: \"380px\" }}>\r\n                        {\r\n                          things.map((thing, j) => {\r\n                            return (\r\n                              <ListItem key={j}>\r\n                                <Grid container spacing={1} direction=\"row\">\r\n                                  <Grid item xs={10}>\r\n                                    <Tooltip title={`Details for ${thing.Name}`}>\r\n                                      <Button \r\n                                        fullWidth variant=\"contained\" color=\"primary\" \r\n                                        onClick={ _ => {this.setState({redirectTo:`/thing/details/${thing._id}`})}}>\r\n                                        { thing.NeedsWork &&\r\n                                          <span><img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />&nbsp;</span>\r\n                                        }\r\n                                        {thing.Name}\r\n                                      </Button>\r\n                                    </Tooltip>\r\n                                  </Grid>\r\n                                  { createButtons &&\r\n                                    <Grid item xs={2}>\r\n                                      <Tooltip title={`Edit ${thing.Name}`}>\r\n                                        <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                                          onClick={ _ => {this.setState({redirectTo:`/thing/edit/${thing._id}`})}}>\r\n                                          <Edit/>\r\n                                        </Fab>\r\n                                      </Tooltip>\r\n                                    </Grid>\r\n                                  }\r\n                                </Grid>\r\n                              </ListItem>\r\n                            );\r\n                          })\r\n                        }\r\n                      </List>\r\n                    </Grid>\r\n                  }\r\n                </Grid>\r\n              );\r\n            })}\r\n            <Grid item>\r\n              {this.props.indexExpandedPanel === \"OTHER\" ? \r\n                <Tooltip title={`Collapse Other Things`}>\r\n                  <Button \r\n                    onClick={_ => {this.handleChange(\"OTHER\")}}>\r\n                    <KeyboardArrowDownIcon/>\r\n                  </Button>\r\n                </Tooltip>\r\n              :\r\n                <Tooltip title={`Expand Other Things`}>\r\n                  <Button \r\n                    onClick={_ => {this.handleChange(\"OTHER\")}}>\r\n                    <KeyboardArrowRightIcon/>\r\n                  </Button>\r\n                </Tooltip>\r\n              }\r\n              <span className={\"MuiTypography-root MuiListItemText-primary MuiTypography-body1\"}>\r\n                { majorless.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length > 0 ?\r\n                  <span>Other Things ({majorless.length}) ({majorless.filter(t => t.NeedsWork !== undefined && t.NeedsWork).length} <img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstruction} alt=\"Needs Work\" />)</span>\r\n                :\r\n                  <span>Other Things ({majorless.length})</span>\r\n                }\r\n              </span>\r\n              { createButtons &&\r\n                <Tooltip title={`Create New Thing`}>\r\n                  <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                    onClick={ _ => {this.setState({redirectTo:`/thing/create`})}}>\r\n                    <Add/>\r\n                  </Fab>\r\n                </Tooltip>\r\n              }\r\n            </Grid>\r\n            {this.props.indexExpandedPanel === \"OTHER\" &&\r\n              <Grid item>\r\n                <List style={{ maxWidth: \"380px\" }}>\r\n                  {\r\n                    majorless.map((thing, j) => {\r\n                      return (\r\n                        <ListItem key={j}>\r\n                          <Grid container spacing={1} direction=\"row\">\r\n                            <Grid item xs={10}>\r\n                              <Tooltip title={`Details for ${thing.Name}`}>\r\n                                <Button \r\n                                  fullWidth variant=\"contained\" color=\"primary\" \r\n                                  onClick={ _ => {this.setState({redirectTo:`/thing/details/${thing._id}`})}}>\r\n                                  { thing.NeedsWork &&\r\n                                    <span><img style={{ height: \"20px\", marginBottom: \"-4px\" }} src={UnderConstructionWhite} alt=\"Needs Work\" />&nbsp;</span>\r\n                                  }\r\n                                  {thing.Name}\r\n                                </Button>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            { createButtons &&\r\n                              <Grid item xs={2}>\r\n                                <Tooltip title={`Edit ${thing.Name}`}>\r\n                                  <Fab size=\"small\" color=\"primary\" style={{marginLeft: \"8px\"}}\r\n                                    onClick={ _ => {this.setState({redirectTo:`/thing/edit/${thing._id}`})}}>\r\n                                    <Edit/>\r\n                                  </Fab>\r\n                                </Tooltip>\r\n                              </Grid>\r\n                            }\r\n                          </Grid>\r\n                        </ListItem>\r\n                      );\r\n                    })\r\n                  }\r\n                </List>\r\n              </Grid>\r\n            }\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst ThingIndex = connect(mapStateToProps, mapDispatchToProps)(Index);\r\nexport default ThingIndex;\r\n","\r\n/* eslint-disable no-use-before-define */\r\nimport React from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  // Button,\r\n  // List, ListItem,\r\n  // Checkbox, Tooltip\r\n} from \"@material-ui/core\";\r\n\r\n/**\r\n * This control displays everything for the type which is passed to it.\r\n */\r\n\r\nexport default function TypeSummary(props) {\r\n  const type = props.type;\r\n  const types = props.types;\r\n  const things = props.things;\r\n  if (type.typeID === undefined) {\r\n    type.typeID = type._id;\r\n  }\r\n  types.forEach(t => {\r\n    if (t.typeID === undefined) {\r\n      t.typeID = t._id;\r\n    }\r\n  });\r\n  things.forEach(t => {\r\n    if (t.thingID === undefined) {\r\n      t.thingID = t._id;\r\n    }\r\n  });\r\n  let defaults = type.Defaults.filter(d => d.DefaultValue !== \"\" || d.DefaultListValues.length > 0);\r\n  let superTypes = types.filter(t => type.SuperIDs.includes(t.typeID));\r\n  return (\r\n    <Grid item container spacing={1} direction=\"column\">\r\n      <Grid item>\r\n        {type.Name}\r\n      </Grid>\r\n      { superTypes.length > 0 &&\r\n        <Grid item>\r\n          <div style={{ marginLeft: \"10px\" }}>\r\n            Super Types (\r\n              { superTypes.map((t, key) => {\r\n                return (\r\n                  <span key={key}>\r\n                    {key > 0 && <span>,&nbsp;</span>}\r\n                    {t.Name}\r\n                  </span>\r\n                );\r\n              })}\r\n            )\r\n          </div>\r\n        </Grid>\r\n      }\r\n      { type.Attributes.length > 0 &&\r\n        <Grid item>\r\n          <div style={{ marginLeft: \"10px\" }}>\r\n            Attributes (\r\n              { type.Attributes.map((a, aKey) => {\r\n                const attribute = props.attributesByID[a.attrID];\r\n                if (attribute !== undefined) {\r\n                  let attributeType = \"\"; \r\n                  if (attribute.AttributeType === \"Type\") {\r\n                    attributeType = `Type - ${types.filter(t => t.typeID === attribute.DefinedType)[0].Name}`;\r\n                  } else if (attribute.AttributeType === \"List\") {\r\n                    if (attribute.ListType === \"Type\") {\r\n                      attributeType = `List: Type - ${types.filter(t => t.typeID === attribute.DefinedType)[0].Name}`;\r\n                    } else {\r\n                      attributeType = `List: ${attribute.ListType}`;\r\n                    }\r\n                  } else {\r\n                    attributeType = attribute.AttributeType;\r\n                  }\r\n                  return (\r\n                    <span key={aKey}>\r\n                      {aKey > 0 && <span>,&nbsp;</span>}\r\n                      {attribute.Name}&nbsp;({attributeType})\r\n                    </span>\r\n                  );\r\n                } else {\r\n                  return (\r\n                    <span key={aKey}></span>\r\n                  );\r\n                }\r\n              })}\r\n            )\r\n          </div>\r\n        </Grid>\r\n      }\r\n      { defaults !== undefined && defaults.length > 0 &&\r\n        <Grid item>\r\n          <div style={{ marginLeft: \"10px\" }}>\r\n            Defaults (\r\n              { defaults.map((d, dKey) => {\r\n                const attribute = props.attributesByID[d.attrID];\r\n                if (attribute !== undefined) {\r\n                  let defaultValue = \"\"; \r\n                  if (attribute.AttributeType === \"Type\") {\r\n                    defaultValue = props.thing.filter(t => t.thingID === d.DefaultValue)[0].Name;\r\n                  } else if (attribute.AttributeType === \"List\") {\r\n                    for (let i = 0; i < d.DefaultListValues.length; i++) {\r\n                      if (attribute.ListType === \"Type\") {\r\n                        const defThing = things.filter(t => t.thingID === d.DefaultListValues[i])[0];\r\n                        if (defThing !== undefined) {\r\n                          if (i > 0) {\r\n                            defaultValue += \", \";\r\n                          }\r\n                          defaultValue += defThing.Name;\r\n                        }\r\n                      } else {\r\n                        if (i > 0) {\r\n                          defaultValue += \", \";\r\n                        }\r\n                        defaultValue += d.DefaultListValues[i];\r\n                      }\r\n                    }\r\n                  } else {\r\n                    defaultValue = d.DefaultValue;\r\n                  }\r\n                  return (\r\n                    <span key={dKey}>\r\n                      {dKey > 0 && <span>,&nbsp;</span>}\r\n                      {attribute.Name}&nbsp;({defaultValue})\r\n                    </span>\r\n                  );\r\n                } else {\r\n                  return (\r\n                    <span key={dKey}></span>\r\n                  );\r\n                }\r\n              })}\r\n            )\r\n          </div>\r\n        </Grid>\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n","\r\n/* eslint-disable no-use-before-define */\r\nimport React from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  // Button,\r\n  // List, ListItem,\r\n  // Checkbox, Tooltip\r\n} from \"@material-ui/core\";\r\n\r\n/**\r\n * This control displays everything for the thing which is passed to it.\r\n */\r\n\r\nexport default function ThingSummary(props) {\r\n  let types = props.types.filter(t => props.thing.TypeIDs.includes(t.typeID));\r\n  const thing = props.thing;\r\n  const things = props.things;\r\n  if (thing.typeID === undefined) {\r\n    thing.thingID = thing._id;\r\n  }\r\n  types.forEach(t => {\r\n    if (t.typeID === undefined) {\r\n      t.typeID = t._id;\r\n    }\r\n  });\r\n  things.forEach(t => {\r\n    if (t.thingID === undefined) {\r\n      t.thingID = t._id;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Grid item container spacing={1} direction=\"column\">\r\n      <Grid item>\r\n        {thing.Name}\r\n      </Grid>\r\n      { types.length > 0 &&\r\n        <Grid item>\r\n          Types (\r\n            { types.map((t, key) => {\r\n              return (\r\n                <span key={key}>\r\n                  {key > 0 && <span>,&nbsp;</span>}\r\n                  {t.Name}\r\n                </span>\r\n              );\r\n            })}\r\n          )\r\n        </Grid>\r\n      }\r\n      <Grid item>\r\n        Attributes (\r\n          { thing.Attributes.map((a, aKey) => {\r\n            const attribute = props.attributesByID[a.attrID];\r\n            let attributeValue = \"\"; \r\n            if (attribute.AttributeType === \"Type\") {\r\n              attributeValue = things.filter(t => t.thingID === a.Value)[0].Name;\r\n            } else if (attribute.AttributeType === \"List\") {\r\n              for (let i = 0; i < a.ListValues.length; i++) {\r\n                if (i > 0) {\r\n                  attributeValue += \", \";\r\n                }\r\n                if (attribute.ListType === \"Type\") {\r\n                  attributeValue += things.filter(t => t.thingID === a.ListValues[i])[0].Name;\r\n                } else {\r\n                  attributeValue += a.ListValues[i];\r\n                }\r\n              }\r\n            } else {\r\n              attributeValue = a.Value;\r\n            }\r\n            return (\r\n              <span key={aKey}>\r\n                {aKey > 0 && <span>,&nbsp;</span>}\r\n                {attribute.Name}&nbsp;({attributeValue})\r\n              </span>\r\n            );\r\n          })}\r\n        )\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  Button,\r\n  List, ListItem,\r\n  Checkbox,\r\n  Box\r\n} from \"@material-ui/core\";\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport TextBox from \"../Inputs/TextBox\";\r\nimport TypeSummary from \"../Displays/TypeSummary\";\r\nimport ThingSummary from \"../Displays/ThingSummary\";\r\n\r\n\r\nconst validate = (value, props, changeMessage) => {\r\n  const valid = props.templates.filter((t) => t.Name === value).length === 0;\r\n  changeMessage(valid ? \"\" : \"This Template Name is already in use\");\r\n  return valid;\r\n};\r\n\r\nconst saveTemplate = (templateName, selected, props, changeMessage, changeWaiting) => {\r\n  changeWaiting(true);\r\n  const template = {\r\n    _id: null,\r\n    Name: templateName.trim(),\r\n    typeIDs: selected.typeIDs,\r\n    thingIDs: selected.thingIDs,\r\n    worldID: props.world._id\r\n  };\r\n\r\n  // Calls API\r\n  props.api\r\n    .createTemplate(template)\r\n    .then(res => {\r\n      if (res.error === undefined) {\r\n        changeMessage(\"Success\");\r\n        setTimeout(() => {\r\n          changeWaiting(false);\r\n          props.onSave();\r\n        }, 500);\r\n      } else {\r\n        changeMessage(res.error);\r\n        changeWaiting(false);\r\n      }\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n// const addTypeToList = (type, types, attributesByID, typeIDs) => {\r\n//   if (!typeIDs.includes(type._id)) {\r\n//     typeIDs.push(type._id);\r\n//     for (let i = 0; i < type.SuperIDs.length; i++) {\r\n//       let superType = types.filter(t => t._id === type.SuperIDs[i]);\r\n//       if (superType.length > 0){\r\n//         superType = superType[0];\r\n//         typeIDs = addTypeToList(superType, types, attributesByID, typeIDs);\r\n//       }\r\n//     }\r\n//     for (let i = 0; i < type.Attributes.length; i++) {\r\n//       let attr = attributesByID[type.Attributes[i].attrID];\r\n//       if (attr.AttributeType === \"Type\" || (attr.AttributeType === \"List\" && attr.ListType === \"Type\")) {\r\n//         let attrType = types.filter(t => t._id === attr.DefinedType);\r\n//         if (attrType.length > 0) {\r\n//           attrType = attrType[0];\r\n//           typeIDs = addTypeToList(attrType, types, attributesByID, typeIDs);\r\n//         }\r\n//       }\r\n//     }\r\n//   }\r\n//   return typeIDs;\r\n// };\r\n\r\n// const removeTypeFromList = (type, types, attributesByID, typeIDs) => {\r\n//   const index = typeIDs.indexOf(type._id);\r\n//   if (index > -1) {\r\n//     typeIDs.splice(index, 1);\r\n//     const subTypes = types.filter(t=>t.SuperIDs.includes(type._id));\r\n//     for (let i = 0; i < subTypes.length; i++) {\r\n//       let subType = subTypes[i];\r\n//       if (subType.length > 0){\r\n//         subType = subType[0];\r\n//         typeIDs = removeTypeFromList(subType, types, attributesByID, typeIDs);\r\n//       }\r\n//     }\r\n//     const references = types.filter(t=>t.ReferenceIDs !== undefined && t.ReferenceIDs.includes(type._id));\r\n//     for (let i = 0; i < references.length; i++) {\r\n//       let reference = references[i];\r\n//       typeIDs = removeTypeFromList(reference, types, attributesByID, typeIDs);\r\n//     }\r\n//   }\r\n//   return typeIDs;\r\n// };\r\n\r\n/**\r\n * finished\r\n */\r\nconst addType = (type, types, things, attributesByID, selected) => {\r\n  let newSelected = {...selected};\r\n  if (!newSelected.typeIDs.includes(type._id)) {\r\n    newSelected.typeIDs.push(type._id);\r\n    for (let i = 0; i < type.SuperIDs.length; i++) {\r\n      if (!newSelected.typeIDs.includes(type.SuperIDs[i])) {\r\n        let superType = types.filter(t => t._id === type.SuperIDs[i]);\r\n        if (superType.length > 0){\r\n          superType = superType[0];\r\n          newSelected = addType(superType, types, things, attributesByID, newSelected);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < type.Attributes.length; i++) {\r\n      let attr = attributesByID[type.Attributes[i].attrID];\r\n      if (attr !== undefined) {\r\n        if (attr.AttributeType === \"Type\" || (attr.AttributeType === \"List\" && attr.ListType === \"Type\")) {\r\n          if (!newSelected.typeIDs.includes(attr.DefinedType)) {\r\n            let attrType = types.filter(t => t._id === attr.DefinedType);\r\n            if (attrType.length > 0) {\r\n              attrType = attrType[0];\r\n              newSelected = addType(attrType, types, things, attributesByID, newSelected);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (type.Defaults !== undefined && type.Default !== null) {\r\n      for (let i = 0; i < type.Defaults.length; i++) {\r\n        let attr = attributesByID[type.Defaults[i].attrID];\r\n        if (attr.AttributeType === \"Type\") {\r\n          if (!newSelected.thingIDs.includes(type.Defaults[i].DefaultValue)) {\r\n            let defaultThing = things.filter(t => t._id === type.Defaults[i].DefaultValue);\r\n            if (defaultThing.length > 0) {\r\n              defaultThing = defaultThing[0];\r\n              newSelected = addThing(defaultThing, types, things, attributesByID, newSelected);\r\n            }\r\n          }\r\n        } else if (attr.AttributeType === \"List\" && attr.ListType === \"Type\") {\r\n          for (let j = 0; j < type.Defaults[i].DefaultListValues.length; j++) {\r\n            if (!newSelected.thingIDs.includes(type.Defaults[i].DefaultListValues[j])) {\r\n              let defaultThing = things.filter(t => t._id === type.Defaults[i].DefaultListValues[j]);\r\n              if (defaultThing.length > 0) {\r\n                defaultThing = defaultThing[0];\r\n                newSelected = addThing(defaultThing, types, things, attributesByID, newSelected);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newSelected;\r\n};\r\n\r\n/**\r\n * finished, dependant on removeThing\r\n */\r\nconst removeType = (type, types, things, attributesByID, selected) => {\r\n  let newSelected = {...selected};\r\n  const index = newSelected.typeIDs.indexOf(type._id);\r\n  if (index > -1) {\r\n    newSelected.typeIDs.splice(index, 1);\r\n    const subTypes = types.filter(t=>t.SuperIDs.includes(type._id));\r\n    for (let i = 0; i < subTypes.length; i++) {\r\n      let subType = subTypes[i];\r\n      if (subType.length > 0){\r\n        subType = subType[0];\r\n        newSelected = removeType(subType, types, things, attributesByID, newSelected);\r\n      }\r\n    }\r\n    const references = types.filter(t=>t.ReferenceIDs !== undefined && t.ReferenceIDs.includes(type._id));\r\n    for (let i = 0; i < references.length; i++) {\r\n      let reference = references[i];\r\n      newSelected = removeType(reference, types, things, attributesByID, newSelected);\r\n    }\r\n    const removeUs = things.filter(t => t.TypeIDs.includes(type._id));\r\n    for (let i = 0; i < removeUs.length; i++) {\r\n      let removeMe = removeUs[i];\r\n      newSelected = removeThing(removeMe, types, things, attributesByID, newSelected);\r\n    }\r\n  }\r\n  return newSelected;\r\n};\r\n\r\n/**\r\n * finished\r\n */\r\nconst addThing = (thing, types, things, attributesByID, selected) => {\r\n  let newSelected = {...selected};\r\n  if (!newSelected.thingIDs.includes(thing._id)) {\r\n    newSelected.thingIDs.push(thing._id);\r\n    for (let i = 0; i < thing.TypeIDs.length; i++) {\r\n      const typeID = thing.TypeIDs[i];\r\n      if (!newSelected.typeIDs.includes(typeID)) {\r\n        let type = types.filter(t => t._id === typeID);\r\n        if (type.length > 0) {\r\n          type = type[0];\r\n          newSelected = addType(type, types, things, attributesByID, newSelected);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < thing.Attributes.length; i++) {\r\n      const attr = attributesByID[thing.Attributes[i].attrID];\r\n      if (attr.AttributeType === \"Type\" || (attr.AttributeType === \"List\" && attr.ListType === \"Type\")) {\r\n        if (!newSelected.typeIDs.includes(attr.DefinedType)) {\r\n          let attrType = types.filter(t => t._id === attr.DefinedType);\r\n          if (attrType.length > 0) {\r\n            attrType = attrType[0];\r\n            newSelected = addType(attrType, types, things, attributesByID, newSelected);\r\n          }\r\n        }\r\n      }\r\n      if (attr.AttributeType === \"Type\") {\r\n        const thingAttr = thing.Attributes[i];\r\n        if (!newSelected.thingIDs.includes(thingAttr.Value)) {\r\n          let attrThing = things.filter(t => t._id === thingAttr.Value);\r\n          if (attrThing.length > 0) {\r\n            attrThing = attrThing[0];\r\n            newSelected = addThing(attrThing, types, things, attributesByID, newSelected);\r\n          }\r\n        }\r\n      } else if (attr.AttributeType === \"List\" && attr.ListType === \"Type\") {\r\n        const thingAttr = thing.Attributes[i];\r\n        for (let j = 0; j < thingAttr.ListValues.length; j++) {\r\n          if (!newSelected.thingIDs.includes(thingAttr.ListValues[j])) {\r\n            let attrThing = things.filter(t => t._id === thingAttr.ListValues[j]);\r\n            if (attrThing.length > 0) {\r\n              attrThing = attrThing[0];\r\n              newSelected = addThing(attrThing, types, things, attributesByID, newSelected);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return newSelected;\r\n};\r\n\r\n/**\r\n * finished\r\n */\r\nconst removeThing = (thing, types, things, attributesByID, selected) => {\r\n  let newSelected = {...selected};\r\n  const index = newSelected.thingIDs.indexOf(thing._id);\r\n  if (index > -1) {\r\n    newSelected.thingIDs.splice(index, 1);\r\n    const typesWithDefault = types.filter(t=>t.Defaults.filter(d => d.DefaultValue === thing._id || d.DefaultListValues.includes(thing._id)).length > 0);\r\n    for (let i = 0; i < typesWithDefault.length; i++) {\r\n      let typeWithDefault = typesWithDefault[i];\r\n      newSelected = removeType(typeWithDefault, types, things, attributesByID, newSelected);\r\n    }\r\n    const references = things.filter(t=>t.ReferenceIDs !== undefined && t.ReferenceIDs.includes(thing._id));\r\n    for (let i = 0; i < references.length; i++) {\r\n      let reference = references[i];\r\n      newSelected = removeThing(reference, types, things, attributesByID, newSelected);\r\n    }\r\n  }\r\n  return newSelected;\r\n};\r\n\r\nexport default function TemplateModal(props) {\r\n  const valid = props.templates.filter((t) => t.Name === props.world.Name).length === 0;\r\n  const [name, changeName] = useState(props.world.Name);\r\n  const [message, changeMessage] = useState(\"\");\r\n  const [nameMessage, changeNameMessage] = useState(valid ? \"\" : \"This Template Name is already in use\");\r\n  const [waiting, changeWaiting] = useState(false);\r\n  const [selected, changeSelected] = useState({ typeIDs: [], thingIDs: [] });\r\n  const [nameValid, changeValid] = useState(valid);\r\n  const [expandedPanel, changeExpanded] = useState(\"\");\r\n  const [selectedType, changeSelectedType] = useState({});\r\n  const [selectedThing, changeSelectedThing] = useState({});\r\n\r\n  const typeless = props.things.filter(thing => thing.Types.length === 0);\r\n  const selectedTypeless = typeless.filter(thing => selected.thingIDs.includes(thing._id));\r\n  return (\r\n    <Grid container spacing={1} direction=\"column\">\r\n      <Grid item>\r\n        Create a template for use in other projects based on this one.\r\n        The template will be usable by any user.\r\n      </Grid>\r\n      <Grid item>\r\n        <TextBox \r\n          Value={name} \r\n          fieldName=\"Template Name\" \r\n          message={nameMessage}\r\n          onBlur={n => {\r\n            changeName(n);\r\n            changeValid(validate(n, props, changeNameMessage));\r\n          }}\r\n          labelWidth={110}/>\r\n      </Grid>\r\n      <Grid item style={{color: \"red\"}}>\r\n        {message}\r\n      </Grid>\r\n      <Grid item>\r\n        Choose which data you want to include in the template.  \r\n        Dependencies will automatically be checked/unchecked as appropriate.\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={4}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting}\r\n            onClick={_ => {\r\n              changeWaiting(true);\r\n              let newSelected = {...selected};\r\n              for (let i = 0; i < props.types.length; i++) {\r\n                newSelected = addType(props.types[i], props.types, props.things, props.attributesByID, newSelected);\r\n              }\r\n              changeSelected(newSelected);\r\n              changeWaiting(false);\r\n            }}\r\n          >\r\n            { waiting ? \r\n              <span>Please Wait</span> \r\n            : \r\n              <span><Checkbox disabled checked=\"checked\" color=\"default\" /> All Types</span>\r\n            }\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting}\r\n            onClick={_ => {\r\n              changeWaiting(true);\r\n              const typeIDs = [];\r\n              props.types.forEach(t => {\r\n                typeIDs.push(t._id);\r\n              });\r\n              const thingIDs = [];\r\n              props.things.forEach(t => {\r\n                thingIDs.push(t._id);\r\n              });\r\n              const newSelected = {\r\n                typeIDs,\r\n                thingIDs\r\n              };\r\n              changeSelected(newSelected);\r\n              changeWaiting(false);\r\n            }}\r\n          >\r\n            { waiting ? \r\n              <span>Please Wait</span> \r\n            : \r\n              <span><Checkbox disabled checked=\"checked\" color=\"default\" /> All</span>\r\n            }\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={4}>\r\n          <Button\r\n            style={{ marginLeft: \"4px\"}}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting}\r\n            onClick={_ => {\r\n              changeSelected({ typeIDs: [], thingIDs: [] });\r\n            }}\r\n          >\r\n            { waiting ? \r\n              <span>Please Wait</span> \r\n            : \r\n              <span><Checkbox color=\"default\" disabled /> All</span>\r\n            }\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={6}>\r\n          <Box style={{ height: \"300px\", overflowY: \"scroll\", overflowX: \"hidden\" }}>\r\n            <Grid container spacing={1} direction=\"column\">\r\n              { props.types.map((type, i) => {\r\n                const things = props.things.filter(thing => thing.TypeIDs.includes(type._id));\r\n                const selectedThings = things.filter(thing => selected.thingIDs.includes(thing._id));\r\n                return (\r\n                  <Grid key={i} item container spacing={0} direction=\"column\">\r\n                    <Grid item>\r\n                      {expandedPanel === type._id ? \r\n                        <Button \r\n                          onClick={_ => {changeExpanded(\"\")}}>\r\n                          <KeyboardArrowDownIcon/>\r\n                        </Button>\r\n                      :\r\n                        <Button \r\n                          onClick={_ => {changeExpanded(type._id)}}>\r\n                          <KeyboardArrowRightIcon/>\r\n                        </Button>\r\n                      }\r\n                      <Checkbox\r\n                        checked={selected.typeIDs.includes(type._id)}\r\n                        onChange={ e => {\r\n                          if (!waiting) {\r\n                            changeWaiting(true);\r\n                            let newSelected = {...selected};\r\n                            if (e.target.checked) {\r\n                              newSelected = addType(type, props.types, props.things, props.attributesByID, newSelected);\r\n                            } else {\r\n                              newSelected = removeType(type, props.types, props.things, props.attributesByID, newSelected);\r\n                            }\r\n                            changeSelected(newSelected);\r\n\r\n                            changeWaiting(false);\r\n                          }\r\n                        }}\r\n                        name={`include_type_${type._id}`}\r\n                        color=\"primary\"\r\n                      />\r\n                      <Button \r\n                        // fullWidth \r\n                        style={{ width: \"200px\" }}\r\n                        variant=\"contained\" \r\n                        color=\"primary\" \r\n                        onClick={ _ => {\r\n                          changeSelectedType(type);\r\n                          changeSelectedThing({});\r\n                        }}>\r\n                        {`${type.Name} (${selectedThings.length}/${things.length})`}\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={waiting}\r\n                        style={{ marginLeft: \"4px\" }}\r\n                        onClick={_ => {\r\n                          changeWaiting(true);\r\n                          let newSelected = {...selected};\r\n                          things.forEach(t => {\r\n                            newSelected = addThing(t, props.types, props.things, props.attributesByID, newSelected);\r\n                          });\r\n                          changeSelected(newSelected);\r\n                          changeWaiting(false);\r\n                        }}\r\n                      >\r\n                        { waiting ? \r\n                          <span>Please Wait</span> \r\n                        : \r\n                          <span><Checkbox disabled checked=\"checked\" color=\"default\" /> All</span>\r\n                        }\r\n                      </Button>\r\n                    </Grid>\r\n                    {expandedPanel === type._id &&\r\n                      <Grid item>\r\n                        <List style={{ marginLeft: \"50px\", maxWidth: \"380px\" }}>\r\n                          {\r\n                            things.map((thing, j) => {\r\n                              return (\r\n                                <ListItem key={j}>\r\n                                  <Checkbox\r\n                                    checked={selected.thingIDs.includes(thing._id)}\r\n                                    onChange={ e => {\r\n                                      if (!waiting) {\r\n                                        changeWaiting(true);\r\n                                        let newSelected = {...selected};\r\n                                        if (e.target.checked) {\r\n                                          newSelected = addThing(thing, props.types, props.things, props.attributesByID, newSelected);\r\n                                        } else {\r\n                                          newSelected = removeThing(thing, props.types, props.things, props.attributesByID, newSelected);\r\n                                        }\r\n                                        changeSelected(newSelected);\r\n\r\n                                        changeWaiting(false);\r\n                                      }\r\n                                    }}\r\n                                    name={`include_thing_${thing._id}`}\r\n                                    color=\"primary\"\r\n                                  />\r\n                                  <Button \r\n                                    style={{ width: \"200px\" }}\r\n                                    variant=\"contained\" \r\n                                    color=\"primary\" \r\n                                    onClick={ _ => {\r\n                                      changeSelectedType({});\r\n                                      changeSelectedThing(thing);\r\n                                      // changeSelectedTemplate(template);\r\n                                    }}>\r\n                                    {`${thing.Name}`}\r\n                                  </Button>\r\n                                </ListItem>\r\n                              );\r\n                            })\r\n                          }\r\n                        </List>\r\n                      </Grid>\r\n                    }\r\n                  </Grid>\r\n                );\r\n              })}\r\n              { typeless.length > 0 &&\r\n                <Grid item>\r\n                  {expandedPanel === \"OTHER\" ? \r\n                    <Button \r\n                      onClick={_ => {changeExpanded(\"\")}}>\r\n                      <KeyboardArrowDownIcon/>\r\n                    </Button>\r\n                  :\r\n                    <Button \r\n                      onClick={_ => {changeExpanded(\"OTHER\")}}>\r\n                      <KeyboardArrowRightIcon/>\r\n                    </Button>\r\n                  }\r\n                  <span className={\"MuiTypography-root MuiListItemText-primary MuiTypography-body1\"}>\r\n                    {`Other Things (${selectedTypeless.length}/${typeless.length})`}\r\n                  </span>\r\n                </Grid>\r\n              }\r\n              {expandedPanel === \"OTHER\" &&\r\n                <Grid item>\r\n                  <List style={{ maxWidth: \"380px\" }}>\r\n                    {\r\n                      typeless.map((thing, j) => {\r\n                        return (\r\n                          <ListItem key={j}>\r\n                            <Grid container spacing={1} direction=\"row\">\r\n                              <Grid item xs={10}>\r\n                                <Button \r\n                                  fullWidth variant=\"contained\" color=\"primary\" \r\n                                  onClick={ _ => {\r\n                                    changeSelectedType({});\r\n                                    changeSelectedThing(thing);\r\n                                  }}>\r\n                                  {thing.Name}\r\n                                </Button>\r\n                              </Grid>\r\n                            </Grid>\r\n                          </ListItem>\r\n                        );\r\n                      })\r\n                    }\r\n                  </List>\r\n                </Grid>\r\n              }\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Box style={{ height: \"300px\", overflowY: \"scroll\", overflowX: \"hidden\" }}>\r\n            { selectedType._id !== undefined ? \r\n              <TypeSummary type={selectedType} types={props.types} things={props.things} attributesByID={props.attributesByID} />\r\n            : selectedThing._id !== undefined &&\r\n              <ThingSummary thing={selectedThing} types={props.types} things={props.things} attributesByID={props.attributesByID} />\r\n            }\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting || !nameValid || selected.typeIDs.length === 0}\r\n            onClick={_ => {\r\n              changeWaiting(true);\r\n              saveTemplate(name, selected, props, changeMessage, changeWaiting);\r\n            }}\r\n          >\r\n            {waiting ? \"Please Wait\" : \"Submit\"}\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            onClick={(e) => {\r\n              if (props.onCancel !== undefined && props.onCancel !== null)\r\n                props.onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","\r\n/* eslint-disable no-use-before-define */\r\nimport React from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  // Button,\r\n  // List, ListItem,\r\n  // Checkbox, Tooltip\r\n} from \"@material-ui/core\";\r\nimport TypeSummary from \"./TypeSummary\";\r\nimport ThingSummary from \"./ThingSummary\";\r\n\r\n/**\r\n * This control displays everything for the world or template which\r\n * is passed to it.\r\n * \r\n * Types:\r\n * Type Name - Attributes: Attribute1 Name, Attribute2 Name, etc. - Defaults: etc.\r\n * \r\n * Things:\r\n * Thing Name - Types: Type1Name, etc.\r\n */\r\n\r\nexport default function WorldMap(props) {\r\n  const dingus = {...props.dingus};\r\n  const attributesByID = {};\r\n  if (props.Attributes !== undefined) {\r\n    dingus.Attributes = [...props.Attributes];\r\n  }\r\n  dingus.Attributes.forEach(a => {\r\n    if (a.attrID === undefined) {\r\n      a.attrID = a._id;\r\n    }\r\n    attributesByID[a.attrID] = a;\r\n  });\r\n  if (props.Types !== undefined) {\r\n    dingus.Types = [...props.Types];\r\n    dingus.Types.forEach(t => {\r\n      if (t.typeID === undefined) {\r\n        t.typeID = t._id;\r\n      }\r\n    });\r\n  }\r\n  if (dingus.Types === undefined) {\r\n    dingus.Types = [];\r\n  }\r\n  if (props.Things !== undefined) {\r\n    dingus.Things = [...props.Things];\r\n    dingus.Things.forEach(t => {\r\n      if (t.thingID === undefined) {\r\n        t.thingID = t._id;\r\n      }\r\n    });\r\n  } \r\n  if (dingus.Things === undefined) {\r\n    dingus.Things = [];\r\n  }\r\n  return (\r\n    <Grid item xs={9} container spacing={1} direction=\"column\">\r\n      <Grid item>\r\n        {dingus.Name}\r\n      </Grid>\r\n      <Grid item>\r\n        Types:\r\n      </Grid>\r\n      { dingus.Types.map((type, typeKey) => {\r\n        return (\r\n          <TypeSummary \r\n            key={typeKey} \r\n            type={type} \r\n            types={dingus.Types} \r\n            things={dingus.Things} \r\n            attributesByID={attributesByID} \r\n          />\r\n        );\r\n      })}\r\n      { dingus.Things !== undefined && dingus.Things.length > 0 &&\r\n        <Grid item container spacing={0} direction=\"column\">\r\n          <Grid item>\r\n            Things:\r\n          </Grid>\r\n          { dingus.Things.map((thing, thingKey) => {\r\n            return (\r\n              <ThingSummary \r\n                key={thingKey} \r\n                thing={thing} \r\n                types={dingus.Types} \r\n                things={dingus.Things} \r\n                attributesByID={attributesByID} \r\n              />\r\n              // <Grid item key={thingKey} container spacing={1} direction=\"row\">\r\n              //   <Grid item xs={12} sm={3}>\r\n              //     {thing.Name}\r\n              //   </Grid>\r\n              //   <Grid item xs={12} sm={9}>\r\n              //     Types (\r\n              //       { thing.TypeIDs.map((typeID, typeKey) => {\r\n              //         console.log(typeID);\r\n              //         return (\r\n              //           <span key={typeKey}>{typeKey > 0 && <span>,&nbsp;</span>}{dingus.Types.filter(t => t.typeID === typeID)[0].Name}</span>\r\n              //         );\r\n              //       })}\r\n              //     )\r\n              //   </Grid>\r\n              // </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n      }\r\n    </Grid>\r\n  );\r\n}\r\n","\r\n /* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  Button,\r\n  List, ListItem,\r\n  Checkbox, Tooltip\r\n} from \"@material-ui/core\";\r\nimport WorldMap from \"../Displays/WorldMap\";\r\n\r\n/**\r\n * This control displays all the templates for display (map)\r\n * and selection.  When submitted, the selected templates are\r\n * passed back to the containing view, where they can be passed\r\n * to the ImportingTemplatesControl when appropriate.\r\n */\r\n\r\n\r\nexport default function ImportTemplatesControl(props) {\r\n  const [selectedTemplate, changeSelectedTemplate] = useState({});\r\n  const [selectedTemplateIDs, changeSelectedTemplates] = useState(props.selectedTemplateIDs === undefined ? [] : props.selectedTemplateIDs);\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"column\">\r\n      <Grid item>\r\n        Click a template to view its contents.\r\n        Select the templates you want to import into your project.\r\n        Any which have types or attributes with the same names \r\n        (either with each other or with what you already have in your project), \r\n        we will try to merge them if possible.  \r\n        If it's not, then we will append the names of them with \r\n        the names of the templates they came from, and you can \r\n        resolve it yourself afterward.\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={3}>\r\n          Templates:\r\n          <List>\r\n            { props.templates.map((template, key) => {\r\n              return (\r\n                <ListItem key={key}>\r\n                  <Checkbox\r\n                    checked={selectedTemplateIDs.includes(template._id)}\r\n                    onChange={ _ => {\r\n                      const newSelectedTemplateIDs = [...selectedTemplateIDs];\r\n                      newSelectedTemplateIDs.push(template._id);\r\n                      changeSelectedTemplates(newSelectedTemplateIDs);\r\n                    }}\r\n                    name={`include_template_${template._id}`}\r\n                    color=\"primary\"\r\n                  />\r\n                  <Tooltip title={`Details for ${template.Name}`}>\r\n                    <Button \r\n                      fullWidth variant=\"contained\" color=\"primary\" \r\n                      onClick={ _ => {\r\n                        changeSelectedTemplate(template);\r\n                      }}>\r\n                      {template.Name}\r\n                    </Button>\r\n                  </Tooltip>\r\n                </ListItem>\r\n              );\r\n            })}\r\n          </List>\r\n        </Grid>\r\n        { selectedTemplate._id !== undefined && \r\n          <WorldMap dingus={selectedTemplate} />\r\n        }\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={selectedTemplateIDs.length === 0}\r\n            onClick={_ => {\r\n              props.onSubmit(selectedTemplateIDs);\r\n            }}\r\n          >\r\n            OK\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            onClick={(e) => {\r\n              if (props.onCancel !== undefined && props.onCancel !== null)\r\n                props.onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","\r\nimport React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  selectWorld,\r\n  addAndSelectWorld,\r\n  updateWorld,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  logout\r\n} from \"../../redux/actions/index\";\r\nimport { \r\n  IconButton, \r\n  List, ListItem,\r\n  // Checkbox, FormControl, FormControlLabel,\r\n  // OutlinedInput, InputLabel, FormHelperText, \r\n  Grid, \r\n  // Tooltip, Fab\r\n} from \"@material-ui/core\";\r\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\r\nimport PauseCircleOutlineIcon from '@material-ui/icons/PauseCircleOutline';\r\n// import { ArrowBack } from \"@material-ui/icons\";\r\n// import { Helmet } from 'react-helmet';\r\nimport API from \"../../smartAPI\";\r\n// import TemplatesModal from \"../../components/Modals/TemplatesModal\";\r\n// import ImportTemplatesControl from \"../../components/WorldTemplateControls/ImportTemplatesControl\";\r\n// import TextBox from \"../../components/Inputs/TextBox\";\r\n\r\n/**\r\n * This control imports the templates passed to it into the \r\n * selected world.  It displays the name of the template it is\r\n * currently working on, along with the names of its attributes, \r\n * types, and things (if any) and the status of each (pending,\r\n * importing, imported, defaults pending (this one happens when\r\n * it is a type with defaults for attributes of Type or \r\n * List Type.  Then after it imports the things it comes back to\r\n * do their defaults.)).  It also has a pause/play control at \r\n * the top, and it checks the status of it before starting each\r\n * import.  If it's paused then it just waits.  If it gets \r\n * unpaused then it checks to see what it needs to do next and \r\n * picks back up.  Because of the possibility that it will get \r\n * paused and unpaused during a single import, it needs to \r\n * check for anything importing at the time that it gets \r\n * unpaused.\r\n * Once all statuses are imported then it moves on to the next \r\n * template.  Once all templates are imported then it triggers\r\n * the onCompleteEvent which goes back to the view and lets it \r\n * do whatever it's supposed to do next (either reload details\r\n * or forward to details).\r\n */\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    worlds: state.app.worlds,\r\n    user: state.app.user,\r\n    fromLogin: state.app.fromLogin,\r\n    templates: state.app.templates,\r\n    types: state.app.types,\r\n    things: state.app.things,\r\n    attributesByName: state.app.attributesByName,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    selectWorld: worldID => dispatch(selectWorld(worldID)),\r\n    addAndSelectWorld: world => dispatch(addAndSelectWorld(world)),\r\n    updateWorld: world => dispatch(updateWorld(world)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      templateID: null, \r\n      template: null, \r\n      importingTypes: [], \r\n      importingAttributes: [], \r\n      attributesStatus: \"Pending\",\r\n      importingThings: [], \r\n      play: true,\r\n      stepInProgress: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  takeNextStep = () => {\r\n    if (this.state.play && !this.state.stepInProgress) {\r\n      this.setState({ stepInProgress: true }, \r\n        this.reallyTakeNextStep\r\n      );\r\n    }\r\n  }\r\n\r\n  reallyTakeNextStep = () => {\r\n    // First do a dumb import of all the types that aren't being merged\r\n    const importingTypes = this.state.importingTypes;\r\n    let type = importingTypes.filter(t => t.status === \"Pending\");\r\n    if (type.length > 0) {\r\n      type = type[0];\r\n      type.status = \"Importing\";\r\n      this.setState(\r\n        { \r\n          importingTypes\r\n        }, this.dumbImportType\r\n      );\r\n    } else {\r\n      // Now upsert all of the attributes that aren't already ready\r\n      const importingAttributes = this.state.importingAttributes;\r\n      let attributes = importingAttributes.filter(a => a.status === \"Pending\");\r\n      if (attributes.length > 0) {\r\n        this.setState(\r\n          {\r\n            attributesStatus: \"Importing\"\r\n          },\r\n          this.upsertAttributes\r\n        );\r\n      } else {\r\n        // Now we do a dumb import on the things that aren't going to be merged\r\n        const importingThings = this.state.importingThings;\r\n        let thing = importingThings.filter(t => t.status === \"Pending\");\r\n        if (thing.length > 0) {\r\n          thing = thing[0];\r\n          let existingThing = this.props.things.filter(t => t.Name.trim().toLowerCase() === thing.Name.trim().toLowerCase());\r\n          if (existingThing.length > 0) {\r\n            existingThing = existingThing[0];\r\n\r\n            // It already exists, so add it to the mapping, etc then move on.\r\n            thing.thing = existingThing;\r\n            thing.status = \"More Pending\";\r\n            const thingMap = this.state.thingMap;\r\n            // const attrMap = this.state.attributeMap;\r\n            // const thingMap = this.state.thingMap;\r\n            thingMap[thing.templateThing.thingID] = existingThing;\r\n            this.setState(\r\n              { \r\n                importingThings, \r\n                thingMap,\r\n                stepInProgress: false \r\n              }, \r\n              this.takeNextStep\r\n            );\r\n          } else {\r\n            thing.status = \"Importing\";\r\n            this.setState(\r\n              { \r\n                importingThings\r\n              }, this.dumbImportThing\r\n            );\r\n          }\r\n        } else {\r\n          // Now we need to go back through the types and update them\r\n          type = importingTypes.filter(t => t.status === \"More Pending\");\r\n          if (type.length > 0) {\r\n            type = type[0];\r\n            type.status = \"Importing\";\r\n            this.setState(\r\n              { \r\n                importingTypes\r\n              }, this.importType\r\n            );\r\n          } else {\r\n            // Now we need to go back through the things and update them\r\n            thing = importingThings.filter(t => t.status === \"More Pending\");\r\n            if (thing.length > 0) {\r\n              thing = thing[0];\r\n              thing.status = \"Importing\";\r\n              this.setState(\r\n                { \r\n                  importingThings\r\n                }, this.importThing\r\n              );\r\n            } else {\r\n              // Yay!  We're done.\r\n              if (this.props.onComplete)\r\n                this.props.onComplete();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  upsertAttributes = () => {\r\n    const importingAttributes = this.state.importingAttributes;\r\n    let attributes = importingAttributes.filter(a => a.status === \"Pending\");\r\n      \r\n    const typeMap = this.state.typeMap;\r\n    const attributeMap = this.state.attributeMap;\r\n    const templateName = this.state.template.Name;\r\n    const upsertUs = [];\r\n    attributes.forEach(a => {\r\n      let upsert = false;\r\n      const attribute = {...a.templateAttribute};\r\n      attribute.worldID = this.props.selectedWorldID;\r\n      delete attribute.attrID;\r\n      if (attribute.AttributeType === \"Type\" || (attribute.AttributeType === \"List\" && attribute.ListType === \"Type\")) {\r\n        // We need to fix DefinedType\r\n        attribute.DefinedType = typeMap[attribute.DefinedType]._id;\r\n      }\r\n      const existingAttribute = this.props.attributesByName[attribute.Name];\r\n      if (existingAttribute !== undefined) {\r\n        // We've got a matching name.  Check if the types match.\r\n        if (attribute.AttributeType !== existingAttribute.AttributeType || (attribute.AttributeType === \"List\" && attribute.ListType !== existingAttribute.ListType)) {\r\n          // They don't, so we need to change the name.\r\n          attribute.Name += ` From Template (${templateName})`;\r\n          upsert = true;\r\n        } else {\r\n          // It matches, so we can merge them.\r\n          attribute._id = existingAttribute._id;\r\n          if (attribute.AttributeType === \"Options\" || (attribute.AttributeType === \"List\" && attribute.ListType === \"Options\")) {\r\n            // It's Options, so we need to merge the Options.\r\n            const attrOptions = attribute.Options;\r\n            attribute.Options = existingAttribute.Options;\r\n            attrOptions.forEach(o => {\r\n              if (!attribute.Options.includes(o)){\r\n                attribute.Options.push(o);\r\n                upsert = true;\r\n              }\r\n            });\r\n          }\r\n          if (!upsert) {\r\n            a.status = \"Imported\";\r\n          }\r\n          a.attribute = attribute;\r\n          attributeMap[a.templateAttribute.attrID] = attribute;\r\n        }\r\n      } else {\r\n        upsert = true;\r\n      }\r\n      if (upsert) {\r\n        upsertUs.push(attribute);\r\n      }\r\n    });\r\n    if (upsertUs.length > 0) {\r\n      this.api.upsertAttributes(this.props.selectedWorldID, upsertUs).then(res => {\r\n        attributes.forEach(a => {\r\n          let id = res.attributes[a.templateAttribute.Name];\r\n          let upserted = upsertUs.filter(a2 => a2.Name === a.templateAttribute.Name);\r\n          if (id === undefined || id === null) {\r\n            id = res.attributes[`${a.templateAttribute.Name} From Template (${templateName})`];\r\n            upserted = upsertUs.filter(a2 => a2.Name === `${a.templateAttribute.Name} From Template (${templateName})`);\r\n          }\r\n          upserted = upserted[0];\r\n          upserted._id = id;\r\n          a.status = \"Imported\";\r\n          a.attribute = upserted;\r\n          attributeMap[a.templateAttribute.attrID] = upserted;\r\n        });\r\n\r\n        this.setState(\r\n          { \r\n            importingAttributes: attributes, \r\n            attributeMap,\r\n            stepInProgress: false,\r\n            attributesStatus: \"Imported\"\r\n          }, \r\n          this.takeNextStep\r\n        );\r\n      });\r\n    } else {\r\n      this.setState(\r\n        { \r\n          importingAttributes: attributes, \r\n          attributesStatus: \"Imported\",\r\n          attributeMap,\r\n          stepInProgress: false\r\n        }, \r\n        this.takeNextStep\r\n      );\r\n    }\r\n  }\r\n\r\n  dumbImportType = () => {\r\n    const importingTypes = this.state.importingTypes;\r\n    let type = importingTypes.filter(t => t.status === \"Importing\")[0];\r\n    let existingType = this.props.types.filter(t => t.Name.trim().toLowerCase() === type.templateType.Name.trim().toLowerCase());\r\n    if (existingType.length > 0) {\r\n      existingType = existingType[0];\r\n      this.api.updateType(existingType).then(res => {\r\n        if (res.error === undefined) {\r\n          type.type = existingType;\r\n          type.status = \"More Pending\";\r\n          const typeMap = this.state.typeMap;\r\n          typeMap[type.templateType.typeID] = existingType;\r\n          this.setState(\r\n            { \r\n              importingTypes, \r\n              typeMap,\r\n              stepInProgress: false \r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    } else {\r\n      const dumbType = {\r\n        _id: null,\r\n        Name: type.templateType.Name,\r\n        Description: type.templateType.Description,\r\n        SuperIDs: [],\r\n        AttributesArr: [],\r\n        Attributes: [],\r\n        worldID: this.props.selectedWorldID,\r\n        Major: type.templateType.Major,\r\n        EditUserID: this.props.user._id\r\n      };\r\n      this.api.createType(dumbType).then(res => {\r\n        if (res.error === undefined) {\r\n          dumbType._id = res.typeID;\r\n          type.type = dumbType;\r\n          type.status = \"More Pending\";\r\n          const typeMap = this.state.typeMap;\r\n          typeMap[type.templateType.typeID] = dumbType;\r\n          this.setState(\r\n            { \r\n              importingTypes, \r\n              typeMap,\r\n              stepInProgress: false \r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  dumbImportThing = () => {\r\n    const importingThings = this.state.importingThings;\r\n    let thing = importingThings.filter(t => t.status === \"Importing\")[0];\r\n    const dumbThing = {\r\n      _id: null,\r\n      Name: thing.templateThing.Name,\r\n      Description: thing.templateThing.Description,\r\n      worldID: this.props.selectedWorldID,\r\n      TypeIDs: [],\r\n      Attributes: [],\r\n      ReferenceIDs: [],\r\n      EditUserID: this.props.user._id\r\n    };\r\n    this.api.createThing(dumbThing).then(res => {\r\n      if (res.error === undefined) {\r\n        dumbThing._id = res.thingID;\r\n        thing.thing = dumbThing;\r\n        thing.status = \"More Pending\";\r\n        const thingMap = this.state.thingMap;\r\n        thingMap[thing.templateThing.thingID] = dumbThing;\r\n        this.setState(\r\n          { \r\n            importingThings, \r\n            thingMap,\r\n            stepInProgress: false \r\n          }, \r\n          this.takeNextStep\r\n        );\r\n      } else {\r\n        console.log(res.error);\r\n      }\r\n    });\r\n  }\r\n\r\n  importType = () => {\r\n    const typeMap = this.state.typeMap;\r\n    const attributeMap = this.state.attributeMap;\r\n    const thingMap = this.state.thingMap;\r\n    const importingTypes = this.state.importingTypes;\r\n    const templateType = importingTypes.filter(t => t.status === \"Importing\")[0];\r\n    let type = this.props.types.filter(t => t.Name === templateType.templateType.Name);\r\n    if (type.length > 0) {\r\n      type = type[0];\r\n      templateType.templateType.SuperIDs.forEach(s => {\r\n        const superID = typeMap[s]._id;\r\n        if (!type.SuperIDs.includes(superID))\r\n          type.SuperIDs.push(superID);\r\n      });\r\n      templateType.templateType.Attributes.forEach(a => {\r\n        const attribute = attributeMap[a.attrID];\r\n        if (type.Attributes.filter(a2 => a2.attrID === attribute._id).length === 0) {\r\n          type.Attributes.push({\r\n            attrID: attribute._id,\r\n            index: type.Attributes.length\r\n          });\r\n        }\r\n      });\r\n      templateType.templateType.Defaults.forEach(d => {\r\n        const attribute = attributeMap[d.attrID];\r\n        let theDefault = type.Defaults.filter(d2 => d2.attrID === attribute._id);\r\n        if (theDefault.length === 0) {\r\n          type.Defaults.push({\r\n            attrID: attribute._id,\r\n            DefaultValue: d.DefaultValue,\r\n            DefaultListValues: d.DefaultListValues\r\n          });\r\n        } else if (attribute.AttributeType === \"List\") {\r\n          theDefault = theDefault[0];\r\n          if (attribute.ListType === \"Type\") {\r\n            d.DefaultListValues.forEach(v => {\r\n              const id = thingMap[v]._id;\r\n              if (!theDefault.DefaultListValues.includes(id)) {\r\n                theDefault.DefaultListValues.push(id);\r\n              }\r\n            });\r\n          } else {\r\n            d.DefaultListValues.forEach(v => {\r\n              if (!theDefault.DefaultListValues.includes(v)) {\r\n                theDefault.DefaultListValues.push(v);\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n      this.api.updateType(type).then(res => {\r\n        if (res.error === undefined) {\r\n          templateType.status = \"Imported\";\r\n          this.setState(\r\n            { \r\n              importingTypes,\r\n              stepInProgress: false\r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    } else {\r\n      type = templateType.type;\r\n      templateType.templateType.SuperIDs.forEach(s => {\r\n        type.SuperIDs.push(typeMap[s]._id);\r\n      });\r\n      templateType.templateType.Attributes.forEach(a => {\r\n        type.Attributes.push({\r\n          attrID: attributeMap[a.attrID]._id,\r\n          index: type.Attributes.length\r\n        });\r\n      });\r\n      if (type.Defaults === undefined || type.Defaults === null) {\r\n        type.Defaults = [];\r\n      }\r\n      templateType.templateType.Defaults.forEach(d => {\r\n        let attribute = attributeMap[d.attrID];\r\n        // let theDefault = type.Defaults.filter(d2 => d2.attrID === attribute._id);\r\n        // if (theDefault.length === 0) {\r\n          let DefaultValue = d.DefaultValue;\r\n          let DefaultListValues = d.DefaultListValues;\r\n          if (attribute.AttributeType === \"Type\") {\r\n            DefaultValue = thingMap[DefaultValue]._id;\r\n          } else if (attribute.AttributeType === \"List\" && attribute.ListType === \"Type\") {\r\n            DefaultListValues = [];\r\n            d.DefaultListValues.forEach(v => {\r\n              DefaultListValues.push(thingMap[v]._id);\r\n            });\r\n          }\r\n          type.Defaults.push({\r\n            attrID: attribute._id,\r\n            DefaultValue,\r\n            DefaultListValues\r\n          });\r\n      });\r\n      this.api.updateType(type).then(res => {\r\n        if (res.error === undefined) {\r\n          templateType.status = \"Imported\";\r\n          this.setState(\r\n            { \r\n              importingTypes,\r\n              stepInProgress: false\r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  importThing = () => {\r\n    const typeMap = this.state.typeMap;\r\n    const attributeMap = this.state.attributeMap;\r\n    const thingMap = this.state.thingMap;\r\n    const importingThings = this.state.importingThings;\r\n    const templateThing = importingThings.filter(t => t.status === \"Importing\")[0];\r\n    let thing = this.props.things.filter(t => t.Name === templateThing.templateThing.Name);\r\n    if (thing.length > 0) {\r\n      thing = thing[0];\r\n      templateThing.templateThing.TypeIDs.forEach(t => {\r\n        const typeID = typeMap[t]._id;\r\n        if (!thing.TypeIDS.includes(typeID))\r\n          thing.TypeIDs.push(typeID);\r\n      });\r\n      templateThing.templateThing.Attributes.forEach(a => {\r\n        const attribute = attributeMap[a.attrID];\r\n        let Value = a.Value;\r\n        let ListValues = a.ListValues;\r\n        if (thing.Attributes.filter(a2 => a2.attrID === attribute._id).length > 0) {\r\n          if (attribute.AttributeType === \"List\") {\r\n            // if it exists and isn't a list type then we leave it alone\r\n            const attr = thing.Attributes.filter(a2 => a2.attrID === attribute._id)[0];\r\n            ListValues = attr.ListValues;\r\n            a.ListValues.forEach(v => {\r\n              if (attribute.ListType === \"Type\") {\r\n                const id = thingMap[v]._id;\r\n                if (!ListValues.includes(id)) {\r\n                  ListValues.push(id);\r\n                  thing.ReferenceIDs.push(id);\r\n                }\r\n              } else if (!ListValues.includes(v)) {\r\n                ListValues.push(v);\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          if (attribute.AttributeType === \"Type\") {\r\n            Value = thingMap[a.Value]._id;\r\n            thing.ReferenceIDs.push(Value);\r\n          } else if (attribute.AttributeType === \"List\" && attribute.ListType === \"Type\") {\r\n            ListValues = [];\r\n            a.ListValues.forEach(v => {\r\n              ListValues.push(thingMap[v]._id);\r\n              thing.ReferenceIDs.push(thingMap[v]._id);\r\n            });\r\n          }\r\n          thing.Attributes.push({\r\n            attrID: attribute._id,\r\n            index: thing.Attributes.length,\r\n            Value,\r\n            ListValues\r\n          });\r\n        }\r\n      });\r\n      this.api.updateThing(thing).then(res => {\r\n        if (res.error === undefined) {\r\n          templateThing.status = \"Imported\";\r\n          this.setState(\r\n            { \r\n              importingThings,\r\n              stepInProgress: false\r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    } else {\r\n      thing = templateThing.thing;\r\n      templateThing.templateThing.TypeIDs.forEach(t => {\r\n        thing.TypeIDs.push(typeMap[t]._id);\r\n      });\r\n      templateThing.templateThing.Attributes.forEach(a => {\r\n        const attribute = attributeMap[a.attrID];\r\n        let Value = a.Value;\r\n        let ListValues = a.ListValues;\r\n        if (attribute.AttributeType === \"Type\") {\r\n          Value = thingMap[a.Value]._id;\r\n          thing.ReferenceIDs.push(Value);\r\n        } else if (a.AttributeType === \"List\" && a.ListType === \"Type\") {\r\n          ListValues = [];\r\n          a.ListValues.forEach(v => {\r\n            ListValues.push(thingMap[v]._id);\r\n            thing.ReferenceIDs.push(thingMap[v]._id);\r\n          });\r\n        }\r\n        thing.Attributes.push({\r\n          attrID: attribute.attrID,\r\n          index: a.index,\r\n          Value,\r\n          ListValues\r\n        });\r\n      });\r\n      this.api.updateThing(thing).then(res => {\r\n        if (res.error === undefined) {\r\n          templateThing.status = \"Imported\";\r\n          this.setState(\r\n            { \r\n              importingThings,\r\n              stepInProgress: false\r\n            }, \r\n            this.takeNextStep\r\n          );\r\n        } else {\r\n          console.log(res.error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.props.templateID !== this.state.templateID) {\r\n      let template = this.props.templates.filter(t => t._id === this.props.templateID);\r\n      if (template.length > 0) {\r\n        template = template[0];\r\n        const importingTypes = [];\r\n        template.Types.forEach(t => {\r\n          importingTypes.push({\r\n            status: \"Pending\",\r\n            templateType: t,\r\n            type: null\r\n          });\r\n        });\r\n        const importingAttributes = [];\r\n        template.Attributes.forEach(a => {\r\n          importingAttributes.push({\r\n            status: \"Pending\",\r\n            templateAttribute: a,\r\n            attribute: null\r\n          });\r\n        });\r\n        const importingThings = [];\r\n        if (template.Things !== undefined && template.Things !== null) {\r\n          template.Things.forEach(t => {\r\n            importingThings.push({\r\n              status: \"Pending\",\r\n              templateThing: t,\r\n              thing: null\r\n            });\r\n          });\r\n        }\r\n        this.setState(\r\n          { \r\n            templateID: this.props.templateID, \r\n            template, \r\n            importingTypes, \r\n            importingAttributes, \r\n            attributesStatus: \"Pending\",\r\n            importingThings, \r\n            play: true,\r\n            typeMap: {},\r\n            attributeMap: {},\r\n            thingMap: {},\r\n            stepInProgress: false\r\n          }, \r\n          this.takeNextStep\r\n        );\r\n      }\r\n    }\r\n    return (\r\n      <Grid item container spacing={1} direction=\"column\">\r\n        <Grid item>\r\n          <List>\r\n            <ListItem>\r\n              { this.state.play ? \r\n                <IconButton \r\n                  aria-label=\"Pause Import\"\r\n                  onClick={_ => {\r\n                    this.setState({ play: false });\r\n                  }}>\r\n                  <PauseCircleOutlineIcon />\r\n                </IconButton>\r\n              : \r\n                <IconButton \r\n                  aria-label=\"Pause Import\"\r\n                  onClick={_ => {\r\n                    this.setState({ play: true }, this.takeNextStep);\r\n                  }}>\r\n                  <PlayCircleOutlineIcon />\r\n                </IconButton>\r\n              }\r\n            </ListItem>\r\n          </List>\r\n        </Grid>\r\n        <Grid item>\r\n          Importing {this.props.templates.filter(t => t._id === this.props.templateID )[0].Name}.  Please Wait.\r\n        </Grid>\r\n        <Grid item>\r\n          Types:\r\n        </Grid>\r\n        { this.state.importingTypes.map((type, key) => {\r\n          return (\r\n            <Grid item key={key} container spacing={0} direction=\"row\">\r\n              <Grid item xs={6}>\r\n                {type.templateType.Name}\r\n              </Grid>\r\n              <Grid item xs={6} style={{ color: (type.status === \"Importing\" ? \"blue\" : (type.status === \"Imported\" ? \"green\" : \"grey\")) }}>\r\n                {type.status}\r\n              </Grid>\r\n            </Grid>\r\n          );\r\n        })}\r\n        <Grid item container spacing={0} direction=\"row\">\r\n          <Grid item xs={6}>\r\n            Attributes: \r\n          </Grid>\r\n          <Grid item xs={6} style={{ color: (this.state.attributesStatus === \"Importing\" ? \"blue\" : (this.state.attributesStatus === \"Imported\" ? \"green\" : \"grey\")) }}>\r\n            {this.state.attributesStatus}\r\n          </Grid>\r\n        </Grid>\r\n        { this.state.importingThings.length > 0 && \r\n          <Grid item container spacing={1} direction=\"column\">\r\n            <Grid item>\r\n              Things:\r\n            </Grid>\r\n            { this.state.importingThings.map((thing, key) => {\r\n              return (\r\n                <Grid item key={key} container spacing={0} direction=\"row\">\r\n                  <Grid item xs={6}>\r\n                    {thing.templateThing.Name}\r\n                  </Grid>\r\n                  <Grid item xs={6} style={{ color: (thing.status === \"Importing\" ? \"blue\" : (thing.status === \"Imported\" ? \"green\" : \"grey\")) }}>\r\n                    {thing.status}\r\n                  </Grid>\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        }\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst ImportingTemplatesControl = connect(mapStateToProps, mapDispatchToProps)(Control);\r\nexport default ImportingTemplatesControl;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { \r\n  selectWorld, setTypes, setThings, setWorlds, \r\n  setPublicWorlds, updatePublicWorldForCollab,\r\n  setAttributes, \r\n  setTemplates,\r\n  setAllUsers,\r\n  updateAttributes,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  // setViews\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\nimport Index from \"./Index\";\r\nimport { \r\n  Edit, Delete, People\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  List, ListItem, \r\n  Grid, Button, \r\n  Modal, Tooltip,\r\n  Fab, Box\r\n} from '@material-ui/core';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport { Helmet } from 'react-helmet';\r\nimport TemplateModal from \"../../components/Modals/TemplateModal\";\r\n// import TemplatesModal from \"../../components/Modals/TemplatesModal\";\r\nimport ImportTemplatesControl from \"../../components/WorldTemplateControls/ImportTemplatesControl\";\r\nimport ImportingTemplatesControl from \"../../components/WorldTemplateControls/ImportingTemplatesControl\";\r\nimport CommentsControl from \"../../components/Inputs/CommentsControl\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    worlds: state.app.worlds,\r\n    publicWorlds: state.app.publicWorlds,\r\n    types: state.app.types,\r\n    things: state.app.things,\r\n    user: state.app.user,\r\n    attributesByID: state.app.attributesByID,\r\n    attributesByName: state.app.attributesByName,\r\n    fromLogin: state.app.fromLogin,\r\n    templates: state.app.templates,\r\n    allUsers: state.app.allUsers,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions,\r\n    // views: state.app.views\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    selectWorld: worldID => dispatch(selectWorld(worldID)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    setTemplates: templates => dispatch(setTemplates(templates)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    setPublicWorlds: worlds => dispatch(setPublicWorlds(worlds)),\r\n    updatePublicWorldForCollab: world => dispatch(updatePublicWorldForCollab(world)),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    updateAttributes: attributes => dispatch(updateAttributes(attributes)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    // setViews: views => dispatch(setViews(views))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      world: null,\r\n      modalOpen: false,\r\n      redirectTo: null,\r\n      templateMode: false,\r\n      importMode: false,\r\n      selectedTemplateIDs: [],\r\n      // recentTypeChanges: [],\r\n      // recentThingChanges: [],\r\n      expandRecentChanges: true\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n  componentDidMount() {\r\n  }\r\n\r\n  getAttributes() {\r\n    this.api.getAttributesForWorld(this.props.selectedWorldID).then(res => {\r\n      if (res !== undefined && res.error === undefined) {\r\n        // We store the attributes in two hashes, by name and by id\r\n        this.props.setAttributes(res.attributes);\r\n        this.getTypes();\r\n      }\r\n    });\r\n  }\r\n\r\n  getTypes() {\r\n    this.api.getTypesForWorld(this.props.selectedWorldID).then(res => {\r\n      if (res !== undefined && res.error === undefined) {\r\n        // Add Supers to each type\r\n        const types = res.types;\r\n        const updateAttributes = [];\r\n        types.forEach(t=> {\r\n          t.Supers = [];\r\n          t.SuperIDs.forEach(sID=> {\r\n            t.Supers = t.Supers.concat(types.filter(t2=>t2._id === sID));\r\n          });\r\n          t.AttributesArr = [];\r\n          t.Attributes.forEach(a => {\r\n            const attr = this.props.attributesByID[a.attrID];\r\n            attr.TypeIDs.push(t._id);\r\n            updateAttributes.push(attr);\r\n            t.AttributesArr.push({\r\n              index: t.AttributesArr.length,\r\n              Name: attr.Name,\r\n              AttributeType: attr.AttributeType,\r\n              Options: attr.Options,\r\n              DefinedType: attr.DefinedType,\r\n              ListType: attr.ListType,\r\n              attrID: a.attrID,\r\n              TypeIDs: a.TypeIDs\r\n            });\r\n          });\r\n          const defHash = {};\r\n          if (t.Defaults !== undefined) {\r\n            t.Defaults.forEach(def => {\r\n              defHash[def.attrID] = def;\r\n            });\r\n          }\r\n          t.DefaultsHash = defHash;\r\n        });\r\n        this.props.updateAttributes(updateAttributes);\r\n        this.props.setTypes(types);\r\n        this.getThings();\r\n      }\r\n    });\r\n  }\r\n\r\n  getThings() {\r\n    this.api.getThingsForWorld(this.props.selectedWorldID).then(res => {\r\n      if (res !== undefined && res.error === undefined) {\r\n        const things = res.things;\r\n        things.forEach(t=> {\r\n          t.Types = [];\r\n          t.TypeIDs.forEach(tID=> {\r\n            t.Types = t.Types.concat(this.props.types.filter(t2=>t2._id === tID));\r\n          });\r\n        });\r\n        this.props.setThings(things);\r\n      }\r\n    });\r\n  }\r\n\r\n  delete = e => {\r\n    this.api.deleteWorld(this.props.selectedWorldID).then(res=>{\r\n      if (res.error === undefined) {\r\n        this.api.getWorlds(true).then(res2 => {\r\n          this.props.setPublicWorlds(res2.publicWorlds.worlds);\r\n          this.props.setWorlds(res2.userWorlds.worlds);\r\n          this.props.setTemplates(res2.templates.templates);\r\n          this.props.setAllUsers(res2.allUsers);\r\n\r\n          this.props.selectWorld(null);\r\n          this.setState({modalOpen: false, redirectTo: `/`});\r\n        });\r\n      }\r\n      else {\r\n        this.setState({ waiting: false, message: res.error });\r\n      }\r\n    });\r\n  }\r\n\r\n  getModalStyle = () => {\r\n    const top = Math.round(window.innerHeight / 2) - 50;\r\n    const left = Math.round(window.innerWidth / 2) - 200;\r\n  \r\n    return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(${left}px, ${top}px)`,\r\n    };\r\n  }\r\n\r\n  load = (id) => {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    if (this.state.templateMode || this.state.importMode) {\r\n      this.setState({ \r\n        loading: true, templateMode: false, importMode: false \r\n      }, _ => {\r\n        this.props.selectWorld(id);\r\n        this.api.getWorld(id).then(res => {\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n\r\n          if (this.props.user !== null && this.props.user !== undefined) {\r\n            this.loadViews();\r\n          } else {\r\n            this.setState({ \r\n              loading: false, \r\n              recentTypeChanges: [], \r\n              recentThingChanges: [] \r\n            });\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      this.setState({ loading: true }, _ => {\r\n        this.props.selectWorld(id);\r\n        this.api.getWorld(id).then(res => {\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n\r\n          if (this.props.user !== null && this.props.user !== undefined) {\r\n            this.loadViews();\r\n          } else {\r\n            this.setState({ \r\n              loading: false, \r\n              recentTypeChanges: [], \r\n              recentThingChanges: [] \r\n            });\r\n          }\r\n          // this.setState({ loading: false });\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  loadViews = () => {\r\n    // function finish() {\r\n    //   this.api.getViews(this.props.selectedWorldID, this.props.user._id).then(res => {\r\n    //     const typeViews = res.filter(v => v.objectType === \"Type\");\r\n    //     const recentTypeChanges = this.props.types.filter(t => t.EditUserID !== this.props.user._id && typeViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n    //     const thingViews = res.filter(v => v.objectType === \"Type\");\r\n    //     const recentThingChanges = this.props.things.filter(t => t.EditUserID !== this.props.user._id && thingViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n\r\n    //     this.setState({ \r\n    //       loading: false, \r\n    //       recentTypeChanges, \r\n    //       recentThingChanges \r\n    //     });\r\n    //   });\r\n    // }\r\n    if (this.state.loading) {\r\n      // finish();\r\n      this.api.getViews(this.props.selectedWorldID, this.props.user._id).then(res => {\r\n        const typeViews = res.filter(v => v.objectType === \"Type\");\r\n        const recentTypeChanges = this.props.types.filter(t => t.EditUserID !== this.props.user._id && typeViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n        const thingViews = res.filter(v => v.objectType === \"Type\");\r\n        const recentThingChanges = this.props.things.filter(t => t.EditUserID !== this.props.user._id && thingViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n\r\n        this.setState({ \r\n          loading: false, \r\n          recentTypeChanges, \r\n          recentThingChanges \r\n        });\r\n      });\r\n    } else {\r\n      this.setState({ \r\n        loading: true, templateMode: false, importMode: false \r\n      }, _ => {\r\n        this.api.getViews(this.props.selectedWorldID, this.props.user._id).then(res => {\r\n          const typeViews = res.filter(v => v.objectType === \"Type\");\r\n          const recentTypeChanges = this.props.types.filter(t => t.EditUserID !== this.props.user._id && typeViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n          const thingViews = res.filter(v => v.objectType === \"Type\");\r\n          const recentThingChanges = this.props.things.filter(t => t.EditUserID !== this.props.user._id && thingViews.filter(v => v.objectID === t._id && v.ViewDT < t.EditDT).length > 0);\r\n  \r\n          this.setState({ \r\n            loading: false, \r\n            recentTypeChanges, \r\n            recentThingChanges \r\n          });\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  requestToCollaborate = () => {\r\n    this.api.requestToCollaborate(this.props.selectedWorldID).then(res => {\r\n      const world = this.props.selectedWorld;\r\n      world.Collaborators.push(res);\r\n      this.props.updatePublicWorldForCollab(world);\r\n    });\r\n  }\r\n\r\n  respondToInvite = () => {\r\n    const invite = this.props.selectedWorld.Collaborators.filter(c=> c.userID === this.props.user._id && c.type === \"invite\")[0];\r\n    this.setState({ redirectTo: `/project/collaborate/${this.props.selectedWorldID}/${invite.collabID}` });\r\n  }\r\n\r\n  updateTemplates = () => {\r\n    this.api.getTemplates().then(res => {\r\n      this.props.setTemplates(res.templates);\r\n      this.setState({ templateMode: false });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { id } = this.props.match.params;\r\n    if ((this.props.worlds.length > 0 || this.props.publicWorlds.length > 0) && (this.props.selectedWorldID === null || this.props.selectedWorldID !== id)) {\r\n      this.load(id);\r\n      return (<span>Loading</span>);\r\n    } else if (this.state.recentTypeChanges === undefined && this.props.user !== null && this.props.user !== undefined) {\r\n      this.loadViews();\r\n      return (<span>Loading</span>);\r\n    } else if (this.state.loading) {\r\n      return (<span>Loading</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      (this.props.selectedWorld.Owner !== this.props.user._id && \r\n        this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\").length === 0)) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (this.state.templateMode) {\r\n      return (\r\n        <TemplateModal \r\n          world={this.props.selectedWorld} \r\n          types={this.props.types}\r\n          things={this.props.things}\r\n          attributesByID={this.props.attributesByID}\r\n          templates={this.props.templates} \r\n          onSave={_ => {\r\n            this.updateTemplates();\r\n          }}\r\n          onCancel={_ => {\r\n            this.setState({ templateMode: false });\r\n          }}\r\n          api={this.api} />\r\n      );\r\n    } else if (this.state.importMode) {\r\n      return (\r\n        <ImportTemplatesControl \r\n          templates={this.props.templates} \r\n          onSubmit={selectedTemplateIDs => {\r\n            setTimeout(() => {\r\n              this.setState(\r\n                { \r\n                  selectedTemplateIDs, \r\n                  importMode: false \r\n                }\r\n              );\r\n            }, 500);\r\n          }}\r\n          onCancel={_ => {\r\n            this.setState({ importMode: false });\r\n          }} \r\n        />\r\n      );\r\n    } else if (this.state.selectedTemplateIDs.length > 0) {\r\n      return (\r\n        <ImportingTemplatesControl \r\n          templateID={this.state.selectedTemplateIDs[0]} \r\n          onComplete={_ => {\r\n            this.api.getWorld(id, true).then(res => {\r\n              this.props.setAttributes(res.attributes);\r\n              this.props.setTypes(res.types);\r\n              this.props.setThings(res.things);\r\n\r\n              setTimeout(() => {\r\n                const selectedTemplateIDs = [...this.state.selectedTemplateIDs];\r\n                selectedTemplateIDs.shift();\r\n                this.setState({ selectedTemplateIDs });\r\n              }, 500);\r\n            });\r\n          }}\r\n          onCancel={_ => {\r\n            this.setState({ selectedTemplateIDs: [] });\r\n          }}\r\n        />\r\n      );\r\n    } else {\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      return (\r\n        <Grid item xs={12} container spacing={0} direction=\"column\">\r\n          {this.props.selectedWorld !== null && \r\n            <Grid item container spacing={0} direction=\"row\">\r\n              <Helmet>\r\n                <title>{ `Author's Notebook: ${this.props.selectedWorld.Name}` }</title>\r\n              </Helmet>\r\n              <Grid item xs={12} sm={8} container spacing={0} direction=\"column\">\r\n                <Grid item>\r\n                  <h2>{this.props.selectedWorld.Name}</h2>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div  dangerouslySetInnerHTML={{__html: this.props.selectedWorld.Description}} />\r\n                  {/* {this.props.selectedWorld.Description} */}\r\n                </Grid>\r\n                <Grid item>\r\n                  <Box display={{ xs: 'none', sm: 'block' }}>\r\n                    <Index />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              { this.props.user !== null &&\r\n                <Grid item xs={12} sm={4}>\r\n                  { this.props.selectedWorld.Owner === this.props.user._id ?\r\n                    <List>\r\n                      <ListItem>\r\n                        <Grid container spacing={1} direction=\"row\">\r\n                          <Grid item xs={4} sm={12}>\r\n                            <Tooltip title={`Edit ${this.props.selectedWorld.Name}`}>\r\n                              <Fab size=\"small\" color=\"primary\"\r\n                                onClick={ _ => {this.setState({redirectTo:`/project/edit/${this.props.selectedWorldID}`})}}\r\n                              >\r\n                                <Edit />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                          <Grid item xs={4} sm={12}>\r\n                            <Tooltip title={`Edit Collaborators`}>\r\n                              <Fab size=\"small\" color=\"primary\"\r\n                                onClick={ _ => {this.setState({redirectTo:`/project/collaborators/${this.props.selectedWorldID}`})}}\r\n                              >\r\n                              <People />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                          <Grid item xs={4} sm={12}>\r\n                            <Tooltip title={`Delete ${this.props.selectedWorld.Name}`}>\r\n                              <Fab size=\"small\" color=\"primary\"\r\n                                onClick={e => {this.setState({modalOpen: true})}}\r\n                              >\r\n                                <Delete />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                        </Grid>\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={_ => {\r\n                            this.setState({ templateMode: true });\r\n                          }}\r\n                        >\r\n                          Create a Template\r\n                        </Button>\r\n                      </ListItem>\r\n                      <ListItem>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={_ => {\r\n                            this.setState({ importMode: true });\r\n                          }}\r\n                        >\r\n                          Import Templates\r\n                        </Button>\r\n                      </ListItem>\r\n                    </List>\r\n                  : \r\n                    <List>\r\n                      { this.props.selectedWorld.Collaborators !== undefined && this.props.selectedWorld.Collaborators.filter(c=> c.userID === this.props.user._id).length === 0 ?\r\n                        <ListItem>\r\n                          { this.props.selectedWorld.AcceptingCollaborators && \r\n                            <Button\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={this.requestToCollaborate}\r\n                              type=\"button\"\r\n                            >\r\n                              Request to Collaborate\r\n                            </Button>\r\n                          }\r\n                        </ListItem>\r\n                      : this.props.selectedWorld.Collaborators.filter(c=> c.userID === this.props.user._id && c.type === \"request\").length > 0 ?\r\n                        <ListItem>\r\n                          Waiting on Collaboration Request\r\n                        </ListItem>\r\n                      : this.props.selectedWorld.Collaborators.filter(c=> c.userID === this.props.user._id && c.type === \"invite\").length > 0 &&\r\n                        <ListItem>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={this.respondToInvite}\r\n                            type=\"button\"\r\n                          >\r\n                            You've been invited to Collaborate\r\n                          </Button>\r\n                        </ListItem>\r\n                      }\r\n                    </List>\r\n                  }\r\n                  { this.state.recentTypeChanges !== undefined && (this.state.recentTypeChanges.length + this.state.recentThingChanges.length > 0) && \r\n                    <Grid container spacing={1} direction=\"column\">\r\n                      <Grid item>\r\n                        {this.state.expandRecentChanges ? \r\n                          <Tooltip title={`Collapse Recent Changes`}>\r\n                            <Button \r\n                              onClick={_ => {this.setState({ expandRecentChanges: false })}}>\r\n                                <KeyboardArrowDownIcon/>\r\n                            </Button>\r\n                          </Tooltip>\r\n                        :\r\n                          <Tooltip title={`Expand Recent Changes`}>\r\n                              <Button \r\n                                onClick={_ => {this.setState({ expandRecentChanges: true })}}>\r\n                                <KeyboardArrowRightIcon/>\r\n                              </Button>\r\n                            </Tooltip>\r\n                        }\r\n                        <span className={\"MuiTypography-root MuiListItemText-primary MuiTypography-body1\"}>\r\n                          Recent Changes ({this.state.recentTypeChanges.length + this.state.recentThingChanges.length})\r\n                        </span>\r\n                      </Grid>\r\n                      { this.state.expandRecentChanges && \r\n                        <Grid item>\r\n                          <List>\r\n                            {\r\n                              this.state.recentTypeChanges.map((type, i) => {\r\n                                let editedByUser = this.props.allUsers.filter(u => u._id === type.EditUserID);\r\n                                if (editedByUser.length > 0){\r\n                                  editedByUser = editedByUser[0];\r\n                                } else {\r\n                                  editedByUser = {\r\n                                    username: \"Unknown\"\r\n                                  };\r\n                                }\r\n                                return (\r\n                                  <ListItem key={i}>\r\n                                    <Button\r\n                                      variant=\"contained\"\r\n                                      color=\"primary\"\r\n                                      onClick={_ => {\r\n                                        this.setState({redirectTo:`/type/details/${type._id}`});\r\n                                      }}\r\n                                      type=\"button\"\r\n                                    >\r\n                                      {type.Name} ({new Date(type.EditDT).toDateString()}, {editedByUser.username})\r\n                                    </Button>\r\n                                  </ListItem>\r\n                                );\r\n                              })\r\n                            }\r\n                          </List>\r\n                          <List>\r\n                            {\r\n                              this.state.recentThingChanges.map((thing, i) => {\r\n                                let editedByUser = this.props.allUsers.filter(u => u._id === thing.EditUserID);\r\n                                if (editedByUser.length > 0){\r\n                                  editedByUser = editedByUser[0];\r\n                                } else {\r\n                                  editedByUser = null;\r\n                                }\r\n                                return (\r\n                                  <ListItem key={i}>\r\n                                    <Button\r\n                                      variant=\"contained\"\r\n                                      color=\"primary\"\r\n                                      onClick={_ => {\r\n                                        this.setState({redirectTo:`/thing/details/${thing._id}`});\r\n                                      }}\r\n                                      type=\"button\"\r\n                                    >\r\n                                      {thing.Name} ({thing.EditDT}, {editedByUser.username})\r\n                                    </Button>\r\n                                  </ListItem>\r\n                                );\r\n                              })\r\n                            }\r\n                          </List>\r\n                        </Grid>\r\n                      }\r\n                    </Grid>\r\n                  }\r\n                </Grid>\r\n              }\r\n              <Grid item xs={12}>\r\n                <Box display={{ xs: 'block', sm: 'none' }}>\r\n                  <Index />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <CommentsControl \r\n                  user={this.props.user} \r\n                  allUsers={this.props.allUsers}\r\n                  object={this.props.selectedWorld}\r\n                  objectType=\"World\"\r\n                  world={this.props.selectedWorld}\r\n                  api={this.api} \r\n                  onChange={this.commentsChange}\r\n                  suggestions={suggestions}\r\n                /> \r\n              </Grid>\r\n            </Grid>\r\n          }\r\n          <Modal\r\n              aria-labelledby=\"delete-thing-modal\"\r\n              aria-describedby=\"delete-thing-modal-description\"\r\n              open={this.state.modalOpen}\r\n              onClose={e => {this.setState({modalOpen: false})}}\r\n            >\r\n              <div style={this.getModalStyle()} className=\"paper\">\r\n                <Grid container spacing={1} direction=\"column\">\r\n                  <Grid item>\r\n                    Are you sure you want to delete {this.props.selectedWorld !== null ? this.props.selectedWorld.Name : \"\"}?\r\n                  </Grid>\r\n                  <Grid item>\r\n                    (All external references to it will be left alone and may not work correctly)\r\n                  </Grid>\r\n                  <Grid item container spacing={1} direction=\"row\">\r\n                    <Grid item xs={6}>\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={this.delete}\r\n                      >\r\n                        Yes\r\n                      </Button>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        onClick={e => {this.setState({modalOpen: false})}}\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </div>\r\n            </Modal>\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\nconst WorldDetailsPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default WorldDetailsPage;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  selectWorld,\r\n  addAndSelectWorld,\r\n  updateWorld,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  logout\r\n} from \"../../redux/actions/index\";\r\nimport { Button, Checkbox, FormControl, FormControlLabel,\r\n  OutlinedInput, InputLabel, FormHelperText, Grid, Tooltip, Fab\r\n} from \"@material-ui/core\";\r\nimport { ArrowBack } from \"@material-ui/icons\";\r\nimport { Helmet } from 'react-helmet';\r\nimport API from \"../../smartAPI\";\r\n// import TemplatesModal from \"../../components/Modals/TemplatesModal\";\r\nimport ImportTemplatesControl from \"../../components/WorldTemplateControls/ImportTemplatesControl\";\r\nimport ImportingTemplatesControl from \"../../components/WorldTemplateControls/ImportingTemplatesControl\";\r\nimport TextBox from \"../../components/Inputs/TextBox\";\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a World.  It will allow the use of Template Worlds\r\n  which come with preloaded Template Types.\r\n*/\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    worlds: state.app.worlds,\r\n    user: state.app.user,\r\n    fromLogin: state.app.fromLogin,\r\n    templates: state.app.templates,\r\n    types: state.app.types,\r\n    attributesByName: state.app.attributesByName,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    selectWorld: worldID => dispatch(selectWorld(worldID)),\r\n    addAndSelectWorld: world => dispatch(addAndSelectWorld(world)),\r\n    updateWorld: world => dispatch(updateWorld(world)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // _id: null, // This gets used, but I'm intentionally making it undefined to start\r\n      Name: \"\",\r\n      Description: \"\",\r\n      Public: false,\r\n      AcceptingCollaborators: false,\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      loaded: true,\r\n      importMode: false,\r\n      selectedTemplateIDs: [],\r\n      tempSelectedTemplateIDs: []\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value =\r\n      e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({ [name]: value });\r\n  }\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      fieldValidation[name].valid !== validation.valid\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  }\r\n\r\n  a11yProps = (index) => {\r\n    return {\r\n      id: `simple-tab-${index}`,\r\n      'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n  }\r\n\r\n  validateField = fieldName => {\r\n    let value = this.state[fieldName];\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"Name\":\r\n        valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        if (!valid)\r\n          message = \"Only Letters, Numbers, and Spaces allowed in Project Names\";\r\n        else if (value.length < 4) {\r\n          valid = false;\r\n          message = \"Project Name is too short\";\r\n        } else {\r\n          valid =\r\n            this.props.worlds.filter(\r\n              w => w.Name === value && w._id !== this.state._id\r\n            ).length === 0;\r\n          if (!valid) message = \"This Project Name is already in use\";\r\n        }\r\n        break;\r\n      case \"inviteEmail\":\r\n        valid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i) !== null;\r\n        message = valid ? \"\" : \"Email is invalid\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  }\r\n\r\n  validateForm = respond => {\r\n    const nameValid = this.validateField(\"Name\");\r\n    const formValid = nameValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.Name = nameValid;\r\n    this.setState(\r\n      {\r\n        formValid: formValid,\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  }\r\n\r\n  onSubmit = () => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true }, this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  }\r\n\r\n  /**\r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p><p><br></p>\r\n   * gets translated to \r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p>\r\n   */\r\n  cleanWYSIWYG = (str) => {\r\n    if (str.endsWith(\"<p><br></p>\")) {\r\n      str = str.substring(0, str.length - 11);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  submitThroughAPI = () => {\r\n    const world = {\r\n      _id: this.state._id,\r\n      Name: this.state.Name.trim(),\r\n      Description: this.cleanWYSIWYG(this.state.Description.trim()),\r\n      Public: this.state.Public,\r\n      AcceptingCollaborators: this.state.AcceptingCollaborators,\r\n      Owner: this.props.user._id\r\n    };\r\n\r\n    if (world._id === null) {\r\n      this.api\r\n        .createWorld(world)\r\n        .then(res => {\r\n          if (res.error !== undefined) {\r\n            this.setState({ message: res.error }, () => {\r\n              this.props.logout();\r\n            });\r\n          }\r\n          else {\r\n            world._id = res.worldID;\r\n            this.props.addAndSelectWorld(world);\r\n            // this.props.selectWorld(world._id);\r\n            if (this.state.tempSelectedTemplateIDs === undefined || this.state.tempSelectedTemplateIDs.length === 0) {\r\n              this.setState({\r\n                waiting: false,\r\n                redirectTo: `/project/details/${res.worldID}`\r\n              });\r\n            } else {\r\n              this.setState({\r\n                selectedTemplateIDs: this.state.tempSelectedTemplateIDs,\r\n                tempSelectedTemplateIDs: []\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch(err => console.log(err));\r\n    } else {\r\n      this.api\r\n        .updateWorld(world)\r\n        .then(res => {\r\n          if (res.error !== undefined) {\r\n            this.setState({ message: res.error }, () => {\r\n              this.props.logout();\r\n            });\r\n          }\r\n          else {\r\n            this.props.updateWorld(world);\r\n            if (this.state.tempSelectedTemplateIDs === undefined || this.state.tempSelectedTemplateIDs.length === 0) {\r\n              this.setState({\r\n                waiting: false,\r\n                redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n              });\r\n            } else {\r\n              this.setState({\r\n                selectedTemplateIDs: this.state.tempSelectedTemplateIDs,\r\n                tempSelectedTemplateIDs: []\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  load = (id) => {\r\n    setTimeout(() => {\r\n      if (this.props.selectedWorldID !== id) {\r\n        this.props.selectWorld(id);\r\n      }\r\n      this.setState({\r\n        _id: id,\r\n        redirectTo: null,\r\n        loaded: false\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    if (this.state._id === null) {\r\n      this.setState({\r\n        Name: \"\",\r\n        Description: \"\",\r\n        AcceptingCollaborators: false,\r\n        Public: false,\r\n        loaded: true\r\n      });\r\n    }\r\n    else {\r\n      this.props.selectWorld(this.state._id);\r\n      this.api.selectWorld(this.state._id).then(res => {\r\n        this.api.getWorld(this.props.selectedWorldID).then(res => {\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n\r\n          this.setState({\r\n            Name: this.props.selectedWorld.Name,\r\n            Description: this.props.selectedWorld.Description === undefined ? \"\" : this.props.selectedWorld.Description,\r\n            AcceptingCollaborators: this.props.selectedWorld.AcceptingCollaborators === undefined ? false : this.props.selectedWorld.AcceptingCollaborators,\r\n            Public: this.props.selectedWorld.Public,\r\n            loaded: true\r\n          });\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    let { id } = this.props.match.params;\r\n    if (id === undefined)\r\n      id = null;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading...</span>);\r\n    } else if (!this.state.loaded) {\r\n      return (<span>Loading...</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.state._id !== null && this.props.selectedWorld !== null && \r\n      (this.props.user === null || this.props.selectedWorld.Owner !== this.props.user._id)) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (this.state.importMode) {\r\n      return (\r\n        <ImportTemplatesControl \r\n          templates={this.props.templates} \r\n          selectedTemplateIDs={this.state.tempSelectedTemplateIDs}\r\n          onSubmit={ tempSelectedTemplateIDs => {\r\n            this.setState({ tempSelectedTemplateIDs, importMode: false });\r\n          }}\r\n          onCancel={_ => {\r\n            this.setState({ importMode: false });\r\n          }} \r\n        />\r\n      );\r\n    } else if (this.state.selectedTemplateIDs.length > 0) {\r\n      return (\r\n        <ImportingTemplatesControl \r\n          templateID={this.state.selectedTemplateIDs[0]} \r\n          onComplete={_ => {\r\n            this.api.getWorld(this.props.selectedWorldID, true).then(res => {\r\n              this.props.setAttributes(res.attributes);\r\n              this.props.setTypes(res.types);\r\n              this.props.setThings(res.things);\r\n\r\n              setTimeout(() => {\r\n                const selectedTemplateIDs = [...this.state.selectedTemplateIDs];\r\n                selectedTemplateIDs.shift();\r\n                if (selectedTemplateIDs.length > 0) {\r\n                  this.setState({ selectedTemplateIDs });\r\n                } else {\r\n                  this.setState({\r\n                    waiting: false,\r\n                    redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n                  });\r\n                }\r\n              }, 500);\r\n            });\r\n          }}\r\n          onCancel={_ => {\r\n            this.setState({ selectedTemplateIDs: [] });\r\n          }}\r\n        />\r\n      );\r\n    } else {\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      return (\r\n        <Grid item xs={12} container spacing={1} direction=\"column\">\r\n          <Helmet>\r\n            <title>{ this.state._id === null ? `Author's Notebook: Create New World` : `Author's Notebook: Edit ${this.props.selectedWorld.Name}` }</title>\r\n          </Helmet>\r\n          <Grid item container spacing={1} direction=\"row\">\r\n            <Grid item xs={1}>\r\n              { this.props.selectedWorld !== null &&\r\n                <Tooltip title={`Back to ${this.props.selectedWorld.Name} Details`}>\r\n                  <Fab size=\"small\"\r\n                    color=\"primary\"\r\n                    onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                  >\r\n                    <ArrowBack />\r\n                  </Fab>\r\n                </Tooltip>\r\n              }\r\n            </Grid>\r\n            <Grid item xs={11}>\r\n              <h2>\r\n                {this.state._id === null ? \"Create New Project\" : \"Edit Project\"}\r\n              </h2>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"name\">Name</InputLabel>\r\n              <OutlinedInput\r\n                id=\"name\"\r\n                name=\"Name\"\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                error={!this.state.fieldValidation.Name.valid}\r\n                value={this.state.Name}\r\n                onChange={this.handleUserInput}\r\n                onBlur={this.inputBlur}\r\n                labelWidth={43}\r\n                fullWidth\r\n              />\r\n              <FormHelperText>\r\n                {this.state.fieldValidation.Name.message}\r\n              </FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item>\r\n            <TextBox \r\n              Value={this.state.Description} \r\n              fieldName=\"Description\" \r\n              multiline={true}\r\n              onBlur={desc => {\r\n                this.setState({ Description: desc });\r\n                // const type = this.props.selectedType;\r\n                // type.Description = desc;\r\n                // this.props.updateSelectedType(type);\r\n              }}\r\n              labelWidth={82}\r\n              options={suggestions}\r\n            />\r\n          </Grid>\r\n          <Grid item>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={this.state.Public}\r\n                  onChange={this.handleUserInput}\r\n                  name=\"Public\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Public\"\r\n            />\r\n            { this.state.Public ?\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={this.state.AcceptingCollaborators}\r\n                  onChange={this.handleUserInput}\r\n                  name=\"AcceptingCollaborators\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Accepting Collaborator Requests\"\r\n            /> : \"\" }\r\n          </Grid>\r\n          <Grid item>{this.state.message}</Grid>\r\n          { this.state.tempSelectedTemplateIDs !== undefined && this.state.tempSelectedTemplateIDs.length > 0 &&\r\n            <Grid item>Templates will be imported on submit</Grid>\r\n          }\r\n          <Grid item container spacing={1} direction=\"row\">\r\n            <Grid item xs={12} sm={4}>\r\n              <Button\r\n                variant=\"contained\"\r\n                fullWidth\r\n                color=\"primary\"\r\n                disabled={this.state.waiting}\r\n                onClick={_ => {\r\n                  this.setState({ importMode: true });\r\n                }}\r\n                type=\"submit\"\r\n              >\r\n                Import Templates\r\n              </Button>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Button\r\n                variant=\"contained\"\r\n                fullWidth\r\n                color=\"primary\"\r\n                disabled={this.state.waiting}\r\n                onClick={this.onSubmit}\r\n                type=\"submit\"\r\n              >\r\n                {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n              </Button>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Button\r\n                variant=\"contained\"\r\n                fullWidth\r\n                disabled={this.state.waiting}\r\n                onClick={_ => {\r\n                  this.setState({\r\n                    redirectTo: this.state._id === null ? `/` : `/project/details/${this.state._id}`\r\n                  });\r\n                }}\r\n                type=\"button\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            {Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n              if (\r\n                this.state.fieldValidation[fieldName] !== undefined &&\r\n                this.state.fieldValidation[fieldName].message.length > 0\r\n              ) {\r\n                return (\r\n                  <p className=\"redFont\" key={i}>\r\n                    {this.state.fieldValidation[fieldName].message}\r\n                  </p>\r\n                );\r\n              } else {\r\n                return \"\";\r\n              }\r\n            })}\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst WorldEditPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default WorldEditPage;","import React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport { \r\n  userLogin, setWorlds, setFollowingWorlds, setAllUsers\r\n} from \"../../redux/actions/index\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Cookies from \"universal-cookie\";\r\nimport API from '../../smartAPI';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return { \r\n    // selectedPage: state.app.selectedPage, \r\n    user: state.app.user, \r\n    loginError: state.app.loginError,\r\n    followingWorlds: state.app.followingWorlds,\r\n    allUsers: state.app.allUsers\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    userLogin: user => dispatch(userLogin(user)),\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    setFollowingWorlds: worldIDs => dispatch(setFollowingWorlds(worldIDs)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers))\r\n  };\r\n}\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const cookies = new Cookies();\r\n    const emailCookie = cookies.get('email');\r\n    const passCookie = cookies.get('password');\r\n    this.state = {\r\n      formMode: \"login\",\r\n      email: (emailCookie === undefined ? \"\" : emailCookie),\r\n      password: (passCookie === undefined ? \"\" : passCookie),\r\n      confirmEmail: \"\",\r\n      confirmPassword: \"\",\r\n      fieldValidation: { \r\n        email: { valid: true, message: \"\" }, \r\n        password: { valid: true, message: \"\" }, \r\n        confirmEmail: { valid: true, message: \"\" }, \r\n        confirmPassword: { valid: true, message: \"\" },\r\n        username: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      remember: false,\r\n      message: \"\",\r\n      username: \"\",\r\n      // redirectTo: null,\r\n      // allUsers: null\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    if (this.state.email) {\r\n      this.validateField(\"email\");\r\n      this.validateField(\"password\");\r\n      this.setState({remember: true});\r\n    }\r\n  }\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value = (e.target.type === \"checkbox\" ? e.target.checked : e.target.value);\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (fieldValidation[name].valid !== validation.valid) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ showPassword: !this.state.showPassword });\r\n  };\r\n\r\n  handleMouseDownPassword = event => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  validateField = (fieldName) => {\r\n    let valid = true;\r\n    let message = \"\";\r\n    let value = this.state[fieldName];\r\n    switch (fieldName) {\r\n      case \"email\":\r\n        valid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i) !== null;\r\n        message = valid ? \"\" : \"Email is invalid\";\r\n        break;\r\n      case \"password\":\r\n        valid = value.length >= 6;\r\n        message = valid ? \"\" : \"Password is too short\";\r\n        break;\r\n      case \"confirmEmail\":\r\n        valid = value === this.state.email;\r\n        message = valid ? \"\" : \"Confirm Email doesn't match Email\";\r\n        break;\r\n      case \"confirmPassword\":\r\n        valid = value === this.state.password;\r\n        message = valid ? \"\" : \"Confirm Password doesn't match Password\";\r\n        break;\r\n      case \"username\":\r\n        valid = value.length >= 2;\r\n        message = valid ? \"\" : \"Username is too short\";\r\n        if (valid && this.props.allUsers.filter(u=>u.username === value).length !== 0) {\r\n          valid = false;\r\n          message = \"This Username is taken\";\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  };\r\n\r\n  validateForm = (respond) => {\r\n    const emailValid = this.validateField(\"email\");\r\n    let confirmEmailValid = { valid: true, message: \"\" };\r\n    let passwordValid = { valid: true, message: \"\" };\r\n    let confirmPasswordValid = { valid: true, message: \"\" };\r\n    let usernameValid = { valid: true, message: \"\" };\r\n    switch (this.state.formMode) {\r\n      case \"Login\":\r\n        passwordValid = this.validateField(\"password\");\r\n        break;\r\n      case \"Register\":\r\n        confirmEmailValid = this.validateField(\"confirmEmail\");\r\n        passwordValid = this.validateField(\"password\");\r\n        confirmPasswordValid = this.validateField(\"confirmPassword\");\r\n        usernameValid = this.validateField(\"username\");\r\n      break;\r\n      default:\r\n      break;\r\n    }\r\n    const formValid = \r\n      emailValid.valid && \r\n      passwordValid.valid && \r\n      confirmEmailValid.valid && \r\n      confirmPasswordValid.valid && \r\n      usernameValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.email = emailValid;\r\n    fieldValidation.password = passwordValid;\r\n    fieldValidation.confirmEmail = confirmEmailValid;\r\n    fieldValidation.confirmPassword = confirmPasswordValid;\r\n    fieldValidation.username = usernameValid;\r\n    this.setState({ \r\n      formValid: formValid,\r\n      fieldValidation: fieldValidation\r\n    }, respond);\r\n  }\r\n\r\n  onSubmit = () => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true },\r\n          this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  };\r\n\r\n  submitThroughAPI = () => {\r\n    const user = {\r\n      email: this.state.email.trim(),\r\n      password: this.state.password,\r\n      username: this.state.username.trim(),\r\n      followingWorlds: this.props.followingWorlds\r\n    };\r\n    if (this.state.formMode === \"login\") {\r\n      this.api.login(user, this.state.remember).then(res => {\r\n        if (res.user === null) {\r\n          let errors = this.state.fieldValidation;\r\n          errors.loginError = { message: res.error, valid: false, show: true };\r\n          this.setState({ fieldValidation: errors, waiting: false });\r\n        }\r\n        else {\r\n          this.props.userLogin(res.user);\r\n          this.api.getWorldsForUser(res.user._id).then(res => {\r\n            this.props.setWorlds(res.worlds);\r\n            this.props.onLogin(res.user);\r\n            // this.setState({ redirectTo: \"/\" });\r\n          });\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n    } else if (this.state.formMode === \"register\") {\r\n      this.api.register(user).then(res => {\r\n        if (res.error === undefined) {\r\n          this.setState({ \r\n            message: res.message, \r\n            formMode: \"login\", \r\n            fieldValidation: { \r\n              email: { valid: true, message: \"\" }, \r\n              password: { valid: true, message: \"\" }, \r\n              confirmEmail: { valid: true, message: \"\" }, \r\n              confirmPassword: { valid: true, message: \"\" },\r\n              username: { valid: true, message: \"\" }\r\n            },\r\n            waiting: false\r\n          }, _ => {\r\n            this.api.getAllUsers(true).then(users => {\r\n              this.props.setAllUsers(users);\r\n              // this.setState({allUsers: res});\r\n            });\r\n          });\r\n        }\r\n        else {\r\n          this.setState({ \r\n            message: res.error,\r\n            waiting: false\r\n          });\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n    } else if (this.state.formMode === \"password\") {\r\n      this.api.sendReset(user).then(res => {\r\n        this.setState({ message: res.message, \r\n          formMode: \"login\", \r\n          fieldValidation: { \r\n            email: { valid: true, message: \"\" }, \r\n            password: { valid: true, message: \"\" }, \r\n            confirmEmail: { valid: true, message: \"\" }, \r\n            confirmPassword: { valid: true, message: \"\" },\r\n            username: { valid: true, message: \"\" }\r\n          },\r\n          waiting: false \r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  loginClick = () => {\r\n    this.setState({ formMode: \"login\" });\r\n  };\r\n\r\n  registerClick = () => {\r\n    this.setState({ formMode: \"register\" });\r\n  };\r\n\r\n  passwordClick = () => {\r\n    this.setState({ formMode: \"password\" });\r\n  };\r\n\r\n  render() {\r\n    if (this.props.allUsers === null) {\r\n      this.api.getAllUsers(true).then(res => {\r\n        this.props.setAllUsers(res);\r\n        // this.setState({allUsers: res});\r\n      });\r\n      return (<div></div>);\r\n    }\r\n    // else if (this.state.redirectTo !== null && \r\n    //   this.props.user !== null && \r\n    //   this.props.user !== undefined && \r\n    //   this.props.user.username !== undefined && \r\n    //   this.props.user.username !== \"\") {\r\n    //   return (<Redirect to={this.state.redirectTo} />);\r\n    // }\r\n    else {\r\n      if (this.state.formMode === \"login\") {\r\n        return (\r\n          <div>\r\n            <h2>Login</h2>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControl variant=\"outlined\"\r\n                        fullWidth>\r\n                      <InputLabel htmlFor=\"email\">Email</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        type=\"email\"\r\n                        error={ !this.state.fieldValidation.email.valid }\r\n                        value={this.state.email}\r\n                        onChange={this.handleUserInput}\r\n                        onBlur={this.inputBlur}\r\n                        labelWidth={40}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>{ this.state.fieldValidation.email.message }</FormHelperText>\r\n                    </FormControl>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControl variant=\"outlined\"\r\n                        fullWidth>\r\n                      <InputLabel htmlFor=\"outlined-adornment-password\">Password</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"outlined-adornment-password\"\r\n                        name=\"password\"\r\n                        type={this.state.showPassword ? 'text' : 'password'}\r\n                        value={this.state.password}\r\n                        error={ !this.state.fieldValidation.password.valid }\r\n                        onChange={this.handleUserInput}\r\n                        onBlur={this.inputBlur}\r\n                        endAdornment={\r\n                          <InputAdornment position=\"end\">\r\n                            <IconButton\r\n                              aria-label=\"toggle password visibility\"\r\n                              onClick={this.handleClickShowPassword}\r\n                              onMouseDown={this.handleMouseDownPassword}\r\n                              edge=\"end\"\r\n                            >\r\n                              {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                            </IconButton>\r\n                          </InputAdornment>\r\n                        }\r\n                        labelWidth={70}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>{ this.state.fieldValidation.password.message }</FormHelperText>\r\n                    </FormControl>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={this.state.remember}\r\n                          onChange={this.handleUserInput}\r\n                          name=\"remember\"\r\n                          color=\"primary\"\r\n                        />\r\n                      }\r\n                      label=\"Stay Signed In\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"float-left\">\r\n                  <Link\r\n                    onClick={this.registerClick}\r\n                  >\r\n                    Register\r\n                  </Link>{\" \"}\r\n                  <Link\r\n                    onClick={this.passwordClick}\r\n                  >\r\n                    Forgot Password\r\n                  </Link>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                  <Button className=\"w-200\" \r\n                    variant=\"contained\" color=\"primary\"\r\n                    disabled={this.state.waiting}\r\n                    onClick={this.onSubmit}\r\n                    type=\"submit\">{this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {this.state.message}\r\n            {\r\n              Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n                if (this.state.fieldValidation[fieldName] !== undefined && this.state.fieldValidation[fieldName].message.length > 0) {\r\n                  return (\r\n                    <p className=\"redFont\" key={i}>\r\n                      {this.state.fieldValidation[fieldName].message}\r\n                    </p>\r\n                  );\r\n                } else {\r\n                  return \"\";\r\n                }\r\n              })\r\n            }\r\n          </div>\r\n        );\r\n      } else if (this.state.formMode === \"register\") {\r\n        return (\r\n          <div>\r\n            <h2>Register</h2>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-6\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-sm-12 margined\">\r\n                        <FormControl variant=\"outlined\"\r\n                            fullWidth>\r\n                          <InputLabel htmlFor=\"username\">Username</InputLabel>\r\n                          <OutlinedInput\r\n                            id=\"username\"\r\n                            name=\"username\"\r\n                            type=\"text\"\r\n                            value={this.state.username}\r\n                            error={ !this.state.fieldValidation.username.valid }\r\n                            onChange={this.handleUserInput}\r\n                            onBlur={this.inputBlur}\r\n                            labelWidth={80}\r\n                            fullWidth\r\n                          />\r\n                          <FormHelperText>{ this.state.fieldValidation.username.message }</FormHelperText>\r\n                        </FormControl>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-sm-6\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-sm-12 margined\">\r\n                        <FormControl variant=\"outlined\"\r\n                            fullWidth>\r\n                          <InputLabel htmlFor=\"email\">Email</InputLabel>\r\n                          <OutlinedInput\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            type=\"email\"\r\n                            value={this.state.email}\r\n                            error={ !this.state.fieldValidation.email.valid }\r\n                            onChange={this.handleUserInput}\r\n                            onBlur={this.inputBlur}\r\n                            labelWidth={40}\r\n                            fullWidth\r\n                          />\r\n                          <FormHelperText>{ this.state.fieldValidation.email.message }</FormHelperText>\r\n                        </FormControl>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-sm-12 margined\">\r\n                        <FormControl variant=\"outlined\"\r\n                          fullWidth>\r\n                          <InputLabel htmlFor=\"confirmEmail\">Confirm Email</InputLabel>\r\n                          <OutlinedInput\r\n                            id=\"confirmEmail\"\r\n                            name=\"confirmEmail\"\r\n                            type=\"email\"\r\n                            error={ !this.state.fieldValidation.confirmEmail.valid }\r\n                            value={this.state.confirmEmail}\r\n                            onChange={this.handleUserInput}\r\n                            onBlur={this.inputBlur}\r\n                            labelWidth={100}\r\n                            fullWidth\r\n                          />\r\n                          <FormHelperText>{ this.state.fieldValidation.confirmEmail.message }</FormHelperText>\r\n                        </FormControl>\r\n                      </div>\r\n                    </div>\r\n                  </div> \r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControl variant=\"outlined\"\r\n                        fullWidth>\r\n                      <InputLabel htmlFor=\"outlined-adornment-password\">Password</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"outlined-adornment-password\"\r\n                        name=\"password\"\r\n                        type={this.state.showPassword ? 'text' : 'password'}\r\n                        value={this.state.password}\r\n                        error={ !this.state.fieldValidation.password.valid }\r\n                        onChange={this.handleUserInput}\r\n                        onBlur={this.inputBlur}\r\n                        endAdornment={\r\n                          <InputAdornment position=\"end\">\r\n                            <IconButton\r\n                              aria-label=\"toggle password visibility\"\r\n                              onClick={this.handleClickShowPassword}\r\n                              onMouseDown={this.handleMouseDownPassword}\r\n                              edge=\"end\"\r\n                            >\r\n                              {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                            </IconButton>\r\n                          </InputAdornment>\r\n                        }\r\n                        labelWidth={70}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>{ this.state.fieldValidation.password.message }</FormHelperText>\r\n                    </FormControl>\r\n                  </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControl variant=\"outlined\"\r\n                        fullWidth>\r\n                      <InputLabel htmlFor=\"confirm-password\">Confirm Password</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"confirm-password\"\r\n                        name=\"confirmPassword\"\r\n                        type={this.state.showPassword ? 'text' : 'password'}\r\n                        value={this.state.confirmPassword}\r\n                        error={ !this.state.fieldValidation.confirmPassword.valid }\r\n                        onChange={this.handleUserInput}\r\n                        onBlur={this.inputBlur}\r\n                        endAdornment={\r\n                          <InputAdornment position=\"end\">\r\n                            <IconButton\r\n                              aria-label=\"toggle password visibility\"\r\n                              onClick={this.handleClickShowPassword}\r\n                              onMouseDown={this.handleMouseDownPassword}\r\n                              edge=\"end\"\r\n                            >\r\n                              {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                            </IconButton>\r\n                          </InputAdornment>\r\n                        }\r\n                        labelWidth={130}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>{ this.state.fieldValidation.confirmPassword.message }</FormHelperText>\r\n                    </FormControl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"float-left\">\r\n                  <Link\r\n                    onClick={this.loginClick}\r\n                  >\r\n                    Login\r\n                  </Link>{\" \"}\r\n                  <Link\r\n                    onClick={this.passwordClick}\r\n                  >\r\n                    Forgot Password\r\n                  </Link>{\" \"}\r\n                </div>\r\n                <div className=\"float-right\">\r\n                  <Button className=\"w-200\" \r\n                    variant=\"contained\" color=\"primary\"\r\n                    disabled={this.state.waiting}\r\n                    onClick={this.onSubmit}\r\n                    type=\"submit\">{this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {this.state.message}\r\n            {\r\n              Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n                if (this.state.fieldValidation[fieldName] !== undefined && this.state.fieldValidation[fieldName].message.length > 0) {\r\n                  return (\r\n                    <p className=\"redFont\" key={i}>\r\n                      {this.state.fieldValidation[fieldName].message}\r\n                    </p>\r\n                  );\r\n                } else {\r\n                  return \"\";\r\n                }\r\n              })\r\n            }\r\n          </div>\r\n        );\r\n      } else if (this.state.formMode === \"password\") {\r\n        return (\r\n          <div>\r\n            <h2>Forgot Password?</h2>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-12 margined\">\r\n                    <FormControl variant=\"outlined\"\r\n                        fullWidth>\r\n                      <InputLabel htmlFor=\"email\">Email</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"email\"\r\n                        name=\"email\"\r\n                        type=\"email\"\r\n                        value={this.state.email}\r\n                        error={ !this.state.fieldValidation.email.valid }\r\n                        onChange={this.handleUserInput}\r\n                        onBlur={this.inputBlur}\r\n                        labelWidth={40}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>{ this.state.fieldValidation.email.message }</FormHelperText>\r\n                    </FormControl>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-12\">\r\n                <div className=\"float-left\">\r\n                  <Link\r\n                    onClick={this.registerClick}\r\n                  >\r\n                    Register\r\n                  </Link>{\" \"}\r\n                  <Link\r\n                    onClick={this.loginClick}\r\n                  >\r\n                    Login\r\n                  </Link>\r\n                </div>\r\n                <div className=\"float-right\">\r\n                  <Button className=\"w-200\" \r\n                    variant=\"contained\" color=\"primary\"\r\n                    disabled={this.state.waiting}\r\n                    onClick={this.onSubmit}\r\n                    type=\"submit\">{this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {this.state.message}\r\n            {\r\n              Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n                if (this.state.fieldValidation[fieldName] !== undefined && this.state.fieldValidation[fieldName].message.length > 0) {\r\n                  return (\r\n                    <p className=\"redFont\" key={i}>\r\n                      {this.state.fieldValidation[fieldName].message}\r\n                    </p>\r\n                  );\r\n                } else {\r\n                  return \"\";\r\n                }\r\n              })\r\n            }\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nconst LoginControl = connect(mapStateToProps, mapDispatchToProps)(Control);\r\nexport default LoginControl;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Button,\r\n  Grid\r\n} from \"@material-ui/core\";\r\nimport LoginControl from '../User/LoginControl';\r\nimport {\r\n  setWorlds,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings\r\n} from \"../../redux/actions/index\";\r\nimport API from '../../smartAPI';\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.app.user\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setWorlds: worlds => dispatch(setWorlds(worlds)),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      worldID: null,\r\n      collabID: null,\r\n      codeValid: false,\r\n      accepted: null,\r\n      message: \"Please wait.  Validating code.\",\r\n      world: null\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n  }\r\n\r\n  accept = () => {\r\n    if (this.props.user === null) {\r\n      this.setState({waiting: false, accepted: true});\r\n    }\r\n    else {\r\n      this.setState({waiting: true},\r\n        this.submitAccept\r\n      );\r\n    }\r\n  }\r\n\r\n  submitAccept = () => {\r\n    this.api.acceptCollabInvite(this.state.worldID, this.state.collabID).then(res => {\r\n      this.setState({waiting: false, accepted: true}, this.getWorlds);\r\n    });\r\n  }\r\n\r\n  getWorlds = () => {\r\n    this.api.getWorldsForUser().then(res => {\r\n      if (res.worlds !== undefined) this.props.setWorlds(res.worlds);\r\n      this.refreshWorld();\r\n    });\r\n  }\r\n\r\n  refreshWorld = () => {\r\n    this.api.getWorld(this.state.worldID, true).then(res => {\r\n      this.props.setAttributes(res.attributes);\r\n      this.props.setTypes(res.types);\r\n      this.props.setThings(res.things);\r\n    });\r\n  }\r\n\r\n  onLoginAccept = (user) => {\r\n    this.setState({waiting: true},\r\n      this.submitAccept\r\n    );\r\n  }\r\n\r\n  decline = () => {\r\n    this.setState({waiting: true},\r\n      this.submitDecline\r\n    );\r\n  }\r\n\r\n  submitDecline = () => {\r\n    this.api.declineCollabInvite(this.state.worldID, this.state.collabID).then(res => {\r\n      this.setState({waiting: false, accepted: false}, this.refreshWorld);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.collabID === null) {\r\n      const { worldID, collabID } = this.props.match.params;\r\n      setTimeout(() => {\r\n        this.api.checkCollabID(worldID, collabID).then(res => {\r\n          if (res.error !== undefined) {\r\n            this.setState({collabID, worldID, codeValid: false, message: res.error});\r\n          }\r\n          else {\r\n            this.setState({collabID, worldID, world: res.world, codeValid: true, message: \"\"});\r\n          }\r\n        });\r\n      }, 500);\r\n      return (\r\n        <div>\r\n          <h2>{this.state.message}</h2>\r\n        </div>\r\n      );\r\n    }\r\n    else if (this.state.codeValid) {\r\n      if (this.state.accepted === null) {\r\n        return (\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={12}>\r\n              <h2>You've been invited to collaborate on {this.state.world.Name}</h2>\r\n            </Grid>\r\n            <Grid item xs={12} container spacing={1}>\r\n              <Grid item xs={6}>\r\n                <Button className=\"w-200\" \r\n                  variant=\"contained\" color=\"primary\"\r\n                  disabled={this.state.waiting}\r\n                  onClick={this.accept}\r\n                  type=\"button\">\r\n                  Accept\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Button className=\"w-200\" \r\n                  variant=\"contained\" color=\"primary\"\r\n                  disabled={this.state.waiting}\r\n                  onClick={this.decline}\r\n                  type=\"button\">\r\n                  Decline\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      }\r\n      else if (this.state.accepted) {\r\n        if (this.props.user === null) {\r\n          return (\r\n            <Grid container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                <h2>Please log in (or register and then log in if you're new) so we can add you as a collaborator on {this.state.world.Name}.</h2>\r\n              </Grid>\r\n              <Grid item>\r\n                <LoginControl onLogin={this.onLoginAccept}/>\r\n              </Grid>\r\n            </Grid>\r\n          );\r\n        }\r\n        else {\r\n          return (\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={12}>\r\n                <h2>Congratulations! You can now collaborate on {this.state.world.Name}</h2>\r\n              </Grid>\r\n            </Grid>\r\n          );\r\n        }\r\n      }\r\n      else {\r\n        return (\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={12}>\r\n              Okay.  Well, we hope you enjoy working on other projects.\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      }\r\n    }\r\n    else {\r\n      return (\r\n        <div>\r\n          <h2>{this.state.message}</h2>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst CollaboratePage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default CollaboratePage;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  updateWorld, selectWorld,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  logout,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  setAllUsers\r\n} from \"../../redux/actions/index\";\r\nimport { Button, Checkbox, FormControl, FormControlLabel,\r\n  OutlinedInput, InputLabel, FormHelperText, Grid, \r\n  ListItem, ListItemText, \r\n  Tooltip, Fab, AppBar, Tabs, Tab, Box, \r\n  InputAdornment, IconButton,\r\n  Select, MenuItem\r\n} from \"@material-ui/core\";\r\nimport { Add, ArrowBack, FileCopyOutlined, Delete, Check } from \"@material-ui/icons\";\r\nimport { Helmet } from 'react-helmet';\r\nimport API from \"../../smartAPI\";\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a World.  It will allow the use of Template Worlds\r\n  which come with preloaded Template Types.\r\n*/\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index } = props;\r\n\r\n  return (\r\n    <div>{value === index && <Box p={3}>{children}</Box>}</div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    worlds: state.app.worlds,\r\n    user: state.app.user,\r\n    fromLogin: state.app.fromLogin,\r\n    allUsers: state.app.allUsers\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateWorld: world => dispatch(updateWorld(world)),\r\n    selectWorld: worldID => dispatch(selectWorld(worldID)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      _id: null,\r\n      Collaborators: [],\r\n      // allUsers: null,\r\n      fieldValidation: {\r\n        inviteEmail: { valid: true, message: \"\" }\r\n      },\r\n      message: \"\",\r\n      redirectTo: null,\r\n      newCollaborators: false,\r\n      newCollabTab: 0,\r\n      collabTab: 0,\r\n      collabLink: null,\r\n      collabLinkCopied: false,\r\n      selectedUser: \"\",\r\n      inviteEmail: \"\",\r\n      inviteMessage: \"\", \r\n      waiting: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value =\r\n      e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      fieldValidation[name].valid !== validation.valid\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  };\r\n\r\n  a11yProps = (index) => {\r\n    return {\r\n      id: `simple-tab-${index}`,\r\n      'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n  }\r\n\r\n  validateField = fieldName => {\r\n    let value = this.state[fieldName];\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"inviteEmail\":\r\n        valid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i) !== null;\r\n        message = valid ? \"\" : \"Email is invalid\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  };\r\n\r\n  addNewCollaborator = () => {\r\n    function respond() {\r\n      this.api.addNewCollaborator(this.props.selectedWorldID, this.state.selectedUser._id, this.state.selectedUser.email).then(res => {\r\n        if (res.error === undefined) {\r\n          const collabs = [...this.state.Collaborators];\r\n          collabs.push(res);\r\n          const world = this.props.selectedWorld;\r\n          world.Collaborators = collabs;\r\n          this.props.updateWorld(world);\r\n          this.setState({\r\n            Collaborators: collabs, \r\n            inviteMessage: \"Invite Sent\",\r\n            selectedUser: \"\",\r\n            waiting: false\r\n          });\r\n        }\r\n        else {\r\n          this.setState({message: res.error, waiting: false}, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.setState({waiting: true}, respond);\r\n  }\r\n\r\n  emailCollaborator = () => {\r\n    const emailValid = this.validateField(\"inviteEmail\");\r\n    if (emailValid) {\r\n      function respond() {\r\n        this.api.emailCollaborator(this.props.selectedWorldID, this.state.inviteEmail).then(res => {\r\n          if (res.error === undefined) {\r\n            const collabs = [...this.state.Collaborators];\r\n            collabs.push(res);\r\n            const world = this.props.selectedWorld;\r\n            world.Collaborators = collabs;\r\n            this.props.updateWorld(world);\r\n            this.setState({\r\n              Collaborators: collabs, \r\n              inviteMessage: \"Email Sent\", \r\n              inviteEmail: \"\",\r\n              waiting: false\r\n            });\r\n          }\r\n          else {\r\n            this.setState({message: res.error, waiting: false}, () => {\r\n              this.props.logout();\r\n            });\r\n          }\r\n        });\r\n      }\r\n      this.setState({waiting: true}, respond);\r\n    }\r\n  }\r\n\r\n  updateCollaboratorPermission = (collaborator, permission) => {\r\n    collaborator.editPermission = permission;\r\n    function respond() {\r\n      this.api.updateCollaboratorPermission(this.props.selectedWorldID, collaborator.collabID, permission).then(res => {\r\n        if (res.error === undefined) {\r\n          const collabs = [...this.state.Collaborators];\r\n          const collab = collabs.filter(c=>c.collabID === collaborator.collabID)[0];\r\n          collab.editPermission = permission;\r\n          const world = this.props.selectedWorld;\r\n          world.Collaborators = collabs;\r\n          this.props.updateWorld(world);\r\n          this.setState({\r\n            Collaborators: collabs, waiting: false\r\n          });\r\n        }\r\n        else {\r\n          this.setState({message: res.error, waiting: false}, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.setState({waiting: true}, respond);\r\n  }\r\n\r\n  // Creates a collab invite on the world, but no user or email associated\r\n  generateCollabLink = () => {\r\n    function respond() {\r\n      this.api.generateCollabLink(this.props.selectedWorldID).then(res => {\r\n        if (res.error === undefined) {\r\n          const collabs = [...this.state.Collaborators];\r\n          collabs.push(res);\r\n          const world = this.props.selectedWorld;\r\n          world.Collaborators = collabs;\r\n          this.props.updateWorld(world);\r\n          this.setState({\r\n            collabLink: res.collabLink, \r\n            collabLinkCopied: false,\r\n            Collaborators: collabs, \r\n            waiting: false\r\n          });\r\n        }\r\n        else {\r\n          this.setState({message: res.error, waiting: false}, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.setState({waiting: true}, respond);\r\n  }\r\n\r\n  deleteCollab = (collab) => {\r\n    function respond() {\r\n      this.api.deleteCollab(this.props.selectedWorldID, collab.collabID).then(res => {\r\n        if (res.error === undefined) {\r\n          const collabs = this.state.Collaborators.filter(c=>c.collabID !== collab.collabID);\r\n          const world = this.props.selectedWorld;\r\n          world.Collaborators = collabs;\r\n          this.props.updateWorld(world);\r\n          this.setState({\r\n            collabLink: res.collabLink, \r\n            collabLinkCopied: false,\r\n            Collaborators: collabs, \r\n            waiting: false\r\n          });\r\n        }\r\n        else {\r\n          this.setState({message: res.error, waiting: false}, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.setState({waiting: true}, respond);\r\n  }\r\n\r\n  acceptCollab = (collab) => {\r\n    function respond() {\r\n      this.api.acceptCollabRequest(this.props.selectedWorldID, collab.collabID).then(res => {\r\n        if (res.error === undefined) {\r\n          const collabs = [...this.state.Collaborators];\r\n          const collab2 = collabs.filter(c => c.collabID === collab.collabID)[0];\r\n          collab2.type = \"collab\";\r\n          const world = this.props.selectedWorld;\r\n          world.Collaborators = collabs;\r\n          this.props.updateWorld(world);\r\n          this.setState({\r\n            Collaborators: collabs, \r\n            waiting: false\r\n          });\r\n        }\r\n        else {\r\n          this.setState({message: res.error, waiting: false}, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.setState({waiting: true}, respond);\r\n  }\r\n\r\n  // Copies the collaborator link to the user's clipboard\r\n  copyCollabLink = () => {\r\n    const el = this.generatedLink;\r\n    const textarea = el.children[0];\r\n    textarea.select();\r\n    document.execCommand(\"copy\");\r\n    this.setState({collabLinkCopied: true});\r\n  }\r\n\r\n  load = (id) => {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    \r\n    setTimeout(() => {\r\n      this.setState({\r\n        _id: id,\r\n        loaded: false\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    this.api.selectWorld(this.state._id);\r\n    this.props.selectWorld(this.state._id);\r\n    this.api.getWorld(this.state._id).then(res => {\r\n      this.props.setAttributes(res.attributes);\r\n      this.props.setTypes(res.types);\r\n      this.props.setThings(res.things);\r\n      \r\n      if (this.props.allUsers.length === 0) {\r\n        this.api.getAllUsers().then(res => {\r\n          this.props.setAllUsers(res);\r\n          this.setState({\r\n            // allUsers: res, \r\n            loaded: true}, \r\n            this.actuallyFinishLoading);\r\n        });\r\n      } else {\r\n        // this.api.getAllUsers().then(res => {\r\n        this.setState({\r\n          // allUsers: res, \r\n          loaded: true}, \r\n          this.actuallyFinishLoading);\r\n        // });\r\n      }\r\n    });\r\n  }\r\n\r\n  actuallyFinishLoading = () => {\r\n    let world = this.props.worlds.filter(w => w._id === this.state._id);\r\n    if (world.length > 0) {\r\n      world = world[0];\r\n      this.setState({\r\n        Name: world.Name,\r\n        Public: world.Public,\r\n        AcceptingCollaborators: world.AcceptingCollaborators === undefined || world.AcceptingCollaborators === null ? false : world.AcceptingCollaborators,\r\n        Collaborators: world.Collaborators === undefined ? [] : world.Collaborators\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    let { id } = this.props.match.params;\r\n    if (id === undefined)\r\n      id = null;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading...</span>);\r\n    } else if (!this.state.loaded) {\r\n      return (<span>Loading...</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.props.selectedWorld !== null && \r\n      this.props.selectedWorld.Owner !== this.props.user._id) {\r\n      return <Redirect to=\"/\" />;\r\n    } else {\r\n      const collabs = this.state.Collaborators.filter(c=>c.type===\"collab\");\r\n      const invites = this.state.Collaborators.filter(c=>c.type===\"invite\");\r\n      const requests = this.state.Collaborators.filter(c=>c.type===\"request\");\r\n      const selectUsers = this.props.allUsers.filter(u=>u._id !== this.props.selectedWorld.Owner && this.state.Collaborators.filter(c=>c.userID === u._id).length === 0);\r\n      const userMenuItems = selectUsers.map((u, i) => {\r\n        return (\r\n          <MenuItem key={i} value={u}>\r\n            {u.username}\r\n          </MenuItem>\r\n        );\r\n      });\r\n      return (\r\n        <Grid item xs={12} container spacing={1} direction=\"column\">\r\n          <Helmet>\r\n            <title>{ this.state._id === null ? `Author's Notebook: Create New World` : `Author's Notebook: Edit ${this.props.selectedWorld.Name} Collaborators` }</title>\r\n          </Helmet>\r\n          <Grid item container spacing={1} direction=\"row\">\r\n            <Grid item xs={1}>\r\n              <Tooltip title={`Back to ${this.props.selectedWorld.Name} Details`}>\r\n                <Fab size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                >\r\n                  <ArrowBack />\r\n                </Fab>\r\n              </Tooltip>\r\n            </Grid>\r\n            <Grid item xs={11}>\r\n              <h2>Edit Collaborators</h2>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <ListItem style={{maxWidth: \"200px\"}}>\r\n              <ListItemText primary=\"Collaborators\" />\r\n              { this.state.newCollaborators ?\r\n                <Tooltip title={`Manage Existing Collaborators`}>\r\n                  <Fab\r\n                    size=\"small\"\r\n                    color=\"primary\"\r\n                    onClick={_ => {\r\n                      this.setState({ newCollaborators: false });\r\n                    }}\r\n                  >\r\n                    <ArrowBack />\r\n                  </Fab>\r\n                </Tooltip>  :\r\n                <Tooltip title={`Add New Collaborators`}>\r\n                  <Fab\r\n                    size=\"small\"\r\n                    color=\"primary\"\r\n                    onClick={_ => {\r\n                      this.setState({ newCollaborators: true });\r\n                    }}\r\n                  >\r\n                    <Add />\r\n                  </Fab>\r\n                </Tooltip> \r\n              }\r\n            </ListItem>\r\n          </Grid>\r\n          { this.state.newCollaborators ?\r\n            <Grid item container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                <AppBar position=\"static\">\r\n                  <Tabs value={this.state.newCollabTab} onChange={(_, newValue) => { this.setState({newCollabTab: newValue, inviteMessage: \"\"})}} aria-label=\"Add Collaborator Method\">\r\n                    <Tab label=\"Find Existing User\" {...this.a11yProps(0)} />\r\n                    <Tab label=\"Invite via Email\" {...this.a11yProps(1)} />\r\n                    <Tab label=\"Get an Invite Link\" {...this.a11yProps(2)} />\r\n                  </Tabs>\r\n                </AppBar>\r\n                <TabPanel value={this.state.newCollabTab} index={0}>\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      <FormControl variant=\"outlined\" fullWidth>\r\n                        <InputLabel htmlFor=\"user-select\" id=\"user-select-label\">\r\n                          Select a User\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"user-select-label\"\r\n                          id=\"user-select\"\r\n                          value={this.state.selectedUser}\r\n                          onChange={e => {\r\n                            this.setState({selectedUser: e.target.value, inviteMessage: \"\" })\r\n                          }}\r\n                          labelWidth={90}\r\n                        >\r\n                          {userMenuItems}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={this.state.selectedUser === \"\" || this.state.waiting}\r\n                        onClick={this.addNewCollaborator}\r\n                      >\r\n                        Send Invite\r\n                      </Button> \r\n                      { this.state.inviteMessage }\r\n                    </Grid>\r\n                  </Grid>\r\n                </TabPanel>\r\n                <TabPanel value={this.state.newCollabTab} index={1}>\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      <FormControl variant=\"outlined\" fullWidth>\r\n                        <InputLabel htmlFor=\"inviteEmail\">Collaborator Email</InputLabel>\r\n                        <OutlinedInput\r\n                          id=\"inviteEmail\"\r\n                          name=\"inviteEmail\"\r\n                          type=\"email\"\r\n                          autoComplete=\"Off\"\r\n                          error={!this.state.fieldValidation.inviteEmail.valid}\r\n                          value={this.state.inviteEmail}\r\n                          onChange={this.handleUserInput}\r\n                          onBlur={this.inputBlur}\r\n                          labelWidth={140}\r\n                          fullWidth\r\n                        />\r\n                        <FormHelperText>\r\n                          {this.state.fieldValidation.inviteEmail.message}\r\n                        </FormHelperText>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={this.state.waiting}\r\n                        onClick={this.emailCollaborator}\r\n                      >\r\n                        Send Invite\r\n                      </Button> \r\n                      { this.state.inviteMessage }\r\n                    </Grid>\r\n                  </Grid>\r\n                </TabPanel>\r\n                <TabPanel value={this.state.newCollabTab} index={2}>\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      Generate a single use link to send someone yourself\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={this.state.waiting}\r\n                        onClick={this.generateCollabLink}\r\n                      >\r\n                        Generate Link\r\n                      </Button> \r\n                    </Grid>\r\n                      { this.state.collabLink !== null && \r\n                        <Grid item>\r\n                          <OutlinedInput\r\n                            id=\"generatedLink\"\r\n                            name=\"generatedLink\"\r\n                            ref={(input) => this.generatedLink = input}\r\n                            type=\"text\"\r\n                            multiline={true}\r\n                            value={this.state.collabLink}\r\n                            // disabled={true}\r\n                            endAdornment={\r\n                              <InputAdornment position=\"end\">\r\n                                <IconButton\r\n                                  aria-label=\"copy to clipboard\"\r\n                                  onClick={this.copyCollabLink}\r\n                                  edge=\"end\"\r\n                                >\r\n                                  <FileCopyOutlined />\r\n                                </IconButton>\r\n                              </InputAdornment>\r\n                            }\r\n                            labelWidth={70}\r\n                            fullWidth\r\n                          />\r\n                          { this.state.collabLinkCopied && \r\n                            <span style={{fontColor: \"red\"}}>\r\n                              Link Copied to Clipboard\r\n                            </span>\r\n                          }\r\n                        </Grid>\r\n                      }\r\n                  </Grid>\r\n                  \r\n                </TabPanel>\r\n              </Grid>\r\n            </Grid> :\r\n            <Grid item container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                <AppBar position=\"static\">\r\n                  <Tabs value={this.state.collabTab} onChange={(_, newValue) => { this.setState({collabTab: newValue})}} aria-label=\"Collaborators\">\r\n                    <Tab label={`Collaborators (${collabs.length})`} {...this.a11yProps(0)} />\r\n                    <Tab label={`Invites (${invites.length})`} {...this.a11yProps(1)} />\r\n                    <Tab label={`Requests (${requests.length})`} {...this.a11yProps(2)} />\r\n                  </Tabs>\r\n                </AppBar>\r\n                <TabPanel value={this.state.collabTab} index={0}>\r\n                  <Grid container spacing={3} direction=\"column\">\r\n                    { collabs.map((c, key) => {\r\n                      return (\r\n                        <Grid item container spacing={1} direcion=\"row\" key={key}>\r\n                          <Grid item xs={12} sm={3}>\r\n                            {this.props.allUsers.filter(u=>u._id === c.userID)[0].username}\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={6}>\r\n                            <FormControlLabel\r\n                              control={\r\n                                <Checkbox \r\n                                  checked={c.editPermission} \r\n                                  disabled={this.state.waiting}\r\n                                  onChange={e => {\r\n                                    this.updateCollaboratorPermission(c, e.target.checked);\r\n                                  }}\r\n                                  color=\"primary\" />\r\n                              }\r\n                              label=\"Full Permissions\"\r\n                            />\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={3}>\r\n                            <Tooltip title={`Remove Collaborator`}>\r\n                              <Fab size=\"small\"\r\n                                color=\"primary\"\r\n                                disabled={this.state.waiting}\r\n                                onClick={e => {this.deleteCollab(c)}}\r\n                              >\r\n                                <Delete />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                        </Grid>\r\n                      );\r\n                    })}\r\n                  </Grid>\r\n                </TabPanel>\r\n                <TabPanel value={this.state.collabTab} index={1}>\r\n                  <Grid container spacing={3} direction=\"column\">\r\n                    { invites.map((c, key) => {\r\n                      let user = this.props.allUsers.filter(u=>u._id === c.userID);\r\n                      if (user.length === 0)\r\n                        user = null;\r\n                      else {\r\n                        user = user[0];\r\n                      }\r\n                      return (\r\n                        <Grid item container spacing={1} direction=\"row\" key={key}>\r\n                          <Grid item xs={12} sm={9} container spacing={1} direction=\"column\">\r\n                            { user !== null &&\r\n                              <Grid item>\r\n                                Username: {user.username}\r\n                              </Grid>\r\n                            }\r\n                            { c.email !== \"\" &&\r\n                              <Grid item>\r\n                                Email: {c.email}\r\n                              </Grid>\r\n                            }\r\n                            <Grid item>\r\n                              Invite Link: {c.collabLink}\r\n                            </Grid>\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={3}>\r\n                            <Tooltip title={`Delete Invite`}>\r\n                              <Fab size=\"small\"\r\n                                color=\"primary\"\r\n                                disabled={this.state.waiting}\r\n                                onClick={e => {this.deleteCollab(c)}}\r\n                              >\r\n                                <Delete />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                        </Grid>  \r\n                      );\r\n                    })}\r\n                  </Grid>\r\n                </TabPanel>\r\n                <TabPanel value={this.state.collabTab} index={2}>\r\n                  <Grid container spacing={3} direction=\"column\">\r\n                    { requests.map((c, key) => {\r\n                      return (\r\n                        <Grid item container spacing={1} direcion=\"row\" key={key}>\r\n                          <Grid item xs={12} sm={6}>\r\n                            {this.props.allUsers.filter(u=>u._id === c.userID)[0].username}\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={3}>\r\n                            <Tooltip title={`Accept Request`}>\r\n                              <Fab size=\"small\"\r\n                                color=\"primary\"\r\n                                disabled={this.state.waiting}\r\n                                onClick={_ => {this.acceptCollab(c)}}\r\n                              >\r\n                                <Check />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={3}>\r\n                            <Tooltip title={`Delete Request`}>\r\n                              <Fab size=\"small\"\r\n                                color=\"primary\"\r\n                                disabled={this.state.waiting}\r\n                                onClick={_ => {this.deleteCollab(c)}}\r\n                              >\r\n                                <Delete />\r\n                              </Fab>\r\n                            </Tooltip>\r\n                          </Grid>\r\n                        </Grid>\r\n                      );\r\n                    })}\r\n                  </Grid>\r\n                </TabPanel>\r\n              </Grid>\r\n            </Grid>\r\n          }\r\n          <Grid item>{this.state.message}</Grid>\r\n          <Grid item>\r\n            {Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n              if (\r\n                this.state.fieldValidation[fieldName] !== undefined &&\r\n                this.state.fieldValidation[fieldName].message.length > 0\r\n              ) {\r\n                return (\r\n                  <p className=\"redFont\" key={i}>\r\n                    {this.state.fieldValidation[fieldName].message}\r\n                  </p>\r\n                );\r\n              } else {\r\n                return \"\";\r\n              }\r\n            })}\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst EditCollaboratorPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default EditCollaboratorPage;","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  updateSelectedType,\r\n  addType,\r\n  updateType,\r\n  setTypes,\r\n  setAttributes,\r\n  setThings,\r\n  setAllUsers,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  logout,\r\n  selectWorld\r\n} from \"../../redux/actions/index\";\r\nimport { Edit, Delete, Add, ArrowBack } from \"@material-ui/icons\";\r\nimport {\r\n  Fab,\r\n  Modal,\r\n  Grid,\r\n  Button,\r\n  Tooltip,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n} from \"@material-ui/core\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport API from \"../../smartAPI\";\r\nimport CommentsControl from \"../../components/Inputs/CommentsControl\";\r\nimport UnderConstruction from \"../../assets/img/under_construction.png\";\r\n// import ReactQuill from '../../components/Inputs/ReactQuill';\r\n// import '../../assets/css/quill.read-only.css';\r\n\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a Type.  It will allow the use of Super Types \r\n  to make the process faster.\r\n*/\r\n\r\nconst mapStateToProps = (state) => {\r\n  const type = state.app.selectedType;\r\n  const subTypes =\r\n    type === null\r\n      ? []\r\n      : state.app.types.filter((t) => t.SuperIDs.includes(type._id));\r\n  const things =\r\n    type === null\r\n      ? []\r\n      : state.app.things.filter((t) => t.TypeIDs.includes(type._id));\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedType: type,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    types: state.app.types,\r\n    subTypes: subTypes,\r\n    instances: things,\r\n    user: state.app.user,\r\n    things: state.app.things,\r\n    attributesByID: state.app.attributesByID,\r\n    attributesByName: state.app.attributesByName,\r\n    fromLogin: state.app.fromLogin,\r\n    allUsers: state.app.allUsers,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedType: (type) => dispatch(updateSelectedType(type)),\r\n    addType: (type) => dispatch(addType(type)),\r\n    updateType: (type) => dispatch(updateType(type)),\r\n    setTypes: (types) => dispatch(setTypes(types)),\r\n    setAttributes: (attributes) => dispatch(setAttributes(attributes)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    setThings: (things) => dispatch(setThings(things)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    selectWorld: worldID => dispatch(selectWorld(worldID))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      _id: null,\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" },\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      modalOpen: false,\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n    // load();\r\n  }\r\n\r\n  getModalStyle = () => {\r\n    const top = Math.round(window.innerHeight / 2) - 50;\r\n    const left = Math.round(window.innerWidth / 2) - 200;\r\n\r\n    return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(${left}px, ${top}px)`,\r\n    };\r\n  };\r\n\r\n  delete = (e) => {\r\n    this.api\r\n      .deleteType(this.props.selectedWorldID, this.state._id)\r\n      .then((res) => {\r\n        if (res.error === undefined) {\r\n          this.api.getWorld(this.props.selectedWorldID, true).then((res2) => {\r\n            this.props.setAttributes(res2.attributes);\r\n            this.props.setTypes(res2.types);\r\n            this.props.setThings(res2.things);\r\n\r\n            this.setState({\r\n              redirectTo: `/project/details/${this.props.selectedWorldID}`,\r\n            });\r\n          });\r\n          // this.getWorld().then(res2 => {\r\n          //   this.setState({redirectTo: `/project/details/${this.props.selectedWorldID}`});\r\n          // });\r\n        } else {\r\n          this.setState({ waiting: false, message: res.error }, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  load = (id) => {\r\n    // const { id } = this.props.match.params;\r\n    setTimeout(() => {\r\n      this.setState(\r\n        {\r\n          _id: id,\r\n          redirectTo: null,\r\n          loaded: false\r\n        },\r\n        this.finishLoading\r\n      );\r\n    }, 500);\r\n  };\r\n\r\n  finishLoading = () => {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    const id = this.state._id;\r\n    if (id !== undefined) {\r\n      if (this.props.selectedWorldID) {\r\n        this.api.getWorld(this.props.selectedWorldID).then((res) => {\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n\r\n          if (id !== null) {\r\n            let type = res.types.filter((t) => t._id === id);\r\n            if (type.length > 0) {\r\n              type = type[0];\r\n\r\n              if (this.props.user !== null && this.props.user !== undefined) {\r\n                this.api.upsertView({ \r\n                  userID: this.props.user._id, \r\n                  worldID: this.props.selectedWorldID, \r\n                  objectType: \"Type\",\r\n                  objectID: type._id\r\n                });\r\n              }\r\n\r\n              this.props.updateSelectedType(type);\r\n              this.setState({ loaded: true });\r\n            } else {\r\n              this.setState({ message: \"Invalid ID\", loaded: true });\r\n            }\r\n          } else {\r\n            this.props.updateSelectedType({\r\n              _id: null,\r\n              Name: \"\",\r\n              Description: \"\",\r\n              Supers: [],\r\n              SuperIDs: [],\r\n              AttributesArr: [],\r\n              Attributes: [],\r\n              Major: false,\r\n              NeedsWork: false,\r\n              DefaultsHash: {},\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.api.getWorldByTypeID(id).then((res) => {\r\n          this.props.selectWorld(res.worldID);\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n\r\n          if (id !== null) {\r\n            let type = res.types.filter((t) => t._id === id);\r\n            if (type.length > 0) {\r\n              type = type[0];\r\n\r\n              this.props.updateSelectedType(type);\r\n              this.setState({ loaded: true });\r\n            } else {\r\n              this.setState({ message: \"Invalid ID\", loaded: true });\r\n            }\r\n          } else {\r\n            this.props.updateSelectedType({\r\n              _id: null,\r\n              Name: \"\",\r\n              Description: \"\",\r\n              Supers: [],\r\n              SuperIDs: [],\r\n              AttributesArr: [],\r\n              Attributes: [],\r\n              Major: false,\r\n              NeedsWork: false,\r\n              DefaultsHash: {},\r\n            });\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      this.props.updateSelectedType({\r\n        _id: null,\r\n        Name: \"\",\r\n        Description: \"\",\r\n        Supers: [],\r\n        AttributesArr: [],\r\n        Attributes: [],\r\n        Major: false,\r\n        NeedsWork: false\r\n      });\r\n    }\r\n  };\r\n\r\n  redirectToNext = () => {\r\n    // Find the next type\r\n    let index = 0;\r\n    while (this.props.types[index]._id !== this.props.selectedType._id) index++;\r\n    index++;\r\n    if (index === this.props.types.length) index = 0;\r\n    this.setState({\r\n      redirectTo: `/type/details/${this.props.types[index]._id}`,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { id } = this.props.match.params;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading</span>);\r\n    } else if (!this.state.loaded) {\r\n      return (<span>Loading</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (\r\n      this.props.selectedWorld !== null &&\r\n      !this.props.selectedWorld.Public &&\r\n      this.props.user === null\r\n    ) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (\r\n      this.props.selectedWorld !== null &&\r\n      !this.props.selectedWorld.Public &&\r\n      this.props.selectedWorld.Owner !== this.props.user._id &&\r\n      this.props.selectedWorld.Collaborators.filter(\r\n        (c) => c.userID === this.props.user._id && c.type === \"collab\"\r\n      ).length === 0\r\n    ) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (\r\n      this.props.selectedType === undefined ||\r\n      this.props.selectedType === null\r\n    ) {\r\n      return <span>Loading</span>;\r\n    // } else if (this.props.allUsers.length === 0) {\r\n    //   setTimeout(() => {\r\n    //     this.api.getAllUsers().then(res => {\r\n    //       this.props.setAllUsers(res);\r\n    //     });\r\n    //   }, 500);\r\n    //   return (<span>Loading</span>);\r\n    } else {\r\n      const references = this.props.types.filter(\r\n        (t) =>\r\n          t.ReferenceIDs !== undefined &&\r\n          t.ReferenceIDs.includes(this.state._id)\r\n      );\r\n      const inheritedAttributes = [];\r\n      this.props.selectedType.Supers.forEach((superType) => {\r\n        superType.AttributesArr.forEach((attribute) => {\r\n          if (\r\n            inheritedAttributes.filter((a) => a.attrID === attribute.attrID)\r\n              .length === 0\r\n          ) {\r\n            inheritedAttributes.push(attribute);\r\n          }\r\n        });\r\n      });\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      return (\r\n        <Grid item xs={12} container spacing={0} direction=\"column\">\r\n          {this.props.selectedWorld !== null && \r\n            <div>\r\n              <Helmet>\r\n                <title>{`Author's Notebook: ${this.props.selectedWorld.Name}`}</title>\r\n              </Helmet>\r\n              <Grid item container spacing={0} direction=\"row\">\r\n                <Grid item xs={12} sm={8} container spacing={0} direction=\"column\">\r\n                  <Grid item container spacing={0} direction=\"row\">\r\n                    <Grid item xs={1}>\r\n                      <Tooltip\r\n                        title={`Back to ${this.props.selectedWorld.Name}`}\r\n                      >\r\n                        <Fab\r\n                          size=\"small\"\r\n                          color=\"primary\"\r\n                          onClick={(_) => {\r\n                            this.setState({\r\n                              redirectTo: `/project/details/${this.props.selectedWorldID}`,\r\n                            });\r\n                          }}\r\n                        >\r\n                          <ArrowBack />\r\n                        </Fab>\r\n                      </Tooltip>\r\n                    </Grid>\r\n                    <Grid item xs={11}>\r\n                      <h2>{this.props.selectedType.Name}</h2>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <h3>\r\n                      { this.props.selectedType.NeedsWork && \r\n                      <span>\r\n                        <img style={{ height: \"50px\" }} src={UnderConstruction} alt=\"Needs Work\" /> Needs Work\r\n                      </span> \r\n                      }\r\n                    </h3>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <h3>{this.props.selectedType.Major && \"Major Type\" }</h3>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <div  dangerouslySetInnerHTML={{__html: this.props.selectedType.Description}} />\r\n                    {/* {this.props.selectedType.Description} */}\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <List>\r\n                    {this.props.user !== null &&\r\n                      this.props.selectedWorld !== null &&\r\n                      (this.props.selectedWorld.Owner === this.props.user._id ||\r\n                        this.props.selectedWorld.Collaborators.filter(\r\n                          (c) =>\r\n                            c.userID === this.props.user._id &&\r\n                            c.type === \"collab\" &&\r\n                            c.editPermission\r\n                        ).length > 0) && (\r\n                        <ListItem>\r\n                          <Grid container spacing={1} direction=\"row\">\r\n                            <Grid item xs={4} sm={12}>\r\n                              <Tooltip title={`Create New ${this.props.selectedType.Name}`}>\r\n                                <Fab\r\n                                  size=\"small\" color=\"primary\"\r\n                                  onClick={(_) => {\r\n                                    this.setState({\r\n                                      redirectTo: `/thing/create/type_id_${this.state._id}`,\r\n                                    });\r\n                                  }}>\r\n                                  <Add />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            <Grid item xs={4} sm={12}>\r\n                              <Tooltip title={`Edit ${this.props.selectedType.Name}`}>\r\n                                <Fab\r\n                                  size=\"small\" color=\"primary\"\r\n                                  onClick={(_) => {\r\n                                    this.setState({\r\n                                      redirectTo: `/type/edit/${this.state._id}`,\r\n                                    });\r\n                                  }}>\r\n                                  <Edit />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            <Grid item xs={4} sm={12}>\r\n                              <Tooltip title={`Delete ${this.props.selectedType.Name}`}>\r\n                                <Fab\r\n                                  size=\"small\" color=\"primary\"\r\n                                  onClick={(e) => {\r\n                                    this.setState({ modalOpen: true });\r\n                                  }}>\r\n                                  <Delete />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                          </Grid>\r\n                        </ListItem>\r\n                      )}\r\n                    <ListItem>\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={(_) => {\r\n                          this.redirectToNext();\r\n                        }}\r\n                      >\r\n                        <ListItemText primary=\"Next Type\" />\r\n                      </Button>\r\n                    </ListItem>\r\n                  </List>\r\n                </Grid>\r\n              </Grid>\r\n              <Grid item container spacing={0} direction=\"row\">\r\n                <Grid item xs={12} sm={8} container spacing={0} direction=\"column\">\r\n                  <Grid item>Attributes</Grid>\r\n                  <Grid item>\r\n                    <List>\r\n                      {this.props.selectedType !== null &&\r\n                        this.props.selectedType !== undefined &&\r\n                        inheritedAttributes.map((attribute, i) => {\r\n                          let definedType = this.props.types.filter(\r\n                            (t) => t._id === attribute.DefinedType\r\n                          );\r\n                          definedType =\r\n                            definedType.length === 0\r\n                              ? { Name: \"\" }\r\n                              : definedType[0];\r\n                          const def = this.props.selectedType.DefaultsHash[\r\n                            attribute.attrID\r\n                          ];\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <ListItemText>\r\n                                {attribute.Name}:&nbsp;\r\n                                {attribute.AttributeType === \"Options\" ? (\r\n                                  <span>\r\n                                    Options:\r\n                                    {attribute.Options.map((option, j) => {\r\n                                      return (\r\n                                        <span key={j}>\r\n                                          {j === 0 ? \" \" : \", \"}\r\n                                          {option}\r\n                                        </span>\r\n                                      );\r\n                                    })}\r\n                                    {def !== undefined &&\r\n                                      def.DefaultValue !== undefined &&\r\n                                      def.DefaultValue !== \"\" &&\r\n                                      ` (Default: ${def.DefaultValue})`}\r\n                                  </span>\r\n                                ) : attribute.AttributeType === \"Type\" ? (\r\n                                  <span>\r\n                                    <Button\r\n                                      variant=\"contained\"\r\n                                      color=\"primary\"\r\n                                      onClick={(_) => {\r\n                                        this.setState({\r\n                                          redirectTo: `/type/details/${attribute.DefinedType}`,\r\n                                        });\r\n                                      }}\r\n                                    >\r\n                                      <ListItemText\r\n                                        primary={definedType.Name}\r\n                                      />\r\n                                    </Button>\r\n                                    {def !== undefined &&\r\n                                      def.DefaultValue !== undefined &&\r\n                                      def.DefaultValue !== \"\" &&\r\n                                      this.props.things.filter(\r\n                                        (t) => def.DefaultValue === t._id\r\n                                      ).length > 0 &&\r\n                                      ` (Default: ${\r\n                                        this.props.things.filter(\r\n                                          (t) => t._id === def.DefaultValue\r\n                                        )[0].Name\r\n                                      })`}\r\n                                  </span>\r\n                                ) : attribute.AttributeType === \"List\" ? (\r\n                                  <span>\r\n                                    List:&nbsp;\r\n                                    {attribute.ListType === \"Options\" ? (\r\n                                      <span>\r\n                                        Options:\r\n                                        {attribute.Options.map(\r\n                                          (option, j) => {\r\n                                            return (\r\n                                              <span key={j}>\r\n                                                {j === 0 ? \" \" : \", \"}\r\n                                                {option}\r\n                                              </span>\r\n                                            );\r\n                                          }\r\n                                        )}\r\n                                        {def !== undefined &&\r\n                                          def.DefaultListValues !==\r\n                                            undefined &&\r\n                                          def.DefaultListValues.length >\r\n                                            0 && (\r\n                                            <span>\r\n                                              &nbsp;(Defaults:\r\n                                              {def.DefaultListValues.map(\r\n                                                (defaultValue, j) => {\r\n                                                  return (\r\n                                                    <span key={j}>\r\n                                                      {j === 0 ? \" \" : \", \"}\r\n                                                      {defaultValue}\r\n                                                    </span>\r\n                                                  );\r\n                                                }\r\n                                              )}\r\n                                              )\r\n                                            </span>\r\n                                          )}\r\n                                      </span>\r\n                                    ) : attribute.ListType === \"Type\" ? (\r\n                                      <span>\r\n                                        <Button\r\n                                          variant=\"contained\"\r\n                                          color=\"primary\"\r\n                                          onClick={(_) => {\r\n                                            this.setState({\r\n                                              redirectTo: `/type/details/${attribute.DefinedType}`,\r\n                                            });\r\n                                          }}\r\n                                        >\r\n                                          <ListItemText\r\n                                            primary={definedType.Name}\r\n                                          />\r\n                                        </Button>\r\n                                        {def !== undefined &&\r\n                                          def.DefaultListValues !==\r\n                                            undefined &&\r\n                                          def.DefaultListValues.length > 0 &&\r\n                                          this.props.things.filter((t) =>\r\n                                            def.DefaultListValues.includes(\r\n                                              t._id\r\n                                            )\r\n                                          ).length > 0 && (\r\n                                            <span>\r\n                                              &nbsp;(Defaults:\r\n                                              {def.DefaultListValues.map(\r\n                                                (defaultValue, j) => {\r\n                                                  let defaultThing = this.props.things.filter(\r\n                                                    (t) =>\r\n                                                      t._id === defaultValue\r\n                                                  );\r\n                                                  if (\r\n                                                    defaultThing.length === 0\r\n                                                  )\r\n                                                    return (\r\n                                                      <span key={j}></span>\r\n                                                    );\r\n                                                  else {\r\n                                                    defaultThing =\r\n                                                      defaultThing[0];\r\n                                                    return (\r\n                                                      <span key={j}>\r\n                                                        {j === 0 ? \" \" : \", \"}\r\n                                                        <Button\r\n                                                          variant=\"contained\"\r\n                                                          color=\"primary\"\r\n                                                          onClick={(_) => {\r\n                                                            this.setState({\r\n                                                              redirectTo: `/thing/details/${defaultValue}`,\r\n                                                            });\r\n                                                          }}\r\n                                                        >\r\n                                                          <ListItemText\r\n                                                            primary={\r\n                                                              defaultThing.Name\r\n                                                            }\r\n                                                          />\r\n                                                        </Button>\r\n                                                      </span>\r\n                                                    );\r\n                                                  }\r\n                                                }\r\n                                              )}\r\n                                              )\r\n                                            </span>\r\n                                          )}\r\n                                      </span>\r\n                                    ) : (\r\n                                      <span>\r\n                                        {attribute.ListType}\r\n                                        {def !== undefined &&\r\n                                          def.DefaultListValues !==\r\n                                            undefined &&\r\n                                          def.DefaultListValues.length >\r\n                                            0 && (\r\n                                            <span>\r\n                                              &nbsp;(Defaults:\r\n                                              {def.DefaultListValues.map(\r\n                                                (defaultValue, j) => {\r\n                                                  return (\r\n                                                    <span key={j}>\r\n                                                      {j === 0 ? \" \" : \", \"}\r\n                                                      {defaultValue}\r\n                                                    </span>\r\n                                                  );\r\n                                                }\r\n                                              )}\r\n                                              )\r\n                                            </span>\r\n                                          )}\r\n                                      </span>\r\n                                    )}\r\n                                  </span>\r\n                                ) : attribute.AttributeType ===\r\n                                  \"True/False\" ? (\r\n                                  <span>\r\n                                    {attribute.AttributeType}\r\n                                    {def !== undefined &&\r\n                                    def.DefaultValue !== undefined &&\r\n                                    def.DefaultValue !== \"\"\r\n                                      ? ` (Default: ${def.DefaultValue})`\r\n                                      : \" (Default: False)\"}\r\n                                  </span>\r\n                                ) : (\r\n                                  <span>\r\n                                    {attribute.AttributeType}\r\n                                    {def !== undefined &&\r\n                                      def.DefaultValue !== undefined &&\r\n                                      def.DefaultValue !== \"\" &&\r\n                                      ` (Default: ${def.DefaultValue})`}\r\n                                  </span>\r\n                                )}\r\n                              </ListItemText>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      {this.props.selectedType !== null &&\r\n                        this.props.selectedType !== undefined &&\r\n                        this.props.selectedType.AttributesArr.map(\r\n                          (attribute, i) => {\r\n                            let definedType = this.props.types.filter(\r\n                              (t) => t._id === attribute.DefinedType\r\n                            );\r\n                            definedType =\r\n                              definedType.length === 0\r\n                                ? { Name: \"\" }\r\n                                : definedType[0];\r\n                            const def = this.props.selectedType.DefaultsHash[\r\n                              attribute.attrID\r\n                            ];\r\n                            return (\r\n                              <ListItem key={i}>\r\n                                <ListItemText>\r\n                                  {attribute.Name}:&nbsp;\r\n                                  {attribute.AttributeType === \"Options\" ? (\r\n                                    <span>\r\n                                      Options:\r\n                                      {attribute.Options.map((option, j) => {\r\n                                        return (\r\n                                          <span key={j}>\r\n                                            {j === 0 ? \" \" : \", \"}\r\n                                            {option}\r\n                                          </span>\r\n                                        );\r\n                                      })}\r\n                                      {def !== undefined &&\r\n                                        def.DefaultValue !== undefined &&\r\n                                        def.DefaultValue !== \"\" &&\r\n                                        ` (Default: ${def.DefaultValue})`}\r\n                                    </span>\r\n                                  ) : attribute.AttributeType === \"Type\" ? (\r\n                                    <span>\r\n                                      <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        onClick={(_) => {\r\n                                          this.setState({\r\n                                            redirectTo: `/type/details/${attribute.DefinedType}`,\r\n                                          });\r\n                                        }}\r\n                                      >\r\n                                        <ListItemText\r\n                                          primary={definedType.Name}\r\n                                        />\r\n                                      </Button>\r\n                                      {def !== undefined &&\r\n                                        def.DefaultValue !== undefined &&\r\n                                        def.DefaultValue !== \"\" &&\r\n                                        this.props.things.filter(\r\n                                          (t) => def.DefaultValue === t._id\r\n                                        ).length > 0 &&\r\n                                        ` (Default: ${\r\n                                          this.props.things.filter(\r\n                                            (t) => t._id === def.DefaultValue\r\n                                          )[0].Name\r\n                                        })`}\r\n                                    </span>\r\n                                  ) : attribute.AttributeType === \"List\" ? (\r\n                                    <span>\r\n                                      List:&nbsp;\r\n                                      {attribute.ListType === \"Options\" ? (\r\n                                        <span>\r\n                                          Options:\r\n                                          {attribute.Options.map(\r\n                                            (option, j) => {\r\n                                              return (\r\n                                                <span key={j}>\r\n                                                  {j === 0 ? \" \" : \", \"}\r\n                                                  {option}\r\n                                                </span>\r\n                                              );\r\n                                            }\r\n                                          )}\r\n                                          {def !== undefined &&\r\n                                            def.DefaultListValues !==\r\n                                              undefined &&\r\n                                            def.DefaultListValues.length >\r\n                                              0 && (\r\n                                              <span>\r\n                                                &nbsp;(Defaults:\r\n                                                {def.DefaultListValues.map(\r\n                                                  (defaultValue, j) => {\r\n                                                    return (\r\n                                                      <span key={j}>\r\n                                                        {j === 0 ? \" \" : \", \"}\r\n                                                        {defaultValue}\r\n                                                      </span>\r\n                                                    );\r\n                                                  }\r\n                                                )}\r\n                                                )\r\n                                              </span>\r\n                                            )}\r\n                                        </span>\r\n                                      ) : attribute.ListType === \"Type\" ? (\r\n                                        <span>\r\n                                          <Button\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            onClick={(_) => {\r\n                                              this.setState({\r\n                                                redirectTo: `/type/details/${attribute.DefinedType}`,\r\n                                              });\r\n                                            }}\r\n                                          >\r\n                                            <ListItemText\r\n                                              primary={definedType.Name}\r\n                                            />\r\n                                          </Button>\r\n                                          {def !== undefined &&\r\n                                            def.DefaultListValues !==\r\n                                              undefined &&\r\n                                            def.DefaultListValues.length >\r\n                                              0 &&\r\n                                            this.props.things.filter((t) =>\r\n                                              def.DefaultListValues.includes(\r\n                                                t._id\r\n                                              )\r\n                                            ).length > 0 && (\r\n                                              <span>\r\n                                                &nbsp;(Defaults:\r\n                                                {def.DefaultListValues.map(\r\n                                                  (defaultValue, j) => {\r\n                                                    let defaultThing = this.props.things.filter(\r\n                                                      (t) =>\r\n                                                        t._id === defaultValue\r\n                                                    );\r\n                                                    if (\r\n                                                      defaultThing.length ===\r\n                                                      0\r\n                                                    )\r\n                                                      return (\r\n                                                        <span key={j}></span>\r\n                                                      );\r\n                                                    else {\r\n                                                      defaultThing =\r\n                                                        defaultThing[0];\r\n                                                      return (\r\n                                                        <span key={j}>\r\n                                                          {j === 0\r\n                                                            ? \" \"\r\n                                                            : \", \"}\r\n                                                          <Button\r\n                                                            variant=\"contained\"\r\n                                                            color=\"primary\"\r\n                                                            onClick={(_) => {\r\n                                                              this.setState({\r\n                                                                redirectTo: `/thing/details/${defaultValue}`,\r\n                                                              });\r\n                                                            }}\r\n                                                          >\r\n                                                            <ListItemText\r\n                                                              primary={\r\n                                                                defaultThing.Name\r\n                                                              }\r\n                                                            />\r\n                                                          </Button>\r\n                                                        </span>\r\n                                                      );\r\n                                                    }\r\n                                                  }\r\n                                                )}\r\n                                                )\r\n                                              </span>\r\n                                            )}\r\n                                        </span>\r\n                                      ) : (\r\n                                        <span>\r\n                                          {attribute.ListType}\r\n                                          {def !== undefined &&\r\n                                            def.DefaultListValues !==\r\n                                              undefined &&\r\n                                            def.DefaultListValues.length >\r\n                                              0 && (\r\n                                              <span>\r\n                                                &nbsp;(Defaults:\r\n                                                {def.DefaultListValues.map(\r\n                                                  (defaultValue, j) => {\r\n                                                    return (\r\n                                                      <span key={j}>\r\n                                                        {j === 0 ? \" \" : \", \"}\r\n                                                        {defaultValue}\r\n                                                      </span>\r\n                                                    );\r\n                                                  }\r\n                                                )}\r\n                                                )\r\n                                              </span>\r\n                                            )}\r\n                                        </span>\r\n                                      )}\r\n                                    </span>\r\n                                  ) : attribute.AttributeType ===\r\n                                    \"True/False\" ? (\r\n                                    <span>\r\n                                      {attribute.AttributeType}\r\n                                      {def !== undefined &&\r\n                                      def.DefaultValue !== undefined &&\r\n                                      def.DefaultValue !== \"\"\r\n                                        ? ` (Default: ${def.DefaultValue})`\r\n                                        : \" (Default: False)\"}\r\n                                    </span>\r\n                                  ) : (\r\n                                    <span>\r\n                                      {attribute.AttributeType}\r\n                                      {def !== undefined &&\r\n                                        def.DefaultValue !== undefined &&\r\n                                        def.DefaultValue !== \"\" &&\r\n                                        ` (Default: ${def.DefaultValue})`}\r\n                                    </span>\r\n                                  )}\r\n                                </ListItemText>\r\n                              </ListItem>\r\n                            );\r\n                          }\r\n                        )}\r\n                    </List>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4} container spacing={0} direction=\"column\">\r\n                  {this.props.selectedType.Supers.length > 0 && (\r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Super Types\"} />\r\n                        </ListItem>\r\n                        {this.props.selectedType.Supers.map((superType, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={(_) => {\r\n                                  this.setState({\r\n                                    redirectTo: `/type/details/${superType._id}`,\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <ListItemText primary={superType.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  )}\r\n                  {this.props.subTypes.length > 0 && (\r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Sub Types\"} />\r\n                        </ListItem>\r\n                        {this.props.subTypes.map((sub, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={(_) => {\r\n                                  this.setState({\r\n                                    redirectTo: `/type/details/${sub._id}`,\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <ListItemText primary={sub.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  )}\r\n                  {references.length > 0 && (\r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Referenced in:\"} />\r\n                        </ListItem>\r\n                        {references.map((type, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={(_) => {\r\n                                  this.setState({\r\n                                    redirectTo: `/type/details/${type._id}`,\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <ListItemText primary={type.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  )}\r\n                  {this.props.instances.length > 0 && (\r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Instances\"} />\r\n                        </ListItem>\r\n                        {this.props.instances.map((thing, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={(_) => {\r\n                                  this.setState({\r\n                                    redirectTo: `/thing/details/${thing._id}`,\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <ListItemText primary={thing.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <CommentsControl \r\n                  user={this.props.user} \r\n                  allUsers={this.props.allUsers}\r\n                  object={this.props.selectedType}\r\n                  objectType=\"Type\"\r\n                  world={this.props.selectedWorld}\r\n                  api={this.api} \r\n                  onChange={this.commentsChange}\r\n                  suggestions={suggestions}\r\n                /> \r\n              </Grid>\r\n              <Modal\r\n                aria-labelledby=\"delete-type-modal\"\r\n                aria-describedby=\"delete-type-modal-description\"\r\n                open={this.state.modalOpen}\r\n                onClose={(e) => {\r\n                  this.setState({ modalOpen: false });\r\n                }}\r\n              >\r\n                <div style={this.getModalStyle()} className=\"paper\">\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      Are you sure you want to delete{\" \"}\r\n                      {this.props.selectedType.Name}?\r\n                    </Grid>\r\n                    <Grid item>\r\n                      (All references to it will be left alone and may not work\r\n                      correctly)\r\n                    </Grid>\r\n                    <Grid item container spacing={1} direction=\"row\">\r\n                      <Grid item xs={6}>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={this.delete}\r\n                        >\r\n                          Yes\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          onClick={(e) => {\r\n                            this.setState({ modalOpen: false });\r\n                          }}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </Modal>\r\n            </div>\r\n          }\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst TypeDetails = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default TypeDetails;\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport {Delete} from \"@material-ui/icons\";\r\nimport {Fab, Tooltip} from \"@material-ui/core\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ChipInput from \"material-ui-chip-input\";\r\n\r\nconst handleTypeChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  attr[\"AttributeType\"] = e.target.value;\r\n  attr[\"ListType\"] = \"Text\";\r\n  props.onChange(attr);\r\n};\r\n\r\nconst handleDefinedTypeChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  attr[\"DefinedType\"] = e.target.value;\r\n  if (e.target.value === \"new\") {\r\n    // function respond(newType) {\r\n    //   attr[\"DefinedType\"] = newType._id;\r\n    //   props.onChange(attr);\r\n    // }\r\n    // props.onNewType(respond);\r\n    props.onNewType(attr);\r\n  }\r\n  else \r\n    props.onChange(attr);\r\n};\r\n\r\nconst handleListTypeChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  attr[\"ListType\"] = e.target.value;\r\n  props.onChange(attr);\r\n};\r\n\r\nconst handleOptionsChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  attr.Options = e;\r\n  props.onChange(attr);\r\n};\r\n\r\nexport default function AttributeControl(props) {\r\n  const [name, changeName] = useState(props.attribute.Name);\r\n\r\n  const attributeTypes = [\r\n    \"Text\",\r\n    \"Number\",\r\n    \"True/False\",\r\n    \"Options\", \r\n    \"Type\", \r\n    \"List\"\r\n  ];\r\n  const listTypes = [\r\n    \"Text\",\r\n    \"Options\", \r\n    \"Type\"\r\n  ];\r\n\r\n  const selectedType =\r\n    props.attribute.AttributeType === undefined || props.attribute.AttributeType === null || props.attribute.AttributeType === \"\" ? attributeTypes[0] : props.attribute.AttributeType;\r\n\r\n  const selectedListType =\r\n    props.attribute.ListType === undefined || props.attribute.ListType === \"\" ? listTypes[0] : props.attribute.ListType;\r\n\r\n  const selectedDefinedType =\r\n    props.attribute.DefinedType === undefined || props.attribute.DefinedType === \"\" ? \"\" : props.attribute.DefinedType;\r\n\r\n  let fromTypes = props.attribute.FromTypeIDs === undefined ? [] : props.types.filter(t=> props.attribute.FromTypeIDs.includes(t._id));\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"row\">\r\n      <Grid item sm={3} xs={12}>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <InputLabel htmlFor={`AttrName_${props.attribute.attrID}_${props.attribute.index}`}>Name</InputLabel>\r\n          <OutlinedInput\r\n            disabled={props.disabled}\r\n            id={`AttrName_${props.attribute.attrID}_${props.attribute.index}`}\r\n            name={`AttrName_${props.attribute.attrID}_${props.attribute.index}`}\r\n            type=\"text\"\r\n            error={props.error}\r\n            value={name}\r\n            autoComplete=\"off\"\r\n            onChange={e => {\r\n              changeName(e.target.value);\r\n            }}\r\n            onBlur={e => {\r\n              const attr = props.attribute;\r\n              attr.Name = name;\r\n              // const attr = {\r\n              //   index: props.attribute.index,\r\n              //   Name: name,\r\n              //   Type: props.attribute.AttributeType,\r\n              //   Options: props.attribute.Options,\r\n              //   ListType: props.attribute.ListType,\r\n              //   FromSupers: props.attribute.FromSupers,\r\n              //   DefinedType: props.attribute.DefinedType,\r\n              //   AttributeTypes: props.attribute.AttributeTypes,\r\n              //   DefaultValue: defaultValue,\r\n              //   DefaultListValues: defaultListValues\r\n              // };\r\n              props.onChange(attr);\r\n            }}\r\n            labelWidth={43}\r\n            fullWidth\r\n          />\r\n          <FormHelperText>{props.message}</FormHelperText>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item sm={3} xs={12}>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <InputLabel htmlFor=\"attribute-type\" id=\"attribute-type-label\">\r\n            Attribute Type\r\n          </InputLabel>\r\n          <Select\r\n            labelId=\"attribute-type-label\"\r\n            id=\"attribute-type\"\r\n            disabled={props.disabled}\r\n            // disabled={props.attribute.FromSupers.length > 0} \r\n            value={selectedType}\r\n            onChange={e => {handleTypeChange(e, props)}}\r\n            fullWidth\r\n            labelWidth={100}\r\n          >\r\n            {attributeTypes.map((type, i) => {\r\n              return (<MenuItem key={i} value={type}>{type}</MenuItem>);\r\n            })}\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item sm={3} xs={12}>\r\n        {selectedType === \"Options\" ? (\r\n          <ChipInput\r\n            variant=\"outlined\"\r\n            disabled={props.disabled}\r\n            // disabled={props.attribute.FromSupers.length > 0}\r\n            defaultValue={props.attribute.Options}\r\n            onChange={chips => handleOptionsChange(chips, props)}\r\n          />\r\n        ) : selectedType === \"Type\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"definedType\" id=\"definedType-label\">\r\n              Defined Type\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"definedType-label\"\r\n              id=\"definedType\"\r\n              disabled={props.disabled}\r\n              // disabled={props.attribute.FromSupers.length > 0} \r\n              value={selectedDefinedType}\r\n              onChange={e => {handleDefinedTypeChange(e, props)}}\r\n              fullWidth\r\n              labelWidth={100}\r\n            >\r\n              <MenuItem value=\"new\">+ Create New Type</MenuItem>\r\n              {props.types.map((type, i) => {\r\n                return (<MenuItem key={i} value={type._id}>{type.Name}</MenuItem>);\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : selectedType === \"List\" ? (\r\n          <Grid container spacing={1} direction=\"column\">\r\n            <Grid item>\r\n              <FormControl variant=\"outlined\" fullWidth>\r\n                <InputLabel htmlFor=\"list-type\" id=\"list-type-label\">\r\n                  List Type\r\n                </InputLabel>\r\n                <Select\r\n                  labelId=\"list-type-label\"\r\n                  id=\"list-type\"\r\n                  disabled={props.disabled}\r\n                  // disabled={props.attribute.FromSupers.length > 0} \r\n                  value={selectedListType}\r\n                  onChange={e => {handleListTypeChange(e, props)}}\r\n                  fullWidth\r\n                  labelWidth={70}\r\n                >\r\n                  {listTypes.map((type, i) => {\r\n                    return (<MenuItem key={i} value={type}>{type}</MenuItem>);\r\n                  })}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            { props.attribute.ListType === \"Type\" ? \r\n              (\r\n                <Grid item>\r\n                  <FormControl variant=\"outlined\" fullWidth>\r\n                    <InputLabel htmlFor=\"definedType\" id=\"definedType-label\">\r\n                      Defined Type\r\n                    </InputLabel>\r\n                    <Select\r\n                      labelId=\"definedType-label\"\r\n                      id=\"definedType\"\r\n                      disabled={props.disabled}\r\n                      // disabled={props.attribute.FromSupers.length > 0} \r\n                      value={selectedDefinedType}\r\n                      onChange={e => {handleDefinedTypeChange(e, props)}}\r\n                      fullWidth\r\n                      labelWidth={100}\r\n                    >\r\n                      <MenuItem value=\"new\">+ Create New Type</MenuItem>\r\n                      {props.types.map((type, i) => {\r\n                        return (<MenuItem key={i} value={type._id}>{type.Name}</MenuItem>);\r\n                      })}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n              ) : props.attribute.ListType === \"Options\" ?\r\n              (\r\n                <Grid item>\r\n                  <ChipInput\r\n                    variant=\"outlined\"\r\n                    disabled={props.disabled}\r\n                    // disabled={props.attribute.FromSupers.length > 0}\r\n                    defaultValue={props.attribute.Options}\r\n                    onChange={chips => handleOptionsChange(chips, props)}\r\n                  />\r\n                </Grid>\r\n              ) : \"\"\r\n            }\r\n          </Grid>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        { fromTypes.length === 1 ? \r\n          `From Type: ${fromTypes[0].Name}`\r\n        : fromTypes.length > 1 ?\r\n          <span>\r\n            From Types: \r\n            { fromTypes.map((type, i) => {\r\n              return (<span key={i}>{i > 0 && \", \"}{type.Name}</span>)\r\n            })}\r\n          </span>\r\n        : \r\n          <Tooltip title={`Delete Attribute`}>\r\n            <Fab size=\"small\"\r\n              color=\"primary\"\r\n              // disabled={props.disabled}\r\n              // disabled={props.attribute.FromSupers.length > 0}\r\n              onClick={_ => props.onDelete(props.attribute)}\r\n            >\r\n              <Delete />\r\n            </Fab>\r\n          </Tooltip>\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  Select,\r\n  MenuItem,\r\n  Checkbox\r\n} from \"@material-ui/core\";\r\n\r\nimport ChipInput from \"material-ui-chip-input\";\r\nimport { Multiselect } from \"multiselect-react-dropdown\";\r\n\r\nconst handleTextListChange = (e, props) => {\r\n  const def = props.def;\r\n  def.DefaultListValues = e;\r\n  props.onChange(def);\r\n};\r\nconst handleDefinedTypeChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  if (e.target.value === \"new\") {\r\n    // function respond2(newThing) {\r\n    //   // attr[\"DefinedType\"] = newType._id;\r\n    //   // props.onChange(attr);\r\n    //   const def = props.def;\r\n    //   def.DefaultValue = newThing._id;\r\n    //   props.onChange(def);\r\n    //   respond(newThing._id);\r\n    // }\r\n    // const attr = props.attribute;\r\n    props.onNewThing(\r\n      // respond2,\r\n      attr,\r\n      // props.types.filter(t => t._id === props.attribute.DefinedType)[0]\r\n    );\r\n  } else {\r\n    attr[\"DefaultValue\"] = e.target.value;\r\n    props.onChange(attr);\r\n    // respond(e.target.value);\r\n  }\r\n};\r\nconst addOption = (selectedItem, props) => {\r\n  const def = props.def;\r\n  def.DefaultListValues.push(selectedItem.Name);\r\n  props.onChange(def);\r\n};\r\nconst removeOption = (selectedList, props) => {\r\n  const def = props.def;\r\n  def.DefaultListValues = [];\r\n  selectedList.forEach(o => {\r\n    def.DefaultListValues.push(o.Name);\r\n  });\r\n  props.onChange(def);\r\n};\r\nconst addThingOfType = (selectedItem, props) => {\r\n  if (selectedItem._id === \"new\") {\r\n    // function respond2(newThing) {\r\n    //   const def = props.def;\r\n    //   def.DefaultListValues.push(newThing._id);\r\n    //   props.onChange(def);\r\n    // }\r\n    // props.onNewThing(\r\n    //   respond2,\r\n      \r\n    // );\r\n    // function respond(newThing) {\r\n    //   const def = props.def;\r\n    //   def.DefaultListValues.push(newThing._id);\r\n    //   props.onChange(def);\r\n    // }\r\n    setTimeout(() => {\r\n      const attr = props.attribute;\r\n      // const thingType = props.types.filter(t => t._id === props.attribute.DefinedType)[0];\r\n      props.onNewThing(attr);// , thingType);\r\n    }, 500);\r\n  } else {\r\n    const def = props.def;\r\n    def.DefaultListValues.push(selectedItem._id);\r\n    props.onChange(def);\r\n  }\r\n};\r\nconst removeType = (selectedList, props) => {\r\n  const def = props.def;\r\n  def.DefaultListValues = [];\r\n  selectedList.forEach(o => {\r\n    def.DefaultListValues.push(o._id);\r\n  });\r\n  props.onChange(def);\r\n};\r\n\r\nexport default function AttributeDefaultControl(props) {\r\n  // I'm passing in attribute and def.\r\n  const [value, changeValue] = useState(props.def.DefaultValue);\r\n  const attributeType = props.attribute.AttributeType === \"\" ? \"Text\" : props.attribute.AttributeType;\r\n  \r\n  const selectedTypeValue = attributeType !== \"Type\" ? \"\" :\r\n    (props.def.DefaultValue === undefined || props.def.DefaultValue === \"\" ? \"\" : props.def.DefaultValue);\r\n  \r\n  const listOptions = [];\r\n  const listOptionValues = [];\r\n  if (attributeType === \"List\" && props.attribute.ListType === \"Options\") {\r\n    props.attribute.Options.forEach(o => {\r\n      listOptions.push({ Name: o });\r\n    });\r\n    props.def.DefaultListValues.forEach(o => {\r\n      listOptionValues.push({ Name: o });\r\n    });\r\n  } else if (attributeType === \"List\" && props.attribute.ListType === \"Type\") {\r\n    const definedType = props.types.filter(t => t._id === props.attribute.DefinedType)[0];\r\n    listOptions.push({ Name: `+ Create New ${definedType.Name}`, _id: \"new\" });\r\n    props.things\r\n      .filter(t => t.TypeIDs.includes(props.attribute.DefinedType))\r\n      .forEach(t => {\r\n        listOptions.push({ Name: t.Name, _id: t._id });\r\n      });\r\n    listOptions\r\n      .filter(t => props.def.DefaultListValues.includes(t._id))\r\n      .forEach(t => {\r\n        listOptionValues.push(t);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"row\">\r\n      <Grid item xs={12}>\r\n        {attributeType === \"Text\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor={`attribute_name_${props.attribute.attrID}`}>{props.attribute.Name} Default Value</InputLabel>\r\n            <OutlinedInput\r\n              id={`attribute_name_${props.attribute.attrID}`}\r\n              name={`attribute_name_${props.attribute.attrID}`}\r\n              type=\"text\"\r\n              error={props.error}\r\n              value={value}\r\n              autoComplete=\"off\"\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const def = props.def;\r\n                def.DefaultValue = value;\r\n                props.onChange(def);\r\n              }}\r\n              labelWidth={props.attribute.Name.length * 9 + 100}\r\n              fullWidth\r\n            />\r\n            <FormHelperText>{props.message}</FormHelperText>\r\n          </FormControl>\r\n        ) : attributeType === \"Number\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"numField\">{props.attribute.Name} Default Value</InputLabel>\r\n            <OutlinedInput\r\n              id=\"numField\"\r\n              name=\"numField\"\r\n              type=\"number\"\r\n              error={props.error}\r\n              value={value}\r\n              autoComplete=\"off\"\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const def = props.def;\r\n                def.DefaultValue = value;\r\n                props.onChange(def);\r\n              }}\r\n              labelWidth={props.attribute.Name.length * 9 + 100}\r\n              fullWidth\r\n            />\r\n            <FormHelperText>{props.message}</FormHelperText>\r\n          </FormControl>\r\n        ) : attributeType === \"True/False\" ? (\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox checked={props.def.DefaultValue===\"True\"} onChange={e => {\r\n                const def = props.def;\r\n                def.DefaultValue = e.target.checked ? \"True\" : \"False\";\r\n                props.onChange(def);\r\n              }}\r\n              color=\"primary\" />\r\n            }\r\n            label={`${props.attribute.Name} Default True`}\r\n          />\r\n        ) : attributeType === \"Options\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"options-select\" id=\"options-select-label\">\r\n              {props.attribute.Name} Default Value\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"options-select-label\"\r\n              id=\"options-select\"\r\n              value={value}\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const def = props.def;\r\n                def.DefaultValue = value;\r\n                props.onChange(def);\r\n              }}\r\n              fullWidth\r\n              labelWidth={props.attribute.Name.length * 9 + 100}\r\n            >\r\n              {props.attribute.Options.map((option, i) => {\r\n                return (\r\n                  <MenuItem key={i} value={option}>\r\n                    {option}\r\n                  </MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : attributeType === \"Type\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"type-select\" id=\"type-select-label\">\r\n              {props.attribute.Name} Default Value\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"type-select-label\"\r\n              id=\"type-select\"\r\n              value={selectedTypeValue}\r\n              onChange={e => {\r\n                handleDefinedTypeChange(e, props);\r\n              }}\r\n              // onBlur={e => {\r\n              //   const def = props.def;\r\n              //   def.DefaultValue = value;\r\n              //   props.onChange(def);\r\n              // }}\r\n              fullWidth\r\n              labelWidth={props.attribute.Name.length * 9 + 100}\r\n            >\r\n              <MenuItem value=\"new\">\r\n                + Create New{\" \"}\r\n                {props.types.filter(t => t._id === props.attribute.DefinedType)[0].Name}\r\n              </MenuItem>\r\n              {props.things\r\n                .filter(t => t.TypeIDs.includes(props.attribute.DefinedType))\r\n                .map((thing, i) => {\r\n                  return (\r\n                    <MenuItem key={i} value={thing._id}>\r\n                      {thing.Name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : attributeType === \"List\" ? (\r\n          <span>\r\n            {props.attribute.ListType === \"Text\" ? (\r\n              <ChipInput\r\n                placeholder={`${props.attribute.Name} Default Values`}\r\n                variant=\"outlined\"\r\n                defaultValue={props.def.DefaultListValues}\r\n                onChange={chips => handleTextListChange(chips, props)}\r\n              />\r\n            ) : props.attribute.ListType === \"Options\" ? (\r\n              <Multiselect\r\n                placeholder={`${props.attribute.Name} Default Values`}\r\n                options={listOptions}\r\n                selectedValues={listOptionValues}\r\n                onSelect={(_, selectedItem) => {\r\n                  addOption(selectedItem, props);\r\n                }}\r\n                onRemove={(selectedList, _) => {\r\n                  removeOption(selectedList, props);\r\n                }}\r\n                displayValue=\"Name\"\r\n              />\r\n            ) : props.attribute.ListType === \"Type\" ? (\r\n              <Multiselect\r\n                placeholder={`${props.attribute.Name} Default Values`}\r\n                options={listOptions}\r\n                selectedValues={listOptionValues}\r\n                onSelect={(_, selectedItem) => {\r\n                  addThingOfType(selectedItem, props);\r\n                }}\r\n                onRemove={(selectedList, _) => {\r\n                  removeType(selectedList, props);\r\n                }}\r\n                displayValue=\"Name\"\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </span>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport uuid from 'react-uuid';\r\nimport {\r\n  updateSelectedType,\r\n  addType,\r\n  addThing\r\n} from \"../../redux/actions/index\";\r\nimport AttributeControl from \"./AttributeControl\";\r\nimport AttributeDefaultControl from \"./AttributeDefaultControl\";\r\nimport API from \"../../smartAPI\";\r\n\r\n// It will let you add and remove attributes.\r\n// Each needs to have a unique name as part of validation.\r\n// Each also needs to have a valid type.\r\n// The type can be string, integer, double, enum, any Type\r\n// already defined for this world, or a list of any of the\r\n// other types.\r\n// In future versions I will add support for additional types:\r\n// Color, DateTime, Schedule.\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedType: state.app.selectedType,\r\n    // attributesArr: state.app.attributesArr,\r\n    types: state.app.types,\r\n    things: state.app.things,\r\n    selectedWorldID: state.app.selectedWorldID\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedType: type => dispatch(updateSelectedType(type)),\r\n    // updateAttributesArr: arr => dispatch(updateAttributesArr(arr)),\r\n    addType: type => dispatch(addType(type)),\r\n    addThing: thing => dispatch(addThing(thing))\r\n  };\r\n}\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      message: \"\",\r\n      waiting: false,\r\n      defaultsMode: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  newAttribute = () => {\r\n    const type = this.props.selectedType;\r\n    type.AttributesArr.push({\r\n      index: type.AttributesArr.length,\r\n      attrID: `null_${uuid()}`,\r\n      Name: \"\",\r\n      AttributeType: \"Text\",\r\n      Options: [],\r\n      DefinedType: \"\",\r\n      ListType: \"\"\r\n    });\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  changeAttribute = value => {\r\n    const type = this.props.selectedType;\r\n    type.AttributesArr[value.index] = {\r\n      index: value.index,\r\n      attrID: value.attrID,\r\n      Name: value.Name,\r\n      AttributeType: value.AttributeType,\r\n      Options: value.Options,\r\n      DefinedType: value.DefinedType,\r\n      ListType: value.ListType,\r\n    };\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  changeDefault = value => {\r\n    const type = this.props.selectedType;\r\n    type.DefaultsHash[value.attrID] = {\r\n      attrID: value.attrID,\r\n      DefaultValue: value.DefaultValue,\r\n      DefaultListValues: value.DefaultListValues,\r\n      FromTypeIDs: value.FromTypeIDs\r\n    };\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  blurAttribute = e => {\r\n  }\r\n\r\n  deleteAttribute = value => {\r\n    const type = this.props.selectedType;\r\n    const attributes = [];\r\n    type.AttributesArr.forEach(t => {\r\n      if (t.index !== value.index) {\r\n        if (t.index > value.index)\r\n          t.index--;\r\n        attributes.push(t);\r\n      }\r\n    });\r\n    type.AttributesArr = [];\r\n    let defaults = {...type.DefaultsHash};\r\n    if (defaults[value.attrID] !== undefined) {\r\n      delete defaults[value.attrID];\r\n    }\r\n    type.DefaultsHash = {};\r\n    this.props.updateSelectedType(type);\r\n    setTimeout(() => {\r\n      type.AttributesArr = attributes;\r\n      type.DefaultsHash = defaults;\r\n      this.props.updateSelectedType(type);\r\n    }, 500);\r\n  }\r\n\r\n  addNewType = (attribute) => {\r\n    this.props.addNewType(attribute);\r\n  }\r\n\r\n  addNewThing = (attribute) => {\r\n    this.props.addNewThing(attribute);\r\n  }\r\n\r\n  render() {\r\n    // I should move this somewhere else so it's not happening on every render.\r\n    const inheritedAttributes = [];\r\n    this.props.selectedType.SuperIDs.forEach(s => {\r\n      let superType = this.props.types.filter(t => t._id === s);\r\n      if (superType.length > 0) {\r\n        superType = superType[0];\r\n        superType.AttributesArr.forEach(attribute => {\r\n          let inheritedAttribute = inheritedAttributes.filter(a=>a.attrID === attribute.attrID);\r\n          if (inheritedAttribute.length === 0) {\r\n            attribute.FromTypeIDs = [superType._id];\r\n            inheritedAttributes.push(attribute);\r\n          }\r\n          else {\r\n            inheritedAttribute = inheritedAttribute[0];\r\n            inheritedAttribute.FromTypeIDs.push(superType._id);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return (\r\n      <Grid item xs={12} container spacing={0} direction=\"column\">\r\n        <Grid item>\r\n          <List>\r\n            { this.props.selectedType !== null && this.props.selectedType !== undefined &&\r\n              inheritedAttributes.map((attribute, i) => {\r\n                let def = this.props.selectedType.DefaultsHash[attribute.attrID];\r\n                if (def === undefined)\r\n                  def = { attrID: attribute.attrID, DefaultValue: \"\", DefaultListValues: [] };\r\n                return (\r\n                  <ListItem key={i}>\r\n                    { this.props.defaultsMode ? \r\n                      <AttributeDefaultControl\r\n                        typeID={this.props.selectedType._id}\r\n                        attribute={attribute}\r\n                        def={def}\r\n                        onChange={this.changeDefault}\r\n                        // onBlur={this.blurAttribute}\r\n                        types={this.props.types}\r\n                        things={this.props.things}\r\n                        onNewThing={this.addNewThing}\r\n                      /> : \r\n                      <AttributeControl\r\n                        typeID={this.props.selectedType._id}\r\n                        disabled={true}\r\n                        attribute={attribute}\r\n                        // onChange={this.changeAttribute}\r\n                        // onDelete={this.deleteAttribute}\r\n                        // onBlur={this.blurAttribute}\r\n                        types={this.props.types}\r\n                        things={this.props.things}\r\n                        onNewType={this.addNewType}\r\n                      /> \r\n                    }\r\n                  </ListItem>\r\n                );\r\n              })\r\n            }\r\n            { this.props.selectedType !== null && this.props.selectedType !== undefined &&\r\n              this.props.selectedType.AttributesArr.map((attribute, i) => {\r\n                let def = this.props.selectedType.DefaultsHash[attribute.attrID];\r\n                if (def === undefined)\r\n                  def = { attrID: attribute.attrID, DefaultValue: \"\", DefaultListValues: [] };\r\n                \r\n                return (\r\n                  <ListItem key={i}>\r\n                    { this.props.defaultsMode ? \r\n                      <AttributeDefaultControl\r\n                        typeID={this.props.selectedType._id}\r\n                        attribute={attribute}\r\n                        def={def}\r\n                        onChange={this.changeDefault}\r\n                        onBlur={this.blurAttribute}\r\n                        types={this.props.types}\r\n                        things={this.props.things}\r\n                        onNewThing={this.addNewThing}\r\n                      /> : \r\n                      <AttributeControl\r\n                        typeID={this.props.selectedType._id}\r\n                        attribute={attribute}\r\n                        onChange={this.changeAttribute}\r\n                        onDelete={this.deleteAttribute}\r\n                        onBlur={this.blurAttribute}\r\n                        types={this.props.types}\r\n                        things={this.props.things}\r\n                        onNewType={this.addNewType}\r\n                      /> \r\n                    }\r\n                  </ListItem>\r\n                );\r\n              })\r\n            }\r\n          </List>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttributesControl = connect(mapStateToProps, mapDispatchToProps)(Control);\r\nexport default AttributesControl;\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormHelperText,\r\n  // Modal,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\n// const getModalStyle = () => {\r\n//   const top = Math.round(window.innerHeight / 2) - 100;\r\n//   const left = Math.round(window.innerWidth / 2) - 200;\r\n\r\n//   return {\r\n//     top: `${top}%`,\r\n//     left: `${left}%`,\r\n//     transform: `translate(${left}px, ${top}px)`,\r\n//   };\r\n// };\r\n\r\nconst validate = (value, props, changeMessage) => {\r\n  const valid = props.types.filter((t) => t.Name === value).length === 0;\r\n  changeMessage(valid ? \"\" : \"This Type Name is already in use\");\r\n};\r\n\r\nconst saveNewType = (value, props, changeName, changeMessage, changeWaiting) => {\r\n  // if (props.onSave !== undefined && props.onSave !== null)\r\n  //   props.onSave();\r\n\r\n  const type = {\r\n    _id: null,\r\n    Name: value.trim(),\r\n    Description: \"\",\r\n    SuperIDs: [],\r\n    AttributesArr: [],\r\n    Attributes: [],\r\n    worldID: props.selectedWorldID,\r\n    Major: false, \r\n    NeedsWork: true,\r\n    EditUserID: this.props.user._id\r\n  };\r\n\r\n  // Calls API\r\n  props.api\r\n    .createType(type)\r\n    .then((res) => {\r\n      if (res.typeID !== undefined) {\r\n        type._id = res.typeID;\r\n        type.Supers = [];\r\n        // Adds to redux\r\n        if (props.addType) props.addType(type);\r\n        // Calls respond back to Attribute to set the type\r\n\r\n        changeWaiting(false);\r\n        if (props.onSave) {\r\n          // setTimeout(() => {\r\n          changeName(\"\");\r\n          props.onSave(type);\r\n          // }, 500);\r\n        }\r\n        // this.state.modalSubmit(type);\r\n        // this.setState({\r\n        //   waiting: false,\r\n        //   typeModalOpen: false\r\n        // });\r\n      } else if (res.error !== undefined) {\r\n        // this.setState({\r\n        //   waiting: false,\r\n        //   message: res.error\r\n        // });\r\n        changeWaiting(false);\r\n        changeMessage(res.error);\r\n        props.logout();\r\n      }\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport default function NewTypeModal(props) {\r\n  const [name, changeName] = useState(\"\");\r\n  const [message, changeMessage] = useState(\"\");\r\n  const [waiting, changeWaiting] = useState(false);\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"column\">\r\n      <Grid item>Just give the new Type a name.</Grid>\r\n      <Grid item>(You can do the rest later.)</Grid>\r\n      <Grid item>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <InputLabel htmlFor=\"name\">Name</InputLabel>\r\n          <OutlinedInput\r\n            id=\"name\"\r\n            name=\"Name\"\r\n            type=\"text\"\r\n            autoComplete=\"Off\"\r\n            error={message !== \"\"}\r\n            value={name}\r\n            onChange={(e) => {\r\n              changeName(e.target.value);\r\n            }}\r\n            onBlur={(e) => {\r\n              validate(name, props, changeMessage);\r\n            }}\r\n            labelWidth={43}\r\n            fullWidth\r\n          />\r\n          <FormHelperText>{message}</FormHelperText>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting}\r\n            onClick={(e) => {\r\n              changeWaiting(true);\r\n              saveNewType(name, props, changeName, changeMessage, changeWaiting);\r\n            }}\r\n          >\r\n            {waiting ? \"Please Wait\" : \"Submit\"}\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            onClick={(e) => {\r\n              if (props.onCancel !== undefined && props.onCancel !== null)\r\n                props.onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormHelperText,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\n\r\nconst validate = (value, props, changeMessage) => {\r\n  const valid = props.things.filter((t) => t.Name === value).length === 0;\r\n  changeMessage(valid ? \"\" : \"This Thing Name is already in use\");\r\n};\r\n\r\nconst saveNewThing = (value, props, changeName, changeMessage, changeWaiting) => {\r\n  \r\n  changeWaiting(true);\r\n  const thing = {\r\n    _id: null,\r\n    Name: value.trim(),\r\n    Description: \"\",\r\n    TypeIDs: props.newThingType === undefined ? [] : [props.newThingType._id],\r\n    Attributes: [],\r\n    worldID: props.selectedWorldID,\r\n    ReferenceIDs: [], \r\n    NeedsWork: true,\r\n    EditUserID: this.props.user._id\r\n  };\r\n\r\n  // Calls API\r\n  props.api\r\n    .createThing(thing)\r\n    .then((res) => {\r\n      if (res.thingID !== undefined) {\r\n        thing._id = res.thingID;\r\n        thing.Types = props.newThingType === undefined ? [] : [props.newThingType];\r\n        thing.AttributesArr = [];\r\n        // Adds to props \r\n        props.addThing(thing);\r\n        setTimeout(() => {\r\n          // Calls respond back to Attribute to set the thing\r\n          changeName(\"\");\r\n          changeWaiting(false);\r\n          props.onSave(thing);\r\n        }, 500);\r\n\r\n        // this.state.modalSubmit(thing);\r\n        // this.setState({\r\n        //   waiting: false, \r\n        //   thingModalOpen: false,\r\n        //   Name: \"\"\r\n        // });\r\n      }\r\n      else if (res.error !== undefined) {\r\n        // this.setState({\r\n        //   waiting: false, \r\n        //   message: res.error \r\n        // });\r\n        changeMessage(res.error);\r\n        changeWaiting(false);\r\n        props.logout();\r\n      }\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\nexport default function NewThingModal(props) {\r\n  const [name, changeName] = useState(\"\");\r\n  const [message, changeMessage] = useState(\"\");\r\n  const [waiting, changeWaiting] = useState(false);\r\n\r\n  return (\r\n    <Grid container spacing={1} direction=\"column\">\r\n      <Grid item>Just give the new {props.newThingType.Name === undefined ? \"Thing\" : props.newThingType.Name} a name.</Grid>\r\n      <Grid item>(You can do the rest later.)</Grid>\r\n      <Grid item>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <InputLabel htmlFor=\"name\">Name</InputLabel>\r\n          <OutlinedInput\r\n            id=\"name\"\r\n            name=\"Name\"\r\n            type=\"text\"\r\n            autoComplete=\"Off\"\r\n            error={message !== \"\"}\r\n            value={name}\r\n            onChange={(e) => {\r\n              changeName(e.target.value);\r\n            }}\r\n            onBlur={(e) => {\r\n              validate(name, props, changeMessage);\r\n            }}\r\n            labelWidth={43}\r\n            fullWidth\r\n          />\r\n          <FormHelperText>{message}</FormHelperText>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item container spacing={1} direction=\"row\">\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={waiting}\r\n            onClick={(e) => {\r\n              changeWaiting(true);\r\n              saveNewThing(name, props, changeName, changeMessage, changeWaiting);\r\n            }}\r\n          >\r\n            {waiting ? \"Please Wait\" : \"Submit\"}\r\n          </Button>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            onClick={(e) => {\r\n              if (props.onCancel !== undefined && props.onCancel !== null)\r\n                props.onCancel();\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport uuid from 'react-uuid';\r\nimport { ArrowBack, Add, Search } from \"@material-ui/icons\";\r\nimport { \r\n  Grid, Button, Checkbox, FormControl, FormControlLabel,\r\n  InputLabel, Tooltip, Fab,\r\n  Select, MenuItem,\r\n  ListItem, ListItemText\r\n} from \"@material-ui/core\";\r\nimport UnderConstruction from \"../../assets/img/under_construction.png\";\r\nimport { Helmet } from 'react-helmet';\r\nimport { Multiselect } from 'multiselect-react-dropdown';\r\nimport AttributesControl from \"./AttributesControl\";\r\n// import AttributeControl from \"./AttributeControl\";\r\n// import AttributeDefaultControl from \"./AttributeDefaultControl\";\r\nimport {\r\n  updateSelectedType,\r\n  addType,\r\n  updateType,\r\n  addAttributes,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  notFromLogin,\r\n  addThing,\r\n  toggleLogin,\r\n  logout,\r\n  selectWorld\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\nimport TextBox from \"../../components/Inputs/TextBox\";\r\nimport NewTypeModal from \"../../components/Modals/NewTypeModal\";\r\nimport NewThingModal from \"../../components/Modals/NewThingModal\";\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a Type.  It will allow the use of Template Types\r\n  and Super Types to make the process faster.\r\n*/\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedType: state.app.selectedType,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    types: state.app.types,\r\n    things: state.app.things,\r\n    user: state.app.user,\r\n    attributesByID: state.app.attributesByID,\r\n    attributesByName: state.app.attributesByName,\r\n    fromLogin: state.app.fromLogin,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions,\r\n    width: state.app.width,\r\n    height: state.app.height\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedType: type => dispatch(updateSelectedType(type)),\r\n    addType: type => dispatch(addType(type)),\r\n    updateType: type => dispatch(updateType(type)),\r\n    addAttributes: attrs => dispatch(addAttributes(attrs)),\r\n    setAttributes: attrs => dispatch(setAttributes(attrs)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    addThing: thing => dispatch(addThing(thing)),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    selectWorld: worldID => dispatch(selectWorld(worldID))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      _id: undefined,\r\n      // Name: \"\",\r\n      // Description: \"\",\r\n      // Supers: [],\r\n      // Attributes: [],\r\n      Major: false,\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" },\r\n        AttributesArr: { valid: true, message: \"\" },\r\n        Attributes: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      waiting: false,\r\n      addMore: \"\",\r\n      resetting: false,\r\n      browseAttributes: false,\r\n      browseAttributesSelected: \"\",\r\n      browseTypesSelected: \"\",\r\n      newThingType: {}\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  resetForm = () => {\r\n    setTimeout(() => {\r\n      let { id } = this.props.match.params;\r\n      if (id !== undefined) {\r\n        this.setState({\r\n          resetting: false, \r\n          loaded: true,\r\n          redirectTo: `/type/create`\r\n        });\r\n      }\r\n      else {\r\n        this.setState({\r\n          resetting: false,\r\n          loaded: true\r\n        });\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n  // handleUserInput = e => {\r\n  //   const name = e.target.name;\r\n  //   const value =\r\n  //     e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n  //   this.setState({ [name]: value });\r\n  // };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      fieldValidation[name].valid !== validation.valid\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  }\r\n\r\n  validateField = fieldName => {\r\n    let value = null;\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"Name\":\r\n        value = this.props.selectedType[fieldName];\r\n        valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        if (!valid)\r\n          message = \"Only Letters, Numbers, and Spaces allowed in Type Names\";\r\n        else if (value.length < 2) {\r\n          valid = false;\r\n          message = \"Type Name is too short\";\r\n        } else {\r\n          valid =\r\n            this.props.types.filter(\r\n              t => t.Name === value && t._id !== this.state._id\r\n            ).length === 0;\r\n          if (!valid) message = \"This Type Name is already in use\";\r\n        }\r\n        break;\r\n      case \"AttributesArr\":\r\n        valid = true;\r\n        value = this.props.selectedType[fieldName];\r\n        message = \"\";\r\n        for (let i = 0; i < value.length; i++) {\r\n          const attrByName = this.props.attributesByName[value[i].Name];\r\n          if (attrByName !== undefined && \r\n            attrByName._id !== value[i].attrID) {\r\n            valid = false;\r\n            message = `An attribute with the name '${value[i].Name}' already exists`;\r\n            break;\r\n          }\r\n          else if ((value[i].AttributeType === \"Type\" || (value[i].AttributeType === \"List\" && value[i].ListType === \"Type\")) && (value[i].DefinedType === undefined || value[i].DefinedType === null || value[i].DefinedType === \"\")) {\r\n            valid = false;\r\n            message = `A Defined Type must be selected for ${value[i].Name}.`;\r\n            break;\r\n          }\r\n          else if ((value[i].AttributeType === \"Options\" || (value[i].AttributeType === \"List\" && value[i].ListType === \"Options\")) && (value[i].Options === undefined || value[i].Options === null || value[i].Options.length === 0)) {\r\n            valid = false;\r\n            message = `At least one Option must be set for ${value[i].Name}.`;\r\n            break;\r\n          }\r\n        } \r\n        break;\r\n      case \"Attributes\":\r\n        valid = true;\r\n        value = this.props.selectedType[fieldName];\r\n        message = \"\";\r\n        for (let i = 0; i < value.length; i++) {\r\n          const attrByName = this.props.attributesByName[value[i].Name];\r\n          if (attrByName !== undefined && \r\n            attrByName._id !== value[i].attrID) {\r\n            valid = false;\r\n            message = `An attribute with this name already exists`;\r\n            break;\r\n          }\r\n          else if ((value[i].AttributeType === \"Type\" || (value[i].AttributeType === \"List\" && value[i].ListType === \"Type\")) && (value[i].DefinedType === undefined || value[i].DefinedType === null || value[i].DefinedType === \"\")) {\r\n            valid = false;\r\n            message = `A Defined Type must be selected for ${value[i].Name}.`;\r\n            break;\r\n          }\r\n          else if ((value[i].AttributeType === \"Options\" || (value[i].AttributeType === \"List\" && value[i].ListType === \"Options\")) && (value[i].Options === undefined || value[i].Options === null || value[i].Options.length === 0)) {\r\n            valid = false;\r\n            message = `At least one Option must be set for ${value[i].Name}.`;\r\n            break;\r\n          }\r\n        } \r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  }\r\n\r\n  validateForm = respond => {\r\n    const nameValid = this.validateField(\"Name\");\r\n    const attrArrValid = this.validateField(\"AttributesArr\");\r\n    // const attrValid = this.validateField(\"Attributes\");\r\n    const formValid = nameValid.valid && attrArrValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.Name = nameValid;\r\n    fieldValidation.AttributesArr = attrArrValid;\r\n    // fieldValidation.Attributes = attrValid;\r\n    this.setState(\r\n      {\r\n        formValid: formValid,\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  }\r\n\r\n  onSubmit = (addMore) => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true, addMore: addMore }, this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  }\r\n\r\n  /**\r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p><p><br></p>\r\n   * gets translated to \r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p>\r\n   */\r\n  cleanWYSIWYG = (str) => {\r\n    if (str.endsWith(\"<p><br></p>\")) {\r\n      str = str.substring(0, str.length - 11);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  submitThroughAPI = () => {\r\n    const superIDs = this.props.selectedType.Supers.map(s => {\r\n      return s._id;\r\n    });\r\n\r\n    const attributes = this.props.selectedType.AttributesArr.map(a => {\r\n      return {\r\n        _id: a.attrID,\r\n        Name: a.Name.trim(),\r\n        AttributeType: a.AttributeType,\r\n        Options: a.Options,\r\n        DefinedType: a.DefinedType,\r\n        ListType: a.ListType\r\n      };\r\n    });\r\n    \r\n    this.api.upsertAttributes(this.props.selectedWorldID, attributes).then(res => {\r\n      const typeAttributes = [];\r\n      this.props.selectedType.AttributesArr.forEach(a => {\r\n        const id = a.attrID.includes(\"null\") ? res.attributes[a.Name] : a.attrID;\r\n        typeAttributes.push({\r\n          attrID: id,\r\n          index: a.index,\r\n          // Name: a.Name,\r\n          // AttributeType: a.AttributeType,\r\n          // Options: a.Options,\r\n          // DefinedType: a.DefinedType,\r\n          // ListType: a.ListType\r\n        });\r\n      });\r\n\r\n      const type = {\r\n        _id: this.state._id,\r\n        Name: this.props.selectedType.Name.trim(),\r\n        PluralName: this.props.selectedType.PluralName === undefined ? \"\" : this.props.selectedType.PluralName.trim(),\r\n        Description: this.cleanWYSIWYG(this.props.selectedType.Description),\r\n        SuperIDs: superIDs,\r\n        // AttributesArr: this.props.selectedType.AttributesArr,\r\n        Attributes: typeAttributes,\r\n        Defaults: [],\r\n        worldID: this.props.selectedWorld._id,\r\n        Major: this.props.selectedType.Major,\r\n        NeedsWork: this.props.selectedType.NeedsWork,\r\n        ReferenceIDs: [],\r\n        DefaultReferenceIDs: [],\r\n        EditUserID: this.props.user._id\r\n      };\r\n      // this.props.selectedType.AttributesArr.filter(a=>a.AttributeType === \"Type\" || (a.AttributeType === \"List\" && a.ListType === \"Type\")).forEach(a=>{\r\n      //   if (!type.ReferenceIDs.includes(a.DefinedType)) {\r\n      //     type.ReferenceIDs.push(a.DefinedType);\r\n      //   }\r\n      // });\r\n      this.props.selectedType.AttributesArr.filter(a=>a.AttributeType === \"Type\" || (a.AttributeType === \"List\" && a.ListType === \"Type\")).forEach(a=>{\r\n        if (!type.ReferenceIDs.includes(a.DefinedType)) {\r\n          type.ReferenceIDs.push(a.DefinedType);\r\n        }\r\n      });\r\n      this.props.selectedType.Supers.forEach(s=> {\r\n        s.AttributesArr.filter(a=>a.AttributeType === \"Type\" || (a.AttributeType === \"List\" && a.ListType === \"Type\")).forEach(a=>{\r\n          if (!type.ReferenceIDs.includes(a.DefinedType)) {\r\n            type.ReferenceIDs.push(a.DefinedType);\r\n          }\r\n        });\r\n      });\r\n      Object.keys(this.props.selectedType.DefaultsHash).forEach(attrID => {\r\n        // There's the situation which can happen here where a default thing gets deleted (not removed as default).\r\n        // I really should filter it out, but it's not hurting anything for now, so I'm going to leave it.\r\n        const def = this.props.selectedType.DefaultsHash[attrID];\r\n        type.Defaults.push({\r\n          attrID, \r\n          FromTypeID: def.FromTypeID, \r\n          DefaultValue: def.DefaultValue, \r\n          DefaultListValues: def.DefaultListValues \r\n        });\r\n      });\r\n  \r\n      if (type._id === null) {\r\n        this.api\r\n          .createType(type)\r\n          .then(res => {\r\n            if (res.typeID !== undefined) {\r\n              this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n                this.props.setAttributes(res2.attributes);\r\n                this.props.setTypes(res2.types);\r\n                this.props.setThings(res2.things);\r\n\r\n                if (this.state.addMore === \"add\") {\r\n                  this.props.updateSelectedType({\r\n                    _id: null,\r\n                    Name: \"\",\r\n                    PluralName: \"\",\r\n                    Description: \"\",\r\n                    Supers: [],\r\n                    SuperIDs: [],\r\n                    AttributesArr: [],\r\n                    Attributes: [],\r\n                    Major: false,\r\n                    NeedsWork: false,\r\n                    DefaultsHash: {}\r\n                  });\r\n                  this.setState({\r\n                    _id: null,\r\n                    // Name: \"\",\r\n                    // Description: \"\",\r\n                    // Supers: [],\r\n                    // Attributes: [],\r\n                    // Major: false,\r\n                    fieldValidation: {\r\n                      Name: { valid: true, message: \"\" },\r\n                      AttributesArr: { valid: true, message: \"\" },\r\n                      Attributes: { valid: true, message: \"\" }\r\n                    },\r\n                    formValid: false,\r\n                    message: \"\",\r\n                    redirectTo: null,\r\n                    waiting: false,\r\n                    addMore: false,\r\n                    resetting: true,\r\n                    loaded: false\r\n                  }, this.resetForm);\r\n                } else if (this.state.addMore === \"next\") {\r\n                  this.redirectToNext();\r\n                } else {\r\n                  this.setState({\r\n                    waiting: false,\r\n                    redirectTo: `/project/details/${this.props.selectedWorld._id}`\r\n                  });\r\n                }\r\n              });\r\n            }\r\n            else if (res.error !== undefined) {\r\n              this.setState({\r\n                waiting: false, \r\n                message: res.error \r\n              }, () => {\r\n                this.props.logout();\r\n              });\r\n            }\r\n          })\r\n          .catch(err => console.log(err));\r\n      } else {\r\n        this.api\r\n          .updateType(type)\r\n          .then(res => {\r\n            if (res.error === undefined) {\r\n              this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n                this.props.setAttributes(res2.attributes);\r\n                this.props.setTypes(res2.types);\r\n                this.props.setThings(res2.things);\r\n\r\n                if (this.state.addMore === \"add\") {\r\n                  this.props.updateSelectedType({\r\n                    _id: null,\r\n                    Name: \"\",\r\n                    PluralName: \"\",\r\n                    Description: \"\",\r\n                    Supers: [],\r\n                    SuperIDs: [],\r\n                    AttributesArr: [],\r\n                    Attributes: [],\r\n                    Major: false,\r\n                    NeedsWork: false,\r\n                    DefaultsHash: {}\r\n                  });\r\n                  this.setState({\r\n                    _id: null,\r\n                    // Name: \"\",\r\n                    // Description: \"\",\r\n                    // Supers: [],\r\n                    // Attributes: [],\r\n                    // Major: false,\r\n                    fieldValidation: {\r\n                      Name: { valid: true, message: \"\" },\r\n                      AttributesArr: { valid: true, message: \"\" },\r\n                      Attributes: { valid: true, message: \"\" }\r\n                    },\r\n                    formValid: false,\r\n                    message: \"\",\r\n                    redirectTo: null,\r\n                    waiting: false,\r\n                    addMore: false,\r\n                    resetting: true,\r\n                    loaded: false\r\n                  }, this.resetForm);\r\n                } else if (this.state.addMore === \"next\") {\r\n                  this.redirectToNext();\r\n                } else {\r\n                  this.setState({\r\n                    waiting: false,\r\n                    redirectTo: `/project/details/${this.props.selectedWorld._id}`\r\n                  });\r\n                }\r\n              });\r\n            }\r\n            else {\r\n              this.setState({\r\n                waiting: false, \r\n                message: res.error \r\n              }, () => {\r\n                this.props.logout();\r\n              });\r\n            }\r\n          })\r\n          .catch(err => console.log(err));\r\n      }\r\n    });\r\n  }\r\n\r\n  supersChange = (e, value) => {\r\n    let supers = [];\r\n    for (let i = 0; i < value.length; i++) {\r\n      const t = value[i];\r\n      supers.push(t);\r\n      supers = supers.concat(t.Supers);\r\n    }\r\n    const type = this.props.selectedType;\r\n    type.Supers = supers;\r\n    this.props.updateSelectedType(type);\r\n    // this.setState({ Supers: supers });\r\n  }\r\n\r\n  addSuper = (selectedList, selectedItem) => {\r\n    const type = this.props.selectedType;\r\n    type.SuperIDs.push(selectedItem._id);\r\n    selectedItem.Supers.forEach(s => {\r\n      if (selectedList.filter(s2 => s2._id === s._id).length === 0) {\r\n        selectedList.push(s);\r\n        type.SuperIDs.push(s._id);\r\n      }\r\n    });\r\n    // We need to go through all the attributes on type, \r\n    // and make sure that none of them are also on a super type\r\n    let duplicateAttributes = [];\r\n    selectedList.forEach(t => {\r\n      duplicateAttributes = duplicateAttributes.concat(type.AttributesArr.filter(a => a.TypeIDs.includes(t._id)));\r\n    });\r\n    type.AttributesArr = type.AttributesArr.filter(a => duplicateAttributes.filter(d => d.attrID === a.attrID).length === 0);\r\n    \r\n    type.Supers = selectedList;\r\n    this.props.updateSelectedType(type);\r\n    // this.setState({ Supers: selectedList });\r\n  }\r\n\r\n  newAttribute = () => {\r\n    const type = this.props.selectedType;\r\n    type.AttributesArr.push({\r\n      index: type.AttributesArr.length,\r\n      attrID: `null_${uuid()}`,\r\n      Name: \"\",\r\n      AttributeType: \"Text\",\r\n      Options: [],\r\n      DefinedType: \"\",\r\n      ListType: \"\",\r\n      TypeIDs: []\r\n    });\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  addSelectedAttribute = () => {\r\n    const attr = this.props.attributesByID[this.state.browseAttributesSelected];\r\n    \r\n    const type = this.props.selectedType;\r\n    type.AttributesArr.push({\r\n      index: type.AttributesArr.length,\r\n      attrID: attr._id,\r\n      Name: attr.Name,\r\n      AttributeType: attr.AttributeType,\r\n      Options: attr.Options,\r\n      DefinedType: attr.DefinedType,\r\n      ListType: attr.ListType,\r\n      TypeIDs: attr.TypeIDs\r\n    });\r\n    this.props.updateSelectedType(type);\r\n    this.setState({ \r\n      browseAttributesSelected: \"\",\r\n      browseTypesSelected: \"\" \r\n    });\r\n  }\r\n\r\n  addBrowsedType = (typeID) => {\r\n    const type = this.props.selectedType;\r\n    let attrType = this.props.types.filter(t => t._id === typeID)[0];\r\n    \r\n    type.SuperIDs.push(attrType._id);\r\n    const selectedList = type.Supers;\r\n    selectedList.push(attrType);\r\n\r\n    attrType.Supers.forEach(s => {\r\n      if (selectedList.filter(s2 => s2._id === s._id).length === 0) {\r\n        selectedList.push(s);\r\n        type.SuperIDs.push(s._id);\r\n      }\r\n    });\r\n    // We need to go through all the attributes on type, \r\n    // and make sure that none of them are also on a super type\r\n    let duplicateAttributes = [];\r\n    selectedList.forEach(t => {\r\n      duplicateAttributes = duplicateAttributes.concat(type.AttributesArr.filter(a => a.TypeIDs.includes(t._id)));\r\n    });\r\n    type.AttributesArr = type.AttributesArr.filter(a => duplicateAttributes.filter(d => d.attrID === a.attrID).length === 0);\r\n    \r\n    type.Supers = [];\r\n    this.props.updateSelectedType(type);\r\n    // this.setState({ Supers: [] });\r\n    setTimeout(() => {\r\n      type.Supers = selectedList;\r\n      this.props.updateSelectedType(type);\r\n      this.setState({ \r\n        browseAttributesSelected: \"\", \r\n        browseTypesSelected: \"\", \r\n        // Supers: selectedList \r\n      });\r\n    }, 500);\r\n  }\r\n  \r\n  removeSuper = (selectedList, removedItem) => {\r\n    let supers = [];\r\n    let superIDs = [];\r\n    let removeUs = [removedItem._id];\r\n    const type = this.props.selectedType;\r\n    for (let i = 0; i < type.Supers.length; i++) {\r\n      const checkMe = this.props.types.filter(\r\n        t => t._id === type.Supers[i]._id\r\n      )[0];\r\n      if (checkMe._id === removedItem._id || checkMe.SuperIDs.includes(removedItem._id))\r\n        removeUs.push(checkMe._id);\r\n      else {\r\n        supers.push(checkMe);\r\n        superIDs.push(checkMe._id);\r\n      }\r\n    }\r\n    type.Supers = []; // supers;\r\n    type.SuperIDs = []; // superIDs;\r\n    this.props.updateSelectedType(type);\r\n    this.setState({ \r\n      // Supers: supers, \r\n      loaded: false \r\n    });\r\n    setTimeout(() => {\r\n      type.Supers = supers;\r\n      type.SuperIDs =  superIDs;\r\n      this.props.updateSelectedType(type);\r\n      this.setState({ loaded: true });\r\n    }, 500);\r\n  }\r\n\r\n  redirectToNext = () => {\r\n    // Find the next type\r\n    let index = 0;\r\n    if (this.props.selectedType === undefined || this.props.selectedType._id !== null) {\r\n      while (this.props.types[index]._id !== this.props.selectedType._id)\r\n        index++;\r\n      index++;\r\n    }\r\n    if (index === this.props.types.length)\r\n      index = 0;\r\n    this.setState({ \r\n      waiting: false, \r\n      redirectTo: `/type/edit/${this.props.types[index]._id}` \r\n    });\r\n  }\r\n\r\n  load = (id) => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        _id: id,\r\n        redirectTo: null,\r\n        loaded: false,\r\n        message: \"Loading...\"\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    const id = this.state._id;\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n      this.setState({\r\n        _id: id,\r\n        loaded: true,\r\n        message: \"\"\r\n      });\r\n    }\r\n    else {\r\n      if (this.props.selectedWorldID) {\r\n        this.api.getWorld(this.props.selectedWorldID).then(res => {\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n          if (id !== null) {\r\n            let type = res.types.filter(t => t._id === id);\r\n            if (type.length > 0) {\r\n              type = type[0];\r\n\r\n              this.api.upsertView({ \r\n                userID: this.props.user._id, \r\n                worldID: this.props.selectedWorldID, \r\n                objectType: \"Type\",\r\n                objectID: type._id\r\n              });\r\n\r\n              const supers = this.props.types.filter(t =>\r\n                type.SuperIDs.includes(t._id)\r\n              );\r\n              type.Supers = supers;\r\n              this.props.updateSelectedType(type);\r\n              this.setState({\r\n                // Name: type.Name,\r\n                // Description: type.Description,\r\n                _id: id,\r\n                // Supers: supers,\r\n                // Major: type.Major,\r\n                loaded: true,\r\n                message: \"\"\r\n              });\r\n            }\r\n            else {\r\n              this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n                this.props.setAttributes(res2.attributes);\r\n                this.props.setTypes(res2.types);\r\n                this.props.setThings(res2.things);\r\n                if (id !== null) {\r\n                  let type = res2.types.filter(t => t._id === id);\r\n                  if (type.length > 0) {\r\n                    type = type[0];\r\n        \r\n                    const supers = this.props.types.filter(t =>\r\n                      type.SuperIDs.includes(t._id)\r\n                    );\r\n                    type.Supers = supers;\r\n                    this.props.updateSelectedType(type);\r\n                    this.setState({\r\n                      // Name: type.Name,\r\n                      // Description: type.Description,\r\n                      _id: id,\r\n                      // Supers: supers,\r\n                      // Major: type.Major,\r\n                      loaded: true,\r\n                      message: \"\"\r\n                    });\r\n                  }\r\n                  else {\r\n                    // I had it get here with an ID from Cosmere, when I was supposed to be looking at a Type from Ozzie.\r\n                    // Need to figure out how it got the wrong ID.\r\n                    this.setState({ \r\n                      message: `Invalid ID: ${id}`, \r\n                      loaded: true \r\n                    });\r\n                  }\r\n                } else {\r\n                  this.props.updateSelectedType({\r\n                    _id: null,\r\n                    Name: \"\",\r\n                    PluralName: \"\",\r\n                    Description: \"\",\r\n                    Supers: [],\r\n                    SuperIDs: [],\r\n                    AttributesArr: [],\r\n                    Attributes: [],\r\n                    Major: false,\r\n                    NeedsWork: false,\r\n                    DefaultsHash: {}\r\n                  });\r\n                  this.setState({ \r\n                    message: \"\", \r\n                    loaded: true \r\n                  });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.props.updateSelectedType({\r\n              _id: null,\r\n              Name: \"\",\r\n              PluralName: \"\",\r\n              Description: \"\",\r\n              Supers: [],\r\n              SuperIDs: [],\r\n              AttributesArr: [],\r\n              Attributes: [],\r\n              Major: false,\r\n              NeedsWork: false,\r\n              DefaultsHash: {}\r\n            });\r\n            this.setState({ \r\n              message: \"\",\r\n              loaded: true \r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.api.getWorldByTypeID(id).then((res) => {\r\n          this.props.selectWorld(res.worldID);\r\n          this.props.setAttributes(res.attributes);\r\n          this.props.setTypes(res.types);\r\n          this.props.setThings(res.things);\r\n          if (id !== null) {\r\n            let type = res.types.filter(t => t._id === id);\r\n            if (type.length > 0) {\r\n              type = type[0];\r\n\r\n              const supers = this.props.types.filter(t =>\r\n                type.SuperIDs.includes(t._id)\r\n              );\r\n              type.Supers = supers;\r\n              this.props.updateSelectedType(type);\r\n              this.setState({\r\n                // Name: type.Name,\r\n                // Description: type.Description,\r\n                _id: id,\r\n                // Supers: supers,\r\n                // Major: type.Major,\r\n                loaded: true,\r\n                message: \"\"\r\n              });\r\n            }\r\n            else {\r\n              this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n                this.props.setAttributes(res2.attributes);\r\n                this.props.setTypes(res2.types);\r\n                this.props.setThings(res2.things);\r\n                if (id !== null) {\r\n                  let type = res2.types.filter(t => t._id === id);\r\n                  if (type.length > 0) {\r\n                    type = type[0];\r\n        \r\n                    const supers = this.props.types.filter(t =>\r\n                      type.SuperIDs.includes(t._id)\r\n                    );\r\n                    type.Supers = supers;\r\n                    this.props.updateSelectedType(type);\r\n                    this.setState({\r\n                      // Name: type.Name,\r\n                      // Description: type.Description,\r\n                      _id: id,\r\n                      // Supers: supers,\r\n                      // Major: type.Major,\r\n                      loaded: true,\r\n                      message: \"\"\r\n                    });\r\n                  }\r\n                  else {\r\n                    // I had it get here with an ID from Cosmere, when I was supposed to be looking at a Type from Ozzie.\r\n                    // Need to figure out how it got the wrong ID.\r\n                    this.setState({ \r\n                      message: `Invalid ID: ${id}`, \r\n                      loaded: true \r\n                    });\r\n                  }\r\n                } else {\r\n                  this.props.updateSelectedType({\r\n                    _id: null,\r\n                    Name: \"\",\r\n                    PluralName: \"\",\r\n                    Description: \"\",\r\n                    Supers: [],\r\n                    SuperIDs: [],\r\n                    AttributesArr: [],\r\n                    Attributes: [],\r\n                    Major: false,\r\n                    NeedsWork: false,\r\n                    DefaultsHash: {}\r\n                  });\r\n                  this.setState({ \r\n                    message: \"\", \r\n                    loaded: true \r\n                  });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.props.updateSelectedType({\r\n              _id: null,\r\n              Name: \"\",\r\n              PluralName: \"\",\r\n              Description: \"\",\r\n              Supers: [],\r\n              SuperIDs: [],\r\n              AttributesArr: [],\r\n              Attributes: [],\r\n              Major: false,\r\n              NeedsWork: false,\r\n              DefaultsHash: {}\r\n            });\r\n            this.setState({ \r\n              message: \"\",\r\n              loaded: true \r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  changeDefault = value => {\r\n    const type = this.props.selectedType;\r\n    type.DefaultsHash[value.attrID] = {\r\n      attrID: value.attrID,\r\n      DefaultValue: value.DefaultValue,\r\n      DefaultListValues: value.DefaultListValues,\r\n      FromTypeIDs: value.FromTypeIDs\r\n    };\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  newAttribute = () => {\r\n    const type = this.props.selectedType;\r\n    type.AttributesArr.push({\r\n      index: type.AttributesArr.length,\r\n      attrID: `null_${uuid()}`,\r\n      Name: \"\",\r\n      AttributeType: \"Text\",\r\n      Options: [],\r\n      DefinedType: \"\",\r\n      ListType: \"\"\r\n    });\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  changeAttribute = value => {\r\n    const type = this.props.selectedType;\r\n    type.AttributesArr[value.index] = {\r\n      index: value.index,\r\n      attrID: value.attrID,\r\n      Name: value.Name,\r\n      AttributeType: value.AttributeType,\r\n      Options: value.Options,\r\n      DefinedType: value.DefinedType,\r\n      ListType: value.ListType,\r\n    };\r\n    this.props.updateSelectedType(type);\r\n  }\r\n\r\n  deleteAttribute = value => {\r\n    const type = this.props.selectedType;\r\n    const attributes = [];\r\n    type.AttributesArr.forEach(t => {\r\n      if (t.index !== value.index) {\r\n        if (t.index > value.index)\r\n          t.index--;\r\n        attributes.push(t);\r\n      }\r\n    });\r\n    type.AttributesArr = [];\r\n    let defaults = {...type.DefaultsHash};\r\n    if (defaults[value.attrID] !== undefined) {\r\n      delete defaults[value.attrID];\r\n    }\r\n    type.DefaultsHash = {};\r\n    this.props.updateSelectedType(type);\r\n    setTimeout(() => {\r\n      type.AttributesArr = attributes;\r\n      type.DefaultsHash = defaults;\r\n      this.props.updateSelectedType(type);\r\n    }, 500);\r\n  }\r\n\r\n  renderAttributes = () => {\r\n    return (\r\n      <AttributesControl \r\n        defaultsMode={this.state.defaultsMode} \r\n        addNewType={attribute => {\r\n          this.setState({ \r\n            typeModalOpen: true,\r\n            putTypeOnAttribute: attribute\r\n          });\r\n        }}\r\n        addNewThing={attribute => {\r\n          this.setState({ \r\n            thingModalOpen: true,\r\n            newThingType: this.props.types.filter(t => t._id === attribute.DefinedType)[0],\r\n            putThingOnAttribute: attribute\r\n          });\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { id } = this.props.match.params;\r\n    if (id === undefined)\r\n      id = null;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading...</span>);\r\n    }\r\n    else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      (this.props.selectedWorld.Owner !== this.props.user._id && \r\n          this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\" && c.editPermission).length === 0)) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (this.props.selectedType === null || this.props.selectedType._id !== id) {\r\n      return <span>{this.state.message}</span>;\r\n    } else if (this.state.typeModalOpen) {\r\n      return (\r\n        <NewTypeModal \r\n          types={this.props.types}\r\n          selectedWorldID={this.props.selectedWorldID}\r\n          onCancel={_ => {\r\n            this.setState({\r\n              typeModalOpen: false\r\n            });\r\n          }}\r\n          addType={type => {\r\n            this.props.addType(type);\r\n          }}\r\n          onSave={newType => {\r\n            const type = this.props.selectedType;\r\n            const attr = type.AttributesArr.filter(a => a.attrID === this.state.putTypeOnAttribute.attrID)[0];\r\n            attr.DefinedType = newType._id;\r\n            this.props.updateSelectedType(type);\r\n            this.setState({\r\n              typeModalOpen: false\r\n            });\r\n          }}\r\n          api={this.api}\r\n          logout={() => {\r\n            this.props.logout();\r\n          }}\r\n        />\r\n      );\r\n    } else if (this.state.thingModalOpen) {\r\n      return (\r\n        <NewThingModal \r\n          things={this.props.things}\r\n          newThingType={this.state.newThingType}\r\n          selectedWorldID={this.props.selectedWorldID}\r\n          onCancel={_ => {\r\n            this.setState({\r\n              thingModalOpen: false\r\n            });\r\n          }}\r\n          addThing={thing => {\r\n            this.props.addThing(thing);\r\n          }}\r\n          onSave={thing => {\r\n            this.setState({\r\n              thingModalOpen: false\r\n            }, _ => {\r\n              // Need to put it on putThingOnAttribute\r\n              const type = this.props.selectedType;\r\n              const attr = type.AttributesArr.filter(a => a.attrID === this.state.putThingOnAttribute.attrID)[0];\r\n              let def = this.props.selectedType.DefaultsHash[attr.attrID];\r\n              if (def === undefined)\r\n                def = { attrID: attr.attrID, DefaultValue: \"\", DefaultListValues: [] };\r\n              if (attr.AttributeType === \"Type\") {\r\n                def.DefaultValue = thing._id;\r\n              }\r\n              else {\r\n                // The only way it can be here is if it's List and ListType is Type\r\n                def.DefaultListValues.push(thing._id);\r\n              }\r\n              this.props.updateSelectedType(type);\r\n            });\r\n          }}\r\n          api={this.api}\r\n          logout={() => {\r\n            this.props.logout();\r\n          }}\r\n        />\r\n      );\r\n    } else {\r\n      const formHeight = this.props.height - (this.props.width > 600 ? 260 : 300);\r\n      const types =\r\n        this.props.types === undefined || this.state._id === null\r\n          ? this.props.types\r\n          : this.props.types.filter(type => type._id !== this.state._id);\r\n      let additionalAttributes = [];\r\n      let selectedAttributeTypes = [];\r\n      let selectedAttributeName = \"\";\r\n      if (this.state.browseAttributes) {\r\n        Object.keys(this.props.attributesByID).forEach(id => {\r\n          const attr = this.props.attributesByID[id];\r\n          if (!attr.TypeIDs.includes(this.props.selectedType._id) && \r\n            this.props.selectedType.AttributesArr.filter(a => a.attrID === attr._id).length === 0) { // This second condition will make newly added attributes not show up.\r\n            let found = false;\r\n            for (let i = 0; i < this.props.selectedType.Supers.length; i++) {\r\n              if (attr.TypeIDs.includes(this.props.selectedType.Supers[i]._id)) {\r\n                found = true;\r\n                break;\r\n              }\r\n            }\r\n            if (!found) {\r\n              additionalAttributes.push({\r\n                _id: attr._id,\r\n                Name: attr.Name\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        if (this.state.browseAttributesSelected !== \"\") {\r\n          selectedAttributeName = this.props.attributesByID[this.state.browseAttributesSelected].Name;\r\n          selectedAttributeTypes = this.props.types.filter(t => this.props.attributesByID[this.state.browseAttributesSelected].TypeIDs.includes(t._id));\r\n        }\r\n      }\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      return (\r\n        <Grid item xs={12} container spacing={1} direction=\"column\">\r\n          { this.props.selectedWorld === null ? \"\" :\r\n            <Grid item container spacing={1} direction=\"column\">\r\n              <Helmet>\r\n                <title>{ `Author's Notebook: ${this.props.selectedWorld.Name}` }</title>\r\n              </Helmet>\r\n              { this.props.types.length > 1 ?\r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={2}>\r\n                    <Tooltip title={`Back to ${this.props.selectedWorld.Name}`}>\r\n                      <Fab size=\"small\"\r\n                        color=\"primary\"\r\n                        onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                      >\r\n                        <ArrowBack />\r\n                      </Fab>\r\n                    </Tooltip>\r\n                  </Grid>\r\n                  <Grid item xs={5} sm={7}>\r\n                    <h4>{this.state._id === null ? \"Create New Type\" : \"Edit Type\"}</h4>\r\n                  </Grid>\r\n                  <Grid item xs={5} sm={3}>\r\n                    <ListItem>\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={_ => {\r\n                          this.redirectToNext();\r\n                        }}\r\n                      >\r\n                        <ListItemText primary=\"Next Type\"/>\r\n                      </Button>\r\n                    </ListItem>\r\n                  </Grid>\r\n                </Grid>\r\n              :\r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={2}>\r\n                    <Tooltip title={`Back to ${this.props.selectedWorld.Name}`}>\r\n                      <Fab size=\"small\"\r\n                        color=\"primary\"\r\n                        onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                      >\r\n                        <ArrowBack />\r\n                      </Fab>\r\n                    </Tooltip>\r\n                  </Grid>\r\n                  <Grid item xs={10}>\r\n                    <h4>{this.state._id === null ? \"Create New Type\" : \"Edit Type\"}</h4>\r\n                  </Grid>\r\n                </Grid>\r\n              }\r\n              { !this.state.resetting &&\r\n                <Grid item style={{ height: `${formHeight}px`, overflowY: \"scroll\", overflowX: \"hidden\" }}>\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      { this.state.loaded &&  \r\n                        <TextBox \r\n                          Value={this.props.selectedType.Name} \r\n                          fieldName=\"Name\" \r\n                          message={this.state.fieldValidation.Name.message}\r\n                          onBlur={name => {\r\n                            const type = this.props.selectedType;\r\n                            type.Name = name;\r\n                            this.props.updateSelectedType(type);\r\n                            this.validateForm();\r\n                            // this.setState({ Name: name }, \r\n                            //   this.validateForm);\r\n                          }}\r\n                          labelWidth={43}/>\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      { this.state.loaded &&  \r\n                        <TextBox \r\n                          Value={this.props.selectedType.PluralName} \r\n                          fieldName=\"PluralName\" \r\n                          displayName=\"Plural Name\" \r\n                          onBlur={name => {\r\n                            const type = this.props.selectedType;\r\n                            type.PluralName = name;\r\n                            this.props.updateSelectedType(type);\r\n                            this.validateForm();\r\n                            // this.setState({ Name: name }, \r\n                            //   this.validateForm);\r\n                          }}\r\n                          labelWidth={85}/>\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      { this.state.loaded &&  \r\n                        <TextBox \r\n                          Value={this.props.selectedType.Description} \r\n                          fieldName=\"Description\" \r\n                          multiline={true}\r\n                          onBlur={desc => {\r\n                            const type = this.props.selectedType;\r\n                            type.Description = desc;\r\n                            this.props.updateSelectedType(type);\r\n                          }}\r\n                          labelWidth={82}\r\n                          options={suggestions}\r\n                        />\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox \r\n                            icon={\r\n                              <img style={{ opacity: \"0.5\", height: \"30px\" }} src={UnderConstruction} alt=\"No Work Planned\" /> \r\n                            } \r\n                            checkedIcon={\r\n                              <img style={{ height: \"30px\" }} src={UnderConstruction} alt=\"Needs Work\" />\r\n                            }\r\n                            checked={this.props.selectedType.NeedsWork}\r\n                            onChange={ e => {\r\n                              const value = e.target.checked;\r\n                              const type = this.props.selectedType;\r\n                              type.NeedsWork = value;\r\n                              this.props.updateSelectedType(type);\r\n                              // this.setState({ [name]: value });\r\n                              // this.handleUserInput(e);\r\n                            }}\r\n                            name=\"NeedsWork\"\r\n                          />\r\n                        }\r\n                        label=\"Needs Work\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            checked={this.props.selectedType.Major}\r\n                            onChange={ e => {\r\n                              const value = e.target.checked;\r\n                              const type = this.props.selectedType;\r\n                              type.Major = value;\r\n                              this.props.updateSelectedType(type);\r\n                              // this.setState({ [name]: value });\r\n                              // this.handleUserInput(e);\r\n                            }}\r\n                            name=\"Major\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Major Type\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Multiselect\r\n                        placeholder=\"Super Types\"\r\n                        options={types}\r\n                        selectedValues={this.props.selectedType.Supers}\r\n                        onSelect={this.addSuper}\r\n                        onRemove={this.removeSuper}\r\n                        displayValue=\"Name\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item container spacing={0} direction=\"row\">\r\n                      <Grid item xs={6}>\r\n                        <span>Attributes&nbsp;\r\n                          <Tooltip \r\n                            title={`Add New Attribute`}>\r\n                            <span>\r\n                              <Fab size=\"small\"\r\n                                color=\"primary\"\r\n                                disabled={this.state.defaultsMode}\r\n                                onClick={ _ => { this.newAttribute()}}\r\n                              >\r\n                                <Add />\r\n                              </Fab>\r\n                            </span>\r\n                          </Tooltip>\r\n                          <Tooltip \r\n                            title={`Browse Additional Attributes`}>\r\n                            <span>\r\n                              <Fab\r\n                                size=\"small\"\r\n                                color=\"primary\" \r\n                                disabled={this.state.defaultsMode}\r\n                                onClick={e => {\r\n                                  this.setState({ browseAttributes: !this.state.browseAttributes });\r\n                                }}\r\n                              >\r\n                                <Search />\r\n                              </Fab>\r\n                            </span>\r\n                          </Tooltip>\r\n                        </span>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={e => { this.setState({defaultsMode: !this.state.defaultsMode}) }}>\r\n                          { this.state.defaultsMode ? \"Set Attribute Types\" : \"Set Defaults\"}\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                    { this.state.browseAttributes && \r\n                      <Grid item container spacing={1} direction=\"row\">\r\n                        <Grid item xs={12} sm={6}>\r\n                          <FormControl variant=\"outlined\" fullWidth>\r\n                            <InputLabel htmlFor=\"browseForAttributes\" id=\"browseForAttributes-label\">\r\n                              Browse Attributes\r\n                            </InputLabel>\r\n                            <Select\r\n                              labelId=\"browseForAttributes-label\"\r\n                              id=\"browseForAttributes\"\r\n                              value={this.state.browseAttributesSelected}\r\n                              onChange={e => {\r\n                                this.setState({ browseAttributesSelected: e.target.value });\r\n                              }}\r\n                              fullWidth\r\n                              labelWidth={130}\r\n                            >\r\n                              {\r\n                                additionalAttributes.map((attr, i) => {\r\n                                  return (\r\n                                    <MenuItem key={i} value={attr._id}>\r\n                                      {attr.Name}\r\n                                    </MenuItem>\r\n                                  );\r\n                                })\r\n                              }\r\n                            </Select>\r\n                          </FormControl>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                          <Button\r\n                            variant=\"contained\" color=\"primary\"\r\n                            disabled={ this.state.browseAttributesSelected === \"\" }\r\n                            onClick={e => {this.addSelectedAttribute();}}\r\n                            type=\"submit\"\r\n                          >\r\n                            Add Attribute\r\n                          </Button>\r\n                        </Grid>\r\n                        { selectedAttributeTypes.length === 1 ?\r\n                          <Grid style={{color: \"red\"}} item xs={12} container spacing={1} direction=\"row\">\r\n                            <Grid item xs={12}>\r\n                              This Attribute is also found on the Type '{selectedAttributeTypes[0].Name}'.  You may want to add '{selectedAttributeTypes[0].Name}' as a Super Type instead of adding the Attribute.\r\n                            </Grid>                      \r\n                            <Grid item xs={12} sm={6}>\r\n                              <Button\r\n                                variant=\"contained\" color=\"primary\"\r\n                                onClick={e => {this.addBrowsedType(selectedAttributeTypes[0]._id);}}\r\n                                type=\"submit\"\r\n                              >\r\n                                Add {selectedAttributeTypes[0].Name}\r\n                              </Button>\r\n                            </Grid>\r\n                          </Grid>\r\n                        : selectedAttributeTypes.length > 1 &&\r\n                          <Grid style={{color: \"red\"}} item xs={12} container spacing={1} direction=\"row\">\r\n                            <Grid item xs={12}>\r\n                              This Attribute is also found on other Types.  You may want to add one as a Super Type instead of adding the Attribute.\r\n                            </Grid>                      \r\n                            <Grid item xs={12} sm={6}>\r\n                              <FormControl variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"browseTypesWithAttribute\" id=\"browseTypesWithAttribute-label\">\r\n                                  Browse Types with {selectedAttributeName}\r\n                                </InputLabel>\r\n                                <Select\r\n                                  labelId=\"browseTypesWithAttribute-label\"\r\n                                  id=\"browseTypesWithAttribute\"\r\n                                  value={this.state.browseTypesSelected}\r\n                                  onChange={e => {\r\n                                    this.setState({ browseTypesSelected: e.target.value });\r\n                                  }}\r\n                                  fullWidth\r\n                                  labelWidth={140 + selectedAttributeName.length * 9}\r\n                                >\r\n                                  { selectedAttributeTypes.map((type, i) => {\r\n                                    return (\r\n                                      <MenuItem key={i} value={type._id}>\r\n                                        {type.Name}\r\n                                      </MenuItem>\r\n                                    );\r\n                                  })}\r\n                                </Select>\r\n                              </FormControl>\r\n                            </Grid>\r\n                            <Grid item xs={12} sm={6}>\r\n                              <Button\r\n                                variant=\"contained\" color=\"primary\"\r\n                                disabled={ this.state.browseTypesSelected === \"\" }\r\n                                onClick={e => {this.addBrowsedType(this.state.browseTypesSelected);}}\r\n                                type=\"submit\"\r\n                              >\r\n                                Add Type\r\n                              </Button>\r\n                            </Grid>\r\n                          </Grid>\r\n                        }\r\n                      </Grid>\r\n                    }\r\n                    <Grid item>\r\n                      { this.state.loaded &&\r\n                        this.renderAttributes()\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      {Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n                        if (\r\n                          this.state.fieldValidation[fieldName] !== undefined &&\r\n                          this.state.fieldValidation[fieldName].message.length > 0\r\n                        ) {\r\n                          return (\r\n                            <p className=\"redFont\" key={i}>\r\n                              {this.state.fieldValidation[fieldName].message}\r\n                            </p>\r\n                          );\r\n                        } else {\r\n                          return \"\";\r\n                        }\r\n                      })}\r\n                    </Grid>\r\n                    <Grid item style={{color:\"red\"}}>{this.state.message}</Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              }\r\n              { this.props.types.length > 0 ?\r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={12} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"next\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Edit Next\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"add\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Create Another\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={_ => {\r\n                        if (this.props.selectedType._id === null) {\r\n                          this.setState({\r\n                            redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n                          });\r\n                        }\r\n                        else {\r\n                          this.setState({\r\n                            redirectTo: `/type/details/${this.props.selectedType._id}`\r\n                          });\r\n                        }\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              : \r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={12} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"add\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Create Another\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={_ => {\r\n                        if (this.props.selectedType._id === null) {\r\n                          this.setState({\r\n                            redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n                          });\r\n                        }\r\n                        else {\r\n                          this.setState({\r\n                            redirectTo: `/type/details/${this.props.selectedType._id}`\r\n                          });\r\n                        }\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              }\r\n            </Grid>\r\n          }\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst TypeEditPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default TypeEditPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n// import clsx from 'clsx';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { \r\n  Button, ListItemText\r\n} from \"@material-ui/core\";\r\n\r\nlet rows = [];\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nfunction ThingTableHead(props) {\r\n  const { classes, order, orderBy, onRequestSort, columnMap } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        {columnMap.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? 'right' : 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nThingTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n  columnMap: PropTypes.array.isRequired\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nconst ThingTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const { label } = props;\r\n\r\n  return (\r\n    <Toolbar>\r\n      <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n        {label}\r\n      </Typography>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nThingTableToolbar.propTypes = {\r\n  // numSelected: PropTypes.number.isRequired,\r\n  label: PropTypes.string.isRequired\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    // minWidth: 750,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function ThingTable(props) {\r\n  const columnMap = [\r\n    { \r\n      id: 'Name', \r\n      numeric: false, \r\n      disablePadding: true, \r\n      label: 'Name' \r\n    },\r\n    { \r\n      id: 'Description', \r\n      numeric: false, \r\n      disablePadding: true, \r\n      label: 'Description' \r\n    }\r\n  ];\r\n  rows = [];\r\n  props.things.forEach(thing => {\r\n    const newRow = {\r\n      _id: thing._id,\r\n      Name: thing.Name,\r\n      Description: thing.Description\r\n    };\r\n    thing.Attributes.forEach(attr => {\r\n      const attribute = props.attributesByID[attr.attrID];\r\n      if (attribute.AttributeType === \"Type\") {\r\n        let attrThing = props.allThings.filter(t => t._id === attr.Value);\r\n        if (attrThing.length > 0) {\r\n          attrThing = attrThing[0];\r\n          newRow[attr.attrID] = attrThing.Name;\r\n        }\r\n      } else if (attribute.AttributeType === \"List\") {\r\n        newRow[attr.attrID] = \"\";\r\n        if (attribute.ListType === \"Type\") {\r\n          attr.ListValues.forEach(v => {\r\n            let attrThing = props.allThings.filter(t => t._id === v);\r\n            if (attrThing.length > 0) {\r\n              attrThing = attrThing[0];\r\n              newRow[attr.attrID] += (newRow[attr.attrID].length > 0 ? \", \" : \"\") + attrThing.Name;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          attr.ListValues.forEach(v => {\r\n            newRow[attr.attrID] += (newRow[attr.attrID].length > 0 ? \", \" : \"\") + v;\r\n          });\r\n        }\r\n      } else {\r\n        newRow[attr.attrID] = attr.Value;\r\n      }\r\n      if (columnMap.filter(c => c.id === attr.attrID).length === 0) {\r\n        columnMap.push({\r\n          id: attribute._id, \r\n          numeric: attribute.Type === \"Number\", \r\n          disablePadding: true, \r\n          label: attribute.Name\r\n        });\r\n      }\r\n    });\r\n    rows.push(newRow);\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const [order, setOrder] = React.useState('asc');\r\n  const [orderBy, setOrderBy] = React.useState('Name');\r\n  const [selected, setSelected] = React.useState([]);\r\n  const [page, setPage] = React.useState(0);\r\n  // const [dense, setDense] = React.useState(false);\r\n  const dense = true;\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  // const handleClick = (event, name) => {\r\n  //   const selectedIndex = selected.indexOf(name);\r\n  //   let newSelected = [];\r\n\r\n  //   if (selectedIndex === -1) {\r\n  //     newSelected = newSelected.concat(selected, name);\r\n  //   } else if (selectedIndex === 0) {\r\n  //     newSelected = newSelected.concat(selected.slice(1));\r\n  //   } else if (selectedIndex === selected.length - 1) {\r\n  //     newSelected = newSelected.concat(selected.slice(0, -1));\r\n  //   } else if (selectedIndex > 0) {\r\n  //     newSelected = newSelected.concat(\r\n  //       selected.slice(0, selectedIndex),\r\n  //       selected.slice(selectedIndex + 1),\r\n  //     );\r\n  //   }\r\n\r\n  //   setSelected(newSelected);\r\n  // };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  // const handleChangeDense = (event) => {\r\n  //   setDense(event.target.checked);\r\n  // };\r\n\r\n  const isSelected = (name) => selected.indexOf(name) !== -1;\r\n\r\n  // const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box display={{ xs: 'none', sm: 'block' }}>\r\n        <Paper className={classes.paper}>\r\n          <ThingTableToolbar label={props.label} />\r\n          <TableContainer>\r\n            <Table\r\n              className={classes.table}\r\n              aria-labelledby=\"tableTitle\"\r\n              size={dense ? 'small' : 'medium'}\r\n              aria-label=\"enhanced table\"\r\n            >\r\n              <ThingTableHead\r\n                classes={classes}\r\n                numSelected={selected.length}\r\n                order={order}\r\n                orderBy={orderBy}\r\n                onSelectAllClick={handleSelectAllClick}\r\n                onRequestSort={handleRequestSort}\r\n                rowCount={rows.length}\r\n                columnMap={columnMap}\r\n              />\r\n              <TableBody>\r\n                {stableSort(rows, getComparator(order, orderBy))\r\n                  .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                  .map((row, index) => {\r\n                    const isItemSelected = isSelected(row.name);\r\n                    \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={index}\r\n                        selected={isItemSelected}\r\n                      >\r\n                        {columnMap.map((column, key) => {\r\n                          return (\r\n                            <TableCell key={key}>\r\n                              {column.id === \"Name\" ?\r\n                                <Button\r\n                                  variant=\"contained\"\r\n                                  color=\"primary\"\r\n                                  onClick={ _ => { props.buttonClick(row._id)}}\r\n                                >\r\n                                  <ListItemText primary={row.Name}/>\r\n                                </Button>\r\n                              :\r\n                                <span>{row[column.id]}</span>\r\n                              }\r\n                            </TableCell>\r\n                          );\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          { rows.length > 5 &&\r\n            <TablePagination\r\n              rowsPerPageOptions={[5, 10, 25]}\r\n              component=\"div\"\r\n              count={rows.length}\r\n              rowsPerPage={rowsPerPage}\r\n              page={page}\r\n              onChangePage={handleChangePage}\r\n              onChangeRowsPerPage={handleChangeRowsPerPage}\r\n            />\r\n          }\r\n        </Paper>\r\n      </Box>\r\n      <Box display={{ xs: 'block', sm: 'none' }}>\r\n        { props.label }: \r\n        { props.things.map((thing, i) => {\r\n          return (\r\n            <Button key={i} style={{ marginLeft: \"4px\" }}\r\n              variant=\"contained\" color=\"primary\"\r\n              onClick={ _ => { props.buttonClick(thing._id)}}>\r\n              <ListItemText primary={thing.Name}/>\r\n            </Button>\r\n          );\r\n        })}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { ArrowBack, Edit, Delete } from \"@material-ui/icons\";\r\nimport { \r\n  Fab, Tooltip, Modal, Grid, Button, \r\n  List, ListItem, ListItemText, Box\r\n} from \"@material-ui/core\";\r\nimport { Helmet } from 'react-helmet';\r\nimport {\r\n  updateSelectedThing,\r\n  addThing,\r\n  updateThing,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  setAllUsers,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  logout,\r\n  selectWorld\r\n} from \"../../redux/actions/index\";\r\nimport API from \"../../smartAPI\";\r\nimport ThingTable from \"../../components/Displays/ThingTable\";\r\nimport CommentsControl from \"../../components/Inputs/CommentsControl\";\r\nimport UnderConstruction from \"../../assets/img/under_construction.png\";\r\n\r\nconst mapStateToProps = state => {\r\n  const thing = state.app.selectedThing;\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedThing: thing,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    types: state.app.types,\r\n    things: state.app.things,\r\n    user: state.app.user,\r\n    attributesByID: state.app.attributesByID,\r\n    fromLogin: state.app.fromLogin,\r\n    allUsers: state.app.allUsers,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedThing: thing => dispatch(updateSelectedThing(thing)),\r\n    addThing: thing => dispatch(addThing(thing)),\r\n    updateThing: thing => dispatch(updateThing(thing)),\r\n    setAttributes: attrs => dispatch(setAttributes(attrs)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    setAllUsers: allUsers => dispatch(setAllUsers(allUsers)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    selectWorld: worldID => dispatch(selectWorld(worldID))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      _id: null,\r\n      Name: \"\",\r\n      Description: \"\",\r\n      Types: [],\r\n      AttributesArr: [],\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" },\r\n        AttributesArr: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      modalOpen: false,\r\n      majorType: null\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  getModalStyle = () => {\r\n    const top = Math.round(window.innerHeight / 2) - 50;\r\n    const left = Math.round(window.innerWidth / 2) - 200;\r\n  \r\n    return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(${left}px, ${top}px)`,\r\n    };\r\n  }\r\n\r\n  delete = e => {\r\n    this.setState({ waiting: true }, this.finishDelete);\r\n  }\r\n\r\n  finishDelete = e => {\r\n    this.api.deleteThing(this.props.selectedWorldID, this.state._id).then(res=>{\r\n      if (res.error === undefined) {\r\n        this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n          this.props.setAttributes(res2.attributes);\r\n          this.props.setTypes(res2.types);\r\n          this.props.setThings(res2.things);\r\n\r\n          this.setState({ waiting: false, redirectTo: `/project/details/${this.props.selectedWorldID}`});\r\n        });\r\n      }\r\n      else {\r\n        this.setState({ waiting: false, message: res.error }, () => {\r\n          this.props.logout();\r\n        });\r\n      }\r\n      // const things = this.props.things.filter(t=>t._id!==this.state._id);\r\n      // this.props.setThings(things);\r\n      // this.setState({redirectTo: `/project/details/${this.props.selectedWorldID}`})\r\n    });\r\n  }\r\n\r\n  redirectToNext = () => {\r\n    // Find the next thing\r\n    const things = this.state.majorType === null ? this.props.things : this.props.things.filter(t => t.TypeIDs.includes(this.state.majorType._id));\r\n    let index = 0;\r\n    while (things[index]._id !== this.props.selectedThing._id)\r\n      index++;\r\n    index++;\r\n    if (index === things.length)\r\n      index = 0;\r\n    this.setState({ \r\n      waiting: false, \r\n      redirectTo: `/thing/details/${things[index]._id}` \r\n    });\r\n  }\r\n\r\n  load = (id) => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        _id: id,\r\n        redirectTo: null,\r\n        loaded: false\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    const id = this.state._id;\r\n    if (this.props.selectedWorldID) {\r\n      this.api.getWorld(this.props.selectedWorldID).then(res => {\r\n        this.props.setAttributes(res.attributes);\r\n        this.props.setTypes(res.types);\r\n        this.props.setThings(res.things);\r\n        \r\n        if (id !== undefined) {\r\n          let thing = res.things.filter(t => t._id === id);\r\n          if (thing.length === 0) {\r\n            this.setState({ message: \"Invalid Thing ID\", loaded: true });\r\n          }\r\n          else {\r\n            thing = thing[0];\r\n            if (this.props.user !== null && this.props.user !== undefined) {\r\n              this.api.upsertView({ \r\n                userID: this.props.user._id, \r\n                worldID: this.props.selectedWorldID, \r\n                objectType: \"Thing\",\r\n                objectID: thing._id\r\n              });\r\n            }\r\n\r\n            thing.AttributesArr = [];\r\n            thing.Attributes.forEach(a => {\r\n              const attr = this.props.attributesByID[a.attrID];\r\n              thing.AttributesArr.push({\r\n                index: thing.AttributesArr.length,\r\n                Name: attr.Name,\r\n                AttributeType: attr.AttributeType,\r\n                Options: attr.Options,\r\n                DefinedType: attr.DefinedType,\r\n                ListType: attr.ListType,\r\n                attrID: a.attrID,\r\n                Value: a.Value,\r\n                ListValues: a.ListValues,\r\n                TypeIDs: attr.TypeIDs\r\n              });\r\n            });\r\n            this.props.updateSelectedThing(thing);\r\n            if (this.state.majorType === null) {\r\n              let majorType = thing.Types.filter(t=>t.Major);\r\n              if (majorType.length > 0) {\r\n                majorType = majorType[0];\r\n                \r\n                this.setState({\r\n                  Name: thing.Name,\r\n                  Description: thing.Description,\r\n                  _id: id,\r\n                  Types: thing.Types,\r\n                  majorType,\r\n                  loaded: true\r\n                });\r\n              }\r\n              else {\r\n                this.setState({\r\n                  Name: thing.Name,\r\n                  Description: thing.Description,\r\n                  _id: id,\r\n                  Types: thing.Types,\r\n                  loaded: true\r\n                });\r\n              }\r\n            }\r\n            else {\r\n              this.setState({\r\n                Name: thing.Name,\r\n                Description: thing.Description,\r\n                _id: id,\r\n                Types: thing.Types,\r\n                loaded: true\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          this.props.updateSelectedThing({\r\n            _id: null,\r\n            Name: \"\",\r\n            Description: \"\",\r\n            Types: [],\r\n            Attributes: [],\r\n            AttributesArr: []\r\n          });\r\n          this.setState({ loaded: true });\r\n        }\r\n      });\r\n    } else {\r\n      this.api.getWorldByThingID(id).then((res) => {\r\n        this.props.selectWorld(res.worldID);\r\n        this.props.setAttributes(res.attributes);\r\n        this.props.setTypes(res.types);\r\n        this.props.setThings(res.things);\r\n        \r\n        if (id !== undefined) {\r\n          let thing = res.things.filter(t => t._id === id);\r\n          if (thing.length === 0) {\r\n            this.setState({ message: \"Invalid Thing ID\", loaded: true });\r\n          }\r\n          else {\r\n            thing = thing[0];\r\n            thing.AttributesArr = [];\r\n            thing.Attributes.forEach(a => {\r\n              const attr = this.props.attributesByID[a.attrID];\r\n              thing.AttributesArr.push({\r\n                index: thing.AttributesArr.length,\r\n                Name: attr.Name,\r\n                AttributeType: attr.AttributeType,\r\n                Options: attr.Options,\r\n                DefinedType: attr.DefinedType,\r\n                ListType: attr.ListType,\r\n                attrID: a.attrID,\r\n                Value: a.Value,\r\n                ListValues: a.ListValues,\r\n                TypeIDs: attr.TypeIDs\r\n              });\r\n            });\r\n            this.props.updateSelectedThing(thing);\r\n            if (this.state.majorType === null) {\r\n              let majorType = thing.Types.filter(t=>t.Major);\r\n              if (majorType.length > 0) {\r\n                majorType = majorType[0];\r\n                \r\n                this.setState({\r\n                  Name: thing.Name,\r\n                  Description: thing.Description,\r\n                  _id: id,\r\n                  Types: thing.Types,\r\n                  majorType,\r\n                  loaded: true\r\n                });\r\n              }\r\n              else {\r\n                this.setState({\r\n                  Name: thing.Name,\r\n                  Description: thing.Description,\r\n                  _id: id,\r\n                  Types: thing.Types,\r\n                  loaded: true\r\n                });\r\n              }\r\n            }\r\n            else {\r\n              this.setState({\r\n                Name: thing.Name,\r\n                Description: thing.Description,\r\n                _id: id,\r\n                Types: thing.Types,\r\n                loaded: true\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          this.props.updateSelectedThing({\r\n            _id: null,\r\n            Name: \"\",\r\n            Description: \"\",\r\n            Types: [],\r\n            Attributes: [],\r\n            AttributesArr: []\r\n          });\r\n          this.setState({ loaded: true });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { id } = this.props.match.params;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading</span>);\r\n    } else if (!this.state.loaded) {\r\n      return (<span>Loading</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      (this.props.selectedWorld.Owner !== this.props.user._id && \r\n        this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\").length === 0)) {\r\n      return <Redirect to=\"/\" />;\r\n    // } else if (this.props.allUsers.length === 0) {\r\n    //   setTimeout(() => {\r\n    //     this.api.getAllUsers().then(res => {\r\n    //       this.props.setAllUsers(res);\r\n    //     });\r\n    //   }, 500);\r\n    //   return (<span>Loading</span>);\r\n    } else {\r\n      const references = this.props.things.filter(t=>t.ReferenceIDs !== undefined && t.ReferenceIDs.includes(this.state._id));\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      return (\r\n        <Grid item xs={12} container spacing={0} direction=\"column\">\r\n          { this.props.selectedWorld === null ? \"\" :\r\n            <div>\r\n              <Helmet>\r\n                <title>{ `Author's Notebook: ${this.props.selectedWorld.Name}` }</title>\r\n              </Helmet>\r\n              <Grid item container spacing={0} direction=\"row\">\r\n                <Grid item xs={12} sm={8} container spacing={0} direction=\"column\">\r\n                  <Grid item container spacing={0} direction=\"row\">\r\n                    <Grid item xs={1}>\r\n                      <Tooltip title={`Back to ${this.props.selectedWorld.Name}`}>\r\n                        <Fab size=\"small\"\r\n                          color=\"primary\"\r\n                          onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                        >\r\n                          <ArrowBack />\r\n                        </Fab>\r\n                      </Tooltip>\r\n                    </Grid>\r\n                    <Grid item xs={11}>\r\n                      <h2>{this.state.Name}</h2>\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <h3>\r\n                      { this.props.selectedThing.NeedsWork && \r\n                      <span>\r\n                        <img style={{ height: \"50px\" }} src={UnderConstruction} alt=\"Needs Work\" /> Needs Work\r\n                      </span> \r\n                      }\r\n                    </h3>\r\n                  </Grid>\r\n                  <Grid item>\r\n                    <div  dangerouslySetInnerHTML={{__html: this.state.Description}} />\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4}>\r\n                  <List>\r\n                    { (this.props.user !== null && \r\n                      this.props.selectedWorld !== null && \r\n                      (this.props.selectedWorld.Owner === this.props.user._id || \r\n                        this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\" && c.editPermission).length > 0)) &&\r\n                      <ListItem>\r\n                        <Box display={{ xs: 'block', sm: 'none' }} width={1}>\r\n                          <Grid container spacing={1} direction=\"row\">\r\n                            <Grid item xs={3}>\r\n                              &nbsp;\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                              <Tooltip title={`Edit ${this.state.Name}`}>\r\n                                <Fab size=\"small\"\r\n                                  color=\"primary\"\r\n                                  onClick={ _ => {this.setState({redirectTo:`/thing/edit/${this.state._id}`})}}\r\n                                >\r\n                                  <Edit />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            <Grid item xs={5}>\r\n                              <Tooltip title={`Delete ${this.state.Name}`}>\r\n                                <Fab size=\"small\"\r\n                                  color=\"primary\"\r\n                                  onClick={e => {this.setState({modalOpen: true})}}\r\n                                >\r\n                                  <Delete />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                          </Grid>\r\n                        </Box>\r\n                        <Box display={{ xs: 'none', sm: 'block' }}>\r\n                          <Grid container spacing={1} direction=\"column\">\r\n                            <Grid item>\r\n                              <Tooltip title={`Edit ${this.state.Name}`}>\r\n                                <Fab size=\"small\"\r\n                                  color=\"primary\"\r\n                                  onClick={ _ => {this.setState({redirectTo:`/thing/edit/${this.state._id}`})}}\r\n                                >\r\n                                  <Edit />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                            <Grid item>\r\n                              <Tooltip title={`Delete ${this.state.Name}`}>\r\n                                <Fab size=\"small\"\r\n                                  color=\"primary\"\r\n                                  onClick={e => {this.setState({modalOpen: true})}}\r\n                                >\r\n                                  <Delete />\r\n                                </Fab>\r\n                              </Tooltip>\r\n                            </Grid>\r\n                          </Grid>\r\n                        </Box>\r\n                      </ListItem>\r\n                    }\r\n                    <ListItem>\r\n                      { this.state.majorType === null ?\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={_ => {\r\n                            this.redirectToNext();\r\n                          }}\r\n                        >\r\n                          <ListItemText primary=\"Next\" />\r\n                        </Button>\r\n                      :\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={_ => {\r\n                            this.redirectToNext();\r\n                          }}\r\n                        >\r\n                          <ListItemText primary={`Next ${this.state.majorType.Name}`}/>\r\n                        </Button>\r\n                      }\r\n                    </ListItem>\r\n                  </List> \r\n                </Grid>\r\n              </Grid>\r\n              <Grid item container spacing={0} direction=\"row\">\r\n                <Grid item xs={12} sm={8}>\r\n                  Attributes\r\n                  <List>\r\n                    { this.props.selectedThing !== null && this.props.selectedThing !== undefined &&\r\n                      this.props.selectedThing.AttributesArr.map(\r\n                        (attribute, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              { attribute.AttributeType === \"Type\" && attribute.Value !== \"\" ?\r\n                                <ThingTable \r\n                                  attributesByID={this.props.attributesByID} \r\n                                  label={attribute.Name} \r\n                                  things={this.props.things.filter(t=>t._id === attribute.Value)} \r\n                                  allThings={this.props.things}\r\n                                />\r\n                              : attribute.AttributeType === \"List\" && attribute.ListType === \"Type\" ?\r\n                                <ThingTable \r\n                                  attributesByID={this.props.attributesByID} \r\n                                  label={attribute.Name} \r\n                                  things={this.props.things.filter(t=>attribute.ListValues.includes(t._id))} \r\n                                  allThings={this.props.things}\r\n                                  buttonClick={thingID => {\r\n                                    this.setState({redirectTo:`/thing/details/${thingID}`});\r\n                                  }}\r\n                                />\r\n                              : attribute.AttributeType === \"List\" ?\r\n                                <span>{attribute.Name}:&nbsp;\r\n                                { attribute.ListValues.map(\r\n                                  (listValue, i) => {\r\n                                    return(\r\n                                      <span key={i}>\r\n                                        { \r\n                                          i > 0 ? `, ${listValue}` : `${listValue}`\r\n                                        }\r\n                                      </span>\r\n                                    );\r\n                                  })\r\n                                }\r\n                                </span>\r\n                              : \r\n                                <span>{attribute.Name}:&nbsp;{attribute.Value}</span>\r\n                              }\r\n                            </ListItem>\r\n                          );\r\n                        }\r\n                      )\r\n                    }\r\n                  </List>\r\n                </Grid>\r\n                <Grid item xs={12} sm={4} container spacing={0} direction=\"column\">\r\n                  { this.state.Types.length > 0 && \r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Types\"} />\r\n                        </ListItem>\r\n                        {this.state.Types.map((type, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}\r\n                              >\r\n                                <ListItemText primary={type.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  }\r\n                  { references.length > 0 &&\r\n                    <Grid item>\r\n                      <List>\r\n                        <ListItem>\r\n                          <ListItemText primary={\"Referenced in:\"} />\r\n                        </ListItem>\r\n                        {references.map((thing, i) => {\r\n                          return (\r\n                            <ListItem key={i}>\r\n                              <Button fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={ _ => {this.setState({redirectTo:`/thing/details/${thing._id}`})}}\r\n                              >\r\n                                <ListItemText primary={thing.Name} />\r\n                              </Button>\r\n                            </ListItem>\r\n                          );\r\n                        })}\r\n                      </List>\r\n                    </Grid>\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n              { this.props.selectedThing !== null &&\r\n                <Grid item xs={12}>\r\n                  <CommentsControl \r\n                    user={this.props.user} \r\n                    allUsers={this.props.allUsers}\r\n                    object={this.props.selectedThing}\r\n                    objectType=\"Thing\"\r\n                    world={this.props.selectedWorld}\r\n                    api={this.api} \r\n                    onChange={this.commentsChange}\r\n                    suggestions={suggestions}\r\n                  /> \r\n                </Grid>\r\n              }\r\n              <Modal\r\n                aria-labelledby=\"delete-thing-modal\"\r\n                aria-describedby=\"delete-thing-modal-description\"\r\n                open={this.state.modalOpen}\r\n                onClose={e => {this.setState({modalOpen: false})}}\r\n              >\r\n                <div style={this.getModalStyle()} className=\"paper\">\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      Are you sure you want to delete {this.state.Name}?\r\n                    </Grid>\r\n                    <Grid item>\r\n                      (All references to it will be left alone and may not work correctly)\r\n                    </Grid>\r\n                    <Grid item container spacing={1} direction=\"row\">\r\n                      <Grid item xs={6}>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          onClick={this.delete}\r\n                        >\r\n                          Yes\r\n                        </Button>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <Button\r\n                          fullWidth\r\n                          variant=\"contained\"\r\n                          onClick={e => {this.setState({modalOpen: false})}}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n              </Modal>\r\n            </div>\r\n          }\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst ThingDetails = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default ThingDetails;\r\n","/* eslint-disable no-use-before-define */\r\nimport React, { useState } from \"react\";\r\n\r\nimport {\r\n  Grid,\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  Select,\r\n  MenuItem,\r\n  Checkbox\r\n} from \"@material-ui/core\";\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\nimport ChipInput from \"material-ui-chip-input\";\r\nimport { Multiselect } from \"multiselect-react-dropdown\";\r\n\r\nconst handleTextListChange = (e, props) => {\r\n  const attr = props.attribute;\r\n  attr.ListValues = e;\r\n  props.onChange(attr);\r\n};\r\nconst handleDefinedTypeChange = (e, props, respond) => {\r\n  // const attr = props.attribute;\r\n  // attr[\"DefinedType\"] = e.target.value;\r\n  if (e.target.value === \"new\") {\r\n    // function respond2(newThing) {\r\n    //   // attr[\"DefinedType\"] = newType._id;\r\n    //   // props.onChange(attr);\r\n    //   respond(newThing._id);\r\n    // }\r\n    // props.onNewThing(\r\n    //   // respond2,\r\n    //   props.types.filter(t => t._id === props.attribute.DefinedType)[0]\r\n    // );\r\n    const attr = props.attribute;\r\n    props.onNewThing(attr);\r\n  } else {\r\n    // props.onChange(attr);\r\n    respond(e.target.value);\r\n  }\r\n};\r\nconst addOption = (selectedItem, props) => {\r\n  const attr = props.attribute;\r\n  attr.ListValues.push(selectedItem.Name);\r\n  props.onChange(attr);\r\n};\r\nconst removeOption = (selectedList, props) => {\r\n  const attr = props.attribute;\r\n  attr.ListValues = [];\r\n  selectedList.forEach(o => {\r\n    attr.ListValues.push(o.Name);\r\n  });\r\n  props.onChange(attr);\r\n};\r\nconst addType = (selectedItem, props) => {\r\n  if (selectedItem._id === \"new\") {\r\n    // function respond2(newThing) {\r\n    //   const attr = props.attribute;\r\n    //   attr.ListValues.push(newThing._id);\r\n    //   props.onChange(attr);\r\n    // }\r\n    \r\n    // setTimeout(() => {\r\n    const attr = props.attribute;\r\n    props.onNewThing(attr);\r\n    // }, 500);\r\n    // props.onNewThing(\r\n    //   // respond2,\r\n    //   // props.types.filter(t => t._id === props.attribute.DefinedType)[0]\r\n    //   props.attribute\r\n    // );\r\n  } else {\r\n    const attr = props.attribute;\r\n    attr.ListValues.push(selectedItem._id);\r\n    props.onChange(attr);\r\n  }\r\n};\r\nconst removeType = (selectedList, props) => {\r\n  const attr = props.attribute;\r\n  attr.ListValues = [];\r\n  selectedList.forEach(o => {\r\n    attr.ListValues.push(o._id);\r\n  });\r\n  props.onChange(attr);\r\n};\r\n\r\nexport default function AttributeControl(props) {\r\n  const [value, changeValue] = useState(props.attribute.Value);\r\n  const attributeType = props.attribute.AttributeType === \"\" ? \"Text\" : props.attribute.AttributeType;\r\n\r\n  const listOptions = [];\r\n  const listOptionValues = [];\r\n  if (attributeType === \"List\" && props.attribute.ListType === \"Options\") {\r\n    props.attribute.Options.forEach(o => {\r\n      listOptions.push({ Name: o });\r\n    });\r\n    props.attribute.ListValues.forEach(o => {\r\n      listOptionValues.push({ Name: o });\r\n    });\r\n  } else if (attributeType === \"List\" && props.attribute.ListType === \"Type\") {\r\n    const definedType = props.types.filter(t => t._id === props.attribute.DefinedType)[0];\r\n    if (definedType !== undefined) {\r\n      listOptions.push({ Name: `+ Create New ${definedType.Name}`, _id: \"new\" });\r\n      props.things\r\n        .filter(t => t.TypeIDs.includes(props.attribute.DefinedType))\r\n        .forEach(t => {\r\n          listOptions.push({ Name: t.Name, _id: t._id });\r\n        });\r\n      listOptions\r\n        .filter(t => props.attribute.ListValues.includes(t._id))\r\n        .forEach(t => {\r\n          listOptionValues.push(t);\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid item container spacing={1} direction=\"row\">\r\n      <Grid item xs={11}>\r\n        {attributeType === \"Text\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor={`attribute_name_${props.attribute.attrID}`}>{props.attribute.Name}</InputLabel>\r\n            <OutlinedInput\r\n              id={`attribute_name_${props.attribute.attrID}`}\r\n              name={`attribute_name_${props.attribute.attrID}`}\r\n              type=\"text\"\r\n              error={props.error}\r\n              value={value}\r\n              autoComplete=\"off\"\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const attr = {\r\n                  index: props.attribute.index,\r\n                  attrID: props.attribute.attrID,\r\n                  Name: props.attribute.Name,\r\n                  AttributeType: props.attribute.AttributeType,\r\n                  Options: props.attribute.Options,\r\n                  DefinedType: props.attribute.DefinedType,\r\n                  ListType: props.attribute.ListType,\r\n                  FromTypes: props.attribute.FromTypes,\r\n                  Value: value,\r\n                  ListValues: props.attribute.ListValues\r\n                };\r\n                props.onChange(attr);\r\n              }}\r\n              labelWidth={props.attribute.Name.length * 9}\r\n              fullWidth\r\n              multiline\r\n            />\r\n            <FormHelperText>{props.message}</FormHelperText>\r\n          </FormControl>\r\n        ) : attributeType === \"Number\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"numField\">{props.attribute.Name}</InputLabel>\r\n            <OutlinedInput\r\n              id=\"numField\"\r\n              name=\"numField\"\r\n              type=\"number\"\r\n              error={props.error}\r\n              value={value}\r\n              autoComplete=\"off\"\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const attr = {\r\n                  index: props.attribute.index,\r\n                  attrID: props.attribute.attrID,\r\n                  Name: props.attribute.Name,\r\n                  AttributeType: props.attribute.AttributeType,\r\n                  Options: props.attribute.Options,\r\n                  DefinedType: props.attribute.DefinedType,\r\n                  ListType: props.attribute.ListType,\r\n                  FromTypes: props.attribute.FromTypes,\r\n                  Value: value,\r\n                  ListValues: props.attribute.ListValues\r\n                };\r\n                props.onChange(attr);\r\n              }}\r\n              labelWidth={props.attribute.Name.length * 9}\r\n              fullWidth\r\n            />\r\n            <FormHelperText>{props.message}</FormHelperText>\r\n          </FormControl>\r\n        ) : attributeType === \"True/False\" ? (\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox checked={props.attribute.Value===\"True\"} onChange={e => {\r\n                const attr = props.attribute;\r\n                attr.Value = e.target.checked ? \"True\" : \"False\";\r\n                props.onChange(attr);\r\n              }}\r\n              color=\"primary\" />\r\n            }\r\n            label={props.attribute.Name}\r\n          />\r\n        ) : attributeType === \"Options\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"options-select\" id=\"options-select-label\">\r\n              {props.attribute.Name}\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"options-select-label\"\r\n              id=\"options-select\"\r\n              value={value}\r\n              onChange={e => {\r\n                changeValue(e.target.value);\r\n              }}\r\n              onBlur={e => {\r\n                const attr = {\r\n                  index: props.attribute.index,\r\n                  attrID: props.attribute.attrID,\r\n                  Name: props.attribute.Name,\r\n                  AttributeType: props.attribute.AttributeType,\r\n                  Options: props.attribute.Options,\r\n                  DefinedType: props.attribute.DefinedType,\r\n                  ListType: props.attribute.ListType,\r\n                  FromTypes: props.attribute.FromTypes,\r\n                  Value: value,\r\n                  ListValues: props.attribute.ListValues\r\n                };\r\n                props.onChange(attr);\r\n              }}\r\n              fullWidth\r\n              labelWidth={props.attribute.Name.length * 9}\r\n            >\r\n              {props.attribute.Options.map((option, i) => {\r\n                return (\r\n                  <MenuItem key={i} value={option}>\r\n                    {option}\r\n                  </MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : attributeType === \"Type\" ? (\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"type-select\" id=\"type-select-label\">\r\n              {props.attribute.Name}\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"type-select-label\"\r\n              id=\"type-select\"\r\n              value={value}\r\n              onChange={e => {\r\n                handleDefinedTypeChange(e, props, changeValue);\r\n              }}\r\n              onBlur={e => {\r\n                const attr = {\r\n                  index: props.attribute.index,\r\n                  attrID: props.attribute.attrID,\r\n                  Name: props.attribute.Name,\r\n                  AttributeType: props.attribute.AttributeType,\r\n                  Options: props.attribute.Options,\r\n                  DefinedType: props.attribute.DefinedType,\r\n                  ListType: props.attribute.ListType,\r\n                  FromTypes: props.attribute.FromTypes,\r\n                  Value: value,\r\n                  ListValues: props.attribute.ListValues\r\n                };\r\n                props.onChange(attr);\r\n              }}\r\n              fullWidth\r\n              labelWidth={props.attribute.Name.length * 9}\r\n            >\r\n              <MenuItem value=\"new\">\r\n                + Create New{\" \"}\r\n                {props.types.filter(t => t._id === props.attribute.DefinedType)[0].Name}\r\n              </MenuItem>\r\n              {props.things\r\n                .filter(t => t.TypeIDs.includes(props.attribute.DefinedType))\r\n                .map((thing, i) => {\r\n                  return (\r\n                    <MenuItem key={i} value={thing._id}>\r\n                      {thing.Name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n            </Select>\r\n          </FormControl>\r\n        ) : attributeType === \"List\" ? (\r\n          <span>\r\n            {props.attribute.ListType === \"Text\" ? (\r\n              <ChipInput\r\n                placeholder={props.attribute.Name}\r\n                variant=\"outlined\" fullWidth\r\n                defaultValue={props.attribute.ListValues}\r\n                onChange={chips => handleTextListChange(chips, props)}\r\n                blurBehavior=\"add\"\r\n              />\r\n            ) : props.attribute.ListType === \"Options\" ? (\r\n              <Multiselect\r\n                placeholder={props.attribute.Name}\r\n                options={listOptions}\r\n                selectedValues={listOptionValues}\r\n                onSelect={(_, selectedItem) => {\r\n                  addOption(selectedItem, props);\r\n                }}\r\n                onRemove={(selectedList, _) => {\r\n                  removeOption(selectedList, props);\r\n                }}\r\n                displayValue=\"Name\"\r\n              />\r\n            ) : props.attribute.ListType === \"Type\" ? (\r\n              <Multiselect\r\n                placeholder={props.attribute.Name}\r\n                options={listOptions}\r\n                selectedValues={listOptionValues}\r\n                onSelect={(_, selectedItem) => {\r\n                  addType(selectedItem, props);\r\n                }}\r\n                onRemove={(selectedList, _) => {\r\n                  removeType(selectedList, props);\r\n                }}\r\n                displayValue=\"Name\"\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </span>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </Grid>\r\n      <Grid item xs={1}>\r\n        <InfoIcon\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={ _ => {\r\n            props.infoModal(props.attribute);\r\n          }} \r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { \r\n  Grid, Modal, FormControl, InputLabel, \r\n  OutlinedInput, FormHelperText, Button,\r\n  // List,\r\n  // ListItem,\r\n} from \"@material-ui/core\";\r\nimport { \r\n  updateSelectedThing, addThing, logout\r\n} from \"../../redux/actions/index\";\r\nimport AttributeControl from \"./AttributeControl\";\r\nimport API from \"../../smartAPI\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedThing: state.app.selectedThing,\r\n    things: state.app.things,\r\n    types: state.app.types,\r\n    selectedWorldID: state.app.selectedWorldID\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedThing: thing => dispatch(updateSelectedThing(thing)),\r\n    addThing: thing => dispatch(addThing(thing)),\r\n    logout: () => dispatch(logout({}))\r\n  };\r\n}\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modalOpen: false,\r\n      infoModalOpen: false,\r\n      // infoAttribute: null,\r\n      Name: \"\",\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      waiting: false,\r\n      newThingType: null\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  newAttribute = () => {\r\n    const thing = this.props.selectedThing;\r\n    thing.AttributesArr.push({\r\n      index: thing.AttributesArr.length,\r\n      _id: null,\r\n      Name: \"\",\r\n      AttributeType: \"Text\",\r\n      Options: [],\r\n      DefinedType: \"\",\r\n      ListType: \"Text\",\r\n      FromTypes: [],\r\n      Value: \"\",\r\n      ListValues: [],\r\n      FromTypeIDs: [],\r\n      TypeIDs: []\r\n    });\r\n    this.props.updateSelectedThing(thing);\r\n  };\r\n\r\n  changeAttribute = value => {\r\n    const thing = this.props.selectedThing;\r\n    const attribute = thing.AttributesArr.filter(a=>a.attrID === value.attrID)[0];\r\n    attribute.Value = value.Value;\r\n    attribute.ListValues = value.ListValues;\r\n    this.props.updateSelectedThing(thing);\r\n  };\r\n\r\n  blurAttribute = e => {\r\n  };\r\n\r\n  deleteAttribute = value => {\r\n    const thing = this.props.selectedThing;\r\n    thing.AttributesArr.splice(value.index, 1);\r\n    thing.AttributesArr.forEach(a => {\r\n      if (a.index > this.state.infoAttribute.index) {\r\n        a.index--;\r\n      }\r\n    })\r\n    this.props.updateSelectedThing(thing);\r\n  };\r\n\r\n  optionsChange = (e, props) => {\r\n  }\r\n\r\n  // addNewThing = (respond, type) => {\r\n  //   // Opens a Modal where they enter a name.\r\n  //   this.setState({modalOpen: true, modalSubmit: respond, newThingType: type});\r\n  // }\r\n\r\n  addNewThing = (attribute) => {\r\n    this.props.addNewThing(attribute);\r\n  }\r\n\r\n  infoModal = (attribute) => {\r\n    this.props.onInfo(attribute);\r\n  }\r\n  \r\n  getModalStyle = () => {\r\n    const top = Math.round(window.innerHeight / 2) - 100;\r\n    const left = Math.round(window.innerWidth / 2) - 200;\r\n  \r\n    return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(${left}px, ${top}px)`,\r\n    };\r\n  }\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value =\r\n      e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      fieldValidation[name].valid !== validation.valid\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  };\r\n\r\n  validateField = fieldName => {\r\n    let value = null;\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"Name\":\r\n        value = this.state[fieldName];\r\n        valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        if (!valid)\r\n          message = \"Only Letters, Numbers, and Spaces allowed in Thing Names\";\r\n        else if (value.length < 2) {\r\n          valid = false;\r\n          message = \"Thing Name is too short\";\r\n        } else {\r\n          valid =\r\n            this.props.things.filter(\r\n              t => t.Name === value && t._id !== this.state._id\r\n            ).length === 0;\r\n          if (!valid) message = \"This Thing Name is already in use\";\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  };\r\n\r\n  validateForm = respond => {\r\n    const nameValid = this.validateField(\"Name\");\r\n    const formValid = nameValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.Name = nameValid;\r\n    this.setState(\r\n      {\r\n        formValid: formValid,\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  };\r\n\r\n  saveNewThing = () => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true }, this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  };\r\n\r\n  submitThroughAPI = () => {\r\n    const types = this.props.types.filter(t=> t._id === this.state.newThingType._id || this.state.newThingType.SuperIDs.includes(t._id));\r\n    const typeIDs = types.map(s => {\r\n      return s._id;\r\n    });\r\n    const thing = {\r\n      _id: this.state._id,\r\n      Name: this.state.Name.trim(),\r\n      Description: \"\",\r\n      TypeIDs: typeIDs,\r\n      Attributes: [],\r\n      worldID: this.props.selectedWorldID,\r\n      EditUserID: this.props.user._id\r\n    };\r\n\r\n    // Calls API\r\n    this.api\r\n      .createThing(thing)\r\n      .then(res => {\r\n        if (res.thingID !== undefined) {\r\n          thing._id = res.thingID;\r\n          thing.Types = types;\r\n          thing.AttributesArr = [];\r\n          // Adds to props \r\n          this.props.addThing(thing);\r\n          // Calls respond back to Attribute to set the thing\r\n          this.state.modalSubmit(thing);\r\n          this.setState({\r\n            waiting: false, \r\n            modalOpen: false\r\n          });\r\n        }\r\n        else if (res.error !== undefined) {\r\n          this.setState({\r\n            waiting: false, \r\n            message: res.error \r\n          }, () => {\r\n            this.props.logout();\r\n          });\r\n        }\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Grid item xs={12} container spacing={1} direction=\"column\">\r\n        {this.props.selectedThing !== null && this.props.selectedThing !== undefined &&\r\n          this.props.selectedThing.AttributesArr.map((attribute, i) => {\r\n            return (\r\n              <AttributeControl\r\n                key={i}\r\n                thingID={this.props.selectedThing._id}\r\n                attribute={attribute}\r\n                onChange={this.changeAttribute}\r\n                onDelete={this.deleteAttribute}\r\n                onBlur={this.blurAttribute}\r\n                things={this.props.things}\r\n                types={this.props.types}\r\n                onNewThing={this.addNewThing}\r\n                infoModal={this.infoModal}\r\n              />\r\n            );\r\n          })\r\n        }\r\n        <Modal\r\n          aria-labelledby=\"new-thing-modal\"\r\n          aria-describedby=\"new-thing-modal-description\"\r\n          open={this.state.modalOpen}\r\n          onClose={e => {this.setState({modalOpen: false})}}\r\n        >\r\n          <div style={this.getModalStyle()} className=\"paper\">\r\n            <Grid container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                Just give the new {this.state.newThingType === null ? \"\" : this.state.newThingType.Name} a name.\r\n              </Grid>\r\n              <Grid item>\r\n                (You can do the rest later.)\r\n              </Grid>\r\n              <Grid item>\r\n                <FormControl variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"name\">Name</InputLabel>\r\n                  <OutlinedInput\r\n                    id=\"name\"\r\n                    name=\"Name\"\r\n                    type=\"text\"\r\n                    autoComplete=\"Off\"\r\n                    error={!this.state.fieldValidation.Name.valid}\r\n                    value={this.state.Name}\r\n                    onChange={this.handleUserInput}\r\n                    onBlur={this.inputBlur}\r\n                    labelWidth={43}\r\n                    fullWidth\r\n                  />\r\n                  <FormHelperText>\r\n                    {this.state.fieldValidation.Name.message}\r\n                  </FormHelperText>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item container spacing={1} direction=\"row\">\r\n                <Grid item xs={6}>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={this.state.waiting}\r\n                    onClick={this.saveNewThing}\r\n                  >\r\n                    {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    onClick={e => {this.setState({modalOpen: false})}}\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Modal>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst AttributesControl = connect(mapStateToProps, mapDispatchToProps)(Control);\r\nexport default AttributesControl;\r\n","import React, { Component, createRef } from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  updateSelectedThing,\r\n  addThing,\r\n  updateThing,\r\n  updateType,\r\n  addType,\r\n  setAttributes,\r\n  setTypes,\r\n  setThings,\r\n  notFromLogin,\r\n  toggleLogin,\r\n  logout,\r\n  selectWorld\r\n} from \"../../redux/actions/index\";\r\nimport { \r\n  Button, Checkbox, FormControl, FormControlLabel,\r\n  OutlinedInput, InputLabel, \r\n  FormHelperText, Grid, \r\n  Fab, Tooltip,\r\n  List, ListItem, ListItemText,\r\n  Select, MenuItem,\r\n  // Modal\r\n} from \"@material-ui/core\";\r\nimport ChipInput from \"material-ui-chip-input\";\r\nimport { ArrowBack, Add, Search, Delete } from \"@material-ui/icons\";\r\nimport AttributesControl from \"./AttributesControl\";\r\nimport { Multiselect } from 'multiselect-react-dropdown';\r\nimport { Helmet } from 'react-helmet';\r\nimport API from \"../../smartAPI\";\r\nimport NewTypeModal from \"../../components/Modals/NewTypeModal\";\r\nimport NewThingModal from \"../../components/Modals/NewThingModal\";\r\nimport TextBox from \"../../components/Inputs/TextBox\";\r\nimport UnderConstruction from \"../../assets/img/under_construction.png\";\r\n\r\n/* \r\n  This component will take the main portion of the page and is used for\r\n  creating or editing a Thing.  It will allow the use of Types to make\r\n  it faster.\r\n*/\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    selectedPage: state.app.selectedPage,\r\n    selectedThing: state.app.selectedThing,\r\n    selectedWorld: state.app.selectedWorld,\r\n    selectedWorldID: state.app.selectedWorldID,\r\n    things: state.app.things,\r\n    types: state.app.types,\r\n    user: state.app.user,\r\n    attributesByID: state.app.attributesByID,\r\n    attributesByName: state.app.attributesByName,\r\n    fromLogin: state.app.fromLogin,\r\n    typeSuggestions: state.app.typeSuggestions,\r\n    thingSuggestions: state.app.thingSuggestions,\r\n    width: state.app.width,\r\n    height: state.app.height\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    updateSelectedThing: thing => dispatch(updateSelectedThing(thing)),\r\n    addThing: thing => dispatch(addThing(thing)),\r\n    updateThing: thing => dispatch(updateThing(thing)),\r\n    updateType: type => dispatch(updateType(type)),\r\n    addType: type => dispatch(addType(type)),\r\n    setAttributes: attributes => dispatch(setAttributes(attributes)),\r\n    setTypes: types => dispatch(setTypes(types)),\r\n    setThings: things => dispatch(setThings(things)),\r\n    notFromLogin: () => dispatch(notFromLogin({})),\r\n    toggleLogin: () => dispatch(toggleLogin({})),\r\n    logout: () => dispatch(logout({})),\r\n    selectWorld: worldID => dispatch(selectWorld(worldID))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      _id: undefined,\r\n      // Name: \"\",\r\n      // Description: \"\",\r\n      // Types: [],\r\n      // AttributesArr: [],\r\n      // Attributes: [],\r\n      fieldValidation: {\r\n        Name: { valid: true, message: \"\" },\r\n        // AttributesArr: { valid: true, message: \"\" },\r\n        Attributes: { valid: true, message: \"\" },\r\n        infoAttributeName: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"\",\r\n      redirectTo: null,\r\n      waiting: false,\r\n      addMore: \"\",\r\n      resetting: false,\r\n      loaded: true,\r\n      errors: [],\r\n      infoAttribute: null,\r\n      typeModalOpen: false,\r\n      newTypeForAttribute: \"\",\r\n      browseAttributes: false,\r\n      browseAttributesFilter: \"\",\r\n      browseAttributesSelected: \"\",\r\n      thingModalOpen: false,\r\n      newThingType: null,\r\n      putThingOnAttribute: null,\r\n      majorType: null\r\n    };\r\n    this.api = API.getInstance();\r\n    this.refDescription = createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  createThingFromType = type => {\r\n    let types = [];\r\n    types.push(type);\r\n    type.Supers.forEach(s=>{\r\n      if (types.filter(t=>t._id === s._id).length === 0) {\r\n        let superType = this.props.types.filter(t=>t._id === s._id);\r\n        if (superType.length > 0)\r\n          types.push(superType[0]);\r\n      }\r\n    });\r\n    const thing = {\r\n      _id: null,\r\n      Name: \"\",\r\n      Description: \"\",\r\n      NeedsWork: false,\r\n      Types: [],\r\n      Attributes: []\r\n    };\r\n    let newAttributes = [];\r\n    types.forEach(type=> {\r\n      for (let i = 0; i < type.Attributes.length; i++) {\r\n        const attribute = {...type.Attributes[i]};\r\n        let existing = thing.Attributes.filter(a=>a.attrID === attribute.attrID);\r\n        if (existing.length === 0) {\r\n          attribute.FromTypeIDs = [type._id];\r\n          attribute.index = type.Attributes.length + newAttributes.length;\r\n          newAttributes.push(attribute);\r\n        }\r\n        else {\r\n          existing = existing[0];\r\n          if (existing.FromTypeIDs === undefined || existing.FromTypeIDs === null)\r\n            existing.FromTypeIDs = [];\r\n          existing.FromTypeIDs.push(type._id);\r\n        }\r\n      }\r\n    });\r\n    types.forEach(type=> {\r\n      newAttributes.forEach(attribute => {\r\n        if (type.DefaultsHash[attribute.attrID] === undefined || type.DefaultsHash[attribute.attrID].DefaultValue === undefined) {\r\n          attribute.Value = \"\";\r\n          attribute.ListValues = [];\r\n        }\r\n        else {\r\n          attribute.Value = type.DefaultsHash[attribute.attrID].DefaultValue;\r\n          attribute.ListValues = type.DefaultsHash[attribute.attrID].DefaultListValues;\r\n        }\r\n      })\r\n    });\r\n    let attributes = [...thing.Attributes, ...newAttributes];\r\n    thing.Attributes = attributes;\r\n    thing.AttributesArr = [];\r\n    thing.Attributes.forEach(a => {\r\n      const attr = this.props.attributesByID[a.attrID];\r\n      thing.AttributesArr.push({\r\n        index: thing.AttributesArr.length,\r\n        Name: attr.Name,\r\n        AttributeType: attr.AttributeType,\r\n        Options: attr.Options,\r\n        DefinedType: attr.DefinedType,\r\n        ListType: attr.ListType,\r\n        attrID: a.attrID,\r\n        Value: a.Value,\r\n        ListValues: a.ListValues,\r\n        FromTypeIDs: a.FromTypeIDs,\r\n        TypeIDs: attr.TypeIDs\r\n      });\r\n    });\r\n    thing.Types = types;\r\n    this.props.updateSelectedThing(thing);\r\n    this.setState({ \r\n      _id: null, \r\n      // Types: types, \r\n      loaded: true,\r\n      majorType: type\r\n    }); //, errors });\r\n  };\r\n\r\n  resetForm = () => {\r\n    setTimeout(() => {\r\n      let { id } = this.props.match.params;\r\n      if (id !== undefined && !id.includes(\"type_id_\")) {\r\n        if (this.state.majorType === null) {\r\n          this.setState({\r\n            resetting: false, \r\n            redirectTo: `/thing/create`\r\n          });\r\n        } else {\r\n          this.setState({\r\n            resetting: false, \r\n            redirectTo: `/thing/create/type_id_${this.state.majorType._id}`\r\n          });\r\n        }\r\n      }\r\n      else {\r\n        this.setState({\r\n          resetting: false\r\n        }, this.finishResettingForm);\r\n      }\r\n    }, 500);\r\n  };\r\n\r\n  finishResettingForm = () => {\r\n    const { id } = this.props.match.params;\r\n    if (id !== undefined && id.includes(\"type_id_\")) {\r\n      // We're creating it from a type rather than from blank\r\n      const typeID = id.substring(8);\r\n      let type = this.props.types.filter(t=> t._id === typeID);\r\n      if (type.length > 0) {\r\n        type = type[0];\r\n        this.createThingFromType(type);\r\n      }\r\n      else {\r\n        this.setState({ message: \"Invalid Type\" });\r\n      }\r\n    }\r\n  }\r\n\r\n  // handleUserInput = e => {\r\n  //   const name = e.target.name;\r\n  //   const value =\r\n  //     e.target.type === \"checkbox\" ? e.target.checked : e.target.value;\r\n  //   this.setState({ [name]: value });\r\n  // };\r\n\r\n  handleInfoAttrNameChange = e => {\r\n    const infoAttribute = this.state.infoAttribute;\r\n    infoAttribute.Name = e.target.value;\r\n    this.setState({ infoAttribute });\r\n  };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      (fieldValidation[name].valid !== validation.valid ||\r\n        fieldValidation[name].message !== validation.message)\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  };\r\n\r\n  inputBlur2 = e => {\r\n    const name = \"infoAttributeName\";\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (\r\n      fieldValidation[name] !== undefined &&\r\n      (fieldValidation[name].valid !== validation.valid ||\r\n        fieldValidation[name].message !== validation.message)\r\n    ) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  };\r\n\r\n  addSelectedAttribute = () => {\r\n    const thing = this.props.selectedThing;\r\n    const attr = this.props.attributesByID[this.state.browseAttributesSelected];\r\n    const attributes = thing.Attributes;\r\n    const AttributesArr = thing.AttributesArr;\r\n    attributes.push({\r\n      attrID: this.state.browseAttributesSelected,\r\n      Value: \"\",\r\n      ListValues: [],\r\n      index: attributes.length,\r\n      FromTypeIDs: []\r\n    });\r\n    AttributesArr.push({\r\n      attrID: this.state.browseAttributesSelected,\r\n      index: AttributesArr.length,\r\n      Value: \"\",\r\n      ListValues: [],\r\n      Name: attr.Name,\r\n      AttributeType: attr.AttributeType,\r\n      Options: attr.Options,\r\n      DefinedType: attr.DefinedType,\r\n      ListType: attr.ListType,\r\n      FromTypeIDs: [],\r\n      TypeIDs: attr.TypeIDs\r\n    });\r\n    thing.Attributes = [];\r\n    thing.AttributesArr = [];\r\n    this.props.updateSelectedThing(thing);\r\n    setTimeout(() => {\r\n      thing.Attributes = attributes;\r\n      thing.AttributesArr = AttributesArr;\r\n      this.props.updateSelectedThing(thing);\r\n      this.setState({ browseAttributesSelected: \"\" });\r\n    }, 500);\r\n  }\r\n\r\n  validateField = fieldName => {\r\n    let value = null;\r\n    let valid = true;\r\n    let message = \"\";\r\n    switch (fieldName) {\r\n      case \"Name\":\r\n        value = this.props.selectedThing[fieldName].trim();\r\n        valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        if (!valid)\r\n          message = \"Only Letters, Numbers, and Spaces allowed in Thing Names\";\r\n        else if (value.length < 2) {\r\n          valid = false;\r\n          message = \"Thing Name is too short\";\r\n        } else {\r\n          valid =\r\n            this.props.things.filter(\r\n              t => t.Name === value && t._id !== this.state._id\r\n            ).length === 0;\r\n          if (!valid) message = \"This Thing Name is already in use\";\r\n        }\r\n        break;\r\n      case \"infoAttributeName\":\r\n        value = this.state.infoAttribute.Name.trim();\r\n        valid = value.match(/^[a-zA-Z0-9 ]*$/i) !== null;\r\n        if (!valid)\r\n          message = \"Only Letters, Numbers, and Spaces allowed in Attribute Names\";\r\n        else if (value.length < 2) {\r\n          valid = false;\r\n          message = \"Attribute Name is too short\";\r\n        } else {\r\n          const attrByName = this.props.attributesByName[value];\r\n          valid = attrByName === undefined || attrByName._id === this.state.infoAttribute.attrID;\r\n          if (!valid) message = \"There is another Attribute with this name.\";\r\n        }\r\n        break;\r\n      case \"AttributesArr\":\r\n        valid = true;\r\n        value = this.props.selectedThing[fieldName];\r\n        value.forEach(a => {\r\n          if (valid && value.filter(attr2 => attr2.Name === a.Name).length > 1) {\r\n            valid = false;\r\n          }\r\n        });\r\n        message = valid ? \"\" : \"Attribute Names must be unique\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  };\r\n\r\n  validateForm = respond => {\r\n    const nameValid = this.validateField(\"Name\");\r\n    const attrValid = this.validateField(\"AttributesArr\");\r\n    const formValid = nameValid.valid && attrValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.Name = nameValid;\r\n    fieldValidation.Attributes = attrValid;\r\n    this.setState(\r\n      {\r\n        formValid: formValid,\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  };\r\n\r\n  validateAttrForm = respond => {\r\n    const nameValid = this.validateField(\"infoAttributeName\");\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.infoAttributeName = nameValid;\r\n    this.setState(\r\n      {\r\n        fieldValidation: fieldValidation\r\n      },\r\n      respond\r\n    );\r\n  };\r\n\r\n  onSubmit = (addMore) => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ \r\n          waiting: true, \r\n          addMore: addMore \r\n        }, \r\n        this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  };\r\n\r\n  submitThroughAPI = () => {\r\n    const typeIDs = this.props.selectedThing.Types.map(s => {\r\n      return s._id;\r\n    });\r\n    \r\n    const thing = {\r\n      _id: this.state._id,\r\n      Name: this.props.selectedThing.Name.trim(),\r\n      Description: this.props.selectedThing.Description.trim(),\r\n      NeedsWork: this.props.selectedThing.NeedsWork,\r\n      TypeIDs: typeIDs,\r\n      // AttributesArr: this.props.selectedThing.AttributesArr,\r\n      Attributes: [],\r\n      worldID: this.props.selectedWorld._id,\r\n      ReferenceIDs: [],\r\n      EditUserID: this.props.user._id\r\n    };\r\n    this.props.selectedThing.AttributesArr.forEach(a => {\r\n      thing.Attributes.push({\r\n        attrID: a.attrID,\r\n        index: a.index,\r\n        Value: a.Value.trim(),\r\n        ListValues: a.ListValues\r\n      });\r\n      if (a.AttributeType === \"Type\") {\r\n        if (!thing.ReferenceIDs.includes(a.Value)) {\r\n          thing.ReferenceIDs.push(a.Value);\r\n        }\r\n      }\r\n      if (a.AttributeType === \"List\" && a.ListType === \"Type\") {\r\n        a.ListValues.forEach(v=> {\r\n          if (!thing.ReferenceIDs.includes(v)) {\r\n            thing.ReferenceIDs.push(v);\r\n          }\r\n        });\r\n      }\r\n    });\r\n    if (thing._id === null) {\r\n      this.api\r\n        .createThing(thing)\r\n        .then(res => {\r\n          if (res.error === undefined){\r\n            // thing._id = res.thingID;\r\n            // thing.Types = this.state.Types;\r\n            // thing.AttributesArr = this.props.selectedThing.AttributesArr;\r\n            // this.props.addThing(thing);\r\n            this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n              this.props.setAttributes(res2.attributes);\r\n              this.props.setTypes(res2.types);\r\n              this.props.setThings(res2.things);\r\n\r\n              if (this.state.addMore === \"add\") {\r\n                this.props.updateSelectedThing({\r\n                  _id: null,\r\n                  Name: \"\",\r\n                  Description: \"\",\r\n                  NeedsWork: false,\r\n                  Types: this.state.majorType === null ? [] : [this.state.majorType],\r\n                  Attributes: [],\r\n                  AttributesArr: []\r\n                });\r\n                this.setState({\r\n                  _id: null,\r\n                  // Name: \"\",\r\n                  // Description: \"\",\r\n                  // Types: [],\r\n                  // Attributes: [],\r\n                  fieldValidation: {\r\n                    Name: { valid: true, message: \"\" },\r\n                    Attributes: { valid: true, message: \"\" }\r\n                  },\r\n                  formValid: false,\r\n                  message: \"\",\r\n                  waiting: false,\r\n                  resetting: true\r\n                }, this.resetForm);\r\n              } else if (this.state.addMore === \"next\") {\r\n                this.redirectToNext();\r\n              } else {\r\n                this.setState({\r\n                  waiting: false,\r\n                  redirectTo: `/project/details/${this.props.selectedWorld._id}`\r\n                });\r\n              }\r\n            });\r\n          }\r\n          else {\r\n            this.setState({message: res.error}, () => {\r\n              this.props.logout();\r\n            });\r\n          }\r\n        })\r\n        .catch(err => console.log(err));\r\n    } else {\r\n      this.api\r\n        .updateThing(thing)\r\n        .then(res => {\r\n          if (res.error === undefined) {\r\n            this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n              this.props.setAttributes(res2.attributes);\r\n              this.props.setTypes(res2.types);\r\n              this.props.setThings(res2.things);\r\n              \r\n              if (this.state.addMore === \"add\") {\r\n                this.props.updateSelectedThing({\r\n                  _id: null,\r\n                  Name: \"\",\r\n                  Description: \"\",\r\n                  NeedsWork: false,\r\n                  Types: this.state.majorType === null ? [] : [this.state.majorType],\r\n                  Attributes: [],\r\n                  AttributesArr: []\r\n                });\r\n                this.setState({\r\n                  // Name: \"\",\r\n                  // Description: \"\",\r\n                  // Types: [],\r\n                  // Attributes: [],\r\n                  fieldValidation: {\r\n                    Name: { valid: true, message: \"\" },\r\n                    Attributes: { valid: true, message: \"\" }\r\n                  },\r\n                  formValid: false,\r\n                  message: \"\",\r\n                  waiting: false,\r\n                  addMore: false,\r\n                  resetting: true\r\n                }, this.resetForm);\r\n              } else if (this.state.addMore === \"next\") {\r\n                this.redirectToNext();\r\n              } else {\r\n                this.setState({\r\n                  waiting: false,\r\n                  redirectTo: `/project/details/${this.props.selectedWorld._id}`\r\n                });\r\n              }\r\n            });\r\n          }\r\n          else {\r\n            this.setState({message: res.error}, () => {\r\n              this.props.logout();\r\n            });\r\n          }\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  };\r\n\r\n  typesChange = (e, value) => {\r\n    let types = [];\r\n    for (let i = 0; i < value.length; i++) {\r\n      const t = value[i];\r\n      types.push(t);\r\n      types = types.concat(t.Types);\r\n    }\r\n    const thing = this.props.selectedThing;\r\n    thing.Types = types;\r\n    this.props.updateSelectedThing(thing);\r\n    // this.setState({ Types: types });\r\n  };\r\n\r\n  addType = (selectedList, selectedItem) => {\r\n    const thing = this.props.selectedThing;\r\n    const newTypes = {};\r\n    newTypes[selectedItem._id] = selectedItem;\r\n    selectedItem.Supers.forEach(s=>{\r\n      if (selectedList.filter(t=>t._id === s._id).length === 0) {\r\n        let superType = this.props.types.filter(t=>t._id === s._id);\r\n        if (superType.length > 0 && selectedList.filter(t=>t._id === superType[0]._id).length === 0){\r\n          selectedList.push(superType[0]);\r\n          newTypes[superType[0]._id] = superType[0];\r\n        }\r\n      }\r\n      if (this.props.selectedThing.Types.filter(t=>t._id === s._id).length === 0){\r\n        newTypes[s._id] = s;\r\n      }\r\n    });\r\n    let newAttributes = [];\r\n    Object.keys(newTypes).forEach(typeID => {\r\n      const type = newTypes[typeID];\r\n      type.Attributes.forEach(a => {\r\n        const attribute = {...a};\r\n        let existing = thing.Attributes.filter(a=>a.attrID === attribute.attrID);\r\n        if (existing.length === 0) {\r\n          attribute.FromTypeIDs = [type._id];\r\n          attribute.index = type.Attributes.length + newAttributes.length;\r\n          // attribute.attrID = \r\n          newAttributes.push(attribute);\r\n        }\r\n        else {\r\n          existing = existing[0];\r\n          if (existing.FromTypeIDs === undefined || existing.FromTypeIDs === null)\r\n            existing.FromTypeIDs = [];\r\n          existing.FromTypeIDs.push(type._id);\r\n        }\r\n      });\r\n    });\r\n    Object.keys(newTypes).forEach(typeID => {\r\n      const type = newTypes[typeID];\r\n      newAttributes.forEach(attribute => {\r\n        if (type.DefaultsHash === undefined || type.DefaultsHash[attribute.attrID] === undefined || type.DefaultsHash[attribute.attrID].DefaultValue === undefined) {\r\n          attribute.Value = \"\";\r\n          attribute.ListValues = [];\r\n        }\r\n        else {\r\n          if (attribute.Value === undefined) {\r\n            attribute.Value = \"\";\r\n            attribute.ListValues = [];\r\n          }\r\n          if (attribute.Value === \"\") {\r\n            attribute.Value = type.DefaultsHash[attribute.attrID].DefaultValue;\r\n          }\r\n          type.DefaultsHash[attribute.attrID].DefaultListValues.forEach(listValue => {\r\n            if (!attribute.ListValues.includes(listValue))\r\n              attribute.ListValues.push(listValue);\r\n          });\r\n        }\r\n      })\r\n    });\r\n    let attributes = [...thing.Attributes, ...newAttributes];\r\n    // this.setState({ Types: selectedList });\r\n    thing.Types = selectedList;\r\n    thing.Attributes = attributes;\r\n    thing.AttributesArr = [];\r\n    const AttributesArr = [];\r\n    thing.Attributes.forEach(a => {\r\n      const attr = this.props.attributesByID[a.attrID];\r\n      AttributesArr.push({\r\n        index: thing.AttributesArr.length,\r\n        Name: attr.Name,\r\n        AttributeType: attr.AttributeType,\r\n        Options: attr.Options,\r\n        DefinedType: attr.DefinedType,\r\n        ListType: attr.ListType,\r\n        attrID: a.attrID,\r\n        Value: a.Value,\r\n        ListValues: a.ListValues,\r\n        FromTypeIDs: a.FromTypeIDs,\r\n        TypeIDs: attr.TypeIDs\r\n      });\r\n    });\r\n    this.props.updateSelectedThing(thing);\r\n    setTimeout(() => {\r\n      thing.Attributes = attributes;\r\n      thing.AttributesArr = AttributesArr;\r\n      this.props.updateSelectedThing(thing);\r\n    }, 500);\r\n  }\r\n\r\n  addType2 = (type) => {\r\n    const types = this.props.selectedThing.Types;\r\n    types.push(type);\r\n    // this.addType(types, type);\r\n\r\n    const newTypes = [type];\r\n    const thing = this.props.selectedThing;\r\n    type.Supers.forEach(s=>{\r\n      if (types.filter(t=>t._id === s._id).length === 0) {\r\n        let superType = this.props.types.filter(t=>t._id === s._id);\r\n        if (superType.length > 0 && types.filter(t=>t._id === superType[0]._id).length === 0){\r\n          types.push(superType[0]);\r\n          newTypes.push(superType[0]);\r\n        }\r\n      }\r\n      if (this.props.selectedThing.Types.filter(t=>t._id === s._id).length === 0){\r\n        newTypes.push(s);\r\n      }\r\n    });\r\n    let newAttributes = [];\r\n    newTypes.forEach(type => {\r\n      type.Attributes.forEach(a => {\r\n        const attribute = {...a};\r\n        let existing = thing.Attributes.filter(a=>a.attrID === attribute.attrID);\r\n        if (existing.length === 0) {\r\n          attribute.FromTypeIDs = [type._id];\r\n          attribute.index = type.Attributes.length + newAttributes.length;\r\n          // attribute.attrID = \r\n          newAttributes.push(attribute);\r\n        }\r\n        else {\r\n          existing = existing[0];\r\n          if (existing.FromTypeIDs === undefined || existing.FromTypeIDs === null)\r\n            existing.FromTypeIDs = [];\r\n          existing.FromTypeIDs.push(type._id);\r\n        }\r\n      });\r\n    });\r\n    newTypes.forEach(type=> {\r\n      newAttributes.forEach(attribute => {\r\n        if (type.DefaultsHash === undefined || type.DefaultsHash[attribute.attrID] === undefined || type.DefaultsHash[attribute.attrID].DefaultValue === undefined) {\r\n          attribute.Value = \"\";\r\n          attribute.ListValues = [];\r\n        }\r\n        else {\r\n          attribute.Value = type.DefaultsHash[attribute.attrID].DefaultValue;\r\n          attribute.ListValues = type.DefaultsHash[attribute.attrID].DefaultListValues;\r\n        }\r\n      })\r\n    });\r\n    let attributes = [...thing.Attributes, ...newAttributes];\r\n    this.setState({ \r\n      // Types: types, \r\n      resetting: true \r\n    });\r\n    thing.Types = types;\r\n    thing.Attributes = attributes;\r\n    thing.AttributesArr = [];\r\n    const AttributesArr = [];\r\n    thing.Attributes.forEach(a => {\r\n      const attr = this.props.attributesByID[a.attrID];\r\n      AttributesArr.push({\r\n        index: thing.AttributesArr.length,\r\n        Name: attr.Name,\r\n        AttributeType: attr.AttributeType,\r\n        Options: attr.Options,\r\n        DefinedType: attr.DefinedType,\r\n        ListType: attr.ListType,\r\n        attrID: a.attrID,\r\n        Value: a.Value,\r\n        ListValues: a.ListValues,\r\n        FromTypeIDs: a.FromTypeIDs,\r\n        TypeIDs: attr.TypeIDs\r\n      });\r\n    });\r\n    this.props.updateSelectedThing(thing);\r\n    setTimeout(() => {\r\n      thing.Attributes = attributes;\r\n      thing.AttributesArr = AttributesArr;\r\n      this.props.updateSelectedThing(thing);\r\n      this.setState({ resetting: false, infoAttribute: null });\r\n    }, 500);\r\n  }\r\n\r\n  selectNewTypeForAttribute = (e) => {\r\n    if (e.target.value === \"new\") {\r\n      function respond(newType) {\r\n        // attr[\"DefinedType\"] = newType._id;\r\n        this.setState({ newTypeForAttribute: newType._id });\r\n      }\r\n      this.setState({ typeModalOpen: true, modalSubmit: respond});\r\n    }\r\n    else \r\n      this.setState({ newTypeForAttribute: e.target.value });\r\n  }\r\n\r\n  saveInfoAttribute = () => {\r\n    function respond() {\r\n      if (this.state.fieldValidation.infoAttributeName.valid) {\r\n        this.setState({ \r\n          waiting: true\r\n        }, \r\n        this.submitAttributeThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateAttrForm(respond);\r\n  }\r\n\r\n  deleteInfoAttribute = () => {\r\n    const thing = this.props.selectedThing;\r\n    thing.AttributesArr.splice(this.state.infoAttribute.index, 1);\r\n    thing.AttributesArr.forEach(a => {\r\n      if (a.index > this.state.infoAttribute.index) {\r\n        a.index--;\r\n      }\r\n    })\r\n\r\n    function respond() {\r\n      this.props.updateSelectedThing(thing);\r\n    }\r\n    this.setState({infoAttribute: null}, respond);\r\n  }\r\n\r\n  /**\r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p><p><br></p>\r\n   * gets translated to \r\n   * <p>First Reply <a href=\"/type/details/5e7694ce7fc0e1501c57f7cb\" rel=\"noopener noreferrer\" target=\"_blank\">Completed Item</a></p>\r\n   */\r\n  cleanWYSIWYG = (str) => {\r\n    if (str.endsWith(\"<p><br></p>\")) {\r\n      str = str.substring(0, str.length - 11);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  submitAttributeThroughAPI = () => {\r\n    // Need to upsert the attribute, and then move forward\r\n\r\n    const attributes = [{\r\n      _id: this.state.infoAttribute.attrID,\r\n      Name: this.state.infoAttribute.Name.trim(),\r\n      AttributeType: this.state.infoAttribute.AttributeType,\r\n      Options: this.state.infoAttribute.Options,\r\n      DefinedType: this.state.infoAttribute.DefinedType,\r\n      ListType: this.state.infoAttribute.ListType\r\n    }];\r\n    \r\n    this.api.upsertAttributes(this.props.selectedWorldID, attributes).then(res => {\r\n      if (res.error === undefined) {\r\n        // res.attributes is a hash with the name as key and id as value\r\n        this.api.getWorld(this.props.selectedWorldID, true).then(res2 => {\r\n          this.props.setAttributes(res2.attributes);\r\n          this.props.setTypes(res2.types);\r\n          this.props.setThings(res2.things);\r\n          \r\n          const attribute = this.state.infoAttribute;\r\n          if (this.state.newTypeForAttribute !== \"\") {\r\n            attribute.TypeIDs.push(this.state.newTypeForAttribute);\r\n            attribute.FromTypeIDs.push(this.state.newTypeForAttribute);\r\n          }\r\n          const thing = this.props.selectedThing;\r\n          if (attribute.attrID === null) {\r\n            attribute.attrID = res.attributes[attribute.Name];\r\n            // Add it to the Thing's attributes\r\n            const attr2 = {\r\n              attrID: attribute.attrID,\r\n              index: thing.Attributes.length,\r\n              Value: \"\",\r\n              ListValues: []\r\n            };\r\n            thing.Attributes.push(attr2);\r\n            thing.AttributesArr.push({\r\n              attrID: attribute.attrID,\r\n              index: attr2.index,\r\n              Value: \"\",\r\n              ListValues: [],\r\n              Name: attribute.Name,\r\n              AttributeType: attribute.AttributeType,\r\n              Options: attribute.Options,\r\n              DefinedType: attribute.DefinedType,\r\n              ListType: attribute.ListType,\r\n              FromTypeIDs: attribute.FromTypeIDs,\r\n              TypeIDs: attribute.TypeIDs\r\n            });\r\n          }\r\n          else {\r\n            // Update the attribute on the Thing\r\n            const attr2 = thing.AttributesArr.filter(a => a.attrID === attribute.attrID)[0];\r\n            attr2.Name = attribute.Name;\r\n            attr2.AttributeType = attribute.AttributeType;\r\n            attr2.Options = attribute.Options;\r\n            attr2.DefinedType = attribute.DefinedType;\r\n            attr2.ListType = attribute.ListType;\r\n            attr2.FromTypeIDs = attribute.FromTypeIDs;\r\n            attr2.TypeIDs = attribute.TypeIDs;\r\n          }\r\n          if (attribute.FromTypeIDs.length === 0) {\r\n            this.props.updateSelectedThing(thing);\r\n            this.setState({infoAttribute: null, waiting: false});\r\n          }\r\n          else {\r\n            // Need to add it to the type\r\n            const theType = this.props.types.filter(t => t._id === attribute.FromTypeIDs[0])[0];\r\n            const type = {\r\n              _id: theType._id,\r\n              Name: theType.Name,\r\n              Description: this.cleanWYSIWYG(theType.Description),\r\n              NeedsWork: theType.NeedsWork,\r\n              SuperIDs: theType.SuperIDs,\r\n              // AttributesArr: this.props.selectedType.AttributesArr,\r\n              Attributes: theType.Attributes,\r\n              Defaults: theType.Defaults,\r\n              worldID: this.props.selectedWorld._id,\r\n              Major: theType.Major,\r\n              ReferenceIDs: theType.ReferenceIDs,\r\n              DefaultReferenceIDs: theType.DefaultReferenceIDs,\r\n              EditUserID: this.props.user._id\r\n            };\r\n            type.Attributes.push({\r\n              attrID: attribute.attrID,\r\n              index: type.Attributes.length,\r\n              // Name: a.Name,\r\n              // AttributeType: a.AttributeType,\r\n              // Options: a.Options,\r\n              // DefinedType: a.DefinedType,\r\n              // ListType: a.ListType\r\n            });\r\n            this.api\r\n              .updateType(type)\r\n              .then(res => {\r\n                if (res.error === undefined) {\r\n                  type.Supers = [];\r\n                  type.SuperIDs.forEach(sID=> {\r\n                    type.Supers = type.Supers.concat(this.props.types.filter(t2=>t2._id === sID));\r\n                  });\r\n                  type.AttributesArr = [];\r\n                  type.Attributes.forEach(a => {\r\n                    const attr = this.props.attributesByID[a.attrID];\r\n                    type.AttributesArr.push({\r\n                      index: type.AttributesArr.length,\r\n                      Name: attr.Name,\r\n                      AttributeType: attr.AttributeType,\r\n                      Options: attr.Options,\r\n                      DefinedType: attr.DefinedType,\r\n                      ListType: attr.ListType,\r\n                      attrID: a.attrID\r\n                    });\r\n                  });\r\n                  const defHash = {};\r\n                  if (type.Defaults !== undefined) {\r\n                    type.Defaults.forEach(def => {\r\n                      defHash[def.attrID] = def;\r\n                    });\r\n                  }\r\n                  type.DefaultsHash = defHash;\r\n                  this.props.updateType(type);\r\n\r\n                  function respond() {\r\n                    this.addType2(type);\r\n                  }\r\n                  \r\n                  this.setState({\r\n                    infoAttribute: null, waiting: false\r\n                  }, respond);\r\n                }\r\n                else {\r\n                  this.setState({\r\n                    waiting: false, \r\n                    message: res.error \r\n                  }, () => {\r\n                    this.props.logout();\r\n                  });\r\n                }\r\n              })\r\n              .catch(err => console.log(err));\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.setState({ message: res.error, waiting: false }, () => {\r\n          this.props.logout();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  \r\n  removeType = (selectedList, removedItem) => {\r\n    // TODO: Add a confirmation before doing this\r\n    // to let them know it will also remove sub-types.\r\n    let types = [];\r\n    let removeUs = [];\r\n    this.props.selectedThing.Types.forEach(checkMe => {\r\n      if (checkMe._id === removedItem._id || checkMe.SuperIDs.includes(removedItem._id))\r\n        removeUs.push(checkMe._id);\r\n      else types.push(checkMe);\r\n    });\r\n    const thing = this.props.selectedThing;\r\n    let attributes = [...thing.Attributes];\r\n    attributes.forEach(attribute => {\r\n      const newFromTypeIDs = [];\r\n      attribute.FromTypeIDs.forEach(typeID => {\r\n        if (!removeUs.includes(typeID))\r\n          newFromTypeIDs.push(typeID);\r\n      });\r\n      attribute.FromTypeIDs = newFromTypeIDs;\r\n    });\r\n    // this.setState({ Types: types });\r\n    thing.Types = types;\r\n    thing.Attributes = attributes;\r\n    thing.AttributesArr = [];\r\n    thing.Attributes.forEach(a => {\r\n      const attr = this.props.attributesByID[a.attrID];\r\n      thing.AttributesArr.push({\r\n        index: thing.AttributesArr.length,\r\n        Name: attr.Name,\r\n        AttributeType: attr.AttributeType,\r\n        Options: attr.Options,\r\n        DefinedType: attr.DefinedType,\r\n        ListType: attr.ListType,\r\n        attrID: a.attrID,\r\n        Value: a.Value,\r\n        ListValues: a.ListValues,\r\n        FromTypeIDs: a.FromTypeIDs,\r\n        TypeIDs: attr.TypeIDs\r\n      });\r\n    });\r\n    this.props.updateSelectedThing(thing);\r\n  }\r\n\r\n  redirectToNext = () => {\r\n    // Find the next thing\r\n    const things = this.state.majorType === null ? this.props.things : this.props.things.filter(t => t.TypeIDs.includes(this.state.majorType._id));\r\n    let index = 0;\r\n    if (this.props.selectedThing === undefined || this.props.selectedThing._id !== null) {\r\n      while (things[index]._id !== this.props.selectedThing._id)\r\n        index++;\r\n      index++;\r\n    }\r\n    if (index === things.length)\r\n      index = 0;\r\n    this.setState({ \r\n      waiting: false, \r\n      redirectTo: `/thing/edit/${things[index]._id}` \r\n    });\r\n  }\r\n\r\n  renderHeader() {\r\n    let typeStr = \"Thing\";\r\n    this.props.selectedThing.Types.forEach(t=>{\r\n      if (t.Major) { \r\n        if (typeStr === \"Thing\") {\r\n          typeStr = t.Name;\r\n        }\r\n        else {\r\n          typeStr += \"/\" + t.Name;\r\n        }\r\n      }\r\n    });\r\n    return <h4>{this.state._id === null ? `Create New ${typeStr}` : `Edit ${typeStr}`}</h4>;\r\n  }\r\n\r\n  load = (id) => {\r\n    setTimeout(() => {\r\n      this.setState({\r\n        _id: id,\r\n        redirectTo: null,\r\n        loaded: false\r\n      }, this.finishLoading);\r\n    }, 500);\r\n  }\r\n\r\n  finishLoading = () => {\r\n    if (this.props.selectedWorldID) {\r\n      this.api.getWorld(this.props.selectedWorldID).then(res => {\r\n        this.props.setAttributes(res.attributes);\r\n        this.props.setTypes(res.types);\r\n        this.props.setThings(res.things);\r\n        \r\n        if (this.props.fromLogin) {\r\n          this.props.notFromLogin();\r\n          this.setState({\r\n            // _id: id,\r\n            loaded: true,\r\n            message: \"\"\r\n          });\r\n        }\r\n        else {\r\n          if (this.state._id !== null) {\r\n            // We're editing an existing Thing\r\n            let thing = res.things.filter(t => t._id === this.state._id);\r\n            if (thing.length === 0) {\r\n              this.setState({ message: \"Invalid ID\" });\r\n            }\r\n            else {\r\n              thing = thing[0];\r\n              this.api.upsertView({ \r\n                userID: this.props.user._id, \r\n                worldID: this.props.selectedWorldID, \r\n                objectType: \"Thing\",\r\n                objectID: thing._id\r\n              });\r\n              // const things = this.props.things.filter(\r\n              //   t => t._id !== thing._id\r\n              // );\r\n              let Types = [];\r\n              thing.TypeIDs.forEach(tID=> {\r\n                Types = Types.concat(this.props.types.filter(t2=>t2._id === tID));\r\n              });\r\n              let newAttributes = [];\r\n              Types.forEach(type=> {\r\n                for (let i = 0; i < type.Attributes.length; i++) {\r\n                  const attribute = {...type.Attributes[i]};\r\n                  let existing = thing.Attributes.filter(a=>a.attrID === attribute.attrID);\r\n                  if (existing.length === 0) {\r\n                    attribute.FromTypeIDs = [type._id];\r\n                    attribute.index = thing.Attributes.length + newAttributes.length;\r\n                    newAttributes.push(attribute);\r\n                  }\r\n                  else {\r\n                    existing = existing[0];\r\n                    if (existing.FromTypeIDs === undefined || existing.FromTypeIDs === null)\r\n                      existing.FromTypeIDs = [];\r\n                    existing.FromTypeIDs.push(type._id);\r\n                  }\r\n                }\r\n              });\r\n              Types.forEach(type=> {\r\n                newAttributes.forEach(attribute => {\r\n                  if (type.DefaultsHash[attribute.attrID] === undefined || type.DefaultsHash[attribute.attrID].DefaultValue === undefined) {\r\n                    attribute.Value = \"\";\r\n                    attribute.ListValues = [];\r\n                  }\r\n                  else {\r\n                    attribute.Value = type.DefaultsHash[attribute.attrID].DefaultValue;\r\n                    attribute.ListValues = type.DefaultsHash[attribute.attrID].DefaultListValues;\r\n                  }\r\n                })\r\n              });\r\n              let attributes = [...thing.Attributes, ...newAttributes];\r\n              attributes.forEach(a => {\r\n                if (a.FromTypeIDs === undefined) {\r\n                  a.FromTypeIDs = [];\r\n                }\r\n              });\r\n              thing.Attributes = attributes;\r\n              thing.AttributesArr = [];\r\n              thing.Attributes.forEach(a => {\r\n                // if (a.attrID !== undefined) {\r\n                const attr = this.props.attributesByID[a.attrID];\r\n                thing.AttributesArr.push({\r\n                  index: thing.AttributesArr.length,\r\n                  Name: attr.Name,\r\n                  AttributeType: attr.AttributeType,\r\n                  Options: attr.Options,\r\n                  DefinedType: attr.DefinedType,\r\n                  ListType: attr.ListType,\r\n                  attrID: a.attrID,\r\n                  Value: a.Value,\r\n                  ListValues: a.ListValues,\r\n                  FromTypeIDs: a.FromTypeIDs,\r\n                  TypeIDs: attr.TypeIDs\r\n                });\r\n                // }\r\n              });\r\n              thing.Types = Types;\r\n              this.props.updateSelectedThing(thing);\r\n              if (this.state.majorType === null) {\r\n                let majorType = thing.Types.filter(t=>t.Major);\r\n                if (majorType.length > 0) {\r\n                  majorType = majorType[0];\r\n                  \r\n                  this.setState({\r\n                    loaded: true,\r\n                    majorType\r\n                  });\r\n                }\r\n                else {\r\n                  this.setState({\r\n                    loaded: true\r\n                  });\r\n                }\r\n              }\r\n              else {\r\n                this.setState({\r\n                  loaded: true\r\n                });\r\n              }\r\n            }\r\n          } else {\r\n            let { id } = this.props.match.params;\r\n            if (id !== undefined && id.includes(\"type_id_\")) {\r\n              // We're creating it from a type rather than from blank\r\n              const typeID = id.substring(8);\r\n              let type = this.props.types.filter(t=> t._id === typeID);\r\n              if (type.length > 0) {\r\n                type = type[0];\r\n                this.createThingFromType(type);\r\n              }\r\n              else {\r\n                this.setState({ message: \"Invalid Type\", loaded: true });\r\n              }\r\n            }\r\n            else {\r\n              // We're creating a new thing from blank.\r\n              this.props.updateSelectedThing({\r\n                _id: null,\r\n                Name: \"\",\r\n                Description: \"\",\r\n                NeedsWork: false,\r\n                Types: [],\r\n                Attributes: [],\r\n                AttributesArr: []\r\n              });\r\n              this.setState({ loaded: true });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.api.getWorldByThingID(this.state._id).then((res) => {\r\n        this.props.selectWorld(res.worldID);\r\n        this.props.setAttributes(res.attributes);\r\n        this.props.setTypes(res.types);\r\n        this.props.setThings(res.things);\r\n        \r\n        if (this.props.fromLogin) {\r\n          this.props.notFromLogin();\r\n          this.setState({\r\n            // _id: id,\r\n            loaded: true,\r\n            message: \"\"\r\n          });\r\n        }\r\n        else {\r\n          if (this.state._id !== null) {\r\n            // We're editing an existing Thing\r\n            let thing = res.things.filter(t => t._id === this.state._id);\r\n            if (thing.length === 0) {\r\n              this.setState({ message: \"Invalid ID\" });\r\n            }\r\n            else {\r\n              thing = thing[0];\r\n              // const things = this.props.things.filter(\r\n              //   t => t._id !== thing._id\r\n              // );\r\n              let Types = [];\r\n              thing.TypeIDs.forEach(tID=> {\r\n                Types = Types.concat(this.props.types.filter(t2=>t2._id === tID));\r\n              });\r\n              let newAttributes = [];\r\n              Types.forEach(type=> {\r\n                for (let i = 0; i < type.Attributes.length; i++) {\r\n                  const attribute = {...type.Attributes[i]};\r\n                  let existing = thing.Attributes.filter(a=>a.attrID === attribute.attrID);\r\n                  if (existing.length === 0) {\r\n                    attribute.FromTypeIDs = [type._id];\r\n                    attribute.index = thing.Attributes.length + newAttributes.length;\r\n                    newAttributes.push(attribute);\r\n                  }\r\n                  else {\r\n                    existing = existing[0];\r\n                    if (existing.FromTypeIDs === undefined || existing.FromTypeIDs === null)\r\n                      existing.FromTypeIDs = [];\r\n                    existing.FromTypeIDs.push(type._id);\r\n                  }\r\n                }\r\n              });\r\n              Types.forEach(type=> {\r\n                newAttributes.forEach(attribute => {\r\n                  if (type.DefaultsHash[attribute.attrID] === undefined || type.DefaultsHash[attribute.attrID].DefaultValue === undefined) {\r\n                    attribute.Value = \"\";\r\n                    attribute.ListValues = [];\r\n                  }\r\n                  else {\r\n                    attribute.Value = type.DefaultsHash[attribute.attrID].DefaultValue;\r\n                    attribute.ListValues = type.DefaultsHash[attribute.attrID].DefaultListValues;\r\n                  }\r\n                })\r\n              });\r\n              let attributes = [...thing.Attributes, ...newAttributes];\r\n              attributes.forEach(a => {\r\n                if (a.FromTypeIDs === undefined) {\r\n                  a.FromTypeIDs = [];\r\n                }\r\n              });\r\n              thing.Attributes = attributes;\r\n              thing.AttributesArr = [];\r\n              thing.Attributes.forEach(a => {\r\n                // if (a.attrID !== undefined) {\r\n                const attr = this.props.attributesByID[a.attrID];\r\n                thing.AttributesArr.push({\r\n                  index: thing.AttributesArr.length,\r\n                  Name: attr.Name,\r\n                  AttributeType: attr.AttributeType,\r\n                  Options: attr.Options,\r\n                  DefinedType: attr.DefinedType,\r\n                  ListType: attr.ListType,\r\n                  attrID: a.attrID,\r\n                  Value: a.Value,\r\n                  ListValues: a.ListValues,\r\n                  FromTypeIDs: a.FromTypeIDs,\r\n                  TypeIDs: attr.TypeIDs\r\n                });\r\n                // }\r\n              });\r\n              thing.Types = Types;\r\n              this.props.updateSelectedThing(thing);\r\n              if (this.state.majorType === null) {\r\n                let majorType = thing.Types.filter(t=>t.Major);\r\n                if (majorType.length > 0) {\r\n                  majorType = majorType[0];\r\n                  \r\n                  this.setState({\r\n                    loaded: true,\r\n                    majorType\r\n                  });\r\n                }\r\n                else {\r\n                  this.setState({\r\n                    loaded: true\r\n                  });\r\n                }\r\n              }\r\n              else {\r\n                this.setState({\r\n                  loaded: true\r\n                });\r\n              }\r\n            }\r\n          } else {\r\n            let { id } = this.props.match.params;\r\n            if (id !== undefined && id.includes(\"type_id_\")) {\r\n              // We're creating it from a type rather than from blank\r\n              const typeID = id.substring(8);\r\n              let type = this.props.types.filter(t=> t._id === typeID);\r\n              if (type.length > 0) {\r\n                type = type[0];\r\n                this.createThingFromType(type);\r\n              }\r\n              else {\r\n                this.setState({ message: \"Invalid Type\", loaded: true });\r\n              }\r\n            }\r\n            else {\r\n              // We're creating a new thing from blank.\r\n              this.props.updateSelectedThing({\r\n                _id: null,\r\n                Name: \"\",\r\n                Description: \"\",\r\n                NeedsWork: false,\r\n                Types: [],\r\n                Attributes: [],\r\n                AttributesArr: []\r\n              });\r\n              this.setState({ loaded: true });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { id } = this.props.match.params;\r\n    if (id === undefined || id.includes(\"type_id_\"))\r\n      id = null;\r\n    if (this.state._id !== id) {\r\n      this.load(id);\r\n      return (<span>Loading...</span>);\r\n    } else if (!this.state.loaded) {\r\n      return (<span>Loading...</span>);\r\n    } else if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      this.props.user === null) {\r\n      setTimeout(() => {\r\n        this.props.toggleLogin();\r\n      }, 500);\r\n      return <span>Requires Login</span>;\r\n    } else if (this.props.selectedWorld !== null && \r\n      !this.props.selectedWorld.Public && \r\n      (this.props.selectedWorld.Owner !== this.props.user._id && \r\n          this.props.selectedWorld.Collaborators.filter(c=>c.userID === this.props.user._id && c.type === \"collab\" && c.editPermission).length === 0)) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (this.props.selectedThing === null || this.props.selectedThing._id !== id) {\r\n      return <span>Loading...</span>;\r\n    } else if (this.state.typeModalOpen) {\r\n      return (\r\n        <NewTypeModal \r\n          types={this.props.types}\r\n          selectedWorldID={this.props.selectedWorldID}\r\n          onCancel={_ => {\r\n            this.setState({typeModalOpen: false});\r\n          }}\r\n          addType={type => {\r\n            this.props.addType(type);\r\n          }}\r\n          onSave={type => {\r\n            this.setState({typeModalOpen: false, newTypeForAttribute: type._id});\r\n          }}\r\n          api={this.api}\r\n          logout={() => {\r\n            this.props.logout();\r\n          }}\r\n        />\r\n      );\r\n    } else if (this.state.infoAttribute !== null) {\r\n      const connectedTypes = this.props.types.filter(t=> this.state.infoAttribute.FromTypeIDs.includes(t._id));\r\n      const otherTypes = this.props.types.filter(t=> !this.state.infoAttribute.FromTypeIDs.includes(t._id) && this.state.infoAttribute.TypeIDs.includes(t._id));\r\n      if (connectedTypes.length === 0) {\r\n        if (otherTypes.length === 0) {\r\n          const attributeTypes = [\r\n            \"Text\",\r\n            \"Number\",\r\n            \"True/False\",\r\n            \"Options\", \r\n            \"Type\", \r\n            \"List\"\r\n          ];\r\n          const listTypes = [\r\n            \"Text\",\r\n            \"Options\", \r\n            \"Type\"\r\n          ];\r\n          // This attribute isn't on any types, so we need to give the ability to add it to a type, as well as to edit it.\r\n          return (\r\n            <Grid item xs={12} container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                <List>\r\n                  <ListItem style={{fontSize:\"30px\"}}>Attribute Info</ListItem>\r\n                  <ListItem>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"infoAttributeName\">Name</InputLabel>\r\n                      <OutlinedInput\r\n                        id=\"infoAttributeName\"\r\n                        name=\"infoAttributeName\"\r\n                        type=\"text\"\r\n                        autoComplete=\"Off\"\r\n                        error={!this.state.fieldValidation.infoAttributeName.valid}\r\n                        value={this.state.infoAttribute.Name}\r\n                        onChange={this.handleInfoAttrNameChange}\r\n                        onBlur={this.inputBlur2}\r\n                        labelWidth={43}\r\n                        fullWidth\r\n                      />\r\n                      <FormHelperText>\r\n                        {this.state.fieldValidation.infoAttributeName.message}\r\n                      </FormHelperText>\r\n                    </FormControl>\r\n                  </ListItem>\r\n                  <ListItem>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"attribute-type\" id=\"attribute-type-label\">\r\n                        Attribute Type\r\n                      </InputLabel>\r\n                      <Select\r\n                        labelId=\"attribute-type-label\"\r\n                        id=\"attribute-type\"\r\n                        disabled={this.state.waiting}\r\n                        // disabled={props.attribute.FromSupers.length > 0} \r\n                        value={this.state.infoAttribute.AttributeType}\r\n                        onChange={e => {\r\n                          const attr = this.state.infoAttribute;\r\n                          attr[\"AttributeType\"] = e.target.value;\r\n                          this.setState({ infoAttribute: attr });\r\n                        }}\r\n                        fullWidth\r\n                        labelWidth={100}\r\n                      >\r\n                        {attributeTypes.map((type, i) => {\r\n                          return (<MenuItem key={i} value={type}>{type}</MenuItem>);\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </ListItem>\r\n                  { this.state.infoAttribute.AttributeType === \"List\" && \r\n                    <ListItem>\r\n                      <FormControl variant=\"outlined\" fullWidth>\r\n                        <InputLabel htmlFor=\"list-type\" id=\"list-type-label\">\r\n                          List Type\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"list-type-label\"\r\n                          id=\"list-type\"\r\n                          disabled={this.state.waiting}\r\n                          // disabled={props.attribute.FromSupers.length > 0} \r\n                          value={this.state.infoAttribute.ListType}\r\n                          onChange={e => {\r\n                            const attr = this.state.infoAttribute;\r\n                            attr[\"ListType\"] = e.target.value;\r\n                            this.setState({ infoAttribute: attr });\r\n                          }}\r\n                          fullWidth\r\n                          labelWidth={70}\r\n                        >\r\n                          {listTypes.map((type, i) => {\r\n                            return (<MenuItem key={i} value={type}>{type}</MenuItem>);\r\n                          })}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </ListItem> \r\n                  }\r\n                  { (this.state.infoAttribute.AttributeType === \"Type\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Type\")) && \r\n                    <ListItem>\r\n                      <FormControl variant=\"outlined\" fullWidth>\r\n                        <InputLabel htmlFor=\"definedType\" id=\"definedType-label\">\r\n                          Defined Type\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"definedType-label\"\r\n                          id=\"definedType\"\r\n                          disabled={this.state.waiting}\r\n                          // disabled={props.attribute.FromSupers.length > 0} \r\n                          value={this.state.infoAttribute.DefinedType}\r\n                          onChange={e => {\r\n                            const attr = this.state.infoAttribute;\r\n                            attr[\"DefinedType\"] = e.target.value;\r\n                            if (e.target.value === \"new\") {\r\n                              function respond(newType) {\r\n                                attr[\"DefinedType\"] = newType._id;\r\n                                this.setState({ typeModalOpen: false, infoAttribute: attr });\r\n                              }\r\n                              this.setState({ typeModalOpen: true, modalSubmit: respond});\r\n                            }\r\n                            else \r\n                              this.setState({ infoAttribute: attr });\r\n                          }}\r\n                          fullWidth\r\n                          labelWidth={100}\r\n                        >\r\n                          <MenuItem value=\"new\">+ Create New Type</MenuItem>\r\n                          {this.props.types.map((type, i) => {\r\n                            return (<MenuItem key={i} value={type._id}>{type.Name}</MenuItem>);\r\n                          })}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </ListItem> \r\n                  }\r\n                  { (this.state.infoAttribute.AttributeType === \"Options\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Options\")) && \r\n                    <ListItem>\r\n                      <ChipInput\r\n                        variant=\"outlined\"\r\n                        disabled={this.state.waiting}\r\n                        // disabled={props.attribute.FromSupers.length > 0}\r\n                        defaultValue={this.state.infoAttribute.Options}\r\n                        onChange={chips => {\r\n                          const attr = this.state.infoAttribute;\r\n                          attr[\"Options\"] = chips;\r\n                          this.setState({ infoAttribute: attr });\r\n                        }}\r\n                      />\r\n                    </ListItem>\r\n                  }\r\n                  <ListItem>\r\n                    Select a Type to add this attribute to, and to add to {this.props.selectedThing.Name}\r\n                  </ListItem>\r\n                  <ListItem>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"newTypeForAttribute\" id=\"newTypeForAttribute-label\">\r\n                        Type For Attribute\r\n                      </InputLabel>\r\n                      <Select\r\n                        labelId=\"newTypeForAttribute-label\"\r\n                        id=\"newTypeForAttribute\"\r\n                        value={this.state.newTypeForAttribute}\r\n                        onChange={e => {this.selectNewTypeForAttribute(e)}}\r\n                        fullWidth\r\n                        labelWidth={125}\r\n                      >\r\n                        <MenuItem value=\"new\">+ Create New Type</MenuItem>\r\n                        {this.props.types.map((type, i) => {\r\n                          return (<MenuItem key={i} value={type._id}>{type.Name}</MenuItem>);\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </ListItem>\r\n                  <ListItem>\r\n                    Or you can also remove this attribute from {this.props.selectedThing.Name}\r\n                  </ListItem>\r\n                  <ListItem>\r\n                    <Tooltip title={`Delete Attribute`}>\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={this.state.waiting}\r\n                        onClick={this.deleteInfoAttribute}\r\n                      >\r\n                        <Delete />\r\n                      </Button>\r\n                    </Tooltip>\r\n                  </ListItem>\r\n                </List>\r\n              </Grid>\r\n              <Grid item>{this.state.message}</Grid>\r\n              <Grid item container spacing={1} direction=\"row\">\r\n                <Grid item xs={6}>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={this.state.waiting}\r\n                    onClick={this.saveInfoAttribute}\r\n                  >\r\n                    {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Button\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    onClick={_ => {this.setState({infoAttribute: null})}}\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          );\r\n        }\r\n        else {\r\n          return (\r\n            <Grid item xs={12} container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                <List>\r\n                  <ListItem style={{fontSize:\"30px\"}}>Attribute Info</ListItem>\r\n                  <ListItem>Name: {this.state.infoAttribute.Name}</ListItem>\r\n                  <ListItem>Type: {this.state.infoAttribute.AttributeType}</ListItem>\r\n                  { this.state.infoAttribute.AttributeType === \"List\" && \r\n                    <ListItem>List Type: {this.state.infoAttribute.ListType}</ListItem> \r\n                  }\r\n                  { (this.state.infoAttribute.AttributeType === \"Type\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Type\")) && \r\n                    <ListItem>\r\n                      Defined Type: \r\n                      <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={ _ => {this.setState({redirectTo:`/type/details/${this.state.infoAttribute.DefinedType}`})}}\r\n                      >\r\n                        {this.props.types.filter(t=>t._id === this.state.infoAttribute.DefinedType)[0].Name}\r\n                      </Button>\r\n                    </ListItem> \r\n                  }\r\n                  { (this.state.infoAttribute.AttributeType === \"Options\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Options\")) && \r\n                    <ListItem>\r\n                      Options: \r\n                      {this.state.infoAttribute.Options.map((option, j) => {\r\n                        return (\r\n                          <span key={j}>\r\n                            {j === 0 ? \" \" : \", \"}\r\n                            {option}\r\n                          </span>\r\n                        );\r\n                      })}\r\n                    </ListItem>\r\n                  }\r\n                  <ListItem>\r\n                    { otherTypes.length === 1 ? \"Type associated with this attribute:\" : \"Types associated with this attribute:\" }\r\n                    <List>\r\n                      { otherTypes.map((type, j) => {\r\n                        return (\r\n                          <span key={j}>\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}\r\n                            >\r\n                              {type.Name}\r\n                            </Button>\r\n\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={ _ => {this.addType2(type)}}\r\n                            >\r\n                              Add {type.Name} to {this.props.selectedThing.Name}\r\n                            </Button>\r\n                          </span>\r\n                        );\r\n                      })}\r\n                    </List>\r\n                  </ListItem>\r\n                </List>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={e => {this.setState({infoAttribute: null})}}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          );\r\n        }\r\n      }\r\n      else {\r\n        return (\r\n          <Grid item xs={12} container spacing={1} direction=\"column\">\r\n            <Grid item>\r\n              <List>\r\n                <ListItem style={{fontSize:\"30px\"}}>Attribute Info</ListItem>\r\n                <ListItem>Name: {this.state.infoAttribute.Name}</ListItem>\r\n                <ListItem>Type: {this.state.infoAttribute.AttributeType}</ListItem>\r\n                { this.state.infoAttribute.AttributeType === \"List\" && \r\n                  <ListItem>List Type: {this.state.infoAttribute.ListType}</ListItem> \r\n                }\r\n                { (this.state.infoAttribute.AttributeType === \"Type\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Type\")) && \r\n                  <ListItem>\r\n                    Defined Type: \r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      onClick={ _ => {this.setState({redirectTo:`/type/details/${this.state.infoAttribute.DefinedType}`})}}\r\n                    >\r\n                      {this.props.types.filter(t=>t._id === this.state.infoAttribute.DefinedType)[0].Name}\r\n                    </Button>\r\n                  </ListItem> \r\n                }\r\n                { (this.state.infoAttribute.AttributeType === \"Options\" || (this.state.infoAttribute.AttributeType === \"List\" && this.state.infoAttribute.ListType === \"Options\")) && \r\n                  <ListItem>\r\n                    Options: \r\n                    {this.state.infoAttribute.Options.map((option, j) => {\r\n                      return (\r\n                        <span key={j}>\r\n                          {j === 0 ? \" \" : \", \"}\r\n                          {option}\r\n                        </span>\r\n                      );\r\n                    })}\r\n                  </ListItem>\r\n                }\r\n                { connectedTypes.length > 0 &&\r\n                  <ListItem>\r\n                    { connectedTypes.length === 1 ? \"From Type:\" : \"From Types:\" }\r\n                    {\r\n                      connectedTypes.map((type, j) => {\r\n                        return (\r\n                          <span key={j}>\r\n                            {j === 0 ? \" \" : \", \"}\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              color=\"primary\"\r\n                              onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}\r\n                            >\r\n                              {type.Name}\r\n                            </Button>\r\n                          </span>\r\n                        );\r\n                      })\r\n                    }\r\n                  </ListItem>\r\n                }\r\n                { otherTypes.length > 0 &&\r\n                  <ListItem>\r\n                    { otherTypes.length === 1 ? \"Other Associated Type:\" : \"Other Associated Types:\" }\r\n                    { otherTypes.map((type, j) => {\r\n                      return (\r\n                        <span key={j}>\r\n                          {j === 0 ? \" \" : \", \"}\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={ _ => {this.setState({redirectTo:`/type/details/${type._id}`})}}\r\n                          >\r\n                            {type.Name}\r\n                          </Button>\r\n                        </span>\r\n                      );\r\n                    })}\r\n                  </ListItem>\r\n                }\r\n              </List>\r\n            </Grid>\r\n            <Grid item>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={e => {this.setState({infoAttribute: null})}}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      }\r\n    } else if (this.state.thingModalOpen) {\r\n      return (\r\n        <NewThingModal \r\n          things={this.props.things}\r\n          newThingType={this.state.newThingType}\r\n          selectedWorldID={this.props.selectedWorldID}\r\n          onCancel={_ => {\r\n            this.setState({\r\n              thingModalOpen: false\r\n            });\r\n          }}\r\n          addThing={thing => {\r\n            this.props.addThing(thing);\r\n          }}\r\n          onSave={newThing => {\r\n            // Need to put it on putThingOnAttribute\r\n            const thing = this.props.selectedThing;\r\n            const attr = thing.AttributesArr.filter(a => a.attrID === this.state.putThingOnAttribute.attrID)[0];\r\n            if (attr.AttributeType === \"Type\") {\r\n              attr.Value = newThing._id;\r\n            }\r\n            else {\r\n              // The only way it can be here is if it's List and ListType is Type\r\n              attr.ListValues.push(newThing._id);\r\n            }\r\n            this.props.updateSelectedThing(thing);\r\n            this.setState({\r\n              thingModalOpen: false\r\n            });\r\n          }}\r\n          api={this.api}\r\n          logout={() => {\r\n            this.props.logout();\r\n          }}\r\n        />\r\n      );\r\n    } else {\r\n      let additionalAttributes = [];\r\n      if (this.state.browseAttributes) {\r\n        Object.keys(this.props.attributesByID).forEach(id => {\r\n          if (this.props.selectedThing.Attributes.filter(a => a.attrID === id).length === 0){\r\n            additionalAttributes.push(this.props.attributesByID[id]);\r\n          }\r\n        });\r\n      }\r\n      const suggestions = [...this.props.typeSuggestions, ...this.props.thingSuggestions];\r\n      const formHeight = this.props.height - (this.props.width > 600 ? 260 : 300);\r\n      return (\r\n        <Grid item xs={12} container spacing={1} direction=\"column\">\r\n          { this.props.selectedWorld !== null &&\r\n            <Grid item container spacing={1} direction=\"column\">\r\n              <Helmet>\r\n                <title>{ `Author's Notebook: ${this.props.selectedWorld.Name}` }</title>\r\n              </Helmet>\r\n              <Grid item container spacing={1} direction=\"row\">\r\n                <Grid item xs={2}>\r\n                  <Tooltip title={`Back to ${this.props.selectedWorld.Name}`}>\r\n                    <Fab size=\"small\"\r\n                      color=\"primary\"\r\n                      onClick={ _ => {this.setState({redirectTo:`/project/details/${this.props.selectedWorldID}`})}}\r\n                    >\r\n                      <ArrowBack />\r\n                    </Fab>\r\n                  </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={5} sm={7}>\r\n                  {this.renderHeader()}\r\n                </Grid>\r\n                <Grid item xs={5} sm={3}>\r\n                  <ListItem>\r\n                    { this.state.majorType === null && this.props.things.length > 1 ?\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={_ => {\r\n                          this.redirectToNext();\r\n                        }}\r\n                      >\r\n                        <ListItemText primary=\"Next\" />\r\n                      </Button>\r\n                    : this.state.majorType !== null && this.props.things.filter(t => t.TypeIDs.includes(this.state.majorType._id)).length > 1 &&\r\n                      <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={_ => {\r\n                          this.redirectToNext();\r\n                        }}\r\n                      >\r\n                        <ListItemText primary={`Next ${this.state.majorType.Name}`}/>\r\n                      </Button>\r\n                    }\r\n                  </ListItem>\r\n                </Grid>\r\n              </Grid>\r\n              { !this.state.resetting &&\r\n                <Grid item style={{ height: `${formHeight}px`, overflowY: \"scroll\", overflowX: \"hidden\" }}>\r\n                  <Grid container spacing={1} direction=\"column\">\r\n                    <Grid item>\r\n                      { this.state.loaded && \r\n                        <TextBox \r\n                          Value={this.props.selectedThing.Name} \r\n                          fieldName=\"Name\" \r\n                          message={this.state.fieldValidation.Name.message}\r\n                          onBlur={name => {\r\n                            const thing = this.props.selectedThing;\r\n                            thing.Name = name;\r\n                            this.props.updateSelectedThing(thing);\r\n                            this.validateForm();\r\n                            // this.setState({ Name: name }, this.validateForm);\r\n                          }}\r\n                          labelWidth={43}/>\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      { this.state.loaded &&  \r\n                        <TextBox \r\n                          Value={this.props.selectedThing.Description} \r\n                          fieldName=\"Description\" \r\n                          multiline={true}\r\n                          onBlur={desc => {\r\n                            const thing = this.props.selectedThing;\r\n                            thing.Description = desc;\r\n                            this.props.updateSelectedThing(thing);\r\n                            // this.setState({ Description: desc });\r\n                          }}\r\n                          options={suggestions}\r\n                          labelWidth={82}/>\r\n                      }\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Checkbox\r\n                            icon={\r\n                              <img style={{ opacity: \"0.5\", height: \"30px\" }} src={UnderConstruction} alt=\"No Work Planned\" /> \r\n                            } \r\n                            checkedIcon={\r\n                              <img style={{ height: \"30px\" }} src={UnderConstruction} alt=\"Needs Work\" />\r\n                            }\r\n                            checked={this.props.selectedThing.NeedsWork}\r\n                            onChange={ e => {\r\n                              const value = e.target.checked;\r\n                              const thing = this.props.selectedThing;\r\n                              thing.NeedsWork = value;\r\n                              this.props.updateSelectedThing(thing);\r\n                              // this.setState({ [name]: value });\r\n                              // this.handleUserInput(e);\r\n                            }}\r\n                            name=\"NeedsWork\"\r\n                            color=\"primary\"\r\n                          />\r\n                        }\r\n                        label=\"Needs Work\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item>\r\n                      <Multiselect\r\n                        placeholder=\"Types\"\r\n                        options={this.props.types}\r\n                        selectedValues={this.props.selectedThing.Types}\r\n                        onSelect={this.addType}\r\n                        onRemove={this.removeType}\r\n                        displayValue=\"Name\"\r\n                      />\r\n                    </Grid>\r\n                    <Grid item container spacing={1} direction=\"column\">\r\n                      <Grid item>\r\n                        <span>Attributes&nbsp;\r\n                          <Tooltip title={`Add New Attribute`}>\r\n                            <Fab size=\"small\"\r\n                              color=\"primary\"\r\n                              onClick={ _ => {\r\n                                this.setState({ infoAttribute: {\r\n                                  index: this.props.selectedThing.AttributesArr.length,\r\n                                  Name: \"\",\r\n                                  AttributeType: \"Text\",\r\n                                  Options: [],\r\n                                  DefinedType: \"\",\r\n                                  ListType: \"\",\r\n                                  attrID: null,\r\n                                  Value: \"\",\r\n                                  ListValues: [],\r\n                                  FromTypeIDs: [],\r\n                                  TypeIDs: []\r\n                                }});\r\n                              }}\r\n                            >\r\n                              <Add />\r\n                            </Fab>\r\n                          </Tooltip>\r\n                          <Tooltip title={`Browse Additional Attributes`}>\r\n                            <Fab\r\n                              size=\"small\"\r\n                              color=\"primary\"\r\n                              onClick={e => {\r\n                                this.setState({ browseAttributes: !this.state.browseAttributes });\r\n                              }}\r\n                            >\r\n                              <Search />\r\n                            </Fab>\r\n                          </Tooltip>\r\n                        </span>\r\n                      </Grid>\r\n                      { this.state.browseAttributes && \r\n                        <Grid item container spacing={1} direction=\"row\">\r\n                          <Grid item xs={12} sm={6}>\r\n                            <FormControl variant=\"outlined\" fullWidth>\r\n                              <InputLabel htmlFor=\"browseForAttributes\" id=\"browseForAttributes-label\">\r\n                                Browse Additional Attributes\r\n                              </InputLabel>\r\n                              <Select\r\n                                labelId=\"browseForAttributes-label\"\r\n                                id=\"browseForAttributes\"\r\n                                value={this.state.browseAttributesSelected}\r\n                                onChange={e => {\r\n                                  this.setState({ browseAttributesSelected: e.target.value });\r\n                                }}\r\n                                fullWidth\r\n                                labelWidth={200}\r\n                              >\r\n                                {additionalAttributes.map((attr, i) => {\r\n                                  return (<MenuItem key={i} value={attr._id}>{attr.Name}</MenuItem>);\r\n                                })}\r\n                              </Select>\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} sm={6}>\r\n                            <Button\r\n                              variant=\"contained\" color=\"primary\"\r\n                              disabled={ this.state.browseAttributesSelected === \"\" }\r\n                              onClick={e => {this.addSelectedAttribute();}}\r\n                              type=\"submit\"\r\n                            >\r\n                              Add Attribute\r\n                            </Button>\r\n                          </Grid>\r\n                        </Grid>\r\n                      }\r\n                      { this.state.loaded &&\r\n                        <AttributesControl \r\n                          addNewThing={attribute => {\r\n                            this.setState({ \r\n                              thingModalOpen: true,\r\n                              newThingType: this.props.types.filter(t => t._id === attribute.DefinedType)[0],\r\n                              putThingOnAttribute: attribute\r\n                            });\r\n                          }} \r\n                          onInfo={e => {\r\n                            this.setState({ infoAttribute: e});\r\n                          }} />\r\n                      }\r\n                      <FormHelperText>\r\n                        {this.state.fieldValidation.Attributes.message}\r\n                      </FormHelperText>\r\n                    </Grid>\r\n                    <Grid item>{this.state.message}</Grid>\r\n                    <Grid item>\r\n                      {this.state.errors.map((e, key) => {\r\n                        return (<div key={key}>{e}</div>);\r\n                      })}\r\n                    </Grid>\r\n                    <Grid item>\r\n                      {Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n                        if (\r\n                          this.state.fieldValidation[fieldName] !== undefined &&\r\n                          this.state.fieldValidation[fieldName].message.length > 0\r\n                        ) {\r\n                          return (\r\n                            <p className=\"redFont\" key={i}>\r\n                              {this.state.fieldValidation[fieldName].message}\r\n                            </p>\r\n                          );\r\n                        } else {\r\n                          return \"\";\r\n                        }\r\n                      })}\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              }\r\n              { ((this.state.majorType === null && this.props.things.length > 0) || (this.state.majorType !== null && this.props.things.filter(t => t.TypeIDs.includes(this.state.majorType._id)).length > 0)) ? \r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={12} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"next\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Edit Next\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"add\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Create Another\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={3}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={_ => {\r\n                        if (this.props.selectedThing._id === null) {\r\n                          this.setState({\r\n                            redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n                          });\r\n                        }\r\n                        else {\r\n                          this.setState({\r\n                            redirectTo: `/thing/details/${this.props.selectedThing._id}`\r\n                          });\r\n                        }\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              :\r\n                <Grid item container spacing={1} direction=\"row\">\r\n                  <Grid item xs={12} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"add\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit and Create Another\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\" \r\n                      color=\"primary\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={e => {this.onSubmit(\"\")}}\r\n                      type=\"submit\"\r\n                    >\r\n                      {this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                    </Button>\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={4}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      fullWidth\r\n                      disabled={this.state.waiting}\r\n                      onClick={_ => {\r\n                        if (this.props.selectedThing._id === null) {\r\n                          this.setState({\r\n                            redirectTo: `/project/details/${this.props.selectedWorldID}`\r\n                          });\r\n                        }\r\n                        else {\r\n                          this.setState({\r\n                            redirectTo: `/thing/details/${this.props.selectedThing._id}`\r\n                          });\r\n                        }\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Cancel\r\n                    </Button>\r\n                  </Grid>\r\n                </Grid>\r\n              }\r\n            </Grid>\r\n          }\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst ThingEditPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default ThingEditPage;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport API from '../../smartAPI';\r\n\r\n\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      resetPasswordCode: null,\r\n      codeValid: false,\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      fieldValidation: { \r\n        password: { valid: true, message: \"\" }, \r\n        confirmPassword: { valid: true, message: \"\" }\r\n      },\r\n      formValid: false,\r\n      message: \"Please wait.  Validating code.\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n  }\r\n\r\n  handleUserInput = e => {\r\n    const name = e.target.name;\r\n    const value = (e.target.type === \"checkbox\" ? e.target.checked : e.target.value);\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  inputBlur = e => {\r\n    const name = e.target.name;\r\n    const validation = this.validateField(name);\r\n    const fieldValidation = this.state.fieldValidation;\r\n    if (fieldValidation[name].valid !== validation.valid) {\r\n      fieldValidation[name].valid = validation.valid;\r\n      fieldValidation[name].message = validation.message;\r\n      this.setState({ fieldValidation: fieldValidation });\r\n    }\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState({ showPassword: !this.state.showPassword });\r\n  };\r\n\r\n  handleMouseDownPassword = event => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  validateField = (fieldName) => {\r\n    let valid = true;\r\n    let message = \"\";\r\n    let value = this.state[fieldName];\r\n    switch (fieldName) {\r\n      case \"email\":\r\n        valid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i) !== null;\r\n        message = valid ? \"\" : \"Email is invalid\";\r\n        break;\r\n      case \"password\":\r\n        valid = value.length >= 6;\r\n        message = valid ? \"\" : \"Password is too short\";\r\n        break;\r\n      case \"confirmEmail\":\r\n        valid = value === this.state.email;\r\n        message = valid ? \"\" : \"Confirm Email doesn't match Email\";\r\n        break;\r\n      case \"confirmPassword\":\r\n        valid = value === this.state.password;\r\n        message = valid ? \"\" : \"Confirm Password doesn't match Password\";\r\n        break;\r\n      case \"username\":\r\n        valid = value.length >= 2;\r\n        message = valid ? \"\" : \"Username is too short\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    const response = { valid: valid, message: message };\r\n    return response;\r\n  };\r\n\r\n  validateForm = (respond) => {\r\n    const passwordValid = this.validateField(\"password\");\r\n    const confirmPasswordValid = this.validateField(\"confirmPassword\");\r\n    const formValid = \r\n      passwordValid.valid && \r\n      confirmPasswordValid.valid;\r\n    const fieldValidation = this.state.fieldValidation;\r\n    fieldValidation.password = passwordValid;\r\n    fieldValidation.confirmPassword = confirmPasswordValid;\r\n    this.setState({ \r\n      formValid: formValid,\r\n      fieldValidation: fieldValidation\r\n    }, respond);\r\n  }\r\n\r\n  onSubmit = () => {\r\n    function respond() {\r\n      if (this.state.formValid) {\r\n        this.setState({ waiting: true },\r\n          this.submitThroughAPI);\r\n      }\r\n    }\r\n\r\n    this.validateForm(respond);\r\n  };\r\n\r\n  submitThroughAPI = () => {\r\n    this.api.resetPassword(this.state.resetPasswordCode, this.state.password).then(res => {\r\n      this.setState({ \r\n        message: res.message,\r\n        waiting: false\r\n      });\r\n    })\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    if (this.state.resetPasswordCode === null) {\r\n      const { id } = this.props.match.params;\r\n      setTimeout(() => {\r\n        this.api.checkResetPasswordCode(id).then(res => {\r\n          if (res.error !== undefined) {\r\n            this.setState({resetPasswordCode: id, codeValid: false, message: res.error});\r\n          }\r\n          else {\r\n            this.setState({resetPasswordCode: id, codeValid: true, message: \"\"});\r\n          }\r\n        });\r\n      }, 500);\r\n      return (\r\n        <div>\r\n          <h2>Reset Password</h2>\r\n          {this.state.message}\r\n        </div>\r\n      );\r\n    }\r\n    else if (this.state.codeValid) {\r\n      return (\r\n        <div>\r\n          <h2>Reset Password</h2>\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-12\">\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-12 margined\">\r\n                  <FormControl variant=\"outlined\"\r\n                      fullWidth>\r\n                    <InputLabel htmlFor=\"outlined-adornment-password\">Password</InputLabel>\r\n                    <OutlinedInput\r\n                      id=\"outlined-adornment-password\"\r\n                      name=\"password\"\r\n                      type={this.state.showPassword ? 'text' : 'password'}\r\n                      value={this.state.password}\r\n                      error={ !this.state.fieldValidation.password.valid }\r\n                      onChange={this.handleUserInput}\r\n                      onBlur={this.inputBlur}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={this.handleClickShowPassword}\r\n                            onMouseDown={this.handleMouseDownPassword}\r\n                            edge=\"end\"\r\n                          >\r\n                            {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                      labelWidth={70}\r\n                      fullWidth\r\n                    />\r\n                    <FormHelperText>{ this.state.fieldValidation.password.message }</FormHelperText>\r\n                  </FormControl>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-12 margined\">\r\n                  <FormControl variant=\"outlined\"\r\n                      fullWidth>\r\n                    <InputLabel htmlFor=\"confirm-password\">Confirm Password</InputLabel>\r\n                    <OutlinedInput\r\n                      id=\"confirm-password\"\r\n                      name=\"confirmPassword\"\r\n                      type={this.state.showPassword ? 'text' : 'password'}\r\n                      value={this.state.confirmPassword}\r\n                      error={ !this.state.fieldValidation.confirmPassword.valid }\r\n                      onChange={this.handleUserInput}\r\n                      onBlur={this.inputBlur}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={this.handleClickShowPassword}\r\n                            onMouseDown={this.handleMouseDownPassword}\r\n                            edge=\"end\"\r\n                          >\r\n                            {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                      labelWidth={130}\r\n                      fullWidth\r\n                    />\r\n                    <FormHelperText>{ this.state.fieldValidation.confirmPassword.message }</FormHelperText>\r\n                  </FormControl>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-12\">\r\n              <div className=\"float-right\">\r\n                <Button className=\"w200\" disabled={this.state.waiting}\r\n                  onClick={this.onSubmit}\r\n                  type=\"submit\">{this.state.waiting ? \"Please Wait\" : \"Submit\"}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {this.state.message}\r\n          {\r\n            Object.keys(this.state.fieldValidation).map((fieldName, i) => {\r\n              if (this.state.fieldValidation[fieldName] !== undefined && this.state.fieldValidation[fieldName].message.length > 0) {\r\n                return (\r\n                  <p className=\"redFont\" key={i}>\r\n                    {this.state.fieldValidation[fieldName].message}\r\n                  </p>\r\n                );\r\n              } else {\r\n                return \"\";\r\n              }\r\n            })\r\n          }\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      return (\r\n        <div>\r\n          <h2>Reset Password</h2>\r\n          {this.state.message}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst ResetPasswordPage = connect()(Page);\r\nexport default ResetPasswordPage;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport API from '../../smartAPI';\r\n\r\n\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      confirmEmailCode: null,\r\n      codeValid: false,\r\n      message: \"Please wait.  Validating code.\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  componentDidMount = () => {\r\n  }\r\n\r\n  render() {\r\n    if (this.state.confirmEmailCode === null) {\r\n      const { id } = this.props.match.params;\r\n      setTimeout(() => {\r\n        this.api.confirmEmail(id).then(res => {\r\n          if (res.error !== undefined) {\r\n            this.setState({confirmEmailCode: id, codeValid: false, message: res.error});\r\n          }\r\n          else {\r\n            this.setState({confirmEmailCode: id, codeValid: true, message: res.message});\r\n          }\r\n        });\r\n      }, 500);\r\n    }\r\n    return (\r\n      <div>\r\n        <h2>Confirming Email</h2>\r\n        {this.state.message}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst ConfirmEmailPage = connect()(Page);\r\nexport default ConfirmEmailPage;\r\n","import React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { \r\n  Route, \r\n  Switch } from \"react-router-dom\";\r\n  import { connect } from \"react-redux\";\r\nimport HomePage from \"./Home\";\r\nimport GeneralDiscussionPage from \"./Discussion/GeneralDiscussion\";\r\nimport ProfilePage from \"./User/Profile\";\r\n// import UserEditPage from \"./User/Edit\";\r\nimport WorldDetailsPage from \"./World/Details\";\r\nimport WorldEditPage from \"./World/Edit\";\r\nimport CollaboratePage from \"./World/Collaborate\";\r\nimport EditCollaboratorsPage from \"./World/EditCollaborators\";\r\n// import WorldDeletePage from \"./World/Delete\";\r\nimport TypeDetailsPage from \"./Type/Details\";\r\nimport TypeEditPage from \"./Type/Edit\";\r\n// import TypeDeletePage from \"./Type/Delete\";\r\nimport ThingDetailsPage from \"./Thing/Details\";\r\nimport ThingEditPage from \"./Thing/Edit\";\r\nimport ResetPasswordPage from \"./User/ResetPassword\";\r\nimport ConfirmEmailPage from \"./User/ConfirmEmail\";\r\n// import ThingDeletePage from \"./Thing/Delete\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport LoginControl from './User/LoginControl';\r\nimport {\r\n  toggleLogin\r\n} from \"../redux/actions/index\";\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loginOpen: state.app.loginOpen\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    toggleLogin: () => dispatch(toggleLogin({}))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      version: \"0\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Grid item xs={12} container spacing={0} direction=\"column\">\r\n        <Grid item className=\"h-100 margined\">\r\n          { this.props.loginOpen ?\r\n            <LoginControl onLogin={_ => { \r\n              this.props.toggleLogin();\r\n            }}/>\r\n          :\r\n            <Switch>\r\n              {/* <Route exact path=\"/Template\" component={TemplatePage} /> */}\r\n              <Route exact path=\"/\" component={HomePage} />\r\n              <Route exact path=\"/home\" component={HomePage} />\r\n              <Route exact path=\"/User/Profile\" component={ProfilePage} />\r\n              <Route exact path=\"/User/resetPassword/:id\" component={ResetPasswordPage} />\r\n              <Route exact path=\"/User/confirmEmail/:id\" component={ConfirmEmailPage} />\r\n              {/* <Route exact path=\"/profile\" component={UserEditPage} /> */}\r\n              \r\n              {/* <Route exact path=\"/test/:testtext\" component={Test} /> */}\r\n              <Route exact path=\"/discussion\" component={GeneralDiscussionPage} />\r\n              <Route exact path=\"/project/details/:id\" component={WorldDetailsPage} />\r\n              <Route exact path=\"/project/create\" component={WorldEditPage} />\r\n              <Route exact path=\"/project/edit/:id\" component={WorldEditPage} />\r\n              <Route exact path=\"/project/collaborators/:id\" component={EditCollaboratorsPage} />\r\n              <Route exact path=\"/project/collaborate/:worldID/:collabID\" component={CollaboratePage} />\r\n              {/* <Route exact path=\"/project/delete/:id\" component={WorldDeletePage} /> */}\r\n              <Route exact path=\"/type/create\" component={TypeEditPage} />\r\n              <Route exact path=\"/type/details/:id\" component={TypeDetailsPage} />\r\n              <Route exact path=\"/type/edit/:id\" component={TypeEditPage} />\r\n              {/* <Route exact path=\"/type/delete/:id\" component={TypeDeletePage} /> */}\r\n              <Route exact path=\"/thing/create\" component={ThingEditPage} />\r\n              <Route exact path=\"/thing/create/:id\" component={ThingEditPage} />\r\n              <Route exact path=\"/thing/details/:id\" component={ThingDetailsPage} />\r\n              <Route exact path=\"/thing/edit/:id\" component={ThingEditPage} />\r\n              {/* <Route exact path=\"/thing/delete/:id\" component={ThingDeletePage} /> */}\r\n            </Switch>\r\n          }\r\n        </Grid>\r\n        <Grid item style={{ minHeight: \"100px\" }}>&nbsp;</Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nconst MainPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default MainPage;\r\n","\nimport React, { Component } from \"react\";\nimport \"./assets/css/material-dashboard-react.css\";\nimport {\n  BrowserRouter as Router\n} from \"react-router-dom\";\nimport { connect, ConnectedProps } from \"react-redux\";\nimport NavBar from \"./components/Navigation/Navbar\";\nimport Sidebar from \"./components/Navigation/Sidebar\";\nimport MainPage from \"./views/MainPage\";\nimport { Grid, Box } from \"@material-ui/core\";\n// import { \n//   setWidth,\n//   setHeight,\n//   setAPI\n// } from \"./redux/actions/index\";\nimport API from \"./smartAPI\";\nimport \"./assets/css/quill.snow.css\";\n\ninterface AppState {\n  menuOpen: boolean;\n  api: any;\n}\n\ninterface RootState {\n  app: AppState\n}\n\nconst mapState = (state: RootState) => ({\n  menuOpen: state.app.menuOpen,\n  api: state.app.api\n})\nconst mapDispatch = {\n  setWidth: (width: number) => ({ type: 'SET_WIDTH', payload: width }),\n  setHeight: (height: number) => ({ type: 'SET_HEIGHT', payload: height }),\n  setAPI: (api: any) => ({ type: 'SET_API', payload: api })\n}\nconst connector = connect(mapState, mapDispatch);\n\ntype PropsFromRedux = ConnectedProps<typeof connector>\n\ntype Props = PropsFromRedux & {\n  // playMap: PlayMap,\n  // mode: string\n}\n\nexport interface State {\n  version: string,\n  width: number,\n  marginLeft: number,\n  innerWidth: number | null\n}\nclass App extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      version: \"0\",\n      width: 0,\n      marginLeft: 220, \n      innerWidth: null\n    };\n    this.api = API.getInstance();\n  }\n\n  api: any;\n\n  componentDidMount() {\n    this.updateDimensions();\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n  }\n\n  updateDimensions() {\n    let w = window.innerWidth;\n    this.props.setHeight(window.innerHeight);\n    if (w >= 600) {\n      w -= 200;\n      this.props.setWidth(w);\n      this.setState({ width: w, marginLeft: 220, innerWidth: window.innerWidth });\n    }\n    else {\n      this.props.setWidth(w);\n      this.setState({ width: w, marginLeft: 0, innerWidth: window.innerWidth });\n    }\n  }\n\n  render() {\n    if (this.props.api === null) {\n      this.props.setAPI(this.api);\n    }\n    return (\n      <Router>\n        {this.props.menuOpen &&\n          <Box display={{ xs: 'none', sm: 'inline' }} className=\"Sidebar\">\n            <Sidebar className=\"\" logoText={\"Author's Notebook\"} />\n          </Box>\n        }\n        <Grid container>\n          <Grid item xs={12}\n            style={{ \n              marginLeft: `${this.props.menuOpen ? this.state.marginLeft : 0}px`, \n              width: `${this.props.menuOpen ? this.state.width : this.state.innerWidth}px` \n            }}>\n            <NavBar />\n          </Grid>\n          <Grid item xs={12}\n            style={{ \n              marginLeft: `${this.props.menuOpen ? this.state.marginLeft + 10 : 10}px`, \n              width: `${this.props.menuOpen || !this.state.innerWidth ? this.state.width - 20 : this.state.innerWidth - 20}px`,\n              marginRight: \"10px\",\n              marginTop: \"10px\" \n            }}>\n            <MainPage />\n          </Grid>\n        </Grid>\n      </Router>\n    );\n  }\n}\n\n// const App = connect(mapStateToProps, mapDispatchToProps)(AppLayout);\n// export default App;\n\nexport default connector(App);\n","import {\r\n  UPDATE_INDEX_EXPANDED_PANEL,\r\n  SET_API,\r\n  ADD_ARTICLE,\r\n  LOGIN,\r\n  LOGOUT,\r\n  REDIRECT_TO,\r\n  SET_WORLDS,\r\n  SET_PUBLIC_WORLDS,\r\n  SET_TEMPLATES,\r\n  SET_ALL_USERS,\r\n  ADD_WORLD,\r\n  ADD_AND_SELECT_WORLD,\r\n  UPDATE_WORLD,\r\n  UPDATE_PUBLIC_WORLD_COLLAB,\r\n  SELECT_WORLD,\r\n  SET_TYPES,\r\n  ADD_TYPE,\r\n  SET_THINGS,\r\n  ADD_THING,\r\n  UPDATE_TYPE,\r\n  // UPDATE_ATTRIBUTES_ARR,\r\n  SET_ATTRIBUTES,\r\n  ADD_ATTRIBUTES,\r\n  UPDATE_ATTRIBUTES,\r\n  UPDATE_SELECTED_TYPE,\r\n  UPDATE_THING,\r\n  UPDATE_SELECTED_THING,\r\n  LOAD_FROM_STORAGE,\r\n  TOGGLE_MENU,\r\n  TOGGLE_LOGIN,\r\n  NOT_FROM_LOGIN,\r\n  SET_FOLLOWING_WORLDS,\r\n  SET_WIDTH,\r\n  SET_HEIGHT,\r\n  SET_VIEWS\r\n} from \"../constants/actionTypes\";\r\n\r\nconst initialState = {\r\n  indexExpandedPanel: false,\r\n  api: null,\r\n  articles: [],\r\n  user: null,\r\n  redirectToURL: null,\r\n  loginError: \"\",\r\n  worlds: [],\r\n  publicWorlds: [],\r\n  followingWorlds: [],\r\n  selectedWorld: null,\r\n  selectedWorldID: null,\r\n  types: [],\r\n  things: [],\r\n  selectedType: null,\r\n  // attributesArr: [],\r\n  // attributes: [],\r\n  attributesByID: {},\r\n  attributesByName: {},\r\n  selectedThing: null,\r\n  loadIt: true,\r\n  menuOpen: true,\r\n  loginOpen: false,\r\n  fromLogin: false,\r\n  width: 0,\r\n  height: 0,\r\n  templates: [],\r\n  allUsers: [],\r\n  userSuggestions: [],\r\n  collabSuggestions: [],\r\n  worldSuggestions: [],\r\n  typeSuggestions: [],\r\n  thingSuggestions: [],\r\n  views: []\r\n};\r\nfunction rootReducer(state = initialState, action) {\r\n  if (action.type === UPDATE_INDEX_EXPANDED_PANEL) {\r\n    return Object.assign({}, state, {\r\n      indexExpandedPanel: action.payload\r\n    });\r\n  } else if (action.type === LOAD_FROM_STORAGE) {\r\n    let user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (user !== undefined && user !== null && user.body !== undefined && user.body.user !== undefined)\r\n      user = user.body.user;\r\n    else \r\n      user = null;\r\n    const selectedWorld = JSON.parse(localStorage.getItem(\"selectedWorld\"));\r\n    const selectedWorldID = localStorage.getItem(\"selectedWorldID\");\r\n    const types = JSON.parse(localStorage.getItem(\"types\"));\r\n    const things = JSON.parse(localStorage.getItem(\"things\"));\r\n    const followingWorlds = JSON.parse(localStorage.getItem(\"followingWorlds\"));\r\n    const attributesByID = JSON.parse(localStorage.getItem(\"attributesByID\"));\r\n    const attributesByName = JSON.parse(localStorage.getItem(\"attributesByName\"));\r\n    const worldSuggestions = JSON.parse(localStorage.getItem(\"worldSuggestions\"));\r\n    const userSuggestions = JSON.parse(localStorage.getItem(\"userSuggestions\"));\r\n    const collabSuggestions = JSON.parse(localStorage.getItem(\"collabSuggestions\"));\r\n    const typeSuggestions = JSON.parse(localStorage.getItem(\"typeSuggestions\"));\r\n    const thingSuggestions = JSON.parse(localStorage.getItem(\"thingSuggestions\"));\r\n    \r\n    return Object.assign({}, state, {\r\n      user: user,\r\n      // worlds: worlds === null ? [] : worlds,\r\n      // publicWorlds: publicWorlds === null ? [] : publicWorlds,\r\n      selectedWorld,\r\n      selectedWorldID,\r\n      types: types === null ? [] : types,\r\n      things: things === null ? [] : things,\r\n      followingWorlds: followingWorlds === null ? [] : followingWorlds,\r\n      // attributes: attributes === null ? [] : attributes,\r\n      attributesByID: attributesByID === null ? {} : attributesByID,\r\n      attributesByName: attributesByName === null ? {} : attributesByName,\r\n      worldSuggestions: worldSuggestions === null ? [] : worldSuggestions,\r\n      userSuggestions: userSuggestions === null ? [] : userSuggestions,\r\n      collabSuggestions: collabSuggestions === null ? [] : collabSuggestions,\r\n      typeSuggestions: typeSuggestions === null ? [] : typeSuggestions,\r\n      thingSuggestions: thingSuggestions === null ? [] : thingSuggestions\r\n    });\r\n  } else if (action.type === SET_API) {\r\n    return Object.assign({}, state, {\r\n      api: action.payload\r\n    });\r\n  } else if (action.type === ADD_ARTICLE) {\r\n    return Object.assign({}, state, {\r\n      articles: state.articles.concat(action.payload)\r\n    });\r\n  } else if (action.type === LOGIN) {\r\n    localStorage.setItem(\"followingWorlds\", JSON.stringify(action.payload.followingWorlds));\r\n    return Object.assign({}, state, {\r\n      user: action.payload, \r\n      followingWorlds: action.payload.followingWorlds\r\n    });\r\n  } else if (action.type === LOGOUT) {\r\n    return Object.assign({}, state, {\r\n      user: null\r\n    });\r\n  } else if (action.type === REDIRECT_TO) {\r\n    return Object.assign({}, state, {\r\n      redirectToURL: action.payload\r\n    });\r\n  } else if (action.type === SET_WORLDS) {\r\n    if (action.payload !== undefined && action.payload.error === undefined){\r\n      if (state.selectedWorldID !== null && state.selectedWorld === null) {\r\n        const worldArr = action.payload.filter(\r\n          world => world._id === state.selectedWorldID\r\n        );\r\n        if (worldArr.length > 0) {\r\n          let world = worldArr[0];\r\n          localStorage.setItem(\"selectedWorld\", JSON.stringify(world));\r\n          return Object.assign({}, state, {\r\n            worlds: action.payload,\r\n            selectedWorld: world,\r\n          });\r\n        } else {\r\n          return Object.assign({}, state, {\r\n            worlds: action.payload,\r\n          });\r\n        }\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          worlds: action.payload,\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      return Object.assign({}, state, {});\r\n    }\r\n  } else if (action.type === SET_PUBLIC_WORLDS) {\r\n    if (action.payload.error === undefined) {\r\n      const worldSuggestions = [];\r\n      action.payload.forEach(w => {\r\n        worldSuggestions.push({\r\n          _id: w._id,\r\n          suggestionType: \"world\",\r\n          Display: `${w.Name}`\r\n        });\r\n      });\r\n      localStorage.setItem(\"worldSuggestions\", JSON.stringify(worldSuggestions));\r\n      if (state.selectedWorldID !== null && state.selectedWorld === null) {\r\n        const worldArr = action.payload.filter(\r\n          world => world._id === state.selectedWorldID\r\n        );\r\n        if (worldArr.length > 0) {\r\n          let world = worldArr[0];\r\n          localStorage.setItem(\"selectedWorld\", JSON.stringify(world));\r\n          \r\n          return Object.assign({}, state, {\r\n            publicWorlds: action.payload,\r\n            selectedWorld: world,\r\n            worldSuggestions\r\n            // attributes: [],\r\n            // attributesByID: {},\r\n            // attributesByName: {}\r\n          });\r\n        } else {\r\n          return Object.assign({}, state, {\r\n            publicWorlds: action.payload,\r\n            worldSuggestions\r\n          });\r\n        }\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          publicWorlds: action.payload,\r\n          worldSuggestions\r\n        });\r\n      }\r\n    }\r\n    else {\r\n      return Object.assign({}, state, {});\r\n    }\r\n  } else if (action.type === SET_TEMPLATES) {\r\n    return Object.assign({}, state, {\r\n      templates: action.payload\r\n    });\r\n  } else if (action.type === SET_ALL_USERS) {\r\n    const userSuggestions = [];\r\n    action.payload.forEach(u => {\r\n      // userSuggestions.push(`${u.username}-${u._id}`);\r\n      userSuggestions.push({\r\n        _id: u._id,\r\n        suggestionType: \"user\",\r\n        Display: `${u.username}`\r\n      });\r\n    });\r\n    localStorage.setItem(\"userSuggestions\", JSON.stringify(userSuggestions));\r\n    if (state.selectedWorld !== null){\r\n      const collabSuggestions = [];\r\n      action.payload.forEach(u => {\r\n        if (state.selectedWorld.Owner === u._id || (state.selectedWorld.Collaborators !== undefined && state.selectedWorld.Collaborators !== null && state.selectedWorld.Collaborators.filter(c => c.userID === u._id).length > 0)) {\r\n          // collabSuggestions.push(`${u.username}-${u._id}`);\r\n          collabSuggestions.push({\r\n            _id: u._id,\r\n            suggestionType: \"user\",\r\n            Display: `${u.username}`\r\n          });\r\n        }\r\n      });\r\n      localStorage.setItem(\"collabSuggestions\", JSON.stringify(collabSuggestions));\r\n      return Object.assign({}, state, {\r\n        allUsers: action.payload,\r\n        userSuggestions,\r\n        collabSuggestions\r\n      });\r\n    } else {\r\n      return Object.assign({}, state, {\r\n        allUsers: action.payload,\r\n        userSuggestions\r\n      });\r\n    }\r\n  } else if (action.type === ADD_WORLD) {\r\n    if (action.payload.Public) {\r\n      const worlds = state.worlds.concat(action.payload);\r\n      const publicWorlds = state.publicWorlds.concat(action.payload);\r\n      return Object.assign({}, state, {\r\n        worlds,\r\n        publicWorlds\r\n      });\r\n    } else {\r\n      return Object.assign({}, state, {\r\n        worlds: state.worlds.concat(action.payload)\r\n      });\r\n    }\r\n  } else if (action.type === ADD_AND_SELECT_WORLD) {\r\n    if (action.payload.Public) {\r\n      const worlds = state.worlds.concat(action.payload);\r\n      const publicWorlds = state.publicWorlds.concat(action.payload);\r\n      \r\n      const world = action.payload;\r\n      localStorage.setItem(\"selectedWorldID\", action.payload._id);\r\n      localStorage.setItem(\"selectedWorld\", JSON.stringify(world));\r\n      if (state.allUsers.length > 0) {\r\n        const collabSuggestions = [];\r\n        state.allUsers.forEach(u => {\r\n          if (world.Owner === u._id) {\r\n            // collabSuggestions.push(`${u.username}-${u._id}`);\r\n            collabSuggestions.push({\r\n              _id: u._id,\r\n              suggestionType: \"user\",\r\n              Display: `${u.username}`\r\n            });\r\n          }\r\n        });\r\n        localStorage.setItem(\"collabSuggestions\", JSON.stringify(collabSuggestions));\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload._id,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          collabSuggestions,\r\n          worlds,\r\n          publicWorlds\r\n        });\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          worlds,\r\n          publicWorlds\r\n        });\r\n      }\r\n    } else {\r\n      const world = action.payload;\r\n      localStorage.setItem(\"selectedWorldID\", action.payload._id);\r\n      localStorage.setItem(\"selectedWorld\", JSON.stringify(world));\r\n      if (state.allUsers.length > 0) {\r\n        const collabSuggestions = [];\r\n        state.allUsers.forEach(u => {\r\n          if (world.Owner === u._id) {\r\n            // collabSuggestions.push(`${u.username}-${u._id}`);\r\n            collabSuggestions.push({\r\n              _id: u._id,\r\n              suggestionType: \"user\",\r\n              Display: `${u.username}`\r\n            });\r\n          }\r\n        });\r\n        localStorage.setItem(\"collabSuggestions\", JSON.stringify(collabSuggestions));\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload._id,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          collabSuggestions,\r\n          worlds: state.worlds.concat(action.payload)\r\n        });\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          worlds: state.worlds.concat(action.payload)\r\n        });\r\n      }\r\n    }\r\n  } else if (action.type === UPDATE_WORLD) {\r\n    const worlds = [...state.worlds];\r\n    let publicWorlds = [...state.publicWorlds];\r\n    const world = worlds.filter(t => t._id === action.payload._id)[0];\r\n    world.Name = action.payload.Name;\r\n    world.Description = action.payload.Description;\r\n    const wasPublic = world.Public;\r\n    world.Public = action.payload.Public;\r\n    world.AcceptingCollaborators = action.payload.AcceptingCollaborators;\r\n    world.Collaborators = action.payload.Collaborators;\r\n    if (world.Public) {\r\n      if (wasPublic) {\r\n        // It was already public so we just need to update the name\r\n        const publicWorld = publicWorlds.filter(t => t._id === world._id)[0];\r\n        publicWorld.Name = world.Name;\r\n      }\r\n      else {\r\n        // It's been changed to public, so we need to add it\r\n        publicWorlds = publicWorlds.concat(world);\r\n      }\r\n      return Object.assign({}, state, {\r\n        worlds,\r\n        publicWorlds\r\n      });\r\n    } else {\r\n      if (wasPublic) {\r\n        // It used to be public, so we need to remove it\r\n        publicWorlds = publicWorlds.filter(t => t._id !== world._id);\r\n        return Object.assign({}, state, {\r\n          worlds,\r\n          publicWorlds\r\n        });\r\n      }\r\n      else {\r\n        // It's still not public, so we can leave it\r\n        return Object.assign({}, state, {\r\n          worlds\r\n        });\r\n      }\r\n    }\r\n  } else if (action.type === UPDATE_PUBLIC_WORLD_COLLAB) {\r\n    let publicWorlds = [...state.publicWorlds];\r\n    const world = publicWorlds.filter(t => t._id === action.payload._id)[0];\r\n    world.Collaborators = action.payload.Collaborators;\r\n    return Object.assign({}, state, {\r\n      publicWorlds\r\n    });\r\n  } else if (action.type === SELECT_WORLD) {\r\n    let world = state.worlds.filter(world => world._id === action.payload);\r\n    if (world.length === 0)\r\n      world = state.publicWorlds.filter(world => world._id === action.payload);\r\n    if (world.length > 0) {\r\n      world = world[0];\r\n      localStorage.setItem(\"selectedWorldID\", action.payload);\r\n      localStorage.setItem(\"selectedWorld\", JSON.stringify(world));\r\n      if (state.allUsers.length > 0) {\r\n        const collabSuggestions = [];\r\n        state.allUsers.forEach(u => {\r\n          if (world.Owner === u._id || (world.Collaborators !== undefined && world.Collaborators !== null && world.Collaborators.filter(c => c.userID === u._id).length > 0)) {\r\n            collabSuggestions.push({\r\n              _id: u._id,\r\n              suggestionType: \"user\",\r\n              Display: `${u.username}`\r\n            });\r\n          }\r\n        });\r\n        localStorage.setItem(\"collabSuggestions\", JSON.stringify(collabSuggestions));\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          collabSuggestions,\r\n          thingSuggestions: [],\r\n          typeSuggestions: []\r\n        });\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          selectedWorldID: action.payload,\r\n          selectedWorld: world,\r\n          attributesByID: {},\r\n          attributesByName: {},\r\n          types: [],\r\n          things: [],\r\n          selectedType: null,\r\n          selectedThing: null,\r\n          thingSuggestions: [],\r\n          typeSuggestions: []\r\n        });\r\n      }\r\n    } else {\r\n      localStorage.setItem(\"selectedWorldID\", action.payload);\r\n      localStorage.removeItem(\"selectedWorld\");\r\n      localStorage.removeItem(\"collabSuggestions\");\r\n      return Object.assign({}, state, {\r\n        selectedWorldID: action.payload,\r\n        selectedWorld: null,\r\n        attributesByID: {},\r\n        attributesByName: {},\r\n        types: [],\r\n        things: [],\r\n        selectedType: null,\r\n        selectedThing: null,\r\n        collabSuggestions: [],\r\n        thingSuggestions: [],\r\n        typeSuggestions: []\r\n      });\r\n    }\r\n  } else if (action.type === SET_ATTRIBUTES) {\r\n    const attributesByID = {};\r\n    const attributesByName = {};\r\n    action.payload.forEach(attribute => {\r\n      attributesByID[attribute._id] = attribute;\r\n      attributesByName[attribute.Name] = attribute;\r\n    });\r\n    \r\n    localStorage.setItem(\"attributesByID\", JSON.stringify(attributesByID));\r\n    localStorage.setItem(\"attributesByName\", JSON.stringify(attributesByName));\r\n\r\n    return Object.assign({}, state, {\r\n      attributesByID: attributesByID,\r\n      attributesByName: attributesByName\r\n    });\r\n  } else if (action.type === UPDATE_ATTRIBUTES) {\r\n    const attributesByID = state.attributesByID;\r\n    const attributesByName = state.attributesByName;\r\n    action.payload.forEach(attribute => {\r\n      attributesByID[attribute._id] = attribute;\r\n      attributesByName[attribute.Name] = attribute;\r\n    });\r\n    \r\n    localStorage.setItem(\"attributesByID\", JSON.stringify(attributesByID));\r\n    localStorage.setItem(\"attributesByName\", JSON.stringify(attributesByName));\r\n\r\n    return Object.assign({}, state, {\r\n      // attributes: action.payload,\r\n      attributesByID: attributesByID,\r\n      attributesByName: attributesByName\r\n    });\r\n  } else if (action.type === ADD_ATTRIBUTES) {\r\n    // const attributes = state.attributes.concat(action.payload);\r\n    const attributesByID = state.attributesByID;\r\n    const attributesByName = state.attributesByName;\r\n    action.payload.forEach(attribute => {\r\n      attributesByID[attribute._id] = attribute;\r\n      attributesByName[attribute.Name] = attribute;\r\n    });\r\n    \r\n    localStorage.setItem(\"attributesByID\", JSON.stringify(attributesByID));\r\n    localStorage.setItem(\"attributesByName\", JSON.stringify(attributesByName));\r\n    \r\n    return Object.assign({}, state, {\r\n      // attributes: attributes,\r\n      attributesByID: attributesByID,\r\n      attributesByName: attributesByName\r\n    });\r\n  } else if (action.type === SET_TYPES) {\r\n    localStorage.setItem(\"types\", JSON.stringify(action.payload));\r\n    const typeSuggestions = [];\r\n    action.payload.forEach(t => {\r\n      // typeSuggestions.push(`${t.Name}-${t._id}`);\r\n      typeSuggestions.push({\r\n        _id: t._id,\r\n        suggestionType: \"type\",\r\n        Display: `${t.Name}`\r\n      });\r\n    });\r\n    localStorage.setItem(\"typeSuggestions\", JSON.stringify(typeSuggestions));\r\n    return Object.assign({}, state, {\r\n      types: action.payload,\r\n      typeSuggestions\r\n    });\r\n  } else if (action.type === ADD_TYPE) {\r\n    const types = state.types.concat(action.payload);\r\n    localStorage.setItem(\"types\", JSON.stringify(types));\r\n    const typeSuggestions = [];\r\n    types.forEach(t => {\r\n      // typeSuggestions.push(`${t.Name}-${t._id}`);\r\n      typeSuggestions.push({\r\n        _id: t._id,\r\n        suggestionType: \"type\",\r\n        Display: `${t.Name}`\r\n      });\r\n    });\r\n    localStorage.setItem(\"typeSuggestions\", JSON.stringify(typeSuggestions));\r\n    return Object.assign({}, state, {\r\n      types,\r\n      typeSuggestions\r\n    });\r\n  } else if (action.type === SET_THINGS) {\r\n    localStorage.setItem(\"things\", JSON.stringify(action.payload));\r\n    \r\n    const thingSuggestions = [];\r\n    action.payload.forEach(t => {\r\n      // thingSuggestions.push(`${t.Name}-${t._id}`);\r\n      thingSuggestions.push({\r\n        _id: t._id,\r\n        suggestionType: \"thing\",\r\n        Display: `${t.Name}`\r\n      });\r\n      t.Types.forEach(t2 => {\r\n        // thingSuggestions.push(`${t2.Name}-${t.Name}-${t._id}`);\r\n        thingSuggestions.push({\r\n          _id: t._id,\r\n          suggestionType: \"thing\",\r\n          Display: `${t2.Name}-${t.Name}`\r\n        });\r\n      });\r\n    });\r\n    localStorage.setItem(\"thingSuggestions\", JSON.stringify(thingSuggestions));\r\n    return Object.assign({}, state, {\r\n      things: action.payload, \r\n      thingSuggestions\r\n    });\r\n  } else if (action.type === ADD_THING) {\r\n    const things = state.things.concat(action.payload);\r\n    localStorage.setItem(\"things\", JSON.stringify(things));\r\n    const thingSuggestions = [];\r\n    things.forEach(t => {\r\n      // thingSuggestions.push(`${t.Name}-${t._id}`);\r\n      thingSuggestions.push({\r\n        _id: t._id,\r\n        suggestionType: \"thing\",\r\n        Display: `${t.Name}`\r\n      });\r\n      t.Types.forEach(t2 => {\r\n        // thingSuggestions.push(`${t2.Name}-${t.Name}-${t._id}`);\r\n        thingSuggestions.push({\r\n          _id: t._id,\r\n          suggestionType: \"thing\",\r\n          Display: `${t2.Name}-${t.Name}`\r\n        });\r\n      });\r\n    });\r\n    localStorage.setItem(\"thingSuggestions\", JSON.stringify(thingSuggestions));\r\n    \r\n    return Object.assign({}, state, {\r\n      things: things\r\n    });\r\n  } else if (action.type === UPDATE_SELECTED_TYPE) {\r\n    // This is because Redux won't cause a rerender\r\n    // on changes to arrays.\r\n    const changedType = { ...action.payload, changedAt: Date.now() };\r\n    return Object.assign({}, state, {\r\n      selectedType: changedType\r\n    });\r\n  } else if (action.type === UPDATE_TYPE) {\r\n    const types = [...state.types];\r\n    const type = types.filter(t => t._id === action.payload._id)[0];\r\n    type.Name = action.payload.Name;\r\n    type.Description = action.payload.Description;\r\n    type.Supers = action.payload.Supers;\r\n    type.AttributesArr = action.payload.AttributesArr;\r\n    type.Attributes = action.payload.Attributes;\r\n    localStorage.setItem(\"types\", JSON.stringify(types));\r\n    return Object.assign({}, state, {\r\n      types: types\r\n    });\r\n  // } else if (action.type === UPDATE_ATTRIBUTES_ARR) {\r\n  //   return Object.assign({}, state, {\r\n  //     attributesArr: action.payload\r\n  //   });\r\n  } else if (action.type === UPDATE_SELECTED_THING) {\r\n    // This is because Redux won't cause a rerender\r\n    // on changes to arrays.\r\n    const changedThing = { ...action.payload, changedAt: Date.now() };\r\n    return Object.assign({}, state, {\r\n      selectedThing: changedThing\r\n    });\r\n  } else if (action.type === UPDATE_THING) {\r\n    const things = [...state.things];\r\n    const thing = things.filter(t => t._id === action.payload._id)[0];\r\n    thing.Name = action.payload.Name;\r\n    thing.Description = action.payload.Description;\r\n    thing.Types = action.payload.Types;\r\n    thing.Attributes = action.payload.Attributes;\r\n    localStorage.setItem(\"things\", JSON.stringify(things));\r\n    return Object.assign({}, state, {\r\n      things: things\r\n    });\r\n  } else if (action.type === TOGGLE_MENU) {\r\n    return Object.assign({}, state, {\r\n      menuOpen: !state.menuOpen\r\n    });\r\n  } else if (action.type === TOGGLE_LOGIN) {\r\n    return Object.assign({}, state, {\r\n      fromLogin: state.loginOpen,\r\n      loginOpen: !state.loginOpen\r\n    });\r\n  } else if (action.type === NOT_FROM_LOGIN) {\r\n    return Object.assign({}, state, {\r\n      fromLogin: false\r\n    });\r\n  } else if (action.type === SET_WIDTH) {\r\n    return Object.assign({}, state, {\r\n      width: action.payload\r\n    });\r\n  } else if (action.type === SET_HEIGHT) {\r\n    return Object.assign({}, state, {\r\n      height: action.payload\r\n    });\r\n  } else if (action.type === SET_FOLLOWING_WORLDS) {\r\n    localStorage.setItem(\"followingWorlds\", JSON.stringify(action.payload));\r\n    return Object.assign({}, state, {\r\n      followingWorlds: action.payload\r\n    });\r\n  } else if (action.type === SET_VIEWS) {\r\n    return Object.assign({}, state, {\r\n      views: action.payload\r\n    });\r\n  }\r\n  return state;\r\n}\r\n\r\nexport default rootReducer;\r\n\r\nexport const login = (user, history) => {};\r\n\r\nexport const logout = history => {};\r\n","import { createStore, combineReducers } from \"redux\";\r\nimport { sessionService, sessionReducer } from \"redux-react-session\";\r\nimport rootReducer from \"../reducers/index\";\r\nconst reducers = {\r\n  app: rootReducer,\r\n  session: sessionReducer\r\n};\r\n\r\nconst reducer = combineReducers(reducers);\r\nconst store = createStore(reducer);\r\nconst validateSession = session => {\r\n  // check if your session is still valid\r\n  return true;\r\n};\r\nconst options = {\r\n  refreshFromLocalStorage: true,\r\n  refreshOnCheckAuth: true,\r\n  redirectPath: \"/home\",\r\n  driver: \"COOKIES\",\r\n  validateSession\r\n};\r\n\r\nsessionService\r\n  .initSessionService(store, options)\r\n  .then(() =>\r\n    console.log(\r\n      \"Redux React Session is ready and a session was refreshed from your storage\"\r\n    )\r\n  )\r\n  .catch(() =>\r\n    console.log(\r\n      \"Redux React Session is ready and there is no session in your storage\"\r\n    )\r\n  );\r\nexport default store;\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Grid\r\n} from \"@material-ui/core\";\r\nimport {\r\n  // notFromLogin\r\n} from \"../redux/actions/index\";\r\n// import MediaCard from \"../components/Displays/MediaCard\";\r\n// import ContentEditableBox from \"../components/Inputs/ContentEditableBox\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    // fromLogin: state.app.fromLogin\r\n  };\r\n};\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    // notFromLogin: () => dispatch(notFromLogin({}))\r\n  };\r\n}\r\nclass Page extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      version: \"0\",\r\n      redirectTo: null\r\n    };\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  render() {\r\n    if (this.props.fromLogin) {\r\n      this.props.notFromLogin();\r\n    }\r\n    if (this.state.redirectTo !== null) {\r\n      return <Redirect to={this.state.redirectTo} />;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <h3>Dead Simple Virtual Table Top</h3>\r\n          <p>\r\n            This is a Virtual Table Top I'm making for my friends\r\n            and I to use for D&amp;D.\r\n          </p>\r\n          <p>\r\n            It will have two pages.  The DM page and the player page.\r\n            There will be a canvas with zoom and pan capabilities.  \r\n            The canvas will have three layers.  The bottom layer is the \r\n            map.  The middle layer is the token layer, and it will have \r\n            tokens representing anything which can be interacted with.\r\n            The top layer is the fog layer, and it will contain the \r\n            fog of war as well as magical darkness.\r\n          </p>\r\n          <p>\r\n            The canvas will make an X * Y grid, and the map layer \r\n            will fill the grid.  Each token will have a numerical \r\n            size representing the diameter of the object.  Small\r\n            and Medium creatures will have a size of 1.  Large\r\n            creatures will have a size of 2.  Etc.  If tokens are \r\n            added to represent other objects with other shape types\r\n            (ladders, ropes, etc), then for now they can be represented\r\n            using multiple tokens.\r\n          </p>\r\n          <p>\r\n            The fog of war will cover everything except for what the \r\n            DM chooses to reveal.  It will be done by placing a 1x1 image\r\n            over each square of the map that is covered by the fog of war.\r\n            On the DM page these images will have 30% opacity.\r\n          </p>\r\n          <p>\r\n            The player page will show whatever the DM page shows, except \r\n            with opaque fog of war and no controls.  \r\n            (Later I might make it so the DM can set what the player page\r\n            sees independantly of what they see.)\r\n          </p>\r\n          <p>\r\n            The DM page will have these abilities:\r\n            Create a map (takes an image and X and Y values).\r\n            Open a map.\r\n            Pan/Zoom.\r\n            Add/Remove tokens.\r\n            Move tokens.\r\n            Add/Remove fog of war.\r\n          </p>\r\n          <p>\r\n            <Grid container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                To do:\r\n              </Grid>\r\n              {/* <Grid item>\r\n                Draw the grid lines on the DM page - \r\n                while possible, I think it would slow the \r\n                render too much to be worth it.\r\n              </Grid> */}\r\n              <Grid item>\r\n                Get it into AWS so everyone can join \r\n                on their own and I don't have to \r\n                share my screen.\r\n              </Grid>\r\n              <Grid item>\r\n                Give each player their own credentials\r\n                for logging in.  Associate player accounts\r\n                with tokens.  Make it so the DM is able to\r\n                give players control of their token, \r\n                as well as take it back.  In that situation it's \r\n                automatically in single select mode, and their \r\n                token is the only one not locked.\r\n              </Grid>\r\n              <Grid item>\r\n                Low Priority:  \r\n              </Grid>\r\n              <Grid item>\r\n                Allow for rotation of tokens.  \r\n              </Grid>\r\n              <Grid item>\r\n                Do tokens for things like sphere, cone, line effects.\r\n              </Grid>\r\n              <Grid item></Grid>\r\n            </Grid>\r\n            \r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst HomePage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\nexport default HomePage;\r\n","\r\n// import { Map } from \"./Map\";\r\n// import { PlayToken } from \"./PlayToken\";\r\n// import { Mask } from \"./Mask\";\r\n// import { PlayMap } from \"./PlayMap\";\r\n\r\nexport class Campaign {\r\n  _id: string;\r\n  name: string;\r\n  selectedPlayMapID: string;\r\n  turnPlayerID: string | null; \r\n  lastUpdate: string;\r\n\r\n  constructor(\r\n    _id: string, \r\n    name: string,\r\n    selectedPlayMapID: string,\r\n    turnPlayerID: string | null,\r\n    lastUpdate: string) {\r\n    this._id = _id;\r\n    this.name = name;\r\n    this.selectedPlayMapID = selectedPlayMapID;\r\n    this.turnPlayerID = turnPlayerID;\r\n    this.lastUpdate = lastUpdate;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    return {\r\n      _id: this._id,\r\n      name: this.name,\r\n      selectedPlayMapID: this.selectedPlayMapID,\r\n      turnPlayerID: this.turnPlayerID\r\n    };\r\n  }\r\n}","\r\nimport BasementStudy from \"../assets/img/maps/basic/Basement-Study.jpg\";\r\nimport CastleWall from \"../assets/img/maps/basic/Castle-Wall.jpg\";\r\nimport CaveLair from \"../assets/img/maps/basic/Cave-Lair.jpg\";\r\nimport Crossroads from \"../assets/img/maps/basic/Crossroads.jpg\";\r\nimport Farmstead from \"../assets/img/maps/basic/Farmstead.jpg\";\r\nimport ForestLair from \"../assets/img/maps/basic/Forest-Lair.jpg\";\r\nimport MonsterLair from \"../assets/img/maps/basic/Monster-Lair.jpg\";\r\nimport SnowVillage from \"../assets/img/maps/basic/Snow-Village.jpg\";\r\nimport SwampLair from \"../assets/img/maps/basic/Swamp-Lair.jpg\";\r\nimport Tavern from \"../assets/img/maps/basic/Tavern.jpg\";\r\nimport UndergroundComplex from \"../assets/img/maps/basic/Underground-Complex.jpg\";\r\nimport UrbanLair from \"../assets/img/maps/basic/Urban-Lair.jpg\";\r\nimport WagonTrailandShrine from \"../assets/img/maps/basic/Wagon-Trail-and-Shrine.jpg\";\r\nimport WaterfallCavern from \"../assets/img/maps/basic/Waterfall-Cavern.jpg\";\r\n\r\nimport AbandonedWarehouse from \"../assets/img/maps/drawn/Abandoned Warehouse.png\";\r\nimport DaggerAlley from \"../assets/img/maps/drawn/DaggerAlley.png\";\r\nimport UnderDaggerAlley from \"../assets/img/maps/drawn/UnderDaggerAlley.png\";\r\nimport TrollSkullAlleyBasement from \"../assets/img/maps/drawn/TrollSkullAlleyBasement.png\";\r\nimport TrollSkullAlleyHouse from \"../assets/img/maps/drawn/TrollSkullAlleyHouse.png\";\r\nimport WeddingRing from \"../assets/img/maps/drawn/WeddingRing.png\";\r\n\r\nimport CragmawCastle from \"../assets/img/maps/phandelver/cragmaw castle.jpg\";\r\nimport CragmawHideout from \"../assets/img/maps/phandelver/cragmaw hideout.jpg\";\r\nimport Phandalin from \"../assets/img/maps/phandelver/phandalin.jpg\";\r\nimport RedbrandHideout from \"../assets/img/maps/phandelver/redbrand hideout.jpg\";\r\nimport RuinsOfThundertree from \"../assets/img/maps/phandelver/ruins of thundertree.jpg\";\r\nimport SwordCoast from \"../assets/img/maps/phandelver/sword coast.jpg\";\r\nimport WaveEchoCave from \"../assets/img/maps/phandelver/wave echo cave.jpg\";\r\n\r\nimport Waterdeep from \"../assets/img/maps/waterdeep/Waterdeep.jpg\";\r\nimport WaterdeepWithWards from \"../assets/img/maps/waterdeep/waterdeep_with_wards.jpg\";\r\n\r\nimport Restaurant from \"../assets/img/maps/city_buildings/restaurant.jpg\";\r\nimport CrimsonBrush from \"../assets/img/maps/city_buildings/CrimsonBrush.png\";\r\n\r\nimport GraveyardPath from \"../assets/img/maps/graveyards/GraveyardPath.png\";\r\nimport GraveyardPumpkinPatch from \"../assets/img/maps/graveyards/GraveyardPumpkinPatch.jpg\";\r\nimport MausoleumCrypts from \"../assets/img/maps/graveyards/MausoleumCrypts.jpg\";\r\n\r\ninterface IHash {\r\n  [details: string] : string;\r\n} \r\nconst MapFile: IHash = {\r\n  BasementStudy: BasementStudy,\r\n  CastleWall: CastleWall,\r\n  CaveLair: CaveLair,\r\n  Crossroads: Crossroads,\r\n  Farmstead: Farmstead,\r\n  ForestLair: ForestLair,\r\n  MonsterLair: MonsterLair,\r\n  SnowVillage: SnowVillage,\r\n  SwampLair: SwampLair,\r\n  Tavern: Tavern,\r\n  UndergroundComplex: UndergroundComplex,\r\n  UrbanLair: UrbanLair,\r\n  WagonTrailandShrine: WagonTrailandShrine,\r\n  WaterfallCavern: WaterfallCavern,\r\n  AbandonedWarehouse: AbandonedWarehouse,\r\n  DaggerAlley: DaggerAlley,\r\n  UnderDaggerAlley: UnderDaggerAlley,\r\n  TrollSkullAlleyBasement: TrollSkullAlleyBasement,\r\n  TrollSkullAlleyHouse: TrollSkullAlleyHouse,\r\n  WeddingRing: WeddingRing,\r\n  CragmawCastle: CragmawCastle,\r\n  CragmawHideout: CragmawHideout,\r\n  Phandalin: Phandalin,\r\n  RedbrandHideout: RedbrandHideout,\r\n  RuinsOfThundertree: RuinsOfThundertree,\r\n  SwordCoast: SwordCoast,\r\n  WaveEchoCave: WaveEchoCave,\r\n  Waterdeep: Waterdeep,\r\n  WaterdeepWithWards: WaterdeepWithWards,\r\n\r\n  Restaurant: Restaurant,\r\n  CrimsonBrush: CrimsonBrush,\r\n\r\n  GraveyardPath: GraveyardPath,\r\n  GraveyardPumpkinPatch: GraveyardPumpkinPatch,\r\n  MausoleumCrypts: MausoleumCrypts\r\n};\r\n\r\nexport class Map {\r\n  _id: string;\r\n  name: string;\r\n  category: string;\r\n  file: string;\r\n  gridWidth: number;\r\n  gridHeight: number;\r\n\r\n  constructor(\r\n    _id: string, \r\n    name: string,\r\n    category: string,\r\n    fileName: string, \r\n    width: number, \r\n    height: number) {\r\n    this._id = _id;\r\n    this.name = name;\r\n    this.category = category;\r\n    this.file = MapFile[fileName];\r\n    this.gridWidth = width;\r\n    this.gridHeight = height;\r\n  }\r\n}","\r\nimport Bald from \"../assets/img/tokens/characters/Bald.png\";\r\nimport Bard from \"../assets/img/tokens/characters/Bard.png\";\r\nimport BlondeHair from \"../assets/img/tokens/characters/BlondeHair.png\";\r\nimport BlondeWoman from \"../assets/img/tokens/characters/BlondeWoman.png\";\r\nimport BlueSkin from \"../assets/img/tokens/characters/BlueSkin.png\";\r\nimport BlueSkin2 from \"../assets/img/tokens/characters/BlueSkin2.png\";\r\nimport DarkSkin from \"../assets/img/tokens/characters/DarkSkin.png\";\r\nimport DarkSkinF from \"../assets/img/tokens/characters/DarkSkinF.png\";\r\nimport Dragonborn from \"../assets/img/tokens/characters/Dragonborn.png\";\r\nimport DragonbornFighter from \"../assets/img/tokens/characters/DragonbornFighter.png\";\r\nimport DwarfMale from \"../assets/img/tokens/characters/DwarfMale.png\";\r\nimport ElvenFemale from \"../assets/img/tokens/characters/ElvenFemale.png\";\r\nimport ElvenFighter from \"../assets/img/tokens/characters/ElvenFighter.png\";\r\nimport Eyebrows from \"../assets/img/tokens/characters/Eyebrows.png\";\r\nimport Eyebrows2 from \"../assets/img/tokens/characters/Eyebrows2.png\";\r\nimport Fedora from \"../assets/img/tokens/characters/Fedora.png\";\r\nimport GnomeMale from \"../assets/img/tokens/characters/GnomeMale.png\";\r\nimport GoliathBarb from \"../assets/img/tokens/characters/GoliathBarb.png\";\r\nimport GreyHair from \"../assets/img/tokens/characters/GreyHair.png\";\r\nimport HalflingMale from \"../assets/img/tokens/characters/HalflingMale.png\";\r\nimport Hood from \"../assets/img/tokens/characters/Hood.png\";\r\nimport Hood2 from \"../assets/img/tokens/characters/Hood2.png\";\r\nimport Human from \"../assets/img/tokens/characters/Human.png\";\r\nimport HumanFemale from \"../assets/img/tokens/characters/HumanFemale.png\";\r\nimport HumanFemale2 from \"../assets/img/tokens/characters/HumanFemale2.png\";\r\nimport HumanFighterF from \"../assets/img/tokens/characters/HumanFighterF.png\";\r\nimport HumanFighterM from \"../assets/img/tokens/characters/HumanFighterM.png\";\r\nimport HumanMale from \"../assets/img/tokens/characters/HumanMale.png\";\r\nimport HumanMale2 from \"../assets/img/tokens/characters/HumanMale2.png\";\r\nimport IDK from \"../assets/img/tokens/characters/idk.png\";\r\nimport Knight from \"../assets/img/tokens/characters/Knight.png\";\r\nimport OldWoman from \"../assets/img/tokens/characters/OldWoman.png\";\r\nimport OldWoman2 from \"../assets/img/tokens/characters/OldWoman2.png\";\r\nimport RedHair from \"../assets/img/tokens/characters/RedHair.png\";\r\nimport RedSkin from \"../assets/img/tokens/characters/RedSkin.png\";\r\nimport Samurai from \"../assets/img/tokens/characters/Samurai.png\";\r\nimport Scarf from \"../assets/img/tokens/characters/Scarf.png\";\r\nimport TieflingFemale from \"../assets/img/tokens/characters/TieflingFemale.png\";\r\nimport Wizard from \"../assets/img/tokens/characters/Wizard.png\";\r\n\r\nimport Rat from \"../assets/img/tokens/animals/Rat.png\";\r\n\r\nimport Wererat from \"../assets/img/tokens/monsters/Wererat.png\";\r\nimport Werewolf from \"../assets/img/tokens/monsters/Werewolf.png\";\r\nimport RugOfSmothering from \"../assets/img/tokens/monsters/mimics/Rug.png\";\r\n\r\nimport PitTrapWSpikes from \"../assets/img/tokens/items/PitTrapWSpikes.png\";\r\nimport SewerGrate from \"../assets/img/tokens/items/SewerGrate.png\";\r\n\r\nimport AirGenasiRangerF from \"../assets/img/tokens/characters/Air Genasi Ranger F.png\";\r\nimport AirGenasiRangerM from \"../assets/img/tokens/characters/Air Genasi Ranger M.png\";\r\nimport Bugbear from \"../assets/img/tokens/characters/bugbear.png\";\r\nimport DrowArcher from \"../assets/img/tokens/characters/drow archer.png\";\r\nimport DrowFighter from \"../assets/img/tokens/characters/drow fighter.png\";\r\nimport DrowFighter2 from \"../assets/img/tokens/characters/drow fighter 2.png\";\r\nimport DrowRogue from \"../assets/img/tokens/characters/drow rogue.png\";\r\nimport DrowWitch from \"../assets/img/tokens/characters/drow witch.png\";\r\nimport GoblinArcher from \"../assets/img/tokens/characters/goblin archer.png\";\r\nimport GoblinRogue from \"../assets/img/tokens/characters/Goblin Rogue.png\";\r\nimport GoblinSpearman from \"../assets/img/tokens/characters/goblin spearman.png\";\r\nimport Hobgoblin from \"../assets/img/tokens/characters/hobgoblin.png\";\r\nimport HumanHexblade from \"../assets/img/tokens/characters/Human Hexblade.png\";\r\nimport TabaxiMonk from \"../assets/img/tokens/characters/Tabaxi Monk.png\";\r\nimport TieflingCleric from \"../assets/img/tokens/characters/Tiefling Cleric.png\";\r\nimport TieflingPaladin from \"../assets/img/tokens/characters/Tiefling Paladin.png\";\r\nimport TieflingSwordsman from \"../assets/img/tokens/characters/Tiefling Swordsman.png\";\r\nimport WhiteDragonbornMage from \"../assets/img/tokens/characters/White Dragonborn Mage.png\";\r\n\r\nimport SnowLeopard from \"../assets/img/tokens/animals/snow leopard.png\";\r\nimport Spider from \"../assets/img/tokens/animals/spider.png\";\r\n\r\nimport AshZombie from \"../assets/img/tokens/monsters/ash-zombie.png\";\r\nimport Beholder from \"../assets/img/tokens/monsters/beholder.png\";\r\nimport Beholder2 from \"../assets/img/tokens/monsters/beholder 2.png\";\r\nimport Cube from \"../assets/img/tokens/monsters/cube.png\";\r\nimport Drider from \"../assets/img/tokens/monsters/drider.png\";\r\nimport FlameSkull from \"../assets/img/tokens/monsters/flameskull.png\";\r\nimport Skeleton from \"../assets/img/tokens/monsters/skeleton.png\";\r\nimport GreenDragon from \"../assets/img/tokens/monsters/venomfang.png\";\r\nimport Zombie from \"../assets/img/tokens/monsters/zombie.png\";\r\nimport TwigBlight from \"../assets/img/tokens/monsters/twig blight.png\";\r\n\r\nimport Web from \"../assets/img/tokens/items/Web 1 3x3 A.png\";\r\n\r\nimport Vampire from \"../assets/img/tokens/monsters/Vampire.png\";\r\nimport WereratKnife from \"../assets/img/tokens/monsters/Wererat Knife.png\";\r\nimport WereratMage from \"../assets/img/tokens/monsters/Wererat Mage.png\";\r\nimport WereratRogue from \"../assets/img/tokens/monsters/Wererat Rogue.png\";\r\nimport WereratRogue2 from \"../assets/img/tokens/monsters/Wererat Rogue 2.png\";\r\nimport Werewolf2 from \"../assets/img/tokens/monsters/Werewolf 2.png\";\r\nimport Werewolf3 from \"../assets/img/tokens/monsters/Werewolf 3.png\";\r\nimport Werewolf4 from \"../assets/img/tokens/monsters/Werewolf 4.png\";\r\n\r\nimport Clue1 from \"../assets/img/tokens/items/Clue1.png\";\r\nimport Clue2 from \"../assets/img/tokens/items/Clue2.png\";\r\nimport Clue3 from \"../assets/img/tokens/items/Clue3.png\";\r\nimport Glyph from \"../assets/img/tokens/items/Glyph.png\";\r\nimport Map from \"../assets/img/tokens/items/Map.png\";\r\n\r\nimport DuergarMale from \"../assets/img/tokens/characters/DuergarMale.png\";\r\n\r\nimport Birdman from \"../assets/img/tokens/characters/Birdman.png\";\r\nimport Daggers from \"../assets/img/tokens/items/Daggers.png\";\r\nimport TrollSkull from \"../assets/img/tokens/items/TrollSkull.png\";\r\n\r\nimport CrimsonBrush from \"../assets/img/tokens/items/Crimson Brush.png\";\r\n\r\nimport BookMimic from \"../assets/img/tokens/monsters/mimics/Book.png\";\r\nimport ChairMimic from \"../assets/img/tokens/monsters/mimics/Chair.png\";\r\nimport ChestMimic from \"../assets/img/tokens/monsters/mimics/Chest.png\";\r\nimport PumpkinMimic from \"../assets/img/tokens/monsters/mimics/Pumpkin.png\";\r\nimport WallMimic from \"../assets/img/tokens/monsters/mimics/Wall.png\";\r\nimport CakeMimic from \"../assets/img/tokens/monsters/mimics/Cake.png\";\r\nimport Jack from \"../assets/img/tokens/monsters/mimics/Jack.png\";\r\nimport Marty from \"../assets/img/tokens/monsters/mimics/Marty.png\";\r\nimport Harvey from \"../assets/img/tokens/monsters/mimics/Harvey.png\";\r\n\r\nimport Rug from \"../assets/img/tokens/items/rug.png\";\r\n\r\nimport TabaxiMummy from \"../assets/img/tokens/monsters/Tabaxi Mummy.png\";\r\n\r\nimport GraveDigger from \"../assets/img/tokens/characters/Gravedigger.png\";\r\nimport Dog from \"../assets/img/tokens/animals/Dog.png\";\r\nimport BeepBeep from \"../assets/img/tokens/animals/Beep Beep.png\";\r\nimport Bird from \"../assets/img/tokens/animals/bird.png\";\r\nimport Ram from \"../assets/img/tokens/animals/Ram.png\";\r\nimport Sheep from \"../assets/img/tokens/animals/Sheep.png\";\r\nimport Sheep2 from \"../assets/img/tokens/animals/Sheep2.png\";\r\n\r\nimport GhostWizard from \"../assets/img/tokens/monsters/ghosts/Wizard.png\";\r\nimport GhostBlueWoman from \"../assets/img/tokens/monsters/ghosts/Blue Woman.png\";\r\nimport GhostWhiteWoman from \"../assets/img/tokens/monsters/ghosts/White Woman.png\";\r\nimport GhostHeartWoman from \"../assets/img/tokens/monsters/ghosts/Heart Woman.png\";\r\nimport GhostLizardfolk from \"../assets/img/tokens/monsters/ghosts/Lizardfolk.png\";\r\nimport GhostScreaming from \"../assets/img/tokens/monsters/ghosts/Screaming.png\";\r\nimport GhostSkeletal from \"../assets/img/tokens/monsters/ghosts/Skeletal.png\";\r\nimport Specter from \"../assets/img/tokens/monsters/ghosts/Specter.png\";\r\nimport Wraith from \"../assets/img/tokens/monsters/ghosts/Wraith.png\";\r\nimport Wraith2 from \"../assets/img/tokens/monsters/ghosts/Wraith2.png\";\r\n\r\ninterface IHash {\r\n  [details: string] : string;\r\n} \r\nconst TokenFile: IHash = {\r\n  Bald: Bald,\r\n  Bard: Bard,\r\n  BlondeHair: BlondeHair,\r\n  BlondeWoman: BlondeWoman,\r\n  BlueSkin: BlueSkin,\r\n  BlueSkin2: BlueSkin2,\r\n  DarkSkin: DarkSkin,\r\n  DarkSkinF: DarkSkinF,\r\n  Dragonborn: Dragonborn,\r\n  DragonbornFighter: DragonbornFighter,\r\n  DwarfMale: DwarfMale,\r\n  ElvenFemale: ElvenFemale,\r\n  ElvenFighter: ElvenFighter,\r\n  Eyebrows: Eyebrows,\r\n  Eyebrows2: Eyebrows2,\r\n  Fedora: Fedora,\r\n  GnomeMale: GnomeMale,\r\n  GoliathBarb: GoliathBarb,\r\n  GreyHair: GreyHair,\r\n  HalflingMale: HalflingMale,\r\n  Hood: Hood,\r\n  Hood2: Hood2,\r\n  Human: Human,\r\n  HumanFemale: HumanFemale,\r\n  HumanFemale2: HumanFemale2,\r\n  HumanFighterF: HumanFighterF,\r\n  HumanFighterM: HumanFighterM,\r\n  HumanMale: HumanMale,\r\n  HumanMale2: HumanMale2,\r\n  IDK: IDK,\r\n  Knight: Knight,\r\n  OldWoman: OldWoman,\r\n  OldWoman2: OldWoman2,\r\n  RedHair: RedHair,\r\n  RedSkin: RedSkin,\r\n  Samurai: Samurai,\r\n  Scarf: Scarf,\r\n  TieflingFemale: TieflingFemale,\r\n  Wizard: Wizard,\r\n\r\n  Rat: Rat,\r\n\r\n  Wererat: Wererat,\r\n  Werewolf: Werewolf,\r\n  RugOfSmothering: RugOfSmothering,\r\n\r\n  PitTrapWSpikes: PitTrapWSpikes,\r\n  SewerGrate: SewerGrate,\r\n\r\n  AirGenasiRangerF: AirGenasiRangerF,\r\n  AirGenasiRangerM: AirGenasiRangerM,\r\n  Bugbear: Bugbear,\r\n  DrowArcher: DrowArcher,\r\n  DrowFighter: DrowFighter,\r\n  DrowFighter2: DrowFighter2,\r\n  DrowRogue: DrowRogue,\r\n  DrowWitch: DrowWitch,\r\n  GoblinArcher: GoblinArcher,\r\n  GoblinRogue: GoblinRogue,\r\n  GoblinSpearman: GoblinSpearman,\r\n  Hobgoblin: Hobgoblin,\r\n  HumanHexblade: HumanHexblade,\r\n  TabaxiMonk: TabaxiMonk,\r\n  TieflingCleric: TieflingCleric,\r\n  TieflingPaladin: TieflingPaladin,\r\n  TieflingSwordsman: TieflingSwordsman,\r\n  WhiteDragonbornMage: WhiteDragonbornMage,\r\n\r\n  SnowLeopard: SnowLeopard,\r\n  Spider: Spider,\r\n\r\n  AshZombie: AshZombie,\r\n  Beholder: Beholder,\r\n  Beholder2: Beholder2,\r\n  Cube: Cube,\r\n  Drider: Drider,\r\n  FlameSkull: FlameSkull,\r\n  Skeleton: Skeleton,\r\n  GreenDragon: GreenDragon,\r\n  Zombie: Zombie,\r\n  TwigBlight: TwigBlight,\r\n\r\n  Web: Web,\r\n\r\n  Vampire: Vampire,\r\n  WereratKnife: WereratKnife,\r\n  WereratMage: WereratMage,\r\n  WereratRogue: WereratRogue,\r\n  WereratRogue2: WereratRogue2,\r\n  Werewolf2: Werewolf2,\r\n  Werewolf3: Werewolf3,\r\n  Werewolf4: Werewolf4,\r\n\r\n  Clue1: Clue1,\r\n  Clue2: Clue2,\r\n  Clue3: Clue3,\r\n  Glyph: Glyph,\r\n  Map: Map,\r\n\r\n  DuergarMale: DuergarMale,\r\n\r\n  Birdman: Birdman,\r\n  Daggers: Daggers,\r\n  TrollSkull: TrollSkull,\r\n\r\n  CrimsonBrush: CrimsonBrush,\r\n\r\n  BookMimic: BookMimic,\r\n  ChairMimic: ChairMimic,\r\n  ChestMimic: ChestMimic,\r\n  PumpkinMimic: PumpkinMimic,\r\n  WallMimic: WallMimic,\r\n  CakeMimic: CakeMimic,\r\n  Jack: Jack,\r\n  Marty: Marty,\r\n  Harvey: Harvey,\r\n\r\n  TabaxiMummy: TabaxiMummy,\r\n\r\n  Rug: Rug,\r\n\r\n  GraveDigger: GraveDigger,\r\n  Dog: Dog,\r\n  BeepBeep: BeepBeep,\r\n  Bird: Bird,\r\n  Ram: Ram,\r\n  Sheep: Sheep,\r\n  Sheep2: Sheep2,\r\n\r\n  GhostWizard: GhostWizard,\r\n  GhostBlueWoman: GhostBlueWoman,\r\n  GhostWhiteWoman: GhostWhiteWoman,\r\n  GhostHeartWoman: GhostHeartWoman,\r\n  GhostLizardfolk: GhostLizardfolk,\r\n  GhostScreaming: GhostScreaming,\r\n  GhostSkeletal: GhostSkeletal,\r\n  Specter: Specter,\r\n  Wraith: Wraith,\r\n  Wraith2: Wraith2\r\n};\r\n\r\nexport class Token {\r\n  _id: string;\r\n  category: string;\r\n  file: string;\r\n\r\n  constructor(\r\n    _id: string, \r\n    category: string,\r\n    fileName: string) {\r\n    this._id = _id;\r\n    this.category = category;\r\n    this.file = TokenFile[fileName];\r\n  }\r\n}","\r\nimport { Token } from \"./Token\";\r\n\r\nexport class FavoriteToken {\r\n  _id: string;\r\n  campaignID: string;\r\n  name: string;\r\n  token: Token;\r\n  size: number;\r\n\r\n  constructor(\r\n    _id: string, \r\n    campaignID: string,\r\n    name: string,\r\n    token: Token,\r\n    size: number) {\r\n    this._id = _id;\r\n    this.campaignID = campaignID;\r\n    this.name = name;\r\n    this.token = token;\r\n    this.size = size;\r\n  }\r\n\r\n\r\n  toDBObj = () => {\r\n    return {\r\n      _id: this._id,\r\n      campaignID: this.campaignID,\r\n      name: this.name,\r\n      tokenID: this.token._id,\r\n      size: this.size\r\n    };\r\n  }\r\n}","\r\nimport { Token } from \"./Token\";\r\nimport { Player } from \"./Player\";\r\n\r\nexport class PlayToken {\r\n  id: number;\r\n  name: string;\r\n  token: Token | null;\r\n  x: number;\r\n  y: number;\r\n  size: number;\r\n  stealth: boolean;\r\n  moving: boolean;\r\n  owner: Player | null;\r\n\r\n  constructor(\r\n    id: number, \r\n    name: string,\r\n    token: Token | null,\r\n    x: number,\r\n    y: number,\r\n    size: number,\r\n    stealth: boolean,\r\n    moving: boolean,\r\n    owner: Player | null) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.token = token;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.size = size;\r\n    this.stealth = stealth;\r\n    this.moving = moving;\r\n    this.owner = owner;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      tokenID: this.token ? this.token._id : null,\r\n      x: this.x,\r\n      y: this.y,\r\n      size: this.size,\r\n      stealth: this.stealth,\r\n      moving: this.moving,\r\n      ownerID: this.owner ? this.owner._id : null\r\n    };\r\n  }\r\n}","\r\nexport class MaskPoint {\r\n  id: number;\r\n  maskID: number;\r\n  maskType: string;\r\n  x: number;\r\n  y: number;\r\n\r\n  constructor(\r\n    id: number, \r\n    maskID: number,\r\n    maskType: string,\r\n    x: number,\r\n    y: number,) {\r\n    this.id = id;\r\n    this.maskID = maskID;\r\n    this.maskType = maskType;\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  toClipPathPoint = (gridWidth: number, gridHeight: number) => {\r\n    // I still need to put some more translation code into this.  \r\n    // It shouldn't need to worry about pan and zoom from what I've seen.\r\n    // I think it's just going to be multiplying by 50, and adding some things to it.\r\n    let x = (this.x + gridWidth/2) * 50 - 50;\r\n    let y = (this.y + gridHeight/2) * 50 - 25;\r\n    return `${x},${y}`;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    return {\r\n      id: this.id,\r\n      x: this.x,\r\n      y: this.y\r\n    };\r\n  }\r\n}\r\n\r\nexport class Mask {\r\n  id: number;\r\n  maskType: string;\r\n  points: MaskPoint[];\r\n\r\n  constructor(\r\n    id: number, \r\n    maskType: string,\r\n    points: MaskPoint[]) {\r\n    this.id = id;\r\n    this.maskType = maskType;\r\n    this.points = points;\r\n  }\r\n\r\n  toClipPath = (gridWidth: number, gridHeight: number) => {\r\n    let clipPath = \"\";\r\n    this.points.forEach(point => {\r\n      clipPath += point.toClipPathPoint(gridWidth, gridHeight) + \" \";\r\n    });\r\n    return clipPath;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    const points: any[] = [];\r\n    this.points.forEach(p => {\r\n      points.push(p.toDBObj());\r\n    });\r\n    return {\r\n      id: this.id,\r\n      points\r\n    };\r\n  }\r\n}","\r\nimport { Map } from \"./Map\";\r\nimport { PlayToken } from \"./PlayToken\";\r\nimport { Mask } from \"./Mask\";\r\n\r\nexport class PlayMap {\r\n  _id: string;\r\n  campaignID: string;\r\n  name: string;\r\n  map: Map;\r\n  tokens: PlayToken[];\r\n  movingToken: PlayToken | null;\r\n  lightMasks: Mask[];\r\n  darkMasks: Mask[];\r\n  fogMasks: Mask[];\r\n  zoom: number;\r\n  dx: number;\r\n  dy: number;\r\n\r\n  constructor(\r\n    _id: string, \r\n    campaignID: string,\r\n    name: string,\r\n    map: Map,\r\n    tokens: PlayToken[], \r\n    movingToken: PlayToken | null,\r\n    lightMasks: Mask[],\r\n    darkMasks: Mask[],\r\n    fogMasks: Mask[],\r\n    zoom: number,\r\n    dx: number,\r\n    dy: number) {\r\n    this._id = _id;\r\n    this.campaignID = campaignID;\r\n    this.name = name;\r\n    this.map = map;\r\n    this.tokens = tokens;\r\n    this.movingToken = movingToken;\r\n    this.lightMasks = lightMasks;\r\n    this.darkMasks = darkMasks;\r\n    this.fogMasks = fogMasks;\r\n    this.zoom = zoom;\r\n    this.dx = dx;\r\n    this.dy = dy;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    const playTokens: any[] = [];\r\n    this.tokens.forEach(t => {\r\n      playTokens.push(t.toDBObj());\r\n    });\r\n    const lightMasks: any[] = [];\r\n    this.lightMasks.forEach(l => {\r\n      lightMasks.push(l.toDBObj());\r\n    });\r\n    const darkMasks: any[] = [];\r\n    this.darkMasks.forEach(l => {\r\n      darkMasks.push(l.toDBObj());\r\n    });\r\n    const fogMasks: any[] = [];\r\n    this.fogMasks.forEach(l => {\r\n      fogMasks.push(l.toDBObj());\r\n    });\r\n    return {\r\n      _id: this._id,\r\n      campaignID: this.campaignID,\r\n      name: this.name,\r\n      mapID: this.map._id,\r\n      playTokens: playTokens,\r\n      movingToken: null, // this.movingToken ? this.movingToken.toDBObj() : null,\r\n      lightMasks: lightMasks,\r\n      darkMasks: darkMasks,\r\n      fogMasks: fogMasks,\r\n      zoom: this.zoom,\r\n      dx: this.dx,\r\n      dy: this.dy\r\n    };\r\n  }\r\n}","\r\n// import { Map } from \"./Map\";\r\n// import { PlayToken } from \"./PlayToken\";\r\n// import { Mask } from \"./Mask\";\r\nimport { Campaign } from \"./Campaign\";\r\n\r\nexport class Player {\r\n  _id: string;\r\n  email: string;\r\n  username: string;\r\n  password: string;\r\n  campaign: Campaign | null;\r\n  lastPing: Date;\r\n  refreshIndex: number;\r\n\r\n  constructor(\r\n    _id: string, \r\n    email: string,\r\n    username: string,\r\n    password: string,\r\n    campaign: (Campaign | null),\r\n    lastPing: Date,\r\n    refreshIndex: number) {\r\n    this._id = _id;\r\n    this.email = email;\r\n    this.username = username;\r\n    this.password = password;\r\n    this.campaign = campaign;\r\n    this.lastPing = lastPing;\r\n    this.refreshIndex = refreshIndex;\r\n  }\r\n\r\n  toDBObj = () => {\r\n    return {\r\n      _id: this._id,\r\n      email: this.email,\r\n      username: this.username,\r\n      password: this.password,\r\n      campaignID: (this.campaign ? this.campaign._id : null),\r\n      refreshIndex: this.refreshIndex\r\n    };\r\n  }\r\n}","\r\n// This is our special type of Error that represents\r\n// when a request got a 401 Unauthorized response\r\nfunction UnauthorizedError(message) {\r\n  this.name = \"UnauthorizedError\";\r\n  this.message = message;\r\n}\r\nUnauthorizedError.prototype = new Error();\r\n\r\nvar API = (function() {\r\n  var instance;\r\n\r\n  function createInstance() {\r\n    var api = new APIClass();\r\n    return api;\r\n  }\r\n\r\n  return {\r\n    getInstance: function() {\r\n      if (!instance) {\r\n        instance = createInstance();\r\n      }\r\n      return instance;\r\n    }\r\n  };\r\n})();\r\n\r\nclass APIClass {\r\n  constructor() {\r\n    this.real = true;\r\n  }\r\n\r\n  logErrorReason = reason => {\r\n    // log the error reason but keep the rejection\r\n    console.log(\"Response error reason:\", reason);\r\n    return Promise.reject(reason);\r\n  };\r\n\r\n  checkStatus = response => {\r\n    if (response.status >= 200 && response.status < 300) {\r\n      return response;\r\n    } else if (response.status === 401) {\r\n      var unauthorizedError = new UnauthorizedError(response.statusText);\r\n      unauthorizedError.response = response;\r\n      return Promise.reject(unauthorizedError);\r\n    } else {\r\n      var error = new Error(response.statusText);\r\n      error.response = response;\r\n      return Promise.reject(error);\r\n    }\r\n  };\r\n  \r\n  getAllVTT = async (userID, refresh) => {\r\n    const campaigns = await this.getCampaigns(userID, refresh);\r\n    const maps = await this.getMaps(userID, refresh);\r\n    const tokens = await this.getTokens(userID, refresh);\r\n    const playMaps = await this.getPlayMaps(userID, refresh);\r\n    const favoriteTokens = await this.getFavoriteTokens(userID, refresh);\r\n    const players = await this.getPlayers(refresh);\r\n\r\n    return {\r\n      campaigns: campaigns.campaigns,\r\n      maps: maps.maps,\r\n      tokens: tokens.tokens,\r\n      playMaps: playMaps.playMaps,\r\n      favoriteTokens: favoriteTokens.favoriteTokens,\r\n      players: players.players\r\n    };\r\n  }\r\n\r\n  // Player\r\n  getPlayers = async (refresh = false) => {\r\n    if (refresh) {\r\n      return this.getPlayersFromAPI();\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`players`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getPlayersFromAPI();\r\n      }\r\n    }\r\n  };\r\n  getPlayersFromAPI = async () => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getPlayers/`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getPlayers/`\r\n      //   );\r\n      //   return this.processResponse(response, null, `players`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `players`);\r\n      const data = await this.processResponse(response, null, `players`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n\r\n  createPlayer = async (player) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createPlayer\", { player });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createPlayer\", { player });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deletePlayer = async (playerID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deletePlayer\", { playerID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deletePlayer\", { playerID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updatePlayer = async (player) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updatePlayer\", { player });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updatePlayer\", { player });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  login = async (email, password) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/login\", { email, password });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updatePlayer\", { player });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  playerPing = async (playerID) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/playerPing\", { playerID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updatePlayer\", { player });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  // Map\r\n  getMaps = async (userID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getMapsFromAPI(userID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`maps`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getMapsFromAPI(userID);\r\n      }\r\n    }\r\n  };\r\n  getMapsFromAPI = async (userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getMaps/${userID}`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getMaps/${userID}`\r\n      //   );\r\n      //   return this.processResponse(response, null, `maps`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `maps`);\r\n      const data = await this.processResponse(response, null, `maps`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n\r\n  createMap = async (map) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createMap\", { map });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createMap\", { map });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteMap = async (mapID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deleteMap\", { mapID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deleteMap\", { mapID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateMap = async (map) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updateMap\", { map });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updateMap\", { map });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  // Token\r\n  getTokens = async (userID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getTokensFromAPI(userID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`tokens`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getTokensFromAPI(userID);\r\n      }\r\n    }\r\n  };\r\n  getTokensFromAPI = async (userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getTokens/${userID}`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getTokens/${userID}`\r\n      //   );\r\n      //   return this.processResponse(response, null, `tokens`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `tokens`);\r\n      const data = await this.processResponse(response, null, `tokens`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n\r\n  createToken = async (token) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createToken\", { token });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createToken\", { token });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteToken = async (tokenID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deleteToken\", { tokenID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deleteToken\", { tokenID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateToken = async (token) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updateToken\", { token });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updateToken\", { token });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  // Campaign\r\n  getCampaigns = async (userID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getCampaignsFromAPI(userID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`campaigns`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getCampaignsFromAPI(userID);\r\n      }\r\n    }\r\n  };\r\n  getCampaignsFromAPI = async (userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getCampaigns/${userID}`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getCampaigns/${userID}`\r\n      //   );\r\n      //   return this.processResponse(response, null, `campaigns`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `campaigns`);\r\n      const data = await this.processResponse(response, null, `campaigns`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n  getCampaign = async (campaignID, lastUpdate, userID = -1) => {\r\n    const response = await this.postData(\r\n      `/api/vtt/getCampaign`, { campaignID, lastUpdate, userID}\r\n    );\r\n    const data = await this.processResponse(response);\r\n    return data;\r\n  };\r\n\r\n  createCampaign = async (campaign) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createCampaign\", { campaign });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createCampaign\", { campaign });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteCampaign = async (campaignID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deleteCampaign\", { campaignID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deleteCampaign\", { campaignID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateCampaign = async (campaign) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updateCampaign\", { campaign });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updateCampaign\", { campaign });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  // PlayMap\r\n  getPlayMaps = async (userID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getPlayMapsFromAPI(userID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`playMaps`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getPlayMapsFromAPI(userID);\r\n      }\r\n    }\r\n  };\r\n  getPlayMapsFromAPI = async (userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getPlayMaps/${userID}`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getPlayMaps/${userID}`\r\n      //   );\r\n      //   return this.processResponse(response, null, `playMaps`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `playMaps`);\r\n      const data = await this.processResponse(response, null, `playMaps`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n  getPlayMap = async (playMapID) => {\r\n    const response = await this.fetchData(\r\n      `/api/vtt/getPlayMap/${playMapID}`\r\n    );\r\n    const data = await this.processResponse(response);\r\n    return data;\r\n  };\r\n\r\n  createPlayMap = async (playMap) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createPlayMap\", { playMap });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createPlayMap\", { playMap });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deletePlayMap = async (playMapID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deletePlayMap\", { playMapID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deletePlayMap\", { playMapID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updatePlayMap = async (playMap) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updatePlayMap\", { playMap });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updatePlayMap\", { playMap });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n  \r\n  // FavoriteToken\r\n  getFavoriteTokens = async (userID, refresh = false) => {\r\n    if (refresh) {\r\n      return this.getFavoriteTokensFromAPI(userID);\r\n    }\r\n    else {\r\n      const data = this.getSessionData(`favoriteTokens`);\r\n      if (data !== null) {\r\n        return data;\r\n      }\r\n      else {\r\n        return this.getFavoriteTokensFromAPI(userID);\r\n      }\r\n    }\r\n  };\r\n  getFavoriteTokensFromAPI = async (userID) => {\r\n    if (this.real) {\r\n      const response = await this.fetchData(\r\n        `/api/vtt/getFavoriteTokens/${userID}`\r\n      );\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.fetchData(\r\n      //     `/api/vtt/getFavoriteTokens/${userID}`\r\n      //   );\r\n      //   return this.processResponse(response, null, `favoriteTokens`);\r\n      // }\r\n      // const data = await this.processResponse(response, retry, `favoriteTokens`);\r\n      const data = await this.processResponse(response, null, `favoriteTokens`);\r\n      return data;\r\n    } else {\r\n      return [{ _id: -1, vttID: -1, Name: \"Alice\" }];\r\n    }\r\n  };\r\n\r\n  createFavoriteToken = async (favoriteToken) => {\r\n    if (this.real) {\r\n      const response = await this.postData(\"/api/vtt/createFavoriteToken\", { favoriteToken });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.postData(\"/api/vtt/createFavoriteToken\", { favoriteToken });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return -1;\r\n    }\r\n  };\r\n\r\n  deleteFavoriteToken = async (favoriteTokenID) => {\r\n    if (this.real) {\r\n      const response = await this.deleteData(\"/api/vtt/deleteFavoriteToken\", { favoriteTokenID });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.deleteData(\"/api/vtt/deleteFavoriteToken\", { favoriteTokenID });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  updateFavoriteToken = async (favoriteToken) => {\r\n    if (this.real) {\r\n      const response = await this.patchData(\"/api/vtt/updateFavoriteToken\", { favoriteToken });\r\n      // const retry = async () => {\r\n      //   await this.relogin();\r\n      //   const response = await this.patchData(\"/api/vtt/updateFavoriteToken\", { favoriteToken });\r\n      //   return this.processResponse(response);\r\n      // }\r\n      return this.processResponse(response, null);\r\n    } else {\r\n      return \"success\";\r\n    }\r\n  };\r\n\r\n  // Core API Calls\r\n  fetchData = async (path, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        ...options.headers\r\n      }\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  postData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  putData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  patchData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  deleteData = async (path, data, options = {}) => {\r\n    return await fetch(`${path}`, {\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      ...options,\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        ...options.headers\r\n      },\r\n      method: \"DELETE\",\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(this.checkStatus)\r\n      .catch(this.logErrorReason);\r\n  };\r\n\r\n  processResponse = async (response, retry = null, sessionName = null, noExpiry = false) => {\r\n    const body = await response.json();\r\n    if (response.status !== 200) { \r\n      throw Error(body.message);\r\n    }\r\n    else if (body.error !== undefined && retry !== null) {\r\n      return retry();\r\n    } \r\n    else {\r\n      if (sessionName !== null) {\r\n        let expiresAt = new Date();\r\n        if (noExpiry) \r\n          expiresAt = \"never\";\r\n        else \r\n          expiresAt.setHours(expiresAt.getHours() + 1);\r\n        const sessionObj = {\r\n          expiresAt,\r\n          body\r\n        };\r\n        sessionStorage.setItem(sessionName, JSON.stringify(sessionObj));\r\n      }\r\n      return body;\r\n    };\r\n  };\r\n\r\n  relogin = async () => {\r\n    try {\r\n      const user = this.getSessionData(\"loginUser\");\r\n      if (user !== null) {\r\n        const response = await this.postData(\"/api/user/login\", user);\r\n        this.processResponse(response, null, \"user\", true);\r\n      }\r\n    }\r\n    catch {}\r\n  }\r\n\r\n  getSessionData = (sessionName) => {\r\n    const sessionStr = sessionStorage.getItem(sessionName);\r\n    if (sessionStr !== null) {\r\n      const sessionObj = JSON.parse(sessionStr);\r\n      if (sessionObj.expiresAt !== undefined && \r\n        (sessionObj.expiresAt === \"never\" || sessionObj.expiresAt > new Date())) {\r\n        return sessionObj.body;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\nexport default API;\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport {\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormHelperText,\r\n  Button, Grid\r\n} from \"@material-ui/core\";\r\nimport { Campaign } from \"../models\";\r\nimport API from \"../smartAPI\";\r\n\r\n// This lets the user create a new campaign.\r\n\r\n\r\ninterface AppState {\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n})\r\n\r\nconst mapDispatch = {\r\n  addCampaign: (playMap: Campaign) => ({ type: 'ADD_PLAYMAP', payload: playMap })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\n// The inferred type will look like:\r\n// {isOn: boolean, toggleOn: () => void}\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n  // backgroundColor: string\r\n  selectCampaign: (playMap: Campaign) => void\r\n}\r\n\r\nexport interface ICreateCampaignStateType {\r\n  name: string;\r\n  error: string;\r\n  processing: boolean;\r\n}\r\n// export interface ICreateCampaignProps {\r\n//   maps: Map[];\r\n//   addCampaign: (playMap: Campaign) => void;\r\n// }\r\nclass CreateCampaign extends Component<\r\n  Props,\r\n  ICreateCampaignStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      error: \"\",\r\n      processing: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  renderHeader = () => {\r\n    return (\r\n      <div key=\"header\"> \r\n        Name the new Campaign.\r\n      </div>\r\n    );\r\n  };\r\n\r\n  createCampaign = () => {\r\n    this.setState({\r\n      processing: true\r\n    }, () => {\r\n      const campaignObj: any = {\r\n        name: this.state.name,\r\n        selectedPlayMapID: \"\", \r\n        turnPlayerID: null\r\n      };\r\n\r\n      this.api.createCampaign(campaignObj).then((res: any) => {\r\n        if (res !== undefined && res.error === undefined) {\r\n          const newCampaign: Campaign = new Campaign(res.campaignID, this.state.name, \"\", null, new Date().toString());\r\n          this.props.addCampaign(newCampaign);\r\n          this.props.selectCampaign(newCampaign);\r\n          this.setState({ processing: false });\r\n          // const maps: Map[] = [];\r\n          // res.maps.forEach((m: any) => {\r\n          //   maps.push(new Map(m._id, m.name, m.fileName, m.gridWidth, m.gridHeight));\r\n          // });\r\n          // this.props.setMaps(maps);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  onBlur = () => {\r\n    this.setState(\r\n      { name: this.state.name.trim() }, \r\n      () => {\r\n        // Check to make sure the name isn't taken.  Low priority.    \r\n      }\r\n    );\r\n  };\r\n\r\n  renderMain = () => {\r\n    return (\r\n      <Grid key=\"main\" container spacing={1} direction=\"column\">\r\n        <Grid item>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <InputLabel htmlFor=\"text_field_play_map_name\">Campaign Name</InputLabel>\r\n              <OutlinedInput\r\n                id={`text_field_play_map_name`}\r\n                name={`text_field_play_map_name`}\r\n                type=\"text\"\r\n                autoComplete=\"Off\"\r\n                error={this.state.error !== \"\"}\r\n                value={this.state.name}\r\n                onChange={e => {\r\n                  this.setState({ name: e.target.value });\r\n                }}\r\n                onBlur={() => {\r\n                  this.onBlur();\r\n                }}\r\n                labelWidth={120}\r\n                fullWidth\r\n              />\r\n            <FormHelperText>\r\n              {this.state.error}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item>\r\n          <Button disabled={ this.state.processing || this.state.name === \"\" } \r\n            onClick={this.createCampaign} \r\n            variant=\"contained\" color=\"primary\">\r\n            Submit\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      this.renderHeader(),\r\n      this.renderMain()\r\n    ];\r\n  }\r\n}\r\n\r\nexport default connector(CreateCampaign);\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport {\r\n  Button, Grid\r\n} from \"@material-ui/core\";\r\nimport { Campaign } from \"../models\";\r\n\r\n// This lets the user select a Campaign to use.\r\n\r\ninterface AppState {\r\n  campaigns: Campaign[] | null\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  campaigns: state.app.campaigns\r\n})\r\n\r\nconst mapDispatch = {\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n  selectCampaign: (campaign: Campaign) => void;\r\n  mode: string;\r\n}\r\n\r\nexport interface ILoadCampaignStateType {\r\n  selectedCampaign: Campaign | null;\r\n}\r\n\r\nclass LoadCampaign extends Component<\r\n  Props,\r\n  ILoadCampaignStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedCampaign: null\r\n    };\r\n    // this.api = API.getInstance();\r\n  }\r\n\r\n  // api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  // renderHeader = () => {\r\n  //   return (\r\n  //     <div key=\"header\"> \r\n  //       Select a Map\r\n  //     </div>\r\n  //   );\r\n  // };\r\n\r\n  selectCampaign = (campaign: Campaign) => {\r\n    this.setState({\r\n      selectedCampaign: campaign\r\n    });\r\n  };\r\n\r\n  loadCampaign = () => {\r\n    if (this.state.selectedCampaign !== null) {\r\n      this.props.selectCampaign(this.state.selectedCampaign);\r\n    }\r\n  }\r\n\r\n  renderMain = () => {\r\n    if (this.props.campaigns === null) {\r\n      return (<div key=\"main\">I'm invisible</div>);\r\n    } else {\r\n      return (\r\n        <Grid key=\"main\" style={{ margin: 4 }} container spacing={1} direction=\"column\">\r\n          <Grid item \r\n            style={{ \r\n              height: (window.innerHeight - 200),\r\n              overflowY: \"scroll\"\r\n            }}\r\n            container spacing={1} direction=\"row\">\r\n            { this.renderMapList() }\r\n            {/* { this.renderSelectedMap() } */}\r\n          </Grid>\r\n          <Grid item>\r\n            <Button disabled={ this.state.selectedCampaign === null } \r\n              onClick={this.loadCampaign} \r\n              variant=\"contained\" color=\"primary\">\r\n              Submit\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n  };\r\n\r\n  renderMapList = () => {\r\n    if (this.props.campaigns !== null) {\r\n      return (\r\n        <Grid item xs={6} \r\n          container spacing={1} direction=\"column\">\r\n          Select a Campaign\r\n          {this.props.campaigns.map((campaign, key) => {\r\n            return (\r\n              <Grid item key={key} \r\n                onClick={() => {\r\n                  this.selectCampaign(campaign);\r\n                }}\r\n                style={{\r\n                  backgroundColor: (this.state.selectedCampaign && this.state.selectedCampaign._id === campaign._id ? \"blue\" : \"transparent\"),\r\n                  color: (this.state.selectedCampaign && this.state.selectedCampaign._id === campaign._id ? \"white\" : \"black\"),\r\n                  cursor: \"pointer\"\r\n                }}>\r\n                {campaign.name}\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n        );\r\n    } else {\r\n      return (<Grid item xs={6}>{\"I'm invisible!\"}</Grid>);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      // this.renderHeader(),\r\n      this.renderMain()\r\n    ];\r\n  }\r\n}\r\n\r\nexport default connector(LoadCampaign);\r\n","\r\nimport React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport {\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  FormHelperText,\r\n  Button, Grid, Select, MenuItem\r\n} from \"@material-ui/core\";\r\n// import {\r\n//   // notFromLogin\r\n// } from \"../redux/actions/index\";\r\nimport { Campaign, PlayMap, Map } from \"../models\";\r\nimport API from \"../smartAPI\";\r\n\r\n// This lets the user select a Map and use it to create a new\r\n// PlayMap.\r\n\r\n\r\ninterface AppState {\r\n  maps: Map[] | null;\r\n  selectedCampaign: Campaign | null;\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  maps: state.app.maps,\r\n  selectedCampaign: state.app.selectedCampaign\r\n})\r\n\r\nconst mapDispatch = {\r\n  // setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  // setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  addPlayMap: (playMap: PlayMap) => ({ type: 'ADD_PLAYMAP', payload: playMap })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\n// The inferred type will look like:\r\n// {isOn: boolean, toggleOn: () => void}\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n  // backgroundColor: string\r\n  selectPlayMap: (playMap: PlayMap) => void\r\n}\r\n\r\nexport interface ICreatePlayMapStateType {\r\n  name: string;\r\n  selectedMap: Map | null;\r\n  selectedCategory: string;\r\n  categories: string[];\r\n  error: string;\r\n  processing: boolean;\r\n}\r\n// export interface ICreatePlayMapProps {\r\n//   maps: Map[];\r\n//   addPlayMap: (playMap: PlayMap) => void;\r\n// }\r\nclass CreatePlayMap extends Component<\r\n  Props,\r\n  ICreatePlayMapStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      selectedCategory: \"all\",\r\n      categories: [],\r\n      selectedMap: null,\r\n      error: \"\",\r\n      processing: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  renderHeader = () => {\r\n    return (\r\n      <div key=\"header\"> \r\n        Select a Map and give the PlayMap a name.\r\n      </div>\r\n    );\r\n  };\r\n\r\n  selectMap = (map: Map) => {\r\n    if (this.state.name === \"\") {\r\n      const now = new Date();\r\n      let month: string = (now.getMonth() + 1).toString();\r\n      if (month.length === 1) {\r\n        month = \"0\" + month;\r\n      }\r\n      let date: string = now.getDate().toString();\r\n      if (date.length === 1) {\r\n        date = \"0\" + date;\r\n      }\r\n      this.setState({\r\n        selectedMap: map,\r\n        name: `${map.name} ${now.getFullYear()}${month}${date}`\r\n      });\r\n    } else {\r\n      this.setState({\r\n        selectedMap: map\r\n      });\r\n    }\r\n  };\r\n\r\n  createPlayMap = () => {\r\n    this.setState({\r\n      processing: true\r\n    }, () => {\r\n      if (this.state.selectedMap && this.props.selectedCampaign) {\r\n        const mapObj: any = {\r\n          mapID: this.state.selectedMap._id, \r\n          campaignID: this.props.selectedCampaign._id,\r\n          name: this.state.name,\r\n          playTokens: [], \r\n          lightMasks: [],\r\n          darkMasks: [],\r\n          fogMasks: [],\r\n          zoom: 1, \r\n          dx: 0, \r\n          dy: 0\r\n        };\r\n\r\n        this.api.createPlayMap(mapObj).then((res: any) => {\r\n          if (res !== undefined && res.error === undefined && this.state.selectedMap && this.props.selectedCampaign) {\r\n            const newPlayMap: PlayMap = new PlayMap(res.playMapID, this.props.selectedCampaign._id, this.state.name, this.state.selectedMap, [], null, [], [], [], 1, 0, 0);\r\n            this.props.addPlayMap(newPlayMap);\r\n            this.props.selectPlayMap(newPlayMap);\r\n            this.setState({ processing: false });\r\n            // const maps: Map[] = [];\r\n            // res.maps.forEach((m: any) => {\r\n            //   maps.push(new Map(m._id, m.name, m.fileName, m.gridWidth, m.gridHeight));\r\n            // });\r\n            // this.props.setMaps(maps);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onBlur = () => {\r\n    this.setState(\r\n      { name: this.state.name.trim() }, \r\n      () => {\r\n        // Check to make sure the name isn't taken.  Low priority.    \r\n      }\r\n    );\r\n  };\r\n\r\n  changeCategory = (e: any) => {\r\n    this.setState({ selectedCategory: e.target.value });\r\n  }\r\n\r\n  renderCategorySelect = () => {\r\n    return (\r\n      <FormControl variant=\"outlined\">\r\n        <InputLabel id=\"category\">Category</InputLabel>\r\n        <Select\r\n          labelId=\"category\"\r\n          id=\"category\"\r\n          value={this.state.selectedCategory}\r\n          onChange={this.changeCategory}\r\n          label=\"Category\"\r\n        >\r\n          { this.state.categories.map((c, key) => {\r\n            return (<MenuItem key={key} value={c}>{c}</MenuItem>);\r\n          })}\r\n        </Select>\r\n      </FormControl>\r\n    );\r\n  }\r\n\r\n  renderMain = () => {\r\n    if (this.props.maps === null) {\r\n      return (<div key=\"main\">I'm invisible</div>);\r\n    } else {\r\n      return (\r\n        <Grid key=\"main\" container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            <FormControl variant=\"outlined\" fullWidth>\r\n              <InputLabel htmlFor=\"text_field_play_map_name\">PlayMap Name</InputLabel>\r\n                <OutlinedInput\r\n                  id={`text_field_play_map_name`}\r\n                  name={`text_field_play_map_name`}\r\n                  type=\"text\"\r\n                  autoComplete=\"Off\"\r\n                  error={this.state.error !== \"\"}\r\n                  value={this.state.name}\r\n                  onChange={e => {\r\n                    this.setState({ name: e.target.value });\r\n                  }}\r\n                  onBlur={() => {\r\n                    this.onBlur();\r\n                  }}\r\n                  labelWidth={120}\r\n                  fullWidth\r\n                />\r\n              <FormHelperText>\r\n                {this.state.error}\r\n              </FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item \r\n            style={{ \r\n              height: (window.innerHeight - 200),\r\n              overflowY: \"scroll\"\r\n            }}\r\n            container spacing={1} direction=\"row\">\r\n            <Grid item xs={6} container spacing={1} direction=\"column\">\r\n              <Grid item>\r\n                { this.renderCategorySelect() }\r\n              </Grid>\r\n              <Grid item>\r\n                { this.renderMapList() }\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              { this.renderSelectedMap() }\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button disabled={ this.state.processing || this.state.selectedMap === null || this.state.name === \"\" } \r\n              onClick={this.createPlayMap} \r\n              variant=\"contained\" color=\"primary\">\r\n              Submit\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n  };\r\n\r\n  renderMapList = () => {\r\n    if (this.props.maps !== null) {\r\n      return (\r\n        <Grid item xs={6} \r\n          container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            Select a Map\r\n          </Grid>\r\n          {this.props.maps.filter(m => this.state.selectedCategory === \"all\" || this.state.selectedCategory === m.category).map((map, key) => {\r\n            return (\r\n              <Grid item key={key} \r\n                onClick={() => {\r\n                  this.selectMap(map);\r\n                }}\r\n                style={{\r\n                  backgroundColor: (this.state.selectedMap && this.state.selectedMap._id === map._id ? \"blue\" : \"transparent\"),\r\n                  color: (this.state.selectedMap && this.state.selectedMap._id === map._id ? \"white\" : \"black\"),\r\n                  cursor: \"pointer\"\r\n                }}>\r\n                {map.name}\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n        );\r\n    } else {\r\n      return (<Grid item xs={6}>{\"I'm invisible!\"}</Grid>);\r\n    }\r\n  };\r\n\r\n  renderSelectedMap = () => {\r\n    if (this.state.selectedMap !== null) {\r\n      return (\r\n        <Grid container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            Grid Width: {this.state.selectedMap.gridWidth}\r\n          </Grid>\r\n          <Grid item>\r\n            Grid Height: {this.state.selectedMap.gridHeight}\r\n          </Grid>  \r\n          <Grid item>\r\n            <img \r\n              style={{ width: \"100%\" }} \r\n              src={this.state.selectedMap.file} \r\n              alt=\"testing\" />\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return (<div></div>);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.state.categories.length === 0 && this.props.maps) {\r\n      const categories: string[] = [];\r\n      categories.push(\"all\");\r\n      this.props.maps.forEach((m: Map) => {\r\n        if (m.category && !categories.includes(m.category)){\r\n          categories.push(m.category);\r\n        }\r\n      });\r\n      this.setState({ categories });\r\n    }\r\n    return [\r\n      this.renderHeader(),\r\n      this.renderMain()\r\n    ];\r\n  }\r\n}\r\n\r\nexport default connector(CreatePlayMap);\r\n","\r\nimport React, { Component } from \"react\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport {\r\n  // FormControl,\r\n  // OutlinedInput,\r\n  // InputLabel,\r\n  // FormHelperText,\r\n  Button, Grid\r\n} from \"@material-ui/core\";\r\n\r\nimport { PlayMap, Campaign } from \"../models\";\r\n\r\n// import API from \"../smartAPI\";\r\n\r\n// This lets the user select a PlayMap to use.\r\n\r\ninterface AppState {\r\n  playMaps: PlayMap[] | null;\r\n  selectedCampaign: Campaign;\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  playMaps: state.app.playMaps,\r\n  selectedCampaign: state.app.selectedCampaign\r\n})\r\n\r\nconst mapDispatch = {\r\n  // setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  // setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  // addPlayMap: (playMap: PlayMap) => ({ type: 'ADD_PLAYMAP', payload: playMap })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n  selectPlayMap: (playMap: PlayMap) => void;\r\n  mode: string;\r\n}\r\n\r\nexport interface ILoadPlayMapStateType {\r\n  selectedMap: PlayMap | null;\r\n}\r\n\r\nclass LoadPlayMap extends Component<\r\n  Props,\r\n  ILoadPlayMapStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedMap: null\r\n    };\r\n    // this.api = API.getInstance();\r\n  }\r\n\r\n  // api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  // renderHeader = () => {\r\n  //   return (\r\n  //     <div key=\"header\"> \r\n  //       Select a Map\r\n  //     </div>\r\n  //   );\r\n  // };\r\n\r\n  selectPlayMap = (map: PlayMap) => {\r\n    this.setState({\r\n      selectedMap: map\r\n    });\r\n  };\r\n\r\n  loadPlayMap = () => {\r\n    if (this.state.selectedMap !== null) {\r\n      this.props.selectPlayMap(this.state.selectedMap);\r\n    }\r\n  }\r\n\r\n  renderMain = () => {\r\n    if (this.props.playMaps === null) {\r\n      return (<div key=\"main\">I'm invisible</div>);\r\n    } else {\r\n      return (\r\n        <Grid key=\"main\" style={{ margin: 4 }} container spacing={1} direction=\"column\">\r\n          <Grid item \r\n            style={{ \r\n              height: (window.innerHeight - 200),\r\n              overflowY: \"scroll\"\r\n            }}\r\n            container spacing={1} direction=\"row\">\r\n            { this.renderMapList() }\r\n            { this.renderSelectedMap() }\r\n          </Grid>\r\n          <Grid item>\r\n            <Button disabled={ this.state.selectedMap === null } \r\n              onClick={this.loadPlayMap} \r\n              variant=\"contained\" color=\"primary\">\r\n              Submit\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n  };\r\n\r\n  renderMapList = () => {\r\n    if (this.props.playMaps !== null) {\r\n      return (\r\n        <Grid item xs={6} \r\n          container spacing={1} direction=\"column\">\r\n          Select a Map\r\n          {this.props.playMaps.filter(m => m.campaignID === this.props.selectedCampaign._id).map((map, key) => {\r\n            return (\r\n              <Grid item key={key} \r\n                onClick={() => {\r\n                  this.selectPlayMap(map);\r\n                }}\r\n                style={{\r\n                  backgroundColor: (this.state.selectedMap && this.state.selectedMap._id === map._id ? \"blue\" : \"transparent\"),\r\n                  color: (this.state.selectedMap && this.state.selectedMap._id === map._id ? \"white\" : \"black\"),\r\n                  cursor: \"pointer\"\r\n                }}>\r\n                {map.name}\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n        );\r\n    } else {\r\n      return (<Grid item xs={6}>{\"I'm invisible!\"}</Grid>);\r\n    }\r\n  };\r\n\r\n  renderSelectedMap = () => {\r\n    if (this.state.selectedMap !== null && this.props.mode === \"DM\") {\r\n      return (\r\n        <Grid item xs={6} container spacing={1} direction=\"column\">\r\n          <Grid item>\r\n            Grid Width: {this.state.selectedMap.map.gridWidth}\r\n          </Grid>\r\n          <Grid item>\r\n            Grid Height: {this.state.selectedMap.map.gridHeight}\r\n          </Grid>  \r\n          <Grid item>\r\n            <img \r\n              style={{ width: \"100%\" }} \r\n              src={this.state.selectedMap.map.file} \r\n              alt=\"testing\" />\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return (<Grid item xs={6}></Grid>);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      // this.renderHeader(),\r\n      this.renderMain()\r\n    ];\r\n  }\r\n}\r\n\r\nexport default connector(LoadPlayMap);\r\n","/*\r\n  Heavily inspired/lifted from this idea: https://stackoverflow.com/a/39311435/661768\r\n  without jqueryUI or jquery dependency.\r\n*/\r\nimport * as React from 'react';\r\n\r\nexport interface IDragData {\r\n  x: number;\r\n  y: number;\r\n  dx: number;\r\n  dy: number;\r\n}\r\n\r\nexport interface IReactPanZoomStateType {\r\n  dragging: boolean;\r\n  dragData: IDragData;\r\n  matrixData: number[];\r\n}\r\nexport interface IReactPanZoomProps {\r\n  height?: string;\r\n  width?: string;\r\n  className?: string;\r\n  enablePan?: boolean;\r\n  enableClick?: boolean;\r\n  singleSelect?: boolean;\r\n  zoom?: number;\r\n  pandx?: number;\r\n  pandy?: number;\r\n  onPan?: (x: number, y: number) => void;\r\n  onClick?: (x: number, y: number) => void;\r\n  onMouseMove?: (x: number, y: number) => void;\r\n}\r\nexport default class ReactPanZoom extends React.PureComponent<\r\n  IReactPanZoomProps,\r\n  IReactPanZoomStateType\r\n> {\r\n  // In strict null checking setting default props doesn't seem to work. Hence the non-null assertion.\r\n  // :crossedfingers: it shouldn't be deprecated. Or the very least support defaultProps semantics as proposed\r\n  // in this PR: https://github.com/Microsoft/TypeScript/issues/23812\r\n  public static defaultProps: Partial<IReactPanZoomProps> = {\r\n    enablePan: true,\r\n    enableClick: false,\r\n    singleSelect: false,\r\n    onPan: () => undefined,\r\n    onClick: () => undefined,\r\n    onMouseMove: () => undefined,\r\n    pandx: 0,\r\n    pandy: 0,\r\n    zoom: 1,\r\n  };\r\n  private getInitialState = () => {\r\n    const { pandx, pandy, zoom } = this.props;\r\n    const defaultDragData = {\r\n      dx: pandx!,\r\n      dy: pandy!,\r\n      x: 0,\r\n      y: 0,\r\n    };\r\n    return {\r\n      dragData: defaultDragData,\r\n      dragging: false,\r\n      matrixData: [\r\n        zoom!,\r\n        0,\r\n        0,\r\n        zoom!,\r\n        pandx!,\r\n        pandy!, // [zoom, skew, skew, zoom, dx, dy]\r\n      ],\r\n    };\r\n  };\r\n  // Used to set cursor while moving.\r\n  private panWrapper: any;\r\n  // Used to set transform for pan.\r\n  private panContainer: any;\r\n  public state = this.getInitialState();\r\n\r\n  private onMouseDown = (e: React.MouseEvent<EventTarget>) => {\r\n    if (this.props.enableClick && this.props.onClick) {\r\n      this.props.onClick(e.pageX, e.pageY);\r\n    }\r\n    if (!this.props.enablePan) {\r\n      return;\r\n    }\r\n    // eslint-disable-next-line\r\n    const { matrixData, dragData } = this.state;\r\n    const offsetX = matrixData[4];\r\n    const offsetY = matrixData[5];\r\n    const newDragData: IDragData = {\r\n      dx: offsetX,\r\n      dy: offsetY,\r\n      x: e.pageX,\r\n      y: e.pageY,\r\n    };\r\n    this.setState({\r\n      dragData: newDragData,\r\n      dragging: true,\r\n    });\r\n    if (this.panWrapper) {\r\n      this.panWrapper.style.cursor = 'move';\r\n    }\r\n    e.stopPropagation();\r\n    e.nativeEvent.stopImmediatePropagation();\r\n    e.preventDefault();\r\n  };\r\n\r\n  /**\r\n   * I didn't make this control.  \r\n   * I only tweaked it a little so I could have it respond \r\n   * differently in different modes.\r\n   * The original used this method, and I don't want to worry\r\n   * about fixing it for them.  I just added the UNSAFE_ to it\r\n   * so it would stop giving me warnings.\r\n   * @param nextProps \r\n   */\r\n  public UNSAFE_componentWillReceiveProps(nextProps: IReactPanZoomProps) {\r\n    const { matrixData } = this.state;\r\n    const { zoom = matrixData[0], pandx = matrixData[4], pandy = matrixData[5] } = nextProps;\r\n    const newMatrixData = [...this.state.matrixData];\r\n    if (matrixData[0] !== zoom) {\r\n      newMatrixData[0] = zoom || newMatrixData[0];\r\n      newMatrixData[3] = zoom || newMatrixData[3];\r\n    }\r\n    if (matrixData[4] !== pandx) {\r\n      newMatrixData[4] = pandx;\r\n    }\r\n    if (matrixData[5] !== pandy) {\r\n      newMatrixData[5] = pandy;\r\n    }\r\n    this.setState({\r\n      matrixData: newMatrixData,\r\n    });\r\n  }\r\n\r\n  private onMouseUp = () => {\r\n    this.setState({\r\n      dragging: false,\r\n    });\r\n    if (this.panWrapper) {\r\n      this.panWrapper.style.cursor = '';\r\n    }\r\n    if (!this.props.enableClick && this.props.onPan) {\r\n      this.props.onPan(this.state.matrixData[4], this.state.matrixData[5]);\r\n    }\r\n  };\r\n\r\n  private getNewMatrixData = (x: number, y: number): number[] => {\r\n    const { dragData, matrixData } = this.state;\r\n    // const dragData = {...this.state.dragData};\r\n    // const matrixData = {...this.state.matrixData};\r\n    const deltaX = dragData.x - x;\r\n    const deltaY = dragData.y - y;\r\n    matrixData[4] = dragData.dx - deltaX;\r\n    matrixData[5] = dragData.dy - deltaY;\r\n    return matrixData;\r\n  };\r\n\r\n  private getNewMatrixData2 = (x: number, y: number): number[] => {\r\n    // const { dragData, matrixData } = this.state;\r\n    const dragData = {...this.state.dragData};\r\n    const matrixData = {...this.state.matrixData};\r\n    const deltaX = dragData.x - x;\r\n    const deltaY = dragData.y - y;\r\n    matrixData[4] = dragData.dx - deltaX;\r\n    matrixData[5] = dragData.dy - deltaY;\r\n    return matrixData;\r\n  };\r\n\r\n  private onMouseMove = (e: React.MouseEvent<EventTarget>) => {\r\n    if (this.state.dragging) {\r\n      const matrixData = this.getNewMatrixData(e.pageX, e.pageY);\r\n      this.setState({\r\n        matrixData,\r\n      });\r\n      if (this.panContainer) {\r\n        this.panContainer.style.transform = `matrix(${this.state.matrixData.toString()})`;\r\n      }\r\n    } else {\r\n      if (this.props.singleSelect && this.props.onMouseMove) {\r\n        // const matrixData = this.getNewMatrixData2(e.pageX, e.pageY);\r\n        this.props.onMouseMove(e.pageX, e.pageY);\r\n      }\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <div\r\n        className={`pan-container ${this.props.className || ''}`}\r\n        onMouseDown={this.onMouseDown}\r\n        onMouseUp={this.onMouseUp}\r\n        onMouseMove={this.onMouseMove}\r\n        style={{\r\n          height: this.props.height,\r\n          userSelect: 'none',\r\n          width: this.props.width,\r\n          backgroundColor: \"black\"\r\n        }}\r\n        ref={(ref) => (this.panWrapper = ref)}\r\n      >\r\n        <div\r\n          ref={(ref) => (ref ? (this.panContainer = ref) : null)}\r\n          style={{\r\n            transform: `matrix(${this.state.matrixData.toString()})`,\r\n          }}\r\n        >\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","\r\nimport React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport {\r\n  FormControl,\r\n  OutlinedInput,\r\n  InputLabel,\r\n  // FormHelperText,\r\n  Button, \r\n  Grid,\r\n  Select, MenuItem\r\n  // List, ListItem, ListItemText\r\n} from \"@material-ui/core\";\r\nimport styled, { css } from \"styled-components\";\r\nimport ReactPanZoom from \"./my-react-pan-zoom\";\r\nimport { \r\n  Campaign, \r\n  PlayMap, Map, \r\n  PlayToken, \r\n  Mask, MaskPoint, \r\n  FavoriteToken, Token,\r\n  Player\r\n} from \"../models\";\r\nimport FogOfWar from \"../assets/img/Fog.jpg\";\r\nimport API from \"../smartAPI\";\r\n\r\n// This displays the PlayMap.  \r\n// If in DM mode then it can be modified, and the changes\r\n// are saved and carried over to Player mode.\r\n\r\nconst HEADER_HEIGHT = 30;\r\nconst Container = css`\r\n  height: calc(100vh - ${HEADER_HEIGHT}px);\r\n  width: 100vw;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1;\r\n`;\r\nconst ControlsContainer = styled.div`\r\n  position: fixed;\r\n  background: lightgray;\r\n  height: 100%;\r\n  right: 0;\r\n  z-index: 2;\r\n  cursor: pointer;\r\n  user-select: none;\r\n\r\n  > div {\r\n    padding: 15px;\r\n    &:hover {\r\n      background: darkgray;\r\n    }\r\n    &:active {\r\n      box-shadow: 1px 1px 1px inset;\r\n    }\r\n  }\r\n`;\r\n\r\nconst PlayersContainer = styled.div`\r\n  position: fixed;\r\n  background: lightgray;\r\n  height: 100%;\r\n  left: 0;\r\n  z-index: 2;\r\n  cursor: pointer;\r\n  user-select: none;\r\n\r\n  > div {\r\n    padding: 15px;\r\n    &:hover {\r\n      background: darkgray;\r\n    }\r\n    &:active {\r\n      box-shadow: 1px 1px 1px inset;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Heading = styled.div`\r\n  background: dimgrey;\r\n  color: white;\r\n  height: ${HEADER_HEIGHT}px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 10px;\r\n`;\r\n\r\nconst Icons = styled.strong`\r\n  font-size: 2rem;\r\n`;\r\n\r\n\r\ninterface AppState {\r\n  selectedCampaign: Campaign;\r\n  campaigns: Campaign[];\r\n  selectedPlayer: Player | null;\r\n  players: Player[];\r\n  playMaps: PlayMap[];\r\n  selectedPlayMap: PlayMap;\r\n  tokens: Token[];\r\n  favoriteTokens: FavoriteToken[];\r\n  maps: Map[];\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  selectedCampaign: state.app.selectedCampaign,\r\n  campaigns: state.app.campaigns,\r\n  selectedPlayer: state.app.selectedPlayer,\r\n  players: state.app.players,\r\n  playMaps: state.app.playMaps,\r\n  selectedPlayMap: state.app.selectedPlayMap,\r\n  tokens: state.app.tokens,\r\n  favoriteTokens: state.app.favoriteTokens,\r\n  maps: state.app.maps\r\n})\r\n\r\nconst mapDispatch = {\r\n  // setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  // setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  addFavoriteToken: (favoriteToken: FavoriteToken) => ({ type: 'ADD_FAVORITETOKEN', payload: favoriteToken }),\r\n  updateFavoriteToken: (favoriteToken: FavoriteToken) => ({ type: 'UPDATE_FAVORITETOKEN', payload: favoriteToken }),\r\n  updateCampaign: (campaign: Campaign) => ({ type: 'UPDATE_CAMPAIGN', payload: campaign }),\r\n  selectPlayMap: (playMap: PlayMap) => ({ type: 'SELECT_PLAYMAP', payload: playMap }),\r\n  updatePlayMap: (playMap: PlayMap) => ({ type: 'UPDATE_PLAYMAP', payload: playMap }),\r\n  setPlayers: (players: Player[]) => ({ type: 'SET_PLAYERS', payload: players })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n  // playMap: PlayMap,\r\n  mode: string\r\n}\r\n\r\nexport interface IDisplayPlayMapStateType {\r\n  // playMap: PlayMap;\r\n  mapMode: string;\r\n  singleSelect: boolean;\r\n  selectedCategory: string;\r\n  categories: string[];\r\n  selected: (PlayToken | MaskPoint)[];\r\n  hovered: PlayToken | MaskPoint | null;\r\n  shiftHeld: boolean;\r\n  ctrlHeld: boolean;\r\n  deselecting: boolean;\r\n  controlMode: string;\r\n  controlSubMode: string;\r\n  lastRefresh: Date;\r\n  tokenName: string;\r\n  tokenSize: number;\r\n  tokenCount: number;\r\n  // These are separate from the other selected \r\n  // because they're in the controls instead of the map\r\n  selectedToken: Token | null;\r\n  selectedFavoriteToken: FavoriteToken | null;\r\n  selectedMask: Mask | null;\r\n  countdown: number;\r\n  refreshing: boolean;\r\n  running: boolean;\r\n}\r\n// export interface IDisplayPlayMapProps {\r\n//   maps: Map[];\r\n//   addPlayMap: (playMap: PlayMap) => void;\r\n// }\r\nclass DisplayPlayMap extends Component<\r\n  Props,\r\n  IDisplayPlayMapStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      // playMap: props.playMap,\r\n      mapMode: \"pan\",\r\n      singleSelect: false,\r\n      selectedCategory: \"all\",\r\n      categories: [],\r\n      selected: [],\r\n      hovered: null,\r\n      shiftHeld: false,\r\n      ctrlHeld: false,\r\n      deselecting: false,\r\n      controlMode: \"main\",\r\n      controlSubMode: \"add\",\r\n      lastRefresh: new Date(),\r\n      tokenName: \"\",\r\n      tokenSize: 1,\r\n      tokenCount: 1,\r\n      selectedToken: null,\r\n      selectedFavoriteToken: null,\r\n      selectedMask: null,\r\n      countdown: 1,\r\n      refreshing: false,\r\n      running: false\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.onKeyDown.bind(this));\r\n    document.addEventListener(\"keyup\", this.onKeyUp.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.onKeyDown.bind(this));\r\n    document.removeEventListener(\"keyup\", this.onKeyUp.bind(this));\r\n  }\r\n\r\n  // countdown = () => {\r\n  //   console.log(`countdown: ${this.state.countdown}`);\r\n  //   if (this.state.countdown > 0) {\r\n  //     this.setState({ countdown: this.state.countdown - 1 }, () => {\r\n  //       setTimeout(this.countdown, 1000);\r\n  //     });\r\n  //   } else {\r\n  //     this.setState({ countdown: 0, refreshing: true }, this.refresh);\r\n  //   }\r\n  // }\r\n\r\n  refresh = () => {\r\n    if (this.props.selectedPlayer || this.props.mode === \"DM\") {\r\n      const refreshIndex = (this.props.selectedPlayer ? this.props.selectedPlayer.refreshIndex : 4);\r\n      const currentIndex = this.getCurrentRefreshIndex();\r\n      if (refreshIndex === currentIndex) {\r\n        if (this.props.mode === \"DM\") {\r\n          this.api.getPlayers(true).then((res: any) => {\r\n            const campaigns = this.props.campaigns;\r\n            const players: Player[] = [];\r\n            res.players.forEach((p: any) => {\r\n              const campaignFinder = campaigns.filter(c => c._id === p.campaignID);\r\n              let campaign: (Campaign | null) = null;\r\n              if (campaignFinder.length === 1) {\r\n                campaign = campaignFinder[0];\r\n              }\r\n              players.push(new Player(p._id, p.email, p.username, p.password, campaign, new Date(Date.parse(p.lastPing)), p.refreshIndex));\r\n            });\r\n            this.props.setPlayers(players);\r\n            this.refreshCampaign();\r\n          });\r\n        } else {\r\n          this.refreshCampaign();\r\n        }\r\n      } else {\r\n        setTimeout(this.refresh, this.state.countdown * 1000);\r\n      }\r\n    }\r\n  }\r\n\r\n  refreshCampaign = () => {\r\n    const playerID = (this.props.selectedPlayer ? this.props.selectedPlayer._id : -1);\r\n    this.api.getCampaign(this.props.selectedCampaign._id, this.props.selectedCampaign.lastUpdate, playerID).then((c: any) => {\r\n      if (c.noChanges) {\r\n        let toggleIt = false;\r\n        if (this.props.selectedPlayer !== null && \r\n          ((this.props.selectedCampaign.turnPlayerID === this.props.selectedPlayer._id && !this.state.singleSelect) ||\r\n          (this.props.selectedCampaign.turnPlayerID !== this.props.selectedPlayer._id && this.state.singleSelect))\r\n          ) {\r\n          toggleIt = true;\r\n        }\r\n        this.setState({ \r\n          refreshing: false, \r\n          // countdown: 4, \r\n          lastRefresh: new Date() \r\n        }, () => {\r\n          if (toggleIt) {\r\n            this.toggleSingleSelect();\r\n          }\r\n          setTimeout(this.refresh, this.state.countdown * 4 * 1000);\r\n        });\r\n      } else {\r\n        const campaign = {...this.props.selectedCampaign};\r\n        campaign.lastUpdate = c.lastUpdate;\r\n        if (c.selectedPlayMapID !== this.props.selectedPlayMap._id) {\r\n          if (this.props.mode !== \"DM\") {\r\n            campaign.selectedPlayMapID = c.selectedPlayMapID;\r\n            this.props.updateCampaign(campaign);\r\n            const playMapFinder = this.props.playMaps.filter(m => m._id === campaign.selectedPlayMapID);\r\n            if (playMapFinder.length === 1) {\r\n              this.props.selectPlayMap(playMapFinder[0]);\r\n            }\r\n          }\r\n          this.setState({ \r\n            lastRefresh: new Date() \r\n          }, () => {\r\n            setTimeout(this.refresh, this.state.countdown * 1000);\r\n          });\r\n        } else {\r\n          let toggleIt = false;\r\n          if (c.turnPlayerID !== campaign.turnPlayerID) {\r\n            campaign.turnPlayerID = c.turnPlayerID;\r\n          }\r\n          this.props.updateCampaign(campaign);\r\n          if (this.props.selectedPlayer !== null && \r\n            ((campaign.turnPlayerID === this.props.selectedPlayer._id && !this.state.singleSelect) ||\r\n            (campaign.turnPlayerID !== this.props.selectedPlayer._id && this.state.singleSelect))\r\n            ) {\r\n            toggleIt = true;\r\n          }\r\n          // If it's the DM then only need to update things that belong to the player whose turn it is.  If no one then can skip it.\r\n          if (this.props.mode !== \"DM\" || campaign.turnPlayerID) {\r\n            this.api.getPlayMap(this.props.selectedPlayMap._id).then((m: any) => {\r\n              const mapFinder: Map[] = this.props.maps.filter(m2 => m2._id === m.mapID);\r\n              if (mapFinder.length === 1)\r\n              {\r\n                const map: Map = mapFinder[0];\r\n                \r\n                let playTokens: PlayToken[] = [];\r\n                if (this.props.mode === \"DM\") {\r\n                  playTokens = this.props.selectedPlayMap.tokens;\r\n                  m.playTokens.filter((t: any) => t.ownerID === campaign.turnPlayerID).forEach((t: any) => {\r\n                    const tokenFinder = playTokens.filter(t2 => t.id === t2.id);\r\n                    if (tokenFinder.length === 1) {\r\n                      const playToken = tokenFinder[0];\r\n                      playToken.x = t.x;\r\n                      playToken.y = t.y;\r\n                    }\r\n                  }); \r\n                } else if (this.props.selectedPlayer && \r\n                  this.props.selectedPlayer._id === campaign.turnPlayerID) {\r\n                  playTokens = this.props.selectedPlayMap.tokens;\r\n                  m.playTokens.forEach((t: any) => {\r\n                    const playTokenFinder = playTokens.filter(t2 => t.id === t2.id);\r\n                    if (playTokenFinder.length === 1) {\r\n                      const playToken = playTokenFinder[0];\r\n                      const playerFinder: Player[] = this.props.players.filter(p => p._id === t.ownerID);\r\n                      let owner: (Player | null) = null;\r\n                      if (playerFinder.length === 1) {\r\n                        owner = playerFinder[0];\r\n                      }\r\n                      const tokenFinder: Token[] = this.props.tokens.filter(t2 => t2._id === t.tokenID);\r\n                      let token: (Token | null) = null;\r\n                      if (tokenFinder.length === 1) {\r\n                        token = tokenFinder[0];\r\n                      }\r\n                      playToken.name = t.name;\r\n                      playToken.token = token;\r\n                      playToken.size = t.size;\r\n                      playToken.stealth = t.stealth;\r\n                      playToken.owner = owner;\r\n                      if (owner === null || (this.props.selectedPlayer && owner._id !== this.props.selectedPlayer._id)) {\r\n                        // It's not theirs, so they don't have control of x and y\r\n                        playToken.x = t.x;\r\n                        playToken.y = t.y;\r\n                      } else {\r\n                        // It's theirs, so they have control of x and y\r\n                      }\r\n                    } else if (playTokenFinder.length === 0) {\r\n                      // It's a new token, so do the normal stuff\r\n                      const tokenFinder: Token[] = this.props.tokens.filter(t2 => t2._id === t.tokenID);\r\n                      let token: (Token | null) = null;\r\n                      if (tokenFinder.length === 1) {\r\n                        token = tokenFinder[0];\r\n                      }\r\n                      const playerFinder: Player[] = this.props.players.filter(p => p._id === t.ownerID);\r\n                      let owner: (Player | null) = null;\r\n                      if (playerFinder.length === 1) {\r\n                        owner = playerFinder[0];\r\n                      }\r\n                      playTokens.push(new PlayToken(t.id, t.name, token, t.x, t.y, t.size, t.stealth, t.moving, owner));\r\n                    }\r\n                  }); \r\n                } else {\r\n                  m.playTokens.forEach((t: any) => {\r\n                    const tokenFinder: Token[] = this.props.tokens.filter(t2 => t2._id === t.tokenID);\r\n                    let token: (Token | null) = null;\r\n                    if (tokenFinder.length === 1) {\r\n                      token = tokenFinder[0];\r\n                    }\r\n                    const playerFinder: Player[] = this.props.players.filter(p => p._id === t.ownerID);\r\n                    let owner: (Player | null) = null;\r\n                    if (playerFinder.length === 1) {\r\n                      owner = playerFinder[0];\r\n                    }\r\n                    playTokens.push(new PlayToken(t.id, t.name, token, t.x, t.y, t.size, t.stealth, t.moving, owner));\r\n                  });  \r\n                }\r\n                let lightMasks: Mask[] = [];\r\n                let darkMasks: Mask[] = [];\r\n                let fogMasks: Mask[] = [];\r\n                let zoom = 0;\r\n                let dx = 0;\r\n                let dy = 0;\r\n                if (this.props.mode === \"DM\") {\r\n                  // The DM is the one who changes these, so we don't want to update these for him.\r\n                  lightMasks = this.props.selectedPlayMap.lightMasks;\r\n                  darkMasks = this.props.selectedPlayMap.darkMasks;\r\n                  fogMasks = this.props.selectedPlayMap.fogMasks;\r\n                  zoom = this.props.selectedPlayMap.zoom;\r\n                  dx = this.props.selectedPlayMap.dx;\r\n                  dy = this.props.selectedPlayMap.dy;\r\n                } else {\r\n                  m.lightMasks.forEach((l: any) => {\r\n                    const points: MaskPoint[] = [];\r\n                    l.points.forEach((p: any) => {\r\n                      points.push(new MaskPoint(p.id, l.id, \"light\", p.x, p.y));\r\n                    });\r\n                    lightMasks.push(new Mask(l.id, \"light\", points));\r\n                  });\r\n                  m.darkMasks.forEach((l: any) => {\r\n                    const points: MaskPoint[] = [];\r\n                    l.points.forEach((p: any) => {\r\n                      points.push(new MaskPoint(p.id, l.id, \"dark\", p.x, p.y));\r\n                    });\r\n                    darkMasks.push(new Mask(l.id, \"dark\", points));\r\n                  });\r\n                  m.fogMasks.forEach((l: any) => {\r\n                    const points: MaskPoint[] = [];\r\n                    l.points.forEach((p: any) => {\r\n                      points.push(new MaskPoint(p.id, l.id, \"fog\", p.x, p.y));\r\n                    });\r\n                    fogMasks.push(new Mask(l.id, \"fog\", points));\r\n                  });\r\n                  zoom = m.zoom;\r\n                  dx = m.dx;\r\n                  dy = m.dy;\r\n                }\r\n                const playMap = new PlayMap(m._id, m.campaignID, m.name, map, playTokens, m.movingToken, lightMasks, darkMasks, fogMasks, zoom, dx, dy);\r\n                this.props.updatePlayMap(playMap);\r\n                this.setState({ \r\n                  refreshing: false, \r\n                  // countdown: 4, \r\n                  lastRefresh: new Date() \r\n                }, () => {\r\n                  if (toggleIt) {\r\n                    this.toggleSingleSelect();\r\n                  }\r\n                  setTimeout(this.refresh, this.state.countdown * 1000);\r\n                });\r\n              } else {\r\n                console.log(\"Something went wrong\");\r\n              }\r\n            });\r\n          } else {\r\n            this.setState({ \r\n              refreshing: false, \r\n              // countdown: 4, \r\n              lastRefresh: new Date() \r\n            }, () => {\r\n              if (toggleIt) {\r\n                this.toggleSingleSelect();\r\n              }\r\n              setTimeout(this.refresh, this.state.countdown * 1000);\r\n            });\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getCurrentRefreshIndex = () => {\r\n    const refreshTime = new Date();\r\n    const secs = refreshTime.getSeconds();\r\n    return Math.floor((secs % 12) / 2);\r\n  }\r\n\r\n  zoomIn = () => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      newPlayMap.zoom += 0.2;\r\n      // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      // });\r\n    }\r\n  };\r\n\r\n  zoomOut = () => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      newPlayMap.zoom -= 0.2;\r\n      // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      // });\r\n    }\r\n  };\r\n\r\n  clearSelectAndHover = () => {\r\n    if (this.state.singleSelect) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      newPlayMap.tokens.filter(t => t.moving).forEach(t => {\r\n        t.moving = false;\r\n      });\r\n      newPlayMap.movingToken = null;\r\n      this.props.updatePlayMap(newPlayMap);\r\n    }\r\n\r\n    this.setState({\r\n      mapMode: (this.state.singleSelect ? \"select\" : this.state.mapMode),\r\n      selected: [],\r\n      // hovered: null\r\n    });\r\n  };\r\n\r\n  toggleSingleSelect = () => {\r\n    const newPlayMap = this.props.selectedPlayMap;\r\n    newPlayMap.tokens.filter(t => t.moving).forEach(t => {\r\n      t.moving = false;\r\n    });\r\n    newPlayMap.movingToken = null;\r\n    this.props.updatePlayMap(newPlayMap);\r\n\r\n    this.setState({\r\n      singleSelect: !this.state.singleSelect,\r\n      selected: [],\r\n      mapMode: (!this.state.singleSelect || this.state.shiftHeld ? \"select\" : \"pan\")\r\n    });\r\n  }\r\n\r\n  addNewToken = () => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      if (this.state.selectedToken) {\r\n        let token: Token | null = this.state.selectedToken;\r\n        if (token._id === \"none\") {\r\n          token = null;\r\n        }\r\n        for (let i = 0; i < this.state.tokenCount; i++) {\r\n          newPlayMap.tokens.push(new PlayToken(\r\n            newPlayMap.tokens.length,\r\n            this.state.tokenName.trim() + (i > 0 ? ` ${i+1}` : \"\"),\r\n            token,\r\n            i - Math.round(this.state.tokenCount / 2),\r\n            0,\r\n            this.state.tokenSize, \r\n            false,\r\n            false,\r\n            null)\r\n          );\r\n        }\r\n        // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n        // });\r\n      } else if (this.state.selectedFavoriteToken) {\r\n        const token = this.state.selectedFavoriteToken;\r\n        newPlayMap.tokens.push(new PlayToken(\r\n          newPlayMap.tokens.length,\r\n          this.state.tokenName.trim(),\r\n          token.token,\r\n          0,\r\n          0,\r\n          this.state.tokenSize, \r\n          false,\r\n          false,\r\n          null)\r\n        );\r\n        // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n          this.props.updatePlayMap(newPlayMap);\r\n          this.setState({\r\n            lastRefresh: new Date()\r\n          });\r\n        // });\r\n      }\r\n    }\r\n  };\r\n\r\n  deletePlayToken = (token: PlayToken) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      newPlayMap.tokens = newPlayMap.tokens.filter(t => t.id !== token.id);\r\n      newPlayMap.tokens.filter(t => t.id > token.id).forEach(t => {\r\n        t.id--;\r\n      });\r\n      this.props.updatePlayMap(newPlayMap);\r\n      this.setState({\r\n        lastRefresh: new Date()\r\n      });\r\n    }\r\n  }\r\n\r\n  adjustPlayToken = (t: PlayToken, name: string, size: number, x: number, y: number, stealth: boolean, owner: (Player | null)) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      const theToken: PlayToken = t;\r\n      const selectedTokens = newPlayMap.tokens.filter(t => t.id === theToken.id);\r\n      if (selectedTokens.length === 1) {\r\n        const selectedToken = selectedTokens[0];\r\n        selectedToken.name = name;\r\n        selectedToken.size = size;\r\n        selectedToken.x = x;\r\n        selectedToken.y = y;\r\n        selectedToken.stealth = stealth;\r\n        selectedToken.owner = owner;\r\n\r\n        // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date(),\r\n          // hovered: selectedToken\r\n        });\r\n        // });\r\n      }\r\n    }\r\n  }\r\n\r\n  addNewFavorite = () => {\r\n    if (this.state.selectedToken) {\r\n      const token = this.state.selectedToken;\r\n\r\n      const obj = {\r\n        campaignID: this.props.selectedCampaign._id,\r\n        name: this.state.tokenName,\r\n        tokenID: token._id,\r\n        size: this.state.tokenSize\r\n      };\r\n\r\n      this.api.createFavoriteToken(obj).then((res: any) => {\r\n        const newFavorite = new FavoriteToken(res.favoriteTokenID, this.props.selectedCampaign._id, this.state.tokenName, token, this.state.tokenSize);\r\n        this.props.addFavoriteToken(newFavorite);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      });\r\n\r\n      // newPlayMap.tokens.push(new PlayToken(\r\n      //   newPlayMap.tokens.length,\r\n      //   this.state.tokenName.trim(),\r\n      //   token,\r\n      //   0,\r\n      //   0,\r\n      //   this.state.tokenSize, t.stealth)\r\n      // );\r\n      // // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n      //   this.props.updatePlayMap(newPlayMap);\r\n      //   this.setState({\r\n      //     lastRefresh: new Date()\r\n      //   });\r\n      // // });\r\n    }\r\n  };\r\n\r\n  deleteFavorite = (token: PlayToken) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      newPlayMap.tokens = newPlayMap.tokens.filter(t => t.id !== token.id);\r\n      newPlayMap.tokens.filter(t => t.id > token.id).forEach(t => {\r\n        t.id--;\r\n      });\r\n      this.props.updatePlayMap(newPlayMap);\r\n      this.setState({\r\n        lastRefresh: new Date()\r\n      });\r\n    }\r\n  }\r\n\r\n  adjustFavorite = (t: FavoriteToken, name: string, size: number) => {\r\n    const theToken: FavoriteToken = t;\r\n    const tokenFinder = this.props.favoriteTokens.filter(t => t._id === theToken._id);\r\n    if (tokenFinder.length === 1) {\r\n      const token = tokenFinder[0];\r\n      token.name = name;\r\n      token.size = size;\r\n\r\n      this.api.updateFavoriteToken(token.toDBObj()).then(() => {\r\n        this.props.updateFavoriteToken(token);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  onPan = (dx: number, dy: number) => {\r\n    // I need to make this respond to some types of held keys with clicks\r\n    // I'm thinking I'm going to make it allow for multiSelects\r\n    if (this.props.selectedPlayMap && this.props.mode === \"DM\") {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      if (this.state.deselecting) {\r\n        this.setState({ deselecting: false });\r\n      } else {\r\n        if (!this.state.shiftHeld && !this.state.ctrlHeld && !this.state.singleSelect) {\r\n          // it's an actual pan, so pan it.\r\n          newPlayMap.dx = dx;\r\n          newPlayMap.dy = dy;\r\n          // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n            this.props.updatePlayMap(newPlayMap);\r\n            this.setState({\r\n              lastRefresh: new Date()\r\n            });\r\n          // });\r\n        } else if (this.state.hovered !== null && this.state.selected.includes(this.state.hovered)) {\r\n          // They're deselecting.\r\n          // If it goes here, there's a problem\r\n          // const newSelected = this.state.selected.filter(s => s !== this.state.hovered);\r\n          // if (newSelected.length === 0) {\r\n          //   this.setState({\r\n          //     selected: newSelected, \r\n          //     mapMode: \"pan\"\r\n          //   });\r\n          // } else {\r\n          //   this.setState({\r\n          //     selected: newSelected\r\n          //   });\r\n          // }\r\n        } else if (this.state.hovered !== null) {\r\n          // They're selecting\r\n          // I'm moving this functionality because it will now go to onClick if they're holding shift\r\n          // if (this.state.selected.length === 0 || this.state.shiftHeld) {\r\n          //   const newSelected = this.state.selected;\r\n          //   newSelected.push(this.state.hovered);\r\n          //   this.setState({\r\n          //     selected: newSelected,\r\n          //     mapMode: \"move\"\r\n          //   });\r\n          // }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  onClick = (x: number, y: number) => {\r\n    // I need to make this respond to some types of held keys plus clicks\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap: PlayMap = this.props.selectedPlayMap;\r\n      if (this.state.singleSelect) {\r\n        if (this.state.hovered === null) {\r\n          if (this.state.selected.length === 1) {\r\n            // Moving\r\n            // Move the token to the new location.\r\n            this.state.selected.forEach((s: PlayToken | MaskPoint) => {\r\n              // Need to figure out what the selected thing is and move it to the location\r\n              if (s instanceof PlayToken) {\r\n                const theToken: PlayToken = s;\r\n                const selectedTokens = newPlayMap.tokens.filter(t => t.id === theToken.id);\r\n                if (selectedTokens.length === 1) {\r\n                  const selectedToken = selectedTokens[0];\r\n                  // This translates the clicked coordinates into the proper format\r\n                  selectedToken.x = Math.round(((x - (window.innerWidth / 2) - newPlayMap.dx + 25) / newPlayMap.zoom)/50);\r\n                  selectedToken.y = Math.round(((y - (window.innerHeight / 2) - newPlayMap.dy - 37.5) / newPlayMap.zoom)/50);\r\n\r\n                  if (this.props.mode === \"DM\") {\r\n                    this.props.updatePlayMap(newPlayMap);\r\n                    this.setState({\r\n                      lastRefresh: new Date(),\r\n                      hovered: selectedToken\r\n                    });\r\n                  } else {\r\n                    this.api.updatePlayMap(newPlayMap.toDBObj()).then((res: any) => {\r\n                      const newCampaign = this.props.selectedCampaign;\r\n                      newCampaign.lastUpdate = res.lastUpdate;\r\n                      this.props.updateCampaign(newCampaign);\r\n                      this.props.updatePlayMap(newPlayMap);\r\n                      this.setState({\r\n                        lastRefresh: new Date(),\r\n                        hovered: selectedToken\r\n                      });\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }\r\n        else if (this.state.selected.length === 0 && this.state.hovered instanceof PlayToken) {\r\n          // They're selecting.  \r\n          // This is where I will put the part for locking it by player when I get to that point.\r\n          const newSelected = this.state.selected;\r\n          newSelected.push(this.state.hovered);\r\n          const theToken: PlayToken = this.state.hovered;\r\n          const newPlayMap = this.props.selectedPlayMap;\r\n          const selectedTokens = newPlayMap.tokens.filter(t => t.id === theToken.id);\r\n          if (selectedTokens.length === 1) {\r\n            const selectedToken = selectedTokens[0];\r\n            selectedToken.moving = true;\r\n            newPlayMap.movingToken = new PlayToken(selectedToken.id, selectedToken.name, selectedToken.token, selectedToken.x, selectedToken.y, selectedToken.size, selectedToken.stealth, true, selectedToken.owner);\r\n            this.props.updatePlayMap(newPlayMap);\r\n          }\r\n              \r\n          this.setState({\r\n            selected: newSelected,\r\n            mapMode: \"move\"\r\n          });\r\n        }\r\n        else if (this.state.hovered instanceof PlayToken && this.state.selected.includes(this.state.hovered)) { \r\n          // Deselecting\r\n          const newPlayMap = this.props.selectedPlayMap;\r\n          newPlayMap.tokens.filter(t => t.moving).forEach(t => {\r\n            t.moving = false;\r\n          });\r\n          newPlayMap.movingToken = null;\r\n          this.props.updatePlayMap(newPlayMap);\r\n\r\n          const newSelected = this.state.selected.filter(s => s !== this.state.hovered);\r\n          this.setState({ \r\n            selected: newSelected, \r\n            mapMode: \"select\" \r\n          });\r\n        }\r\n      } else if (this.state.mapMode === \"select\") {\r\n        if (this.state.hovered === null) {\r\n          // do nothing\r\n        }\r\n        else if (!this.state.selected.includes(this.state.hovered)) {\r\n          // They're selecting\r\n          if (this.state.selected.length === 0 || this.state.shiftHeld) {\r\n            const newSelected = this.state.selected;\r\n            newSelected.push(this.state.hovered);\r\n            this.setState({\r\n              selected: newSelected,\r\n              // mapMode: \"move\"\r\n            });\r\n          }\r\n        } else {\r\n          // They're deselecting.\r\n          const newSelected = this.state.selected.filter(s => s !== this.state.hovered);\r\n          this.setState({ selected: newSelected });\r\n          // I shouldn't need the deselecting flag anymore \r\n          // because I'm only changing mapMode on shift and ctrl changes\r\n          // if (newSelected.length === 0) {\r\n          //   this.setState({\r\n          //     selected: newSelected, \r\n          //     mapMode: \"pan\",\r\n          //     deselecting: true\r\n          //   });\r\n          // } else {\r\n          //   this.setState({\r\n          //     selected: newSelected,\r\n          //     deselecting: true\r\n          //   });\r\n          // }\r\n        }\r\n      } else if (this.state.mapMode === \"move\") {\r\n        // They're moving stuff.  Only allow it if there's only one selected.\r\n        if (this.state.selected.length === 1) {\r\n          this.state.selected.forEach((s: PlayToken | MaskPoint) => {\r\n            // Need to figure out what the selected thing is and move it to the location\r\n            if (s instanceof PlayToken) {\r\n              const theToken: PlayToken = s;\r\n              const selectedTokens = newPlayMap.tokens.filter(t => t.id === theToken.id);\r\n              if (selectedTokens.length === 1) {\r\n                const selectedToken = selectedTokens[0];\r\n                // This translates the clicked coordinates into the proper format\r\n                selectedToken.x = Math.round(((x - (window.innerWidth / 2) - newPlayMap.dx + 25) / newPlayMap.zoom)/50);\r\n                selectedToken.y = Math.round(((y - (window.innerHeight / 2) - newPlayMap.dy - 37.5) / newPlayMap.zoom)/50);\r\n\r\n                // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n                  this.props.updatePlayMap(newPlayMap);\r\n                  this.setState({\r\n                    lastRefresh: new Date(),\r\n                    hovered: selectedToken\r\n                  });\r\n                // });\r\n              }\r\n            } else if (s instanceof MaskPoint) {\r\n              const thePoint: MaskPoint = s;\r\n              const masks = s.maskType === \"light\" ? this.props.selectedPlayMap.lightMasks : s.maskType === \"dark\" ? this.props.selectedPlayMap.darkMasks : this.props.selectedPlayMap.fogMasks;\r\n              const selectedMasks = masks.filter(m => m.id === thePoint.maskID);\r\n              if (selectedMasks.length === 1) {\r\n                const selectedMask = selectedMasks[0];\r\n                const selectedPoints = selectedMask.points.filter(p => p.id === thePoint.id);\r\n                if (selectedPoints.length === 1) {\r\n                  const selectedPoint = selectedPoints[0];\r\n                  // This translates the clicked coordinates into the proper format\r\n                  // selectedPoint.x = Math.round(((x - (window.innerWidth / 2) - newPlayMap.dx + 25) / newPlayMap.zoom)/50);\r\n                  // selectedPoint.y = Math.round(((y - (window.innerHeight / 2) - newPlayMap.dy - 37.5) / newPlayMap.zoom)/50);\r\n                  selectedPoint.x = ((x - (window.innerWidth / 2) - newPlayMap.dx + 50) / newPlayMap.zoom)/50;\r\n                  selectedPoint.y = ((y - (window.innerHeight / 2) - newPlayMap.dy) / newPlayMap.zoom)/50;\r\n\r\n                  // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n                    this.props.updatePlayMap(newPlayMap);\r\n                    this.setState({\r\n                      lastRefresh: new Date(),\r\n                      hovered: selectedPoint\r\n                    });\r\n                  // });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  onMouseMove = (x: number, y: number) => {\r\n    // I need to make this respond to some types of held keys plus clicks\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap: PlayMap = this.props.selectedPlayMap;\r\n      if (this.state.singleSelect && \r\n        this.state.hovered === null && \r\n        newPlayMap.movingToken) {\r\n        // console.log(`(${x}, ${y})`);\r\n        // Moving\r\n        // Move the token to the new location.\r\n        const movingToken = newPlayMap.movingToken;\r\n        // This translates the clicked coordinates into the proper format\r\n        movingToken.x = Math.round(((x - (window.innerWidth / 2) - newPlayMap.dx + 25) / newPlayMap.zoom)/50);\r\n        movingToken.y = Math.round(((y - (window.innerHeight / 2) - newPlayMap.dy - 37.5) / newPlayMap.zoom)/50);\r\n\r\n        // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n        // });\r\n      }\r\n    }\r\n  };\r\n\r\n  renderFavoriteTokenList = (edit: boolean) => {\r\n    if (edit) {\r\n      return (\r\n        <Grid item container spacing={1} direction=\"row\">\r\n        { this.props.favoriteTokens.filter(t => t.campaignID === this.props.selectedCampaign._id).map((t, key) => {\r\n          return (\r\n            <Grid item key={key} container spacing={1} direction=\"row\">\r\n              <Grid item xs={6}>\r\n                <FormControl variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor={`text_field_favorite_token_name_${key}`}>Name</InputLabel>\r\n                    <OutlinedInput\r\n                      id={`text_field_favorite_token_name_${key}`}\r\n                      name={`text_field_favorite_token_name_${key}`}\r\n                      type=\"text\"\r\n                      autoComplete=\"Off\"\r\n                      value={t.name}\r\n                      onChange={e => {\r\n                        this.adjustFavorite(t, e.target.value, t.size);\r\n                        // this.setState({ tokenName: e.target.value });\r\n                      }}\r\n                      labelWidth={40}\r\n                      fullWidth\r\n                    />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <FormControl variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor={`text_field_favorite_token_size_${key}`}>Size</InputLabel>\r\n                    <OutlinedInput\r\n                      id={`text_field_favorite_token_size_${key}`}\r\n                      name={`text_field_favorite_token_size_${key}`}\r\n                      type=\"number\"\r\n                      autoComplete=\"Off\"\r\n                      value={t.size}\r\n                      onChange={e => {\r\n                        this.adjustFavorite(t, t.name, parseFloat(e.target.value));\r\n                        // this.setState({ tokenSize: parseFloat(e.target.value) });\r\n                      }}\r\n                      labelWidth={40}\r\n                      fullWidth\r\n                    />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <img src={t.token.file} style={{ width: 140 }} alt={t.name} />\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Button onClick={() => {\r\n                  // this.deleteFavoriteToken(t);\r\n                }}>\r\n                  Delete\r\n                </Button>\r\n              </Grid>\r\n            </Grid>  \r\n          );\r\n        })}\r\n        </Grid>\r\n      );\r\n    } else {\r\n      return (\r\n        <Grid item container spacing={1} direction=\"row\">\r\n        { this.props.favoriteTokens.filter(t => t.campaignID === this.props.selectedCampaign._id).map((token, key) => {\r\n          return (\r\n            <Grid item key={key} xs={6} \r\n              style={{ cursor: \"pointer\", backgroundColor: (this.state.selectedFavoriteToken !== null && token._id === this.state.selectedFavoriteToken._id ? \"blue\" : \"transparent\") }}\r\n              onClick={() => {\r\n                this.setState({\r\n                  selectedFavoriteToken: token,\r\n                  selectedToken: null,\r\n                  tokenName: token.name,\r\n                  tokenSize: token.size\r\n                });\r\n              }}>\r\n              <img src={token.token.file} style={{ width: 140 }} alt={token.name} />\r\n              {token.name}\r\n            </Grid>\r\n          );\r\n        })}\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderTokenList = () => {\r\n    return (\r\n      <Grid item container spacing={1} direction=\"row\">\r\n      { this.props.tokens.filter(t => this.state.selectedCategory === \"all\" || this.state.selectedCategory === t.category).map((token, key) => {\r\n        return (\r\n          <Grid item key={key} xs={6} \r\n            style={{ cursor: \"pointer\", backgroundColor: (this.state.selectedToken !== null && token._id === this.state.selectedToken._id ? \"blue\" : \"transparent\") }}\r\n            onClick={() => {\r\n              this.setState({\r\n                selectedToken: token,\r\n                selectedFavoriteToken: null\r\n              });\r\n            }}>\r\n            <img src={token.file} style={{ width: 140 }} alt={token.file} />\r\n          </Grid>\r\n        );\r\n      })}\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  renderPlayTokenList = () => {\r\n    return (\r\n      <Grid item container spacing={1} direction=\"column\">\r\n      { this.props.selectedPlayMap.tokens.map((t, key) => {\r\n        return (\r\n          <Grid item key={key} container spacing={1} direction=\"row\">\r\n            <Grid item xs={3}>\r\n              <FormControl variant=\"outlined\" fullWidth>\r\n                <InputLabel htmlFor={`text_field_play_token_name_${key}`}>Name</InputLabel>\r\n                  <OutlinedInput\r\n                    id={`text_field_play_token_name_${key}`}\r\n                    name={`text_field_play_token_name_${key}`}\r\n                    type=\"text\"\r\n                    autoComplete=\"Off\"\r\n                    value={t.name}\r\n                    onChange={e => {\r\n                      this.adjustPlayToken(t, e.target.value, t.size, t.x, t.y, t.stealth, t.owner);\r\n                      // this.setState({ tokenName: e.target.value });\r\n                    }}\r\n                    labelWidth={40}\r\n                    fullWidth\r\n                  />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <FormControl variant=\"outlined\" fullWidth>\r\n                <InputLabel htmlFor={`text_field_play_token_size_${key}`}>Size</InputLabel>\r\n                  <OutlinedInput\r\n                    id={`text_field_play_token_size_${key}`}\r\n                    name={`text_field_play_token_size_${key}`}\r\n                    type=\"number\"\r\n                    autoComplete=\"Off\"\r\n                    value={t.size}\r\n                    onChange={e => {\r\n                      this.adjustPlayToken(t, t.name, parseFloat(e.target.value), t.x, t.y, t.stealth, t.owner);\r\n                      // this.setState({ tokenSize: parseFloat(e.target.value) });\r\n                    }}\r\n                    labelWidth={40}\r\n                    fullWidth\r\n                  />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <FormControl variant=\"outlined\" fullWidth>\r\n                <InputLabel htmlFor={`text_field_play_token_x_${key}`}>X</InputLabel>\r\n                  <OutlinedInput\r\n                    id={`text_field_play_token_x_${key}`}\r\n                    name={`text_field_play_token_x_${key}`}\r\n                    type=\"number\"\r\n                    autoComplete=\"Off\"\r\n                    value={t.x}\r\n                    onChange={e => {\r\n                      this.adjustPlayToken(t, t.name, t.size, parseInt(e.target.value), t.y, t.stealth, t.owner);\r\n                      // this.moveLMP(p, 'y', e.target.value);\r\n                      // this.setState({ tokenSize: parseInt(e.target.value) });\r\n                    }}\r\n                    labelWidth={40}\r\n                    fullWidth\r\n                  />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <FormControl variant=\"outlined\" fullWidth>\r\n                <InputLabel htmlFor={`text_field_play_token_y_${key}`}>Y</InputLabel>\r\n                  <OutlinedInput\r\n                    id={`text_field_play_token_y_${key}`}\r\n                    name={`text_field_play_token_y_${key}`}\r\n                    type=\"number\"\r\n                    autoComplete=\"Off\"\r\n                    value={t.y}\r\n                    onChange={e => {\r\n                      this.adjustPlayToken(t, t.name, t.size, t.x, parseInt(e.target.value), t.stealth, t.owner);\r\n                      // this.moveLMP(p, 'y', e.target.value);\r\n                      // this.setState({ tokenSize: parseInt(e.target.value) });\r\n                    }}\r\n                    labelWidth={40}\r\n                    fullWidth\r\n                  />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl variant=\"outlined\">\r\n                <InputLabel id=\"select_play_token_owner_label\">Owner</InputLabel>\r\n                <Select\r\n                  labelId=\"select_play_token_owner_label\"\r\n                  id=\"select_play_token_owner\"\r\n                  value={t.owner ? t.owner._id : \"null\"}\r\n                  onChange={e => {\r\n                    let owner: (Player | null) = null;\r\n                    if (e.target.value !== \"null\") {\r\n                      const playerFinder = this.props.players.filter(p => p._id === e.target.value);\r\n                      if (playerFinder.length === 1) {\r\n                        owner = playerFinder[0];\r\n                      }\r\n                    } \r\n                    this.adjustPlayToken(t, t.name, t.size, t.x, t.y, t.stealth, owner);\r\n                  }}\r\n                  label=\"Owner\"\r\n                >\r\n                  <MenuItem value={\"null\"}>\r\n                    <em>None</em>\r\n                  </MenuItem>\r\n                  { this.props.players.map((p, pKey) => {\r\n                    return (\r\n                      <MenuItem key={pKey} value={p._id}>{p.username}</MenuItem>\r\n                    );\r\n                  })}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            { t.token !== null &&\r\n              <Grid item xs={6}>\r\n                <img src={t.token.file} style={{ width: 140 }} alt={t.name} />\r\n              </Grid>\r\n            }\r\n            <Grid item xs={3}>\r\n              <Button onClick={() => {\r\n                this.adjustPlayToken(t, t.name, t.size, t.x, t.y, !t.stealth, t.owner);\r\n              }}>\r\n                { t.stealth ? \"Stealthy\" : \"Not\"}\r\n              </Button>\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <Button onClick={() => {\r\n                this.deletePlayToken(t);\r\n              }}>\r\n                Delete\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        );\r\n      })}\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  moveLMP = (lmp: MaskPoint, xy: string, value: string) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      const masks = lmp.maskType === \"light\" ? newPlayMap.lightMasks : lmp.maskType === \"dark\" ? newPlayMap.darkMasks : newPlayMap.fogMasks;\r\n      const maskFinder = masks.filter(m => m.id === lmp.maskID);\r\n      if (maskFinder.length === 1) {\r\n        const mask = maskFinder[0];\r\n        const pointFinder = mask.points.filter(p => p.id === lmp.id);\r\n        if (pointFinder.length === 1) {\r\n          const point = pointFinder[0];\r\n          if (xy === 'x') {\r\n            point.x = parseFloat(value);\r\n          } else {\r\n            point.y = parseFloat(value);\r\n          }\r\n        }\r\n      }\r\n      // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      // });\r\n    }\r\n  }\r\n\r\n  addNewPoint = (mask: Mask) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      const masks = mask.maskType === \"light\" ? newPlayMap.lightMasks : mask.maskType === \"dark\" ? newPlayMap.darkMasks : newPlayMap.fogMasks;\r\n      const maskFinder = masks.filter(m => m.id === mask.id);\r\n      if (maskFinder.length === 1) {\r\n        const theMask = maskFinder[0];\r\n        const firstPoint = theMask.points[0];\r\n        theMask.points.push(new MaskPoint(theMask.points.length, theMask.id, theMask.maskType, firstPoint.x + 1, firstPoint.y + 1));\r\n\r\n        // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n          this.props.updatePlayMap(newPlayMap);\r\n          this.setState({\r\n            lastRefresh: new Date()\r\n          });\r\n        // });\r\n      }\r\n    }\r\n  }\r\n\r\n  deletePoint = (point: MaskPoint) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      const masks = point.maskType === \"light\" ? newPlayMap.lightMasks : point.maskType === \"dark\" ? newPlayMap.darkMasks : newPlayMap.fogMasks;\r\n      const maskFinder = masks.filter(m => m.id === point.maskID);\r\n      if (maskFinder.length === 1) {\r\n        const mask = maskFinder[0];\r\n        mask.points = mask.points.filter(p => p.id !== point.id);\r\n        mask.points.filter(p => p.id > point.id).forEach(p => {\r\n          p.id--;\r\n        });\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteMask = (mask: Mask) => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      let masks = mask.maskType === \"light\" ? newPlayMap.lightMasks : mask.maskType === \"dark\" ? newPlayMap.darkMasks : newPlayMap.fogMasks;\r\n      masks = masks.filter(m => m.id !== mask.id);\r\n      masks.filter(m => m.id > mask.id).forEach(m => {\r\n        m.id--;\r\n      });\r\n      if (mask.maskType === \"light\") {\r\n        newPlayMap.lightMasks = masks;\r\n      } else if (mask.maskType === \"dark\") {\r\n        newPlayMap.darkMasks = masks;\r\n      } else {\r\n        newPlayMap.fogMasks = masks;\r\n      }\r\n      this.props.updatePlayMap(newPlayMap);\r\n      this.setState({\r\n        lastRefresh: new Date()\r\n      });\r\n    }\r\n  }\r\n\r\n  renderMaskList = () => {\r\n    const masks = this.state.controlSubMode === \"light\" ? this.props.selectedPlayMap.lightMasks : this.state.controlSubMode === \"dark\" ? this.props.selectedPlayMap.darkMasks : this.props.selectedPlayMap.fogMasks;\r\n    return (\r\n      <Grid container spacing={1} direction=\"column\">\r\n        <Grid item>{ this.state.controlSubMode === \"light\" ? \"Light Masks\" : this.state.controlSubMode === \"dark\" ? \"Dark Masks\" : \"Fog Masks\" }</Grid>\r\n      { masks.map((mask: Mask, key) => {\r\n        return (\r\n          <Grid item key={key} \r\n            style={{ cursor: \"pointer\", backgroundColor: (this.state.selectedMask !== null && mask === this.state.selectedMask ? \"blue\" : \"transparent\") }}\r\n            container spacing={1} direction=\"column\">\r\n            <Grid item\r\n              onClick={() => {\r\n                this.setState({\r\n                  selectedMask: mask\r\n                });\r\n              }}>\r\n              {mask.toClipPath(this.props.selectedPlayMap.map.gridWidth, this.props.selectedPlayMap.map.gridHeight)}\r\n            </Grid>\r\n            { this.state.selectedMask !== null && mask === this.state.selectedMask && \r\n              <Grid item container spacing={1} direction=\"column\">\r\n                { mask.points.map((p, pkey) => {\r\n                  return (\r\n                    <Grid item container key={pkey} spacing={1} direction=\"row\">\r\n                      <Grid item xs={6}>\r\n                        <FormControl variant=\"outlined\" fullWidth>\r\n                          <InputLabel htmlFor={`text_field_lmp_x_${pkey}`}>X</InputLabel>\r\n                            <OutlinedInput\r\n                              id={`text_field_lmp_x_${pkey}`}\r\n                              name={`text_field_lmp_x_${pkey}`}\r\n                              type=\"number\"\r\n                              autoComplete=\"Off\"\r\n                              value={p.x}\r\n                              onChange={e => {\r\n                                this.moveLMP(p, 'x', e.target.value);\r\n                                // this.setState({ tokenName: e.target.value });\r\n                              }}\r\n                              labelWidth={40}\r\n                              fullWidth\r\n                            />\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={6}>\r\n                        <FormControl variant=\"outlined\" fullWidth>\r\n                          <InputLabel htmlFor={`text_field_lmp_y_${pkey}`}>Y</InputLabel>\r\n                            <OutlinedInput\r\n                              id={`text_field_lmp_y_${pkey}`}\r\n                              name={`text_field_lmp_y_${pkey}`}\r\n                              type=\"number\"\r\n                              autoComplete=\"Off\"\r\n                              value={p.y}\r\n                              onChange={e => {\r\n                                this.moveLMP(p, 'y', e.target.value);\r\n                                // this.setState({ tokenSize: parseInt(e.target.value) });\r\n                              }}\r\n                              labelWidth={40}\r\n                              fullWidth\r\n                            />\r\n                        </FormControl>\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <Button onClick={() => {\r\n                          this.deletePoint(p);\r\n                        }}>\r\n                          Delete\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  );\r\n                })}\r\n                <Grid item>\r\n                  <Button onClick={() => {\r\n                    this.addNewPoint(mask);\r\n                  }}>\r\n                    Add New Point\r\n                  </Button>\r\n                  <Button onClick={() => {\r\n                    this.deleteMask(mask);\r\n                  }}>\r\n                    Delete Mask\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            }\r\n            \r\n          </Grid>\r\n        );\r\n      })}\r\n      </Grid>\r\n    );\r\n  }\r\n\r\n  addNewMask = () => {\r\n    if (this.props.selectedPlayMap) {\r\n      const newPlayMap = this.props.selectedPlayMap;\r\n      const masks = this.state.controlSubMode === \"light\" ? newPlayMap.lightMasks : this.state.controlSubMode === \"dark\" ? newPlayMap.darkMasks : newPlayMap.fogMasks;\r\n      const points: MaskPoint[] = [\r\n        new MaskPoint(0, masks.length, this.state.controlSubMode, 0, 0),\r\n        new MaskPoint(1, masks.length, this.state.controlSubMode, 1, 0),\r\n        new MaskPoint(2, masks.length, this.state.controlSubMode, 1, 1),\r\n        new MaskPoint(3, masks.length, this.state.controlSubMode, 0, 1)\r\n      ];\r\n      masks.push(new Mask(\r\n        masks.length, this.state.controlSubMode, \r\n        points)\r\n      );\r\n      // this.api.updatePlayMap(newPlayMap.toDBObj()).then(() => {\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      // });\r\n    }\r\n  };\r\n\r\n  changeCategory = (e: any) => {\r\n    this.setState({ selectedCategory: e.target.value });\r\n  }\r\n\r\n  renderControls = () => {\r\n    if (this.props.selectedPlayMap && this.props.mode === \"DM\") {\r\n      if (this.state.controlMode === \"tokens\") {\r\n        return (\r\n          <ControlsContainer style={{ width: 300 }}>\r\n            <Heading>Tokens</Heading>\r\n            <Grid container spacing={1} direction=\"row\">\r\n              <Grid item xs={4}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"add\" }); }}>\r\n                  Add\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"edit\" }); }}>\r\n                  Edit\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <FormControl variant=\"outlined\">\r\n                  <InputLabel id=\"category\">Category</InputLabel>\r\n                  <Select\r\n                    labelId=\"category\"\r\n                    id=\"category\"\r\n                    value={this.state.selectedCategory}\r\n                    onChange={this.changeCategory}\r\n                    label=\"Category\"\r\n                  >\r\n                    { this.state.categories.map((c, key) => {\r\n                      return (<MenuItem key={key} value={c}>{c}</MenuItem>);\r\n                    })}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n            { this.state.controlSubMode === \"add\" ? \r\n              <Grid container spacing={1} direction=\"column\">\r\n                <Grid container spacing={1} direction=\"row\">\r\n                  <Grid item xs={4}>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"text_field_play_token_name\">Name</InputLabel>\r\n                        <OutlinedInput\r\n                          id={`text_field_play_token_name`}\r\n                          name={`text_field_play_token_name`}\r\n                          type=\"text\"\r\n                          autoComplete=\"Off\"\r\n                          value={this.state.tokenName}\r\n                          onChange={e => {\r\n                            this.setState({ tokenName: e.target.value });\r\n                          }}\r\n                          labelWidth={40}\r\n                          fullWidth\r\n                        />\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={4}>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"text_field_play_token_size\">Size</InputLabel>\r\n                        <OutlinedInput\r\n                          id={`text_field_play_token_size`}\r\n                          name={`text_field_play_token_size`}\r\n                          type=\"number\"\r\n                          autoComplete=\"Off\"\r\n                          value={this.state.tokenSize}\r\n                          onChange={e => {\r\n                            this.setState({ tokenSize: parseFloat(e.target.value) });\r\n                          }}\r\n                          labelWidth={40}\r\n                          fullWidth\r\n                        />\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={4}>\r\n                    <FormControl variant=\"outlined\" fullWidth>\r\n                      <InputLabel htmlFor=\"text_field_play_token_count\">Count</InputLabel>\r\n                        <OutlinedInput\r\n                          id={`text_field_play_token_count`}\r\n                          name={`text_field_play_token_count`}\r\n                          type=\"number\"\r\n                          autoComplete=\"Off\"\r\n                          value={this.state.tokenCount}\r\n                          onChange={e => {\r\n                            this.setState({ tokenCount: Math.max(1, parseInt(e.target.value)) });\r\n                          }}\r\n                          labelWidth={40}\r\n                          fullWidth\r\n                        />\r\n                    </FormControl>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item>\r\n                  <div style={{ height: (window.innerHeight - 400), overflowX: \"hidden\", overflowY: \"scroll\" }}>\r\n                    <Grid container spacing={1} direction=\"column\">\r\n                      <Grid item \r\n                        style={{ cursor: \"pointer\", backgroundColor: (this.state.selectedToken !== null && \"none\" === this.state.selectedToken._id ? \"blue\" : \"transparent\") }}\r\n                        onClick={() => {\r\n                          this.setState({\r\n                            selectedToken: new Token(\"none\", \"none\", \"none\"),\r\n                            selectedFavoriteToken: null\r\n                          });\r\n                        }}>\r\n                        Label Only\r\n                      </Grid>\r\n                      { (this.state.selectedCategory === \"all\" || this.state.selectedCategory === \"favorites\") && \r\n                        <Grid item>\r\n                          { this.renderFavoriteTokenList(false) }\r\n                        </Grid>\r\n                      }\r\n                      { this.state.selectedCategory !== \"favorites\" &&\r\n                        <Grid item>\r\n                          { this.renderTokenList() }\r\n                        </Grid>\r\n                      }\r\n                    </Grid>\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            :\r\n              <Grid container spacing={1} direction=\"column\" style={{ height: (window.innerHeight - 300), overflowX: \"hidden\", overflowY: \"scroll\" }}>\r\n                { this.renderPlayTokenList() }\r\n              </Grid>\r\n            }\r\n            <Grid container spacing={1} direction=\"row\">\r\n              <Grid item xs={6}>\r\n              { this.state.controlSubMode === \"add\" && \r\n                <Button \r\n                  onClick={this.addNewToken} \r\n                  variant=\"contained\" color=\"primary\"\r\n                  disabled={ this.state.selectedToken === null && this.state.selectedFavoriteToken === null } \r\n                >\r\n                  Add New Token\r\n                </Button>\r\n              }\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Button \r\n                  onClick={() => {\r\n                    this.setState({ controlMode: \"main\" });\r\n                  }} \r\n                  variant=\"contained\" color=\"primary\"\r\n                >\r\n                  Close\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </ControlsContainer>\r\n        );\r\n      } else if (this.state.controlMode === \"masks\") {\r\n        return (\r\n          <ControlsContainer style={{ width: 300 }}>\r\n            <Heading>Masks</Heading>\r\n            <Grid container spacing={1} direction=\"row\">\r\n              <Grid item xs={4}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"light\" }); }}>\r\n                  Light\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"dark\" }); }}>\r\n                  Dark\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"fog\" }); }}>\r\n                  Fog\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container spacing={1} direction=\"column\">\r\n              <Grid item style={{ height: (window.innerHeight - 280), overflowX: \"hidden\", overflowY: \"scroll\" }}>\r\n                { this.renderMaskList() }\r\n              </Grid>\r\n              <Grid item container spacing={1} direction=\"row\">\r\n                <Grid item xs={6}>\r\n                  <Button \r\n                    onClick={this.addNewMask} \r\n                    variant=\"contained\" color=\"primary\"\r\n                  >\r\n                    Add New Mask\r\n                  </Button>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Button \r\n                    onClick={() => {\r\n                      this.setState({ controlMode: \"main\" });\r\n                    }} \r\n                    variant=\"contained\" color=\"primary\"\r\n                  >\r\n                    Close\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </ControlsContainer>\r\n        );\r\n      } else if (this.state.controlMode === \"favorites\") {\r\n        return (\r\n          <ControlsContainer style={{ width: 300 }}>\r\n            <Heading>Favorites</Heading>\r\n            <Grid container spacing={1} direction=\"row\">\r\n              <Grid item xs={6}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"add\" }); }}>\r\n                  Add\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Button onClick={() => { this.setState({ controlSubMode: \"edit\" }); }}>\r\n                  Edit\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n            { this.state.controlSubMode === \"add\" ? \r\n              <Grid container spacing={1} direction=\"row\">\r\n                <Grid item xs={6}>\r\n                  <FormControl variant=\"outlined\" fullWidth>\r\n                    <InputLabel htmlFor=\"text_field_play_token_name\">Name</InputLabel>\r\n                      <OutlinedInput\r\n                        id={`text_field_play_token_name`}\r\n                        name={`text_field_play_token_name`}\r\n                        type=\"text\"\r\n                        autoComplete=\"Off\"\r\n                        value={this.state.tokenName}\r\n                        onChange={e => {\r\n                          this.setState({ tokenName: e.target.value });\r\n                        }}\r\n                        labelWidth={40}\r\n                        fullWidth\r\n                      />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <FormControl variant=\"outlined\" fullWidth>\r\n                    <InputLabel htmlFor=\"text_field_play_token_size\">Size</InputLabel>\r\n                      <OutlinedInput\r\n                        id={`text_field_play_token_size`}\r\n                        name={`text_field_play_token_size`}\r\n                        type=\"number\"\r\n                        autoComplete=\"Off\"\r\n                        value={this.state.tokenSize}\r\n                        onChange={e => {\r\n                          this.setState({ tokenSize: parseFloat(e.target.value) });\r\n                        }}\r\n                        labelWidth={40}\r\n                        fullWidth\r\n                      />\r\n                  </FormControl>\r\n                </Grid>\r\n                <div style={{ height: (window.innerHeight - 400), overflowX: \"hidden\", overflowY: \"scroll\" }}>\r\n                  { this.renderTokenList() }\r\n                </div>\r\n              </Grid>\r\n            :\r\n              <div style={{ height: (window.innerHeight - 300), overflowX: \"hidden\", overflowY: \"scroll\" }}>\r\n                { this.renderFavoriteTokenList(true) }\r\n              </div>\r\n            }\r\n            <Grid container spacing={1} direction=\"row\">\r\n              <Grid item xs={6}>\r\n                { this.state.controlSubMode === \"add\" &&\r\n                  <Button \r\n                    onClick={this.addNewFavorite} \r\n                    variant=\"contained\" color=\"primary\"\r\n                    disabled={ this.state.tokenName === \"\" || this.state.selectedToken === null } \r\n                  >\r\n                    Add New Favorite\r\n                  </Button>\r\n                }\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <Button \r\n                  onClick={() => {\r\n                    this.setState({ controlMode: \"main\" });\r\n                  }} \r\n                  variant=\"contained\" color=\"primary\"\r\n                >\r\n                  Close\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </ControlsContainer>\r\n        );\r\n      } else {\r\n        return (\r\n          <ControlsContainer>\r\n            <div onClick={this.zoomIn}>\r\n              <Icons>+</Icons>\r\n            </div>\r\n            <div onClick={this.zoomOut}>\r\n              <Icons>-</Icons>\r\n            </div>\r\n            <div onClick={this.clearSelectAndHover}>\r\n              {this.state.mapMode === \"pan\" ? \"P\" : \"M\"}\r\n            </div>\r\n            <div onClick={() => { this.setState({ controlMode: \"tokens\", controlSubMode: \"add\" }); }}>\r\n              T\r\n            </div>\r\n            <div onClick={() => { this.setState({ controlMode: \"masks\", controlSubMode: \"light\" }); }}>\r\n              L\r\n            </div>\r\n            <div onClick={() => { this.setState({ controlMode: \"favorites\", controlSubMode: \"add\" }); }}>\r\n              F\r\n            </div>\r\n          </ControlsContainer>\r\n        );\r\n      }\r\n    } else {\r\n      return (<div></div>);\r\n    }\r\n  };\r\n\r\n  renderPlayers = () => {\r\n    if (this.props.selectedPlayMap && this.props.mode === \"DM\") {\r\n      const threshold = new Date(new Date().getTime() + -1*60000);\r\n      return (\r\n        <PlayersContainer>\r\n          <Grid container spacing={1} direction=\"column\">\r\n            <Grid item>\r\n              <Button \r\n                style={{ backgroundColor: (this.props.selectedCampaign && this.props.selectedCampaign.turnPlayerID === null ? \"blue\" : \"transparent\") }}\r\n                onClick={() => {\r\n                  const newCampaign = {...this.props.selectedCampaign};\r\n                  if (newCampaign !== null && newCampaign._id !== undefined) {\r\n                    newCampaign.turnPlayerID = null;\r\n                    this.props.updateCampaign(newCampaign);\r\n                    this.saveCampaign();\r\n                    this.setState({\r\n                      lastRefresh: new Date()\r\n                    });\r\n                  }\r\n                }}>\r\n                <div style={{ margin: 4 }}>\r\n                  None\r\n                </div>\r\n              </Button>\r\n            </Grid>\r\n            { this.props.players.map((p, key) => {\r\n              return (\r\n                <Grid item key={key}>\r\n                  <Button\r\n                    style={{ backgroundColor: (this.props.selectedCampaign && this.props.selectedCampaign.turnPlayerID === p._id ? \"blue\" : \"transparent\") }}\r\n                    onClick={() => {\r\n                      const newCampaign = {...this.props.selectedCampaign};\r\n                      if (newCampaign !== null && newCampaign._id !== undefined) {\r\n                        newCampaign.turnPlayerID = p._id;\r\n                        this.props.updateCampaign(newCampaign);\r\n                        this.saveCampaign();\r\n                        this.setState({\r\n                          lastRefresh: new Date()\r\n                        });\r\n                      }\r\n                    }}>\r\n                    <div style={{ margin: 4, backgroundColor: (p.lastPing < threshold ? \"red\" : \"green\") }}>\r\n                      {p.username}\r\n                    </div>\r\n                  </Button>\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </PlayersContainer>\r\n      );\r\n    } else {\r\n      return (<div></div>);\r\n    }\r\n  };\r\n\r\n  saveCampaign = () => {\r\n    this.api.updateCampaign(this.props.selectedCampaign.toDBObj()).then((res: any) => {\r\n      const campaign = this.props.selectedCampaign;\r\n      campaign.lastUpdate = res.lastUpdate;\r\n      this.props.updateCampaign(campaign);\r\n    });\r\n  }\r\n\r\n  onKeyDown = (e: any) => {\r\n    // Change heldKeys to be individual ones like shiftHeld, ctrlHeld, etc.\r\n    // Because there are only a few holds I'll care about.\r\n    // I do however want to make it respond to some other keys.\r\n    // \r\n    // const heldKeys = this.state.heldKeys.filter(k => k !== e.key);\r\n    // heldKeys.push(e.key);\r\n    // this.setState({ heldKeys });\r\n    if (e.key === \"Shift\" && this.props.mode === \"DM\") {\r\n      if (!this.state.shiftHeld) {\r\n        // Shift allows adding and removing selected items.\r\n        // If it's not held then clicking while hovering will select that\r\n        // item and deselect all others (unless it's the only one selected,\r\n        // then it will deselect it).\r\n        this.setState({ \r\n          shiftHeld: true,\r\n          mapMode: \"select\" \r\n        });\r\n      }\r\n    } else if (e.key === \"Control\" && this.props.mode === \"DM\") {\r\n      if (!this.state.ctrlHeld) {\r\n        // Ctrl is used for moving items.  \r\n        // It only works if a single item is selected and shift isn't\r\n        // also being held.  \r\n        // It makes the selected item drop at the mouse location on click.\r\n        this.setState({ \r\n          ctrlHeld: true,\r\n          mapMode: (this.state.shiftHeld ? \"select\" : \"move\")\r\n        });\r\n      }\r\n    } else if (e.key === \"t\" && this.props.mode === \"DM\") {\r\n      this.toggleSingleSelect();\r\n    } else if (e.key === \"Alt\" && this.props.mode === \"DM\") {\r\n      this.clearSelectAndHover();\r\n    } else if (e.key === \"w\") {\r\n      this.slideSelected(0, -1);\r\n    } else if (e.key === \"a\") {\r\n      this.slideSelected(-1, 0);\r\n    } else if (e.key === \"s\") {\r\n      this.slideSelected(0, 1);\r\n    } else if (e.key === \"d\") {\r\n      this.slideSelected(1, 0);\r\n    } else {\r\n      // console.log(e);\r\n    }\r\n  }\r\n\r\n  slideSelected = (xChange: number, yChange: number) => {\r\n    const newPlayMap = this.props.selectedPlayMap;\r\n    this.state.selected.forEach((s: PlayToken | MaskPoint) => {\r\n      if (s instanceof PlayToken) {\r\n        const selToken: PlayToken = s;\r\n        const tokenFinder = newPlayMap.tokens.filter(t => t.id === selToken.id);\r\n        if (tokenFinder.length === 1) {\r\n          const theToken = tokenFinder[0];\r\n          theToken.x += xChange;\r\n          theToken.y += yChange;\r\n        }\r\n      } else if (s instanceof MaskPoint) {\r\n        const selPoint: MaskPoint = s;\r\n        if (selPoint.maskType === \"light\") {\r\n          const maskFinder = newPlayMap.lightMasks.filter(l => l.id === selPoint.maskID);\r\n          if (maskFinder.length === 1) {\r\n            const theMask = maskFinder[0];\r\n            const pointFinder = theMask.points.filter(p => p.id === selPoint.id);\r\n            if (pointFinder.length === 1) {\r\n              const thePoint = pointFinder[0];\r\n              thePoint.x += xChange;\r\n              thePoint.y += yChange;\r\n            }\r\n          }\r\n        } else if (selPoint.maskType === \"dark\") {\r\n          const maskFinder = newPlayMap.darkMasks.filter(l => l.id === selPoint.maskID);\r\n          if (maskFinder.length === 1) {\r\n            const theMask = maskFinder[0];\r\n            const pointFinder = theMask.points.filter(p => p.id === selPoint.id);\r\n            if (pointFinder.length === 1) {\r\n              const thePoint = pointFinder[0];\r\n              thePoint.x += xChange;\r\n              thePoint.y += yChange;\r\n            }\r\n          }\r\n        } else if (selPoint.maskType === \"fog\") {\r\n          const maskFinder = newPlayMap.fogMasks.filter(l => l.id === selPoint.maskID);\r\n          if (maskFinder.length === 1) {\r\n            const theMask = maskFinder[0];\r\n            const pointFinder = theMask.points.filter(p => p.id === selPoint.id);\r\n            if (pointFinder.length === 1) {\r\n              const thePoint = pointFinder[0];\r\n              thePoint.x += xChange;\r\n              thePoint.y += yChange;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    if (this.props.mode === \"DM\") {\r\n      this.props.updatePlayMap(newPlayMap);\r\n      this.setState({\r\n        lastRefresh: new Date()\r\n      });\r\n    } else {\r\n      this.api.updatePlayMap(newPlayMap.toDBObj()).then((res: any) => {\r\n        const newCampaign = this.props.selectedCampaign;\r\n        newCampaign.lastUpdate = res.lastUpdate;\r\n        this.props.updateCampaign(newCampaign);\r\n        this.props.updatePlayMap(newPlayMap);\r\n        this.setState({\r\n          lastRefresh: new Date()\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  onKeyUp = (e: any) => {\r\n    if (e.key === \"Shift\" && this.props.mode === \"DM\") {\r\n      if (this.state.shiftHeld) {\r\n        // Shift allows adding and removing selected items.\r\n        // If it's not held then clicking while hovering will select that\r\n        // item and deselect all others (unless it's the only one selected,\r\n        // then it will deselect it).\r\n        this.setState({ \r\n          shiftHeld: false,\r\n          mapMode: (this.state.ctrlHeld ? \"move\" : \"pan\")\r\n        });\r\n      }\r\n    } else if (e.key === \"Control\" && this.props.mode === \"DM\") {\r\n      if (this.state.ctrlHeld) {\r\n        // Currently I don't know what I want to do for ctrl.\r\n        // I'll probably have a use for it, so I'll track it being held for now\r\n        this.setState({ \r\n          ctrlHeld: false,\r\n          mapMode: (this.state.shiftHeld ? \"select\" : \"pan\")\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.running) {\r\n      this.setState({\r\n        running: true,\r\n        // countdown: (this.props.mode === \"DM\" ? 10 : 2)\r\n      }, () => {\r\n        setTimeout(this.refresh, this.state.countdown * 1000);\r\n      });\r\n      return (<div>Loading</div>);\r\n    } else if (this.props.mode === \"DM\" && this.state.categories.length === 0 && this.props.tokens) {\r\n      const categories: string[] = [];\r\n      categories.push(\"all\");\r\n      categories.push(\"favorites\");\r\n      this.props.tokens.forEach((t: Token) => {\r\n        if (t.category && !categories.includes(t.category)){\r\n          categories.push(t.category);\r\n        }\r\n      });\r\n      this.setState({ categories });\r\n      return (<div>Loading</div>);\r\n    } else {\r\n      const StyledReactPanZoom = styled(ReactPanZoom)`\r\n        ${Container};\r\n      `;\r\n      return (\r\n        <div>\r\n          { this.renderControls() }\r\n          { this.renderPlayers() }\r\n          <StyledReactPanZoom\r\n            zoom={this.props.selectedPlayMap.zoom}\r\n            pandx={this.props.selectedPlayMap.dx}\r\n            pandy={this.props.selectedPlayMap.dy}\r\n            onPan={this.onPan}\r\n            onClick={this.onClick}\r\n            onMouseMove={this.onMouseMove}\r\n            enableClick={this.state.mapMode !== \"pan\"}\r\n            singleSelect={this.state.singleSelect}\r\n          >\r\n            <div style={{\r\n                position: \"relative\", \r\n                left: ((-1 * window.innerWidth / 2) + 0), \r\n                top: ((-1 * window.innerHeight / 2) + 25)\r\n              }}>\r\n              { this.props.mode === \"DM\" ? // This is the image that goes behind the main map.  The lightMask clipPath.\r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    opacity: 0.5,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50)\r\n                  }} \r\n                  src={this.props.selectedPlayMap.map.file} alt=\"Fog of War\" \r\n                />\r\n              :\r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: this.props.selectedPlayMap.map.gridWidth * 50,\r\n                    height: this.props.selectedPlayMap.map.gridHeight * 50\r\n                  }} \r\n                  src={FogOfWar} alt=\"Fog of War\" \r\n                />\r\n              }\r\n              <img style={{\r\n                  position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                  left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                  top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                  width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                  height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                  clipPath: \"url(#lightMask)\"\r\n                }}\r\n                src={this.props.selectedPlayMap.map.file} alt=\"Light Mask\" \r\n              />\r\n              {/* <svg width=\"0\" height=\"0\">\r\n                <defs>\r\n                  <clipPath id=\"lightMask\">\r\n                    <polygon points=\"13,13 13,113 113,113 113,13\"/>\r\n                    <polygon points=\"450,10 500,200 600,100\" />\r\n                    <polygon points=\"150,10 100,200 300,100\" />\r\n                  </clipPath>\r\n                </defs>\r\n              </svg> */}\r\n              <svg width=\"0\" height=\"0\">\r\n                <defs>\r\n                  <clipPath id=\"lightMask\">\r\n                  { this.props.selectedPlayMap.lightMasks.map((mask, key) => {\r\n                    return (\r\n                      <polygon key={key} points={mask.toClipPath(this.props.selectedPlayMap.map.gridWidth, this.props.selectedPlayMap.map.gridHeight)} />\r\n                    );\r\n                  })}\r\n                  </clipPath>\r\n                </defs>\r\n              </svg>\r\n              <svg width=\"0\" height=\"0\">\r\n                <defs>\r\n                  <clipPath id=\"darkMask\">\r\n                  { this.props.selectedPlayMap.darkMasks.map((mask, key) => {\r\n                    return (\r\n                      <polygon key={key} points={mask.toClipPath(this.props.selectedPlayMap.map.gridWidth, this.props.selectedPlayMap.map.gridHeight)} />\r\n                    );\r\n                  })}\r\n                  </clipPath>\r\n                </defs>\r\n              </svg>\r\n              <svg width=\"0\" height=\"0\">\r\n                <defs>\r\n                  <clipPath id=\"fogMask\">\r\n                  { this.props.selectedPlayMap.fogMasks.map((mask, key) => {\r\n                    return (\r\n                      <polygon key={key} points={mask.toClipPath(this.props.selectedPlayMap.map.gridWidth, this.props.selectedPlayMap.map.gridHeight)} />\r\n                    );\r\n                  })}\r\n                  </clipPath>\r\n                </defs>\r\n              </svg>\r\n              { this.props.mode === \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    clipPath: \"url(#fogMask)\"\r\n                  }}\r\n                  src={FogOfWar} alt=\"Fog Mask 1\" \r\n                />\r\n              }\r\n              { this.props.mode === \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    opacity: 0.3,\r\n                    clipPath: \"url(#fogMask)\"\r\n                  }}\r\n                  src={this.props.selectedPlayMap.map.file} alt=\"Fog Mask 2\" \r\n                />\r\n              }\r\n              { this.props.mode === \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    opacity: 0.7,\r\n                    clipPath: \"url(#darkMask)\"\r\n                  }}\r\n                  src={FogOfWar} alt=\"Dark Mask\" \r\n                />\r\n              }\r\n              { this.props.selectedPlayMap.movingToken &&\r\n                <div style={{\r\n                  position: \"absolute\",\r\n                  left: this.props.selectedPlayMap.movingToken.x * 50 + (window.innerWidth / 2) - 25 - (this.props.selectedPlayMap.movingToken.size * 25),\r\n                  top: this.props.selectedPlayMap.movingToken.y * 50 + (window.innerHeight / 2) - 25 - (this.props.selectedPlayMap.movingToken.size * 25),\r\n                  width: this.props.selectedPlayMap.movingToken.size * 50,\r\n                  height: this.props.selectedPlayMap.movingToken.size * 50,\r\n                  // backgroundColor: (this.state.selected.includes(t) ? \"blue\" : (this.state.mapMode === \"select\" ? \"grey\" : \"transparent\")),\r\n                  // borderRadius: (t.size * 25)\r\n                  opacity: 0.5\r\n                }}>\r\n                  { this.props.selectedPlayMap.movingToken.token !== null &&\r\n                    <img src={this.props.selectedPlayMap.movingToken.token.file} alt=\"testing\" \r\n                      style={{\r\n                        width: this.props.selectedPlayMap.movingToken.size * 50,\r\n                        height: this.props.selectedPlayMap.movingToken.size * 50\r\n                      }}\r\n                    />\r\n                  }\r\n                  { this.props.selectedPlayMap.movingToken.name !== \"\" && \r\n                    <span style={{ color: \"black\", fontWeight: \"bold\", backgroundColor: \"white\", fontSize: (10 * this.props.selectedPlayMap.movingToken.size) }}>{this.props.selectedPlayMap.movingToken.name}</span>\r\n                  }\r\n                </div>\r\n              }\r\n              { this.props.selectedPlayMap.tokens.map((t, key) => {\r\n                return (\r\n                  <div key={key} style={{\r\n                    position: \"absolute\",\r\n                    left: t.x * 50 + (window.innerWidth / 2) - 25 - (t.size * 25),\r\n                    top: t.y * 50 + (window.innerHeight / 2) - 25 - (t.size * 25),\r\n                    width: t.size * 50,\r\n                    height: t.size * 50,\r\n                    backgroundColor: (this.state.selected.includes(t) ? \"blue\" : (this.state.mapMode === \"select\" && (this.props.mode === \"DM\" || (this.props.selectedPlayer && t.owner && this.props.selectedPlayer._id === t.owner._id)) ? \"grey\" : \"transparent\")),\r\n                    // borderRadius: (t.size * 25)\r\n                    opacity: (!t.stealth ? 1 : (this.props.mode === \"DM\" ? 0.5 : 0))\r\n                  }}\r\n                  onMouseEnter={() => {\r\n                    if (this.props.mode === \"DM\" || (this.props.selectedPlayer && t.owner && this.props.selectedPlayer._id === t.owner._id)) {\r\n                      this.setState({ hovered: t });\r\n                    }\r\n                  }}\r\n                  onMouseLeave={() => {\r\n                    if (this.props.mode === \"DM\" || (this.props.selectedPlayer && t.owner && this.props.selectedPlayer._id === t.owner._id)) {\r\n                      this.setState({ hovered: null });\r\n                    }\r\n                  }}>\r\n                    { t.token !== null &&\r\n                      <img src={t.token.file} alt=\"testing\" \r\n                        style={{\r\n                          width: t.size * 50,\r\n                          height: t.size * 50\r\n                        }}\r\n                      />\r\n                    }\r\n                    { t.name !== \"\" && \r\n                      <span style={{ color: \"black\", fontWeight: \"bold\", backgroundColor: \"white\", fontSize: (10 * t.size) }}>{t.name}</span>\r\n                    }\r\n                  </div>\r\n                );\r\n              })}\r\n              { this.props.mode !== \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    clipPath: \"url(#fogMask)\"\r\n                  }}\r\n                  src={FogOfWar} alt=\"Fog Mask 1\" \r\n                />\r\n              }\r\n              { this.props.mode !== \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    opacity: 0.5,\r\n                    clipPath: \"url(#fogMask)\"\r\n                  }}\r\n                  src={this.props.selectedPlayMap.map.file} alt=\"Fog Mask 2\" \r\n                />\r\n              }\r\n              { this.props.mode !== \"DM\" && \r\n                <img style={{\r\n                    position: \"absolute\", // The 0.4s are to account for the offsets.  I should make these part of the map object.\r\n                    left: (this.props.selectedPlayMap.map.gridWidth) * -25 + (window.innerWidth / 2),\r\n                    top: (this.props.selectedPlayMap.map.gridHeight) * -25 + (window.innerHeight / 2) - 25,\r\n                    width: (this.props.selectedPlayMap.map.gridWidth * 50),\r\n                    height: (this.props.selectedPlayMap.map.gridHeight * 50),\r\n                    clipPath: \"url(#darkMask)\"\r\n                  }}\r\n                  src={FogOfWar} alt=\"Dark Mask\" \r\n                />\r\n              }\r\n              { this.props.mode === \"DM\" && this.props.selectedPlayMap.lightMasks.map((mask, mkey) => {\r\n                return (\r\n                  <div key={mkey}>\r\n                    { mask.points.map((p, pkey) => {\r\n                      return (\r\n                        <div key={pkey} style={{\r\n                          position: \"absolute\",\r\n                          left: p.x * 50 + (window.innerWidth / 2) - 60,\r\n                          top: p.y * 50 + (window.innerHeight / 2) - 60,\r\n                          width: 20,\r\n                          height: 20,\r\n                          backgroundColor: (this.state.selected.includes(p) ? \"green\" : \"yellow\"),\r\n                          // borderRadius: (5)\r\n                        }}\r\n                        onMouseEnter={() => {\r\n                          this.setState({ hovered: p });\r\n                        }}\r\n                        onMouseLeave={() => {\r\n                          this.setState({ hovered: null });\r\n                        }}>\r\n                          {p.id}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n              { this.props.mode === \"DM\" && this.props.selectedPlayMap.darkMasks.map((mask, mkey) => {\r\n                return (\r\n                  <div key={mkey}>\r\n                    { mask.points.map((p, pkey) => {\r\n                      return (\r\n                        <div key={pkey} style={{\r\n                          position: \"absolute\",\r\n                          left: p.x * 50 + (window.innerWidth / 2) - 60,\r\n                          top: p.y * 50 + (window.innerHeight / 2) - 60,\r\n                          width: 20,\r\n                          height: 20,\r\n                          backgroundColor: (this.state.selected.includes(p) ? \"green\" : \"purple\"),\r\n                          borderRadius: (5)\r\n                        }}\r\n                        onMouseEnter={() => {\r\n                          this.setState({ hovered: p });\r\n                        }}\r\n                        onMouseLeave={() => {\r\n                          this.setState({ hovered: null });\r\n                        }}>\r\n                          {p.id}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n              { this.props.mode === \"DM\" && this.props.selectedPlayMap.fogMasks.map((mask, mkey) => {\r\n                return (\r\n                  <div key={mkey}>\r\n                    { mask.points.map((p, pkey) => {\r\n                      return (\r\n                        <div key={pkey} style={{\r\n                          position: \"absolute\",\r\n                          left: p.x * 50 + (window.innerWidth / 2) - 60,\r\n                          top: p.y * 50 + (window.innerHeight / 2) - 60,\r\n                          width: 20,\r\n                          height: 20,\r\n                          backgroundColor: (this.state.selected.includes(p) ? \"green\" : \"grey\"),\r\n                          borderRadius: (5)\r\n                        }}\r\n                        onMouseEnter={() => {\r\n                          this.setState({ hovered: p });\r\n                        }}\r\n                        onMouseLeave={() => {\r\n                          this.setState({ hovered: null });\r\n                        }}>\r\n                          {p.id}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </StyledReactPanZoom>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default connector(DisplayPlayMap);\r\n","import React, { Component } from \"react\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport styled\r\n// , { css } \r\nfrom \"styled-components\";\r\nimport {\r\n  Button, \r\n  // Link\r\n} from \"@material-ui/core\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Campaign, PlayMap, Token, Player } from \"../models\";\r\n// import ReactPanZoom from \"../components/my-react-pan-zoom\";\r\nimport CreateCampaign from \"../components/CreateCampaign\";\r\nimport LoadCampaign from \"../components/LoadCampaign\";\r\nimport CreatePlayMap from \"../components/CreatePlayMap\";\r\nimport LoadPlayMap from \"../components/LoadPlayMap\";\r\nimport DisplayPlayMap from \"../components/DisplayPlayMap\";\r\n// import ReduxTest from \"../components/ReduxTest\";\r\n// import SVGTest from \"../components/SVGTest\";\r\nimport API from \"../smartAPI\";\r\n\r\nconst HEADER_HEIGHT = 50;\r\n// const Container = css`\r\n//   height: calc(100vh - ${HEADER_HEIGHT}px);\r\n//   width: 100vw;\r\n//   overflow: hidden;\r\n//   display: flex;\r\n//   justify-content: center;\r\n//   align-items: center;\r\n//   z-index: 1;\r\n// `;\r\n// const ControlsContainer = styled.div`\r\n//   position: fixed;\r\n//   background: lightgray;\r\n//   height: 100%;\r\n//   right: 0;\r\n//   z-index: 2;\r\n//   cursor: pointer;\r\n//   user-select: none;\r\n\r\n//   > div {\r\n//     padding: 15px;\r\n//     &:hover {\r\n//       background: darkgray;\r\n//     }\r\n//     &:active {\r\n//       box-shadow: 1px 1px 1px inset;\r\n//     }\r\n//   }\r\n// `;\r\n\r\nconst Heading = styled.div`\r\n  background: dimgrey;\r\n  color: white;\r\n  height: ${HEADER_HEIGHT}px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 10px;\r\n`;\r\n\r\n// const Icons = styled.strong`\r\n//   font-size: 2rem;\r\n// `;\r\n\r\n// const mapStateToProps = state => {\r\n//   return {\r\n//     // width: state.app.width\r\n//   };\r\n// };\r\n// function mapDispatchToProps(dispatch) {\r\n//   return {\r\n//     // notFromLogin: () => dispatch(notFromLogin({}))\r\n//   };\r\n// }\r\n\r\ninterface AppState {\r\n  tokens: Token[],\r\n  players: Player[],\r\n  selectedPlayMap: PlayMap,\r\n  selectedCampaign: Campaign\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  tokens: state.app.tokens,\r\n  players: state.app.players,\r\n  selectedPlayMap: state.app.selectedPlayMap,\r\n  selectedCampaign: state.app.selectedCampaign\r\n});\r\n\r\nconst mapDispatch = {\r\n  // setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  // setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  // addPlayMap: (playMap: PlayMap) => ({ type: 'ADD_PLAYMAP', payload: playMap }),\r\n  selectCampaign: (campaign: Campaign) => ({ type: 'SELECT_CAMPAIGN', payload: campaign }),\r\n  updateCampaign: (campaign: Campaign) => ({ type: 'UPDATE_CAMPAIGN', payload: campaign }),\r\n  selectPlayMap: (playMap: PlayMap) => ({ type: 'SELECT_PLAYMAP', payload: playMap }),\r\n  updatePlayMap: (playMap: PlayMap) => ({ type: 'UPDATE_PLAYMAP', payload: playMap })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n}\r\nexport interface IDMPageStateType {\r\n  mode: string;\r\n  selectedTokenID: number;\r\n  hoveredTokenID: number;\r\n  deselecting: boolean;\r\n  lastRefresh: Date;\r\n  controlMode: string;\r\n}\r\nclass DMPage extends Component<\r\n  Props,\r\n  IDMPageStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: \"loadCampaign\",\r\n      selectedTokenID: -1,\r\n      hoveredTokenID: -1,\r\n      deselecting: false,\r\n      lastRefresh: new Date(),\r\n      controlMode: \"controls\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  createCampaign = () => {\r\n    this.setState({\r\n      mode: \"createCampaign\"\r\n    })\r\n  }\r\n\r\n  loadCampaign = () => {\r\n    this.setState({\r\n      mode: \"loadCampaign\"\r\n    })\r\n  }\r\n\r\n  saveCampaign = () => {\r\n    this.api.updateCampaign(this.props.selectedCampaign.toDBObj()).then((res: any) => {\r\n      const campaign = this.props.selectedCampaign;\r\n      campaign.lastUpdate = res.lastUpdate;\r\n      this.props.updateCampaign(campaign);\r\n    });\r\n  }\r\n\r\n  selectCampaign = (campaign: Campaign) => {\r\n    this.props.selectCampaign(campaign);\r\n    if (campaign.selectedPlayMapID === \"\") {\r\n      this.setState({ mode: \"loadPlayMap\" });\r\n    } else {\r\n      this.setState({ mode: \"main\" });\r\n    }\r\n  }\r\n\r\n  createPlayMap = () => {\r\n    this.setState({\r\n      mode: \"createPlayMap\"\r\n    })\r\n  }\r\n\r\n  loadPlayMap = () => {\r\n    this.setState({\r\n      mode: \"loadPlayMap\"\r\n    })\r\n  }\r\n\r\n  savePlayMap = () => {\r\n    this.api.updatePlayMap(this.props.selectedPlayMap.toDBObj()).then((res: any) => {\r\n      const newCampaign = this.props.selectedCampaign;\r\n      newCampaign.lastUpdate = res.lastUpdate;\r\n      this.props.updateCampaign(newCampaign);\r\n    });\r\n  }\r\n\r\n  selectPlayMap = (playMap: PlayMap) => {\r\n    // const campaign: Campaign = this.props.selectedCampaign;\r\n    // campaign.selectedPlayMapID = playMap._id;\r\n    // this.api.updateCampaign(campaign.toDBObj()).then((res: any) => {\r\n\r\n    //   this.props.updateCampaign(campaign);\r\n    //   this.setState({ mode: \"main\" });\r\n    // });\r\n    this.props.selectPlayMap(playMap);\r\n    this.setState({ mode: \"main\" });\r\n  }\r\n\r\n  useSelectedPlayMap = () => {\r\n    const campaign: Campaign = this.props.selectedCampaign;\r\n    campaign.selectedPlayMapID = this.props.selectedPlayMap._id;\r\n    this.api.updateCampaign(campaign.toDBObj()).then((res: any) => {\r\n      campaign.lastUpdate = res.lastUpdate;\r\n      this.props.updateCampaign(campaign);\r\n      this.setState({ mode: \"main\" });\r\n    });\r\n  }\r\n\r\n  renderHeader = () => {\r\n    return (\r\n      <Heading key=\"heading\"> \r\n        Dead Simple VTT - DM Page \r\n        <Button onClick={this.createCampaign}>Create Campaign</Button>\r\n        <Button onClick={this.loadCampaign}>Load Campaign</Button>\r\n        { this.renderControls() }\r\n        {/* { this.props.selectedCampaign && \r\n          <div>\r\n            <Button onClick={this.createPlayMap}>Create PlayMap</Button>\r\n            <Button onClick={this.loadPlayMap}>Load PlayMap</Button>\r\n            <Button onClick={this.savePlayMap} disabled={this.props.selectedPlayMap === null}>Save PlayMap</Button>\r\n            <Button onClick={this.useSelectedPlayMap} disabled={this.props.selectedPlayMap === null}>Use PlayMap</Button>\r\n            <Link href={`http://localhost:3000/vtt/player/${this.props.selectedCampaign._id}`} style={{ color: \"black\", fontWeight: \"bold\" }}>Player Page</Link>\r\n          </div>\r\n        } */}\r\n      </Heading>\r\n    );\r\n  };\r\n\r\n  renderControls = () => {\r\n    return (\r\n      <div> \r\n        { this.props.selectedCampaign && \r\n          <div>\r\n            <Button onClick={this.createPlayMap}>Create PlayMap</Button>\r\n            <Button onClick={this.loadPlayMap}>Load PlayMap</Button>\r\n            <Button onClick={this.savePlayMap} disabled={this.props.selectedPlayMap === null}>Save PlayMap</Button>\r\n            <Button onClick={this.useSelectedPlayMap} disabled={this.props.selectedPlayMap === null}>Use PlayMap</Button>\r\n            <NavLink to={`/vtt/player/${this.props.selectedCampaign._id}`} target=\"_blank\" style={{ color: \"black\" }}>\r\n              Player Page\r\n            </NavLink>\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderMain = () => {\r\n    if (this.state.mode === \"loadCampaign\") {\r\n      return (\r\n        <LoadCampaign key=\"main\" mode=\"DM\" selectCampaign={this.selectCampaign} />\r\n      );\r\n    } else if (this.state.mode === \"createCampaign\") {\r\n      return (\r\n        <CreateCampaign key=\"main\" selectCampaign={this.selectCampaign} />\r\n      );\r\n    } else if (this.state.mode === \"loadPlayMap\") {\r\n      return (\r\n        <LoadPlayMap key=\"main\" mode=\"DM\" selectPlayMap={this.selectPlayMap} />\r\n      );\r\n    } else if (this.state.mode === \"createPlayMap\") {\r\n      return (\r\n        <CreatePlayMap key=\"main\" selectPlayMap={this.selectPlayMap} />\r\n      );\r\n    } else {\r\n      if (this.props.selectedPlayMap) {\r\n        return (\r\n          <DisplayPlayMap key=\"main\" mode=\"DM\" />\r\n        );\r\n      } else {\r\n        return (\r\n          <div key=\"main\" style={{ margin: 10 }}>\r\n            Load a Map to see it here\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return [\r\n      this.renderHeader(),\r\n      this.renderMain()\r\n    ];\r\n  }\r\n}\r\n\r\nexport default connector(DMPage);\r\n","import React, { Component } from \"react\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  FormControl,\r\n  Select,\r\n  InputLabel,\r\n  MenuItem,\r\n  Button, \r\n  // Grid\r\n} from \"@material-ui/core\";\r\nimport { \r\n  Campaign, Map, PlayMap, Token, Player \r\n} from \"../models\";\r\n// import Login from \"../components/Login\";\r\n// import LoadPlayMap from \"../components/LoadPlayMap\";\r\nimport DisplayPlayMap from \"../components/DisplayPlayMap\";\r\nimport API from \"../smartAPI\";\r\n\r\nconst HEADER_HEIGHT = 50;\r\n\r\nconst Heading = styled.div`\r\n  background: dimgrey;\r\n  color: white;\r\n  height: ${HEADER_HEIGHT}px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 10px;\r\n`;\r\n\r\ninterface AppState {\r\n  tokens: Token[],\r\n  selectedPlayMap: PlayMap,\r\n  players: Player[],\r\n  maps: Map[],\r\n  playMaps: PlayMap[],\r\n  campaigns: Campaign[],\r\n  selectedCampaign: Campaign,\r\n  selectedPlayer: Player\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  tokens: state.app.tokens,\r\n  selectedPlayMap: state.app.selectedPlayMap,\r\n  playMaps: state.app.playMaps,\r\n  players: state.app.players,\r\n  maps: state.app.maps,\r\n  campaigns: state.app.campaigns,\r\n  selectedCampaign: state.app.selectedCampaign,\r\n  selectedPlayer: state.app.selectedPlayer\r\n});\r\n\r\nconst mapDispatch = {\r\n  // setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  // setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  // addPlayMap: (playMap: PlayMap) => ({ type: 'ADD_PLAYMAP', payload: playMap }),\r\n  selectPlayMap: (playMap: PlayMap) => ({ type: 'SELECT_PLAYMAP', payload: playMap }),\r\n  selectCampaign: (campaign: Campaign) => ({ type: 'SELECT_CAMPAIGN', payload: campaign }),\r\n  selectPlayer: (player: Player) => ({ type: 'SELECT_PLAYER', payload: player }),\r\n  updatePlayMap: (playMap: PlayMap) => ({ type: 'UPDATE_PLAYMAP', payload: playMap }),\r\n  updateCampaign: (campaign: Campaign) => ({ type: 'UPDATE_CAMPAIGN', payload: campaign })\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ninterface MatchProps extends RouteComponentProps<MatchParams> {\r\n}\r\n\r\ntype Props = MatchProps & PropsFromRedux & {\r\n}\r\nexport interface IPlayerPageStateType {\r\n  mode: string;\r\n  // selectedTokenID: number;\r\n  // hoveredTokenID: number;\r\n  // deselecting: boolean;\r\n  countdown: number;\r\n  refreshing: boolean;\r\n  running: boolean;\r\n  lastRefresh: Date;\r\n}\r\nclass PlayerPage extends Component<\r\n  Props,\r\n  IPlayerPageStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: \"load\",\r\n      // selectedTokenID: -1,\r\n      // hoveredTokenID: -1,\r\n      // deselecting: false\r\n      countdown: 2,\r\n      refreshing: false,\r\n      running: false,\r\n      lastRefresh: new Date()\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {}\r\n\r\n  // loadPlayMap = () => {\r\n  //   this.setState({\r\n  //     mode: \"load\"\r\n  //   })\r\n  // }\r\n\r\n  // selectPlayMap = (playMap: PlayMap) => {\r\n  //   this.props.selectPlayMap(playMap);\r\n  //   this.setState({ mode: \"main\" });\r\n  // }\r\n\r\n  endTurn = () => {\r\n    const newCampaign = this.props.selectedCampaign;\r\n    newCampaign.turnPlayerID = null;\r\n    this.api.updateCampaign(newCampaign.toDBObj()).then((res: any) => {\r\n      newCampaign.lastUpdate = res.lastUpdate;\r\n      this.props.updateCampaign(newCampaign);\r\n    });\r\n  }\r\n\r\n  changePlayer = (e: any) => {\r\n    const playerFinder = this.props.players.filter(p => p._id === e.target.value);\r\n    if (playerFinder.length === 1) {\r\n      this.props.selectPlayer(playerFinder[0]);\r\n      // this.setState({});\r\n    }\r\n  }\r\n\r\n  renderHeader = () => {\r\n    return (\r\n      <Heading key=\"heading\"> \r\n        Dead Simple VTT\r\n        { this.props.selectedCampaign && \r\n          <span>\r\n            &nbsp;-&nbsp;{this.props.selectedCampaign.name}\r\n          </span>\r\n        }\r\n        { this.props.selectedPlayer ? \r\n          <span>\r\n            &nbsp;-&nbsp;{this.props.selectedPlayer.username}\r\n          </span>\r\n          :\r\n          <span>\r\n            &nbsp;-&nbsp;\r\n            <FormControl variant=\"outlined\">\r\n              <InputLabel id=\"player\">Select a Player</InputLabel>\r\n              <Select\r\n                labelId=\"player\"\r\n                id=\"player\"\r\n                value={this.props.selectedPlayer}\r\n                onChange={this.changePlayer}\r\n                label=\"Select a Player\"\r\n              >\r\n                { this.props.players.map((p, key) => {\r\n                  return (<MenuItem key={key} value={p._id}>{p.username}</MenuItem>);\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </span>\r\n        }\r\n        { this.props.selectedCampaign && this.props.selectedPlayer &&\r\n          this.props.selectedCampaign.turnPlayerID === this.props.selectedPlayer._id &&\r\n          <div style={{ fontWeight: \"bold\" }}>\r\n            &nbsp;It's your turn! \r\n            <Button onClick={this.endTurn}>End Turn</Button>\r\n          </div>\r\n        }\r\n        {/* <Button onClick={this.loadPlayMap}>Load PlayMap</Button> */}\r\n      </Heading>\r\n    );\r\n  };\r\n\r\n  renderMain = () => {\r\n    // if (!this.props.selectedPlayer) {\r\n    //   return (\r\n    //     <Login key=\"main\"/>\r\n    //   );\r\n    // } else \r\n    if (this.props.selectedPlayMap) {\r\n      return (\r\n        <DisplayPlayMap key=\"main\" mode=\"Player\" />\r\n      );\r\n    } else {\r\n      return (\r\n        <div key=\"main\" style={{ margin: 10 }}>\r\n          Load a Map to see it here\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  load = (id: string) => {\r\n    setTimeout(() => {\r\n      if (this.props.playMaps && this.props.campaigns) {\r\n        const campaignFinder = this.props.campaigns.filter(c => c._id === id);\r\n        if (campaignFinder.length === 1) {\r\n          const campaign = campaignFinder[0];\r\n          this.props.selectCampaign(campaign);\r\n        }\r\n      } else {\r\n        this.load(id);\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  refresh = () => {\r\n    this.setState({ \r\n      lastRefresh: new Date() \r\n    }, () => {\r\n      setTimeout(this.refresh, this.state.countdown * 1000);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.props.selectedPlayer && this.props.selectedCampaign && !this.state.running) {\r\n      this.setState({\r\n        running: true\r\n      }, () => {\r\n        setTimeout(this.refresh, this.state.countdown * 1000);\r\n      });\r\n      return (<div>Loading</div>);\r\n    } else if (this.props.selectedCampaign === null) {\r\n      const { id } = this.props.match.params;\r\n      this.load(id);\r\n      return (<div>Loading</div>);\r\n    } else {\r\n      return [\r\n        this.renderHeader(),\r\n        this.renderMain()\r\n      ];\r\n    }\r\n  }\r\n}\r\n\r\nexport default connector(PlayerPage);\r\n","import React, { Component } from \"react\";\r\n// import { Redirect } from \"react-router-dom\";\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { \r\n  Route, \r\n  Switch } from \"react-router-dom\";\r\n  // import { connect } from \"react-redux\";\r\nimport HomePage from \"./Home\";\r\nimport DMPage from \"./DMPage\";\r\nimport PlayerPage from \"./PlayerPage\";\r\nimport { \r\n  Campaign, Map, Token, \r\n  PlayMap, PlayToken, \r\n  Mask, MaskPoint, \r\n  FavoriteToken,\r\n  Player \r\n} from \"../models\";\r\nimport API from \"../smartAPI\";\r\n// import Grid from \"@material-ui/core/Grid\";\r\n// import {\r\n//   // toggleLogin\r\n// } from \"../redux/actions/index\";\r\n\r\ninterface AppState {\r\n  maps: Map[] | null\r\n}\r\n\r\ninterface RootState {\r\n  app: AppState\r\n}\r\n\r\nconst mapState = (state: RootState) => ({\r\n  maps: state.app.maps\r\n})\r\n\r\nconst mapDispatch = {\r\n  setCampaigns: (campaigns: Campaign[]) => ({ type: 'SET_CAMPAIGNS', payload: campaigns }),\r\n  setMaps: (maps: Map[]) => ({ type: 'SET_MAPS', payload: maps }),\r\n  setPlayMaps: (playMaps: PlayMap[]) => ({ type: 'SET_PLAYMAPS', payload: playMaps }),\r\n  setTokens: (tokens: Token[]) => ({ type: 'SET_TOKENS', payload: tokens }),\r\n  setFavoriteTokens: (favoriteTokens: FavoriteToken[]) => ({ type: 'SET_FAVORITETOKENS', payload: favoriteTokens }),\r\n  setPlayers: (players: Player[]) => ({ type: 'SET_PLAYERS', payload: players }),\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & { }\r\n\r\nexport interface IMainPageStateType { }\r\n\r\nclass MainPage extends Component<\r\n  Props,\r\n  IMainPageStateType\r\n> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      version: \"0\"\r\n    };\r\n    this.api = API.getInstance();\r\n  }\r\n\r\n  api: any;\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  createPlayToken = (t: any, tokens: Token[], players: Player[]): (PlayToken | null) => {\r\n    if (t === null || t === undefined) {\r\n      return null;\r\n    } else {\r\n      let token: (Token | null) = null;\r\n      const tokenFinder: Token[] = tokens.filter(t2 => t2._id === t.tokenID);\r\n      if (tokenFinder.length === 1) {\r\n        token = tokenFinder[0];\r\n      }\r\n      const playerFinder: Player[] = players.filter(p => p._id === t.ownerID);\r\n      let owner: (Player | null) = null;\r\n      if (playerFinder.length === 1) {\r\n        owner = playerFinder[0];\r\n      }\r\n      return new PlayToken(t.id, t.name, token, t.x, t.y, t.size, t.stealth, t.moving, owner);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.props.maps === null) {\r\n      this.api.getAllVTT(0, true).then((res: any) => {\r\n        if (res !== undefined && res.error === undefined) {\r\n          const campaigns: Campaign[] = [];\r\n          res.campaigns.forEach((c: any) => {\r\n            campaigns.push(new Campaign(c._id, c.name, c.selectedPlayMapID, c.turnPlayerID, c.lastUpdate));\r\n          });\r\n          this.props.setCampaigns(campaigns);\r\n          const players: Player[] = [];\r\n          res.players.forEach((p: any) => {\r\n            const campaignFinder = campaigns.filter(c => c._id === p.campaignID);\r\n            let campaign: (Campaign | null) = null;\r\n            if (campaignFinder.length === 1) {\r\n              campaign = campaignFinder[0];\r\n            }\r\n            players.push(new Player(p._id, p.email, p.username, p.password, campaign, new Date(Date.parse(p.lastPing)), p.refreshIndex));\r\n          });\r\n          this.props.setPlayers(players);\r\n          const maps: Map[] = [];\r\n          res.maps.forEach((m: any) => {\r\n            maps.push(new Map(m._id, m.name, m.category, m.fileName, m.gridWidth, m.gridHeight));\r\n          });\r\n          this.props.setMaps(maps);\r\n          const tokens: Token[] = [];\r\n          res.tokens.forEach((t: any) => {\r\n            tokens.push(new Token(t._id, t.category, t.fileName));\r\n          });\r\n          this.props.setTokens(tokens);\r\n          const favoriteTokens: FavoriteToken[] = [];\r\n          res.favoriteTokens.forEach((t: any) => {\r\n            const tokenFinder: Token[] = tokens.filter(t2 => t2._id === t.tokenID);\r\n            if (tokenFinder.length === 1)\r\n            {\r\n              const token: Token = tokenFinder[0];\r\n              favoriteTokens.push(new FavoriteToken(t._id, t.campaignID, t.name, token, t.size));\r\n            }\r\n          });\r\n          this.props.setFavoriteTokens(favoriteTokens);\r\n          const playMaps: PlayMap[] = [];\r\n          res.playMaps.forEach((m: any) => {\r\n            const mapFinder: Map[] = maps.filter(m2 => m2._id === m.mapID);\r\n            if (mapFinder.length === 1)\r\n            {\r\n              const map: Map = mapFinder[0];\r\n              const playTokens: PlayToken[] = [];\r\n              m.playTokens.forEach((t: any) => {\r\n                const playToken: (PlayToken | null) = this.createPlayToken(t, tokens, players);\r\n                if (playToken) {\r\n                  playTokens.push(playToken);\r\n                }\r\n                // if (t.tokenID === null) {\r\n                //   playTokens.push(new PlayToken(t.id, t.name, null, t.x, t.y, t.size, t.stealth));\r\n                // } else {\r\n                //   const tokenFinder: Token[] = tokens.filter(t2 => t2._id === t.tokenID);\r\n                //   if (tokenFinder.length === 1)\r\n                //   {\r\n                //     const token: Token = tokenFinder[0];\r\n                //     playTokens.push(new PlayToken(t.id, t.name, token, t.x, t.y, t.size, t.stealth));\r\n                //   }\r\n                // }\r\n              });\r\n              const movingToken: (PlayToken | null) = this.createPlayToken(m.movingToken, tokens, players);\r\n              const lightMasks: Mask[] = [];\r\n              m.lightMasks.forEach((l: any) => {\r\n                const points: MaskPoint[] = [];\r\n                l.points.forEach((p: any) => {\r\n                  points.push(new MaskPoint(p.id, l.id, \"light\", p.x, p.y));\r\n                });\r\n                lightMasks.push(new Mask(l.id, \"light\", points));\r\n              });\r\n              const darkMasks: Mask[] = [];\r\n              m.darkMasks.forEach((l: any) => {\r\n                const points: MaskPoint[] = [];\r\n                l.points.forEach((p: any) => {\r\n                  points.push(new MaskPoint(p.id, l.id, \"dark\", p.x, p.y));\r\n                });\r\n                darkMasks.push(new Mask(l.id, \"dark\", points));\r\n              });\r\n              const fogMasks: Mask[] = [];\r\n              m.fogMasks.forEach((l: any) => {\r\n                const points: MaskPoint[] = [];\r\n                l.points.forEach((p: any) => {\r\n                  points.push(new MaskPoint(p.id, l.id, \"fog\", p.x, p.y));\r\n                });\r\n                fogMasks.push(new Mask(l.id, \"fog\", points));\r\n              });\r\n              playMaps.push(new PlayMap(m._id, m.campaignID, m.name, map, playTokens, movingToken, lightMasks, darkMasks, fogMasks, m.zoom, m.dx, m.dy));\r\n            }\r\n          });\r\n          this.props.setPlayMaps(playMaps);\r\n        }\r\n      });\r\n      return (\r\n        <div key=\"main\">Loading Data</div>\r\n      )\r\n    } else {\r\n      return (\r\n        <Switch>\r\n          <Route exact path=\"/vtt\" component={HomePage} />\r\n          <Route exact path=\"/vtt/home\" component={HomePage} />\r\n          <Route exact path=\"/vtt/dm\" component={DMPage} />\r\n          <Route path=\"/vtt/player/:id\" component={PlayerPage} />\r\n        </Switch>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// const MainPage = connect(mapStateToProps, mapDispatchToProps)(Page);\r\n// export default MainPage;\r\n\r\nexport default connector(MainPage);","\nimport React, { Component } from \"react\";\nimport \"./assets/css/material-dashboard-react.css\";\nimport {\n  BrowserRouter as Router\n} from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport MainPage from \"./views/MainPage\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Helmet } from 'react-helmet';\n// import Box from \"@material-ui/core/Box\";\nimport { \n  // setWidth,\n  // setAPI\n} from \"./redux/actions/index\";\n// import API from \"./smartAPI\";\nimport \"./assets/css/quill.snow.css\";\n// import SkullIcon from \"./assets/img/skullicon.ico\";\n\nconst mapStateToProps = (state: any) => {\n  return {\n    // menuOpen: state.app.menuOpen,\n    // api: state.app.api\n  };\n};\nfunction mapDispatchToProps(dispatch: any) {\n  return {\n    // setWidth: (width: any) => dispatch(setWidth(width)),\n    // setAPI: (api: any) => dispatch(setAPI(api))\n  };\n}\ninterface IProps {\n  // menuOpen: boolean;\n  // api: any;\n  // setWidth: (width: any) => void;\n  // setAPI: (api: any) => void;\n}\n\ninterface IState {\n  version: string;\n  width: number;\n  innerWidth: number;\n  marginLeft: number;\n}\nclass AppLayout extends Component<IProps, IState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      version: \"0\",\n      width: 0,\n      innerWidth: 0,\n      marginLeft: 220\n    };\n    // this.api = API.getInstance();\n  }\n\n  api: any;\n\n  props: any;\n\n  componentDidMount() {\n    this.updateDimensions();\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateDimensions.bind(this));\n  }\n\n  updateDimensions() {\n    // let w = window.innerWidth;\n    // if (w >= 600) {\n    //   w -= 200;\n    //   this.props.setWidth(w);\n    //   this.setState({ width: w, marginLeft: 220, innerWidth: window.innerWidth });\n    // }\n    // else {\n      // this.props.setWidth(w);\n    //   this.setState({ width: w, marginLeft: 0, innerWidth: window.innerWidth });\n    // }\n  }\n\n  // getFaviconEl() {\n  //   return document.getElementById(\"favicon\");\n  // }\n\n  render() {\n    // const favicon = this.getFaviconEl(); // Accessing favicon element\n    // if (favicon) {\n    //   const favicon2 = favicon as HTMLLinkElement;\n    //   favicon2.href = \"/skullicon.ico\"; // SkullIcon;\n    // }\n    // if (this.props.api === null) {\n    //   this.props.setAPI(this.api);\n    // }\n    return (\n      <Router>\n        <Helmet>\n          <link rel=\"icon\" id=\"favicon\" href=\"/skullicon.ico\" />\n          <title>Dead Simple VTT</title>\n        </Helmet>\n        <Grid container>\n          <Grid item xs={12}\n            // style={{ \n            //   marginLeft: `${this.props.menuOpen ? this.state.marginLeft + 10 : 10}px`, \n            //   width: `${this.props.menuOpen ? this.state.width - 20 : this.state.innerWidth - 20}px`,\n            //   marginRight: \"10px\",\n            //   marginTop: \"10px\" \n            // }}\n            >\n            <MainPage />\n          </Grid>\n        </Grid>\n      </Router>\n    );\n  }\n}\n\nconst App = connect(mapStateToProps, mapDispatchToProps)(AppLayout);\nexport default App;\n\n","import {\r\n  SET_MAPS,\r\n  ADD_MAP,\r\n  UPDATE_MAP,\r\n  // DELETE_MAP,\r\n  SET_TOKENS,\r\n  ADD_TOKEN,\r\n  UPDATE_TOKEN,\r\n  // DELETE_TOKEN,\r\n  SET_CAMPAIGNS,\r\n  ADD_CAMPAIGN,\r\n  UPDATE_CAMPAIGN,\r\n  // DELETE_CAMPAIGN,\r\n  SELECT_CAMPAIGN,\r\n  SET_PLAYERS,\r\n  ADD_PLAYER,\r\n  UPDATE_PLAYER,\r\n  // DELETE_PLAYER,\r\n  SELECT_PLAYER,\r\n  SET_PLAYMAPS,\r\n  ADD_PLAYMAP,\r\n  UPDATE_PLAYMAP,\r\n  // DELETE_PLAYMAP,\r\n  SELECT_PLAYMAP,\r\n  SET_FAVORITETOKENS,\r\n  ADD_FAVORITETOKEN,\r\n  UPDATE_FAVORITETOKEN,\r\n  // DELETE_FAVORITETOKEN,\r\n  TOGGLE_IS_ON\r\n} from \"../constants/actionTypes\";\r\n\r\nconst initialState = {\r\n  maps: null,\r\n  tokens: null,\r\n  campaigns: null,\r\n  players: null,\r\n  playMaps: null,\r\n  favoriteTokens: null,\r\n  selectedCampaign: null,\r\n  selectedPlayer: null,\r\n  selectedPlayMap: null,\r\n  isOn: true\r\n};\r\nfunction rootReducer(state = initialState, action) {\r\n  if (action.type === SET_MAPS) {\r\n    return Object.assign({}, state, {\r\n      maps: action.payload\r\n    });\r\n  } else if (action.type === SET_TOKENS) {\r\n    return Object.assign({}, state, {\r\n      tokens: action.payload\r\n    });\r\n  } else if (action.type === SET_CAMPAIGNS) {\r\n    return Object.assign({}, state, {\r\n      campaigns: action.payload\r\n    });\r\n  } else if (action.type === SET_PLAYERS) {\r\n    return Object.assign({}, state, {\r\n      players: action.payload\r\n    });\r\n  } else if (action.type === SET_PLAYMAPS) {\r\n    return Object.assign({}, state, {\r\n      playMaps: action.payload\r\n    });\r\n  } else if (action.type === SET_FAVORITETOKENS) {\r\n    return Object.assign({}, state, {\r\n      favoriteTokens: action.payload\r\n    });\r\n  } else if (action.type === ADD_MAP) {\r\n    const maps = state.maps;\r\n    maps.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      maps\r\n    });\r\n  } else if (action.type === ADD_TOKEN) {\r\n    const tokens = state.tokens;\r\n    tokens.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      tokens\r\n    });\r\n  } else if (action.type === ADD_CAMPAIGN) {\r\n    const campaigns = state.campaigns;\r\n    campaigns.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      campaigns\r\n    });\r\n  } else if (action.type === ADD_PLAYER) {\r\n    const players = state.players;\r\n    players.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      players\r\n    });\r\n  } else if (action.type === ADD_PLAYMAP) {\r\n    const playMaps = state.playMaps;\r\n    playMaps.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      playMaps\r\n    });\r\n  } else if (action.type === ADD_FAVORITETOKEN) {\r\n    const favoriteTokens = state.favoriteTokens;\r\n    favoriteTokens.push(action.payload);\r\n    return Object.assign({}, state, {\r\n      favoriteTokens\r\n    });\r\n  } else if (action.type === UPDATE_MAP) {\r\n    const maps = state.maps;\r\n    const mapFinder = maps.filter(m => m._id === action.payload._id);\r\n    if (mapFinder.length === 1) {\r\n      const map = mapFinder[0];\r\n      map.name = action.payload.name;\r\n      map.file = action.payload.file;\r\n      map.gridWidth = action.payload.gridWidth;\r\n      map.gridHeight = action.payload.gridHeight;\r\n    }\r\n    return Object.assign({}, state, {\r\n      maps\r\n    });\r\n  } else if (action.type === UPDATE_TOKEN) {\r\n    const tokens = state.tokens;\r\n    const tokenFinder = tokens.filter(t => t._id === action.payload._id);\r\n    if (tokenFinder.length === 1) {\r\n      const token = tokenFinder[0];\r\n      token.file = action.payload.file;\r\n    }\r\n    return Object.assign({}, state, {\r\n      tokens\r\n    });\r\n  } else if (action.type === UPDATE_CAMPAIGN) {\r\n    const campaigns = state.campaigns;\r\n    let selectedCampaign = state.selectedCampaign;\r\n    // let selectedPlayMap = state.selectedPlayMap;\r\n    const campaignFinder = campaigns.filter(m => m._id === action.payload._id);\r\n    if (campaignFinder.length === 1) {\r\n      const campaign = campaignFinder[0];\r\n      campaign.name = action.payload.name;\r\n      campaign.selectedPlayMapID = action.payload.selectedPlayMapID;\r\n      campaign.turnPlayerID = action.payload.turnPlayerID;\r\n      campaign.lastUpdate = action.payload.lastUpdate;\r\n\r\n      if (selectedCampaign._id === campaign._id) {\r\n        selectedCampaign = campaign;\r\n        // if (selectedCampaign.selectedPlayMapID === \"\") {\r\n        //   selectedPlayMap = null;\r\n        // } else if (selectedPlayMap === null || selectedCampaign.selectedPlayMapID !== selectedPlayMap._id) {\r\n        //   const playMapFinder = state.playMaps.filter(m => m._id === selectedCampaign.selectedPlayMapID);\r\n        //   if (playMapFinder.length === 1) {\r\n        //     selectedPlayMap = playMapFinder[0];\r\n        //   } else {\r\n        //     selectedPlayMap = null;\r\n        //   }\r\n        // }\r\n      }\r\n    }\r\n    return Object.assign({}, state, {\r\n      campaigns,\r\n      selectedCampaign,\r\n      // selectedPlayMap\r\n    });\r\n  } else if (action.type === UPDATE_PLAYER) {\r\n    const players = state.players;\r\n    let selectedPlayer = state.selectedPlayer;\r\n    const playerFinder = players.filter(m => m._id === action.payload._id);\r\n    if (playerFinder.length === 1) {\r\n      const player = playerFinder[0];\r\n      player.email = action.payload.email;\r\n      player.username = action.payload.username;\r\n      player.password = action.payload.password;\r\n      player.campaign = action.payload.campaign;\r\n      \r\n      if (selectedPlayer._id === player._id) {\r\n        selectedPlayer = player;\r\n      }\r\n    }\r\n    return Object.assign({}, state, {\r\n      players,\r\n      selectedPlayer\r\n    });\r\n  } else if (action.type === UPDATE_PLAYMAP) {\r\n    const playMaps = state.playMaps;\r\n    let selectedPlayMap = state.selectedPlayMap;\r\n    const playMapFinder = playMaps.filter(m => m._id === action.payload._id);\r\n    if (playMapFinder.length === 1) {\r\n      const playMap = playMapFinder[0];\r\n      playMap.campaignID = action.payload.campaignID;\r\n      playMap.name = action.payload.name;\r\n      playMap.map = action.payload.map;\r\n      playMap.tokens = action.payload.tokens;\r\n      playMap.lightMasks = action.payload.lightMasks;\r\n      playMap.darkMasks = action.payload.darkMasks;\r\n      playMap.fogMasks = action.payload.fogMasks;\r\n      playMap.zoom = action.payload.zoom;\r\n      playMap.dx = action.payload.dx;\r\n      playMap.dy = action.payload.dy;\r\n\r\n      if (selectedPlayMap._id === playMap._id) {\r\n        selectedPlayMap = playMap;\r\n      }\r\n    }\r\n    return Object.assign({}, state, {\r\n      playMaps,\r\n      selectedPlayMap\r\n    });\r\n  } else if (action.type === UPDATE_FAVORITETOKEN) {\r\n    const favoriteTokens = state.favoriteTokens;\r\n    const favoriteTokenFinder = favoriteTokens.filter(t => t._id === action.payload._id);\r\n    if (favoriteTokenFinder.length === 1) {\r\n      const favoriteToken = favoriteTokenFinder[0];\r\n      favoriteToken.file = action.payload.file;\r\n    }\r\n    return Object.assign({}, state, {\r\n      favoriteTokens\r\n    });\r\n  } else if (action.type === SELECT_CAMPAIGN) {\r\n    const selectedCampaign = action.payload;\r\n    let selectedPlayMap = state.selectedPlayMap;\r\n    if (selectedCampaign.selectedPlayMapID === \"\") {\r\n      selectedPlayMap = null;\r\n    } else if (state.playMaps && (selectedPlayMap === null || selectedCampaign.selectedPlayMapID !== selectedPlayMap._id)) {\r\n      const playMapFinder = state.playMaps.filter(m => m._id === selectedCampaign.selectedPlayMapID);\r\n      if (playMapFinder.length === 1) {\r\n        selectedPlayMap = playMapFinder[0];\r\n      } else {\r\n        selectedPlayMap = null;\r\n      }\r\n    }\r\n    return Object.assign({}, state, {\r\n      selectedCampaign,\r\n      selectedPlayMap\r\n    });\r\n  } else if (action.type === SELECT_PLAYER) {\r\n    return Object.assign({}, state, {\r\n      selectedPlayer: action.payload\r\n    });\r\n  } else if (action.type === SELECT_PLAYMAP) {\r\n    return Object.assign({}, state, {\r\n      selectedPlayMap: action.payload\r\n    });\r\n  } else if (action.type === TOGGLE_IS_ON) {\r\n    return Object.assign({}, state, {\r\n      isOn: !state.isOn\r\n    });\r\n  }\r\n  return state;\r\n}\r\n\r\nexport default rootReducer;\r\n\r\nexport const login = (user, history) => {};\r\n\r\nexport const logout = history => {};\r\n","import { createStore, combineReducers } from \"redux\";\r\nimport { sessionService, sessionReducer } from \"redux-react-session\";\r\nimport rootReducer from \"../reducers/index\";\r\nconst reducers = {\r\n  app: rootReducer,\r\n  session: sessionReducer\r\n};\r\n\r\nconst reducer = combineReducers(reducers);\r\nconst store = createStore(reducer);\r\nconst validateSession = session => {\r\n  // check if your session is still valid\r\n  return true;\r\n};\r\nconst options = {\r\n  refreshFromLocalStorage: true,\r\n  refreshOnCheckAuth: true,\r\n  redirectPath: \"/home\",\r\n  driver: \"COOKIES\",\r\n  validateSession\r\n};\r\n\r\nsessionService\r\n  .initSessionService(store, options)\r\n  .then(() =>\r\n    console.log(\r\n      \"Redux React Session is ready and a session was refreshed from your storage\"\r\n    )\r\n  )\r\n  .catch(() =>\r\n    console.log(\r\n      \"Redux React Session is ready and there is no session in your storage\"\r\n    )\r\n  );\r\nexport default store;\r\n","\r\nexport const SET_MAPS = \"SET_MAPS\";\r\nexport const ADD_MAP = \"ADD_MAP\";\r\nexport const UPDATE_MAP = \"UPDATE_MAP\";\r\nexport const DELETE_MAP = \"DELETE_MAP\";\r\nexport const SET_TOKENS = \"SET_TOKENS\";\r\nexport const ADD_TOKEN = \"ADD_TOKEN\";\r\nexport const UPDATE_TOKEN = \"UPDATE_TOKEN\";\r\nexport const DELETE_TOKEN = \"DELETE_TOKEN\";\r\nexport const SET_CAMPAIGNS = \"SET_CAMPAIGNS\";\r\nexport const ADD_CAMPAIGN = \"ADD_CAMPAIGN\";\r\nexport const UPDATE_CAMPAIGN = \"UPDATE_CAMPAIGN\";\r\nexport const DELETE_CAMPAIGN = \"DELETE_CAMPAIGN\";\r\nexport const SELECT_CAMPAIGN = \"SELECT_CAMPAIGN\";\r\nexport const SET_PLAYERS = \"SET_PLAYERS\";\r\nexport const ADD_PLAYER = \"ADD_PLAYER\";\r\nexport const UPDATE_PLAYER = \"UPDATE_PLAYER\";\r\nexport const DELETE_PLAYER = \"DELETE_PLAYER\";\r\nexport const SELECT_PLAYER = \"SELECT_PLAYER\";\r\nexport const SET_PLAYMAPS = \"SET_PLAYMAPS\";\r\nexport const ADD_PLAYMAP = \"ADD_PLAYMAP\";\r\nexport const UPDATE_PLAYMAP = \"UPDATE_PLAYMAP\";\r\nexport const DELETE_PLAYMAP = \"DELETE_PLAYMAP\";\r\nexport const SELECT_PLAYMAP = \"SELECT_PLAYMAP\";\r\nexport const SET_FAVORITETOKENS = \"SET_FAVORITETOKENS\";\r\nexport const ADD_FAVORITETOKEN = \"ADD_FAVORITETOKEN\";\r\nexport const UPDATE_FAVORITETOKEN = \"UPDATE_FAVORITETOKEN\";\r\nexport const DELETE_FAVORITETOKEN = \"DELETE_FAVORITETOKEN\";\r\n\r\nexport const TOGGLE_IS_ON = \"TOGGLE_IS_ON\";\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport ANBApp from \"./ANB/App\";\nimport ANBstore from \"./ANB/redux/store/index\";\nimport VTTApp from \"./VTT/App\";\nimport VTTstore from \"./VTT/redux/store/index\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\n\nif (window.location.href.includes(\"/vtt\")) {\n  ReactDOM.render(\n    <Provider store={VTTstore}>\n      <VTTApp />\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n} else {\n  ReactDOM.render(\n    <Provider store={ANBstore}>\n      <ANBApp />\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n}\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}