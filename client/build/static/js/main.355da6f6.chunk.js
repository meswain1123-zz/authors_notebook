(this.webpackJsonpanb=this.webpackJsonpanb||[]).push([[0],Array(41).concat([function(e,t){e.exports="data:image/png;base64,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"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/under_construction_white.378ee889.png"},,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAARAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMi4xMwAA/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBggLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoK/8AAEQgACgAKAwEhAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/n/ooAKKAP/Z"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},,,,,function(e,t,a){e.exports=a.p+"static/media/Basement-Study.a68280cb.jpg"},function(e,t,a){e.exports=a.p+"static/media/Castle-Wall.4fa9735d.jpg"},function(e,t,a){e.exports=a.p+"static/media/Cave-Lair.e48ad0f2.jpg"},function(e,t,a){e.exports=a.p+"static/media/Crossroads.b70bce05.jpg"},function(e,t,a){e.exports=a.p+"static/media/Farmstead.1802a7fa.jpg"},function(e,t,a){e.exports=a.p+"static/media/Forest-Lair.8706baa2.jpg"},function(e,t,a){e.exports=a.p+"static/media/Monster-Lair.906aa148.jpg"},function(e,t,a){e.exports=a.p+"static/media/Snow-Village.e08e1847.jpg"},function(e,t,a){e.exports=a.p+"static/media/Swamp-Lair.625e577e.jpg"},function(e,t,a){e.exports=a.p+"static/media/Tavern.9c60ea48.jpg"},function(e,t,a){e.exports=a.p+"static/media/Underground-Complex.ef43ba2b.jpg"},function(e,t,a){e.exports=a.p+"static/media/Urban-Lair.f9494f9d.jpg"},function(e,t,a){e.exports=a.p+"static/media/Wagon-Trail-and-Shrine.ad53d0a1.jpg"},function(e,t,a){e.exports=a.p+"static/media/Waterfall-Cavern.8d0ffe05.jpg"},function(e,t,a){e.exports=a.p+"static/media/Abandoned Warehouse.ffbf8673.png"},function(e,t,a){e.exports=a.p+"static/media/DaggerAlley.469bcf6d.png"},function(e,t,a){e.exports=a.p+"static/media/UnderDaggerAlley.4588f8f4.png"},function(e,t,a){e.exports=a.p+"static/media/TrollSkullAlleyBasement.a7ce5ec0.png"},function(e,t,a){e.exports=a.p+"static/media/TrollSkullAlleyHouse.9a7bd522.png"},function(e,t,a){e.exports=a.p+"static/media/WeddingRing.cade6e88.png"},function(e,t,a){e.exports=a.p+"static/media/cragmaw castle.d024ee0d.jpg"},function(e,t,a){e.exports=a.p+"static/media/cragmaw hideout.3f3519e6.jpg"},function(e,t,a){e.exports=a.p+"static/media/phandalin.82f129f7.jpg"},function(e,t,a){e.exports=a.p+"static/media/redbrand hideout.325d5f0b.jpg"},function(e,t,a){e.exports=a.p+"static/media/ruins of thundertree.141d208c.jpg"},function(e,t,a){e.exports=a.p+"static/media/sword coast.981afcfa.jpg"},function(e,t,a){e.exports=a.p+"static/media/wave echo cave.cd71945f.jpg"},function(e,t,a){e.exports=a.p+"static/media/Waterdeep.6201085e.jpg"},function(e,t,a){e.exports=a.p+"static/media/waterdeep_with_wards.4b54ded3.jpg"},function(e,t,a){e.exports=a.p+"static/media/restaurant.96632202.jpg"},function(e,t,a){e.exports=a.p+"static/media/CrimsonBrush.601bd196.png"},function(e,t,a){e.exports=a.p+"static/media/GraveyardPath.3556d85c.png"},function(e,t,a){e.exports=a.p+"static/media/GraveyardPumpkinPatch.b6c0d1c1.jpg"},function(e,t,a){e.exports=a.p+"static/media/MausoleumCrypts.6707dc41.jpg"},function(e,t,a){e.exports=a.p+"static/media/Bald.741a853e.png"},function(e,t,a){e.exports=a.p+"static/media/Bard.94af444d.png"},function(e,t,a){e.exports=a.p+"static/media/BlondeHair.4fcc70e3.png"},function(e,t,a){e.exports=a.p+"static/media/BlondeWoman.9762d835.png"},function(e,t,a){e.exports=a.p+"static/media/BlueSkin.df8f5004.png"},function(e,t,a){e.exports=a.p+"static/media/BlueSkin2.2603a58a.png"},function(e,t,a){e.exports=a.p+"static/media/DarkSkin.e48fb0f3.png"},function(e,t,a){e.exports=a.p+"static/media/DarkSkinF.ad2949fb.png"},function(e,t,a){e.exports=a.p+"static/media/Dragonborn.ab16b141.png"},function(e,t,a){e.exports=a.p+"static/media/DragonbornFighter.c21c5f7d.png"},function(e,t,a){e.exports=a.p+"static/media/DwarfMale.2c31b739.png"},function(e,t,a){e.exports=a.p+"static/media/ElvenFemale.4b6ed688.png"},function(e,t,a){e.exports=a.p+"static/media/ElvenFighter.855d86de.png"},function(e,t,a){e.exports=a.p+"static/media/Eyebrows.9e1fe3ec.png"},function(e,t,a){e.exports=a.p+"static/media/Eyebrows2.e428b8ea.png"},function(e,t,a){e.exports=a.p+"static/media/Fedora.ae081514.png"},function(e,t,a){e.exports=a.p+"static/media/GnomeMale.0a1ba63d.png"},function(e,t,a){e.exports=a.p+"static/media/GoliathBarb.33cfc33d.png"},function(e,t,a){e.exports=a.p+"static/media/GreyHair.c1b9e380.png"},function(e,t,a){e.exports=a.p+"static/media/HalflingMale.639efdd9.png"},function(e,t,a){e.exports=a.p+"static/media/Hood.9db2c27f.png"},function(e,t,a){e.exports=a.p+"static/media/Hood2.70d96a27.png"},function(e,t,a){e.exports=a.p+"static/media/Human.52eda96a.png"},function(e,t,a){e.exports=a.p+"static/media/HumanFemale.81c31b30.png"},function(e,t,a){e.exports=a.p+"static/media/HumanFemale2.a4ff5aca.png"},function(e,t,a){e.exports=a.p+"static/media/HumanFighterF.533cf974.png"},function(e,t,a){e.exports=a.p+"static/media/HumanFighterM.77a0b7de.png"},function(e,t,a){e.exports=a.p+"static/media/HumanMale.69efd308.png"},function(e,t,a){e.exports=a.p+"static/media/HumanMale2.19c85bbc.png"},function(e,t,a){e.exports=a.p+"static/media/idk.8cdd4c94.png"},function(e,t,a){e.exports=a.p+"static/media/Knight.7d208560.png"},function(e,t,a){e.exports=a.p+"static/media/OldWoman.b670e555.png"},function(e,t,a){e.exports=a.p+"static/media/OldWoman2.28ceea26.png"},function(e,t,a){e.exports=a.p+"static/media/RedHair.75d09fc6.png"},function(e,t,a){e.exports=a.p+"static/media/RedSkin.bd87a612.png"},function(e,t,a){e.exports=a.p+"static/media/Samurai.cbbf87ae.png"},function(e,t,a){e.exports=a.p+"static/media/Scarf.e6d10ad6.png"},function(e,t,a){e.exports=a.p+"static/media/TieflingFemale.1ee22c7c.png"},function(e,t,a){e.exports=a.p+"static/media/Wizard.6cbb3902.png"},function(e,t,a){e.exports=a.p+"static/media/Rat.7b728608.png"},function(e,t,a){e.exports=a.p+"static/media/Wererat.d2f36299.png"},function(e,t,a){e.exports=a.p+"static/media/Werewolf.17e32e13.png"},function(e,t,a){e.exports=a.p+"static/media/Rug.47a56dde.png"},function(e,t,a){e.exports=a.p+"static/media/PitTrapWSpikes.9c811852.png"},function(e,t,a){e.exports=a.p+"static/media/SewerGrate.0e429248.png"},function(e,t,a){e.exports=a.p+"static/media/Air Genasi Ranger F.4972c7bc.png"},function(e,t,a){e.exports=a.p+"static/media/Air Genasi Ranger M.3f727552.png"},function(e,t,a){e.exports=a.p+"static/media/bugbear.7a07c7b8.png"},function(e,t,a){e.exports=a.p+"static/media/drow archer.d2412394.png"},function(e,t,a){e.exports=a.p+"static/media/drow fighter.79c9dc2b.png"},function(e,t,a){e.exports=a.p+"static/media/drow fighter 2.53631671.png"},function(e,t,a){e.exports=a.p+"static/media/drow rogue.6822a210.png"},function(e,t,a){e.exports=a.p+"static/media/drow witch.260bda57.png"},function(e,t,a){e.exports=a.p+"static/media/goblin archer.08b5e9f0.png"},function(e,t,a){e.exports=a.p+"static/media/Goblin Rogue.d14b69de.png"},function(e,t,a){e.exports=a.p+"static/media/goblin spearman.1ffe71b9.png"},function(e,t,a){e.exports=a.p+"static/media/hobgoblin.8b7bf17b.png"},function(e,t,a){e.exports=a.p+"static/media/Human Hexblade.3e28b0be.png"},function(e,t,a){e.exports=a.p+"static/media/Tabaxi Monk.15bfcf2a.png"},function(e,t,a){e.exports=a.p+"static/media/Tiefling Cleric.fcb5150d.png"},function(e,t,a){e.exports=a.p+"static/media/Tiefling Paladin.f80ed937.png"},function(e,t,a){e.exports=a.p+"static/media/Tiefling Swordsman.4e4713ca.png"},function(e,t,a){e.exports=a.p+"static/media/White Dragonborn Mage.51ad7179.png"},function(e,t,a){e.exports=a.p+"static/media/snow leopard.5c2bb400.png"},function(e,t,a){e.exports=a.p+"static/media/spider.518aaa52.png"},function(e,t,a){e.exports=a.p+"static/media/ash-zombie.580732f6.png"},function(e,t,a){e.exports=a.p+"static/media/beholder.d522d997.png"},function(e,t,a){e.exports=a.p+"static/media/beholder 2.3fb0bf14.png"},function(e,t,a){e.exports=a.p+"static/media/cube.116623f2.png"},function(e,t,a){e.exports=a.p+"static/media/drider.3e0f29bf.png"},function(e,t,a){e.exports=a.p+"static/media/flameskull.537ccc42.png"},function(e,t,a){e.exports=a.p+"static/media/skeleton.6a558d8e.png"},function(e,t,a){e.exports=a.p+"static/media/venomfang.6b1b3e1f.png"},function(e,t,a){e.exports=a.p+"static/media/zombie.ec028f6d.png"},function(e,t,a){e.exports=a.p+"static/media/twig blight.2d640bad.png"},function(e,t,a){e.exports=a.p+"static/media/Web 1 3x3 A.0849f71d.png"},function(e,t,a){e.exports=a.p+"static/media/Vampire.374a43d6.png"},function(e,t,a){e.exports=a.p+"static/media/Wererat Knife.edf56994.png"},function(e,t,a){e.exports=a.p+"static/media/Wererat Mage.ee8919cf.png"},function(e,t,a){e.exports=a.p+"static/media/Wererat Rogue.faf2db90.png"},function(e,t,a){e.exports=a.p+"static/media/Wererat Rogue 2.998733f8.png"},function(e,t,a){e.exports=a.p+"static/media/Werewolf 2.91ad1914.png"},function(e,t,a){e.exports=a.p+"static/media/Werewolf 3.5322f5cf.png"},function(e,t,a){e.exports=a.p+"static/media/Werewolf 4.0b66c026.png"},function(e,t,a){e.exports=a.p+"static/media/Clue1.e2041204.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnMAAAJzCAMAAABTbmU8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADGUExURQAAAP///+Pj44uLi39/f4+Pj/Pz89vb21xcXEBAQCgoKBgYGCAgIExMTNfX1+/v75eXl3R0dGRkZIeHh8vLy/f395+fn3h4eGBgYIODg8PDw6enp7+/v2xsbHBwcKOjo/v7+9PT07Ozs+fn57e3t5OTk6urq8fHx9/f33x8fBwcHCQkJAQEBDg4OFhYWEhISAwMDCwsLM/PzxAQEDw8POvr66+vrxQUFAgICERERFBQUFRUVDQ0NLu7uzAwMGhoaJubmwAAAHqhhZMAAABCdFJOU///////////////////////////////////////////////////////////////////////////////////////AEQWEAAAAAAJcEhZcwAADsIAAA7CARUoSoAAACVASURBVHhe7Z1pe9S4tkYrDIGEQJgSAh0gEIYAoTvMgQaa8///1C3tLduSLNWUnPdp7lnrA8RDVdnby5ptTf4DoAXnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQM1kD0IJzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudATeHchYuXSi6vx20DVy5f3di8Nrm2tXH94o24LmX75q3bd+7GhZSd3Xt79x/EhcD6bvyVSzd3/9ivfaTFzu7Dvb1Hjw/i4pQn8ZuqPI07NTi8uLe3dy89sgoX7sQvq7Hr+1y5/PDh5UP/2whneH93PznOEQfPnk+/4MVOXDRe3vevTfkjbvvdyZ07mlS4EzdGtl9txg3O61vbcUvPxbD+TVxIeRE2HMeFwJuwYuDa7WdZ5Gdwzz9xKy5OeetrGqQejImnNFu6P32nBs9sn7/Cn7ftT2P7xDZO3rS/+koMwrvk1G/6qoL3cetvTu7cq3hyGXtxo3Hw/ENcPfDhYiHKpbB2Ky6k7Nr+cWHKS1vO+BATjDkcXIu7Dz8dr26D/bhXlQdxp6txuc5G3KuOH7ftk0TsuW2bctKS/uBd3GOSpMUf46qcxULzryd3bi+eXEZy167dKBKmyMdPcbuzsHO+XPDnODMf8yzuPPkcV6ytfYlr6sxMwm7HnU5n/vQqzg0RfRXXlAwxSJTaiqtyHsetvzkLOPcibpzyMqYuk9N3X/f2rr/t07zN7C4+m3OTzQXy16tx38m3uGJt7e+4psrJLJt2el1npiS34k5Vjj3jazt3rVGk+x63z3eumVT+ZlSce3uUkZzofsy+3t6MRbiDH1ePfdVmek2XdM7+PDh6//hb/LJLtmYW66e+59T+Pok9iAccMP/SE5mZgH22bwp8jWvqxO8KWJF1EhcC8TCqzn23uCX3bsLdsMlKgSPn5ofh96Ti3EZcGLH9OmyenF6Oy8b7n7Zy8jAuB1ZxzjjycszpUVxu8jjs5r7fjKsyZp9Iybew9z/hn+MLcdU8yiPvqDq3YXn3X3FVju1gdSucq2BbJ1+K2tNBzNOSQvrKzq2te+UzFbjK17DX3evh349xVcZSzn0KieZrTzovxnXzWM45ryvV7qTt8KvXDmw7zo3wYvvpqDB+4InT97g4ZXXn1t7bmuS7qlwIKdwbT+2ql3Ip536FnR95efBnXDeP5Zzztph7cV2K5dH31sK/ODfGwlnLyg69cDW06J7BOW8lOIkLLexKvYqluvtxZcpSztlPvo+lugXbwJZ0zg74daUWYe0ARzgXFwpuhG2Td7Xa1yPb9E9cOptzVqyqpl0JVoZ8EmuvtcbnZZyzhvDpl+xYSb+WGFVY0rlDK3qOO0Ms75gW9MJ/ODfCWwqG5rAET+iG5oizOGefTdLMGk/CLiEX9KTppa9NWca5+2Hf0HpmJf3XvnIeSzrn1ZTrceWArZ5WaMN/ODfCmua+1BuZrEg/NLuexTlPM0fdaRnW7xWyVG9Ye+RrU5ZxzrK30G38I/wx+eFr57Csc0/D/6NasZVLQ8Nd2IpzJd4V2+gc8h6evg3lLM7ZRbsWFxpYm82V8JclTZUbYQnnrIHMqg7en5YIM4NlnfPvLi2yvsaQm4f/ca7Em5Dq7Zqe2Q1CnsG5bevamG2LpUfeROJJ07ictIRzlrB6PcT+PFlolMGyznnaXGTcJqIlfmEjzpV4ntcoZ32yje/i0lmcsyOY07FoiVtMVC3J+9P/TljcuQPLnj3T867+hYYMLe3clfBHHHzS8UdYZYU824hzBV5ka/X4WbWsv4tXd85b3GY3kln9sisa2a0w7ppf3DkraHXtyla0G5f0KyztnG/521Z22CpLpMMfOFdiI27SoW8ZFqP+u1Z17on3Ox7PHsZmqUPXMWqlsfRqOYs7Z80tXUnUylfH+SCZOss7Z584Tm9aK5F4o134a+Tc3n7K/5MO/ikV54o+/rjJolDzyPCuiLiwrHO7gZv3/v5pqeXkZM6YXuvx+hUXPGkadc0v7Jw1K/cmeLk0609usLxz3vyXDoB9GFZ4Yhb+GjmXs2Ajzm9AxbmCOBLXfGheRe9z7ZoClnQu5/WTuLHBp3AkQ1rkw0zLRoiFnbMjGJS1xua3cWEWyzvnrd1JVNaTMkLYNMe5ee3kvw/znYtXzv5ujqP1D3ZROYNzb27OqzZau8wwas7L5sX4+cWds2Jqn2h6+7A3w8xmBee8o38YCmHjz2Ph0TbNca68r35blnOuPhxnig+h7HRZ3bnN+WUpG3mSVGwtaSprHYs6dyHsNwzB8+XmkN6EFZzzIvFQx7bFWI4If85xrm8V+O2Z71xM2+zv5ngPC3X/XWdI567Nrj/EdC2tqProyaJrflHn7MNDohkLprVDL1jFOfuxXnBL9rZic3b4e+Tc/1C9ddPK9D0xRtaM1SzHWkn+LG0lT1688oHuJ3Oks/Jbmsd70pQ8/xVY1DlLJNPWQO9RmSf+as5ZSbQfoWdPkXVlgvD3/7Jz9UvlqX1cGGF1st6yFZybcsEqpJMvs/taze5spIElTcU4oQWds9F62aMS7sUwRKbFKs55TWvT/7ZxEX2FOWzAuRJ/ArTRSLRuG/vG1NWc60qFMy+4dRXk3VM25LLoml/QORsrk1eMrFLxZW7/10rOWftzTETvhD/7JmLbgHMF3hrSGNHolcc+RpfDUq2f3q5U0rBcXLl1T0xnDZu0BofTrRR/Fi25zlMWdM56zj7E73E8h68O2UpZybkD+z3bemCn2neFhQWcK/GieqMv0h8779tyWxfEC2NJAljuuG/LuT4Zw1OBJXnat5hzPkKgRlqtqLKSc97RfxoKD5bkDZEISzhX4tenoYM/o9k3OfiTE5VymZWbk0r/6MrZJcs6iHKGpwJHZOMCFnPO9qpiXsxiNec8P3g+/ct6+YZWRVuPcwXbYVNjYJt3eg5tZJ5c5WMoDHMzaeQbXTkv8bTHh8dnzGpkbYcLOee9UXWGZuI6qznnm6c3nY1GTO6tsIhzIyxc9YKOP8MQbl/H/ayEzApLyfrxlbOG0tYj7/5k3uRhbMXpsZpr1jW/kHM2iOX4V/ySHvuN6hOMCSs65x976ZWXZJCJrca5kvYwI+s4zLIj6ysYN3r4VyQPwo6vnFU/WkNDvYo6Hvfh35t2zS/knLXNjJ/c97R0Tu/mis7t2F33jxdLk6p2WMS5ER6uNDAdNj4ie5WOv6iraKdd27FqW1rYH185e7652cdmCdrYEn/mMO0kWcQ5b4obZ6JeZqw9wZiwonOeJZxYnSs21BlhGefGuEino6esvEb7Ie2C9iejj4u+cmu2y56YqVw5T2Xqveze5VCx3t8Ml7x+cRHnLEmtDJbzYl5qRIVVnfOib9YhEbC1ODdixwIxuZa/ye3AVSyetbZn6CY/s5dwekHpNK2UVq6c13nLJNKxUR+193V50pR0zS/inFVoxolm/PCcxx1Xdc4LrIFkZMHSzu2//XLys1UA+dezhHN9c9bDJEl7EF9lVVy793YnT04v9rWB2LOVB7Jy5bzdtN4RYH0htaYzT5qShr8FnPN2i1r91M+z8gRjwsrOeYF1SvYQh61Z2LkdawbP7t7fiWWcG17A9vHi07tHRy8/37fez7CiTHysa2fK9zvvD9cOjn7c8tLg5K+sSlq7cj4Is9b47PlS9fkcf2nh0DW/gHPtcej+WE7jUd7Iys55gXVKll3YmtK5jfge4Y7+zc5edGnWtP7tLOVcLLqNGSkXv2rEz7wuW7ty/iBt7SAaz9sEPGkaqjELOGeXtd7f4JWiSvviwMrOdU2MeXnRVpXOjejakGOGk+z/W7Gcc2s3Y3KVcXyr5sEdz14zrhY7Vq+cXbZKLcIfS65b4knT8HLh+c75c4X1hxp9W3NQdGB15+JbafOXjtmquc513xtff1w/+H8/Szq3dvhopNL1xlDuBy7PwJvRjVm9ct7aVo4278Z2NwLtj9/2LV7zT8TKCa33B3ujTlyosrpzXmDNahBj54YXvqZ0I268lWfRV0j968jDZnnn7MLz2tGdjUS775dmnPnLqz7mI3Dy7fO4gHQ3lP3LQU87NpByXIB+EEpC6QvtU25YAtxnh9YAllz6MVbdbp2qjdz80BDSeBliUGkgt2w5aZ2uRNSOrejeC7XZtBXqh8Wg4LQvAr4Kv542iP5WFLfqdv9i3Fmsv9i9f2/v1p3dZ3OfC3m/e+nW3r1Luy/rJfKd4WHGhAtHR7U+9unBtX8vfFNy6OvZi5BrHNZ/xPk0/baG3ZHp71UPZvrJ7GsrEa0FeXrKs38v59P+/tzQ/2upZA8A/1VwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQUzh34WKcc+XS7u7n/epL+O/ej3skVF6gv/389t7erX669Iydx/Fzl+6HX5k/h9CLuHuN+8VRvnz198bWh8nW5safu9VvPrwcP3np1+6LJ3FllbtxvyrFlCVXLl/d2Lw2uba1cf1iNs1Zg5fxay5durn7+UH7bdpTDh7c+7axdTLZerex9zh/+3UfyAp3poGZGbji3OcGbvtXuGD7s+YH2nkagvti9uu4c+d8DpqBd69Gb+L3iRFKRpMd+uTfjekcbHrXhK293ZnTpd6I+9V5G/cKvN/LJ+z/vjuK0I18govT78+bF9zmF2txnLzKf/tVvuvrWzMlmmKzASS83mvNaffyaj4PzNtkWqrZgflr7TD+VScN3I3bw7QKgXc3R4E7jLNGvRmmuCq5Eb/k3SwvC+d8rq2Mn4V1NoXqiNFsIz7tZX2+Z5/dreDbjHkmfK71FsP8Ep/+yX0K/Exm5jX6Sct6Tm83DInbG/S3ycHz8exAHy7Ovtf76Q0HvtaylUOb1CTnez9PxIu4ps7WwoHbfjgO3JtySvJ+dryT1nQOB/1ZjdOghNy5yglOToc5zwP1WYFGyZlNexmoBLIRiW/VrDywYOhe1CaGGk08Us7OE9is54Zxa4POuRvdRHs5H1tXxog7ZZyOJ437wyZsHNFNaPw0Ltd5c8bAPcxTq0GO8RxFzpAH5vOtFsx3bvrbcatRde5klDX2xlcmhGxF4kuZJHUc1iMf6aa1/9Xdqx/eXt/b+/qum0Bw8mcWu5pzky/V/KK6a8e1+K0vu0zp9N3Xvb3rb/vrtzmrnGp7fNkK2J/GSZk89EnLl7ffwin1qVHUYXZg9uKs9S3GgfseAvezD9zfWeAGOcqZizqGAsayzvnsVOtHDy53EwClobAQtWezjcTZHqe8iWsS3DnTdPvowdPnf3eX6TifeHhg+2jApst6FBcCMTBxzsXjb0/jivXdzplstrhkRq5PN57ejr/9oZa9hrl1Omw6wrdxIRCLc/vxsr69Gb/h4MfVeA03Z0zeZDt0JZIbj+MtWpSD4nTMx38+i+s//eqKNjEdSANj6y/GhUCxfW7gusmx1h9XA2dy+J1cn/LRZs/zmcpWc87Y93v4exKKxZyzKd9s7vlK1p44F/nRzalWm7a1oHEANgHXtCyepZUvYo0izbQS5wI7l/2DWWJeoQxNZNuu5OQ0meJresfFm3XGd9r2oRR8cNMTl+z8Y865ldUuduNNMr6qtnpUsB44a+A8AnbvZfMd99gmm83sLM7FqdvSn17IOZv28nTdrsc48GPnpjH35OKkWabrqR/AjqfrZSHq0Fd/SVYXzk3LTLbL8ZwGjoZztnrypagAHcRJWtuht82pIJdsTTpT6Lqd6WSjSIEvuOVbo0TUVi/tXAzc2/mB8whYYlbMyuhcCPJueXJ7FudiKJJZ+BZyzia1/eZVxPF8zxXn1tYeuHQ/R3uX1A/As6HNUSziTZPM7z9yLs7D2U1U2aDunE/GejoqDR54Hvg9Lo6xzakgO3Zep3Ep4DMXfx+59d4j1dUjemzt0s554N6Myp5HnsUlgfMI+FSg+eyzjqly5xyc8xae5PZbyLmrYafPsVRX1rnrzq098DR+RtCc6gFs23U4rcz1580Jifhj57xdZ5yGZdSd84JPpRgaG7NajW4VQSxmk+Ha+zd8qFREftmeo4K8rV3WOa9lHFeaxj+HDZMvQ5NPjIC1p+WzbBuetx2eg3M+fe67uDBlEefsRE6mR2utCKPMv+5cTFIrdY6c6gF4E2sxKarjZauhdDB2bu1rWHUtLjSoOudtstUW0DmJp23NBPHWpSEqvlxrljjwxpnyutrKZZ3z4lf1MD1wQwkzRqAlld3cfzY3J8x1zvoMkntqEedspulQ57G4jSaDbjgXWxRHyWJB9QCs9HFSbdr1+7VrF6g6Z6c9mVHLnFJ1ztuXq0fsydRJ60vtg5kgfvX7ZM3zsGvVlmVP6Mq5223lss5Z5e202qrjgRtOuYuABXA8cbx1PO2fi3N2NZPehEWcs3Qj1Ke9x+GXr+1pOBcL8/UJ9wdqB+DTpo/jENix3ONLXKo6590v4wNKqTpnZZ5xgdWwIExa/US2MRPE/B3mY/eSYn0i7XUrhpQ5gn1gSec8oa6H3AN32p9dFwFLUU7L+9u+aZrlnoNzO/YVySVawLnDEBK/EnYblVeq5dyOVdA/xKUWtQPwrLWRQnodsi/qVZzzRp3ZEz/XnPP41lWPx5S1oSTYxkyQb2HNUOnwrLXRSu4+F5fd1i3pnPcclIlCxAPXV8m7COxYtSzvnYq3zLRqcQ7OuR9JHWkB56z13GeL94b04mq2nIvXfk6jRe0AbtsHGz2chZAV53zMQVxoUHPO6yfjHivjiW1sCDkW5Mjy4uFKmoIf6kloTJgLIW3dks553bjW8jHFA9cL2UfALlNSxA+YiKEJ5ezOrVtx9TTxYwHnrPDpmYpXCYuCcNM5v+tanRGR2gHYL76OCyWeZb+KSzXn7MZtdehEas55PaFRN/1kG4tL02MbU0Hs+5Mcy4pzleqh4YEqGixs3ZLOWeCGDD3Hb6m+fbWPwF1bn7f12xGF2uKZndvxCnx/vabMd85u8E4AywWKwDed86ShWvscqB2AlW9ajWH+c71lY+e8NLhC+5xncdUC+BQ7qNaNYJ8cBNnx2siwwo0tfq/Hi/fpZZli65Z0zo6xZfaDsHFIqYcIWGUvv22tEBVMO6tzL7xS/jqtfNmR7+2nFFmnJfxd4derWHkzfdM5D1t+MiMqofML1Kp8eEWm7VysL9eHl/bUnLMPHseFEXagrRzbtkVBDp9d9lb/5Kz80rVC4TYUW23dcs554L7GpRI/hv6chwhYiSmrklvSZ+6u5tzmbuDyw788aJPNzKm4MmWoExqWK3QZzicrpuTVr7ZzVomYU3GthM7Ps5VQFUnGyDnv495sFJ06as7ZoTTzZO+KiAslti3ndVow9LS3SMl6qkbauuWcm232gW2tOOcXNS0DWYHa6kurOVewkTcxVZzL9TGjhnq8lYVfZxe07Zx9eXFhSyqh89s+X5dgW1vObXsxem6zYM05y5mah1vUl3NsW8bx87QO5DEqK4cd3ppQpE+2bjnn5gTOkoD+UiYRsFNLyjLbQUIvjJ6DcxvlsJWac1lcTfnhBrXWnLyKde7O+Rc2w51/a+bc9q6lyq2REgk15+yTrZppDGbtNKfYtoIPD4cqhIeteUq2tXY0yznngWs0lcRP9Ol4EgFvPBwqT5bZekzP7tx4UIgdR06Wu3hL4tB/58vZhfkvOVfrdzbsCHLnrm0Evvcn87HRzjLQdO6vuDDC61+NL7ZtI970cfOa6WznikKIrVvFudawXy8l9U9NJBHwTpKhMGPFUa/InkM697GslVWOPMMq2D/jQsBCnxU4286N/RzTDF2r8OMZ0fW45M4V/NnqohpoOtccO+I/FBdKbNs9q4L92N19dd1KSNM4ddmKpySjsSMRb4I6e3nOA5eMHcmxrf05pxGwemLoUTfsa2LjxGrOha/dufvrtpVWRiOs5zln5bc0Vj7yMH1gou2cbWgVaSOVA/A2ltbnPAr91rFzr6sPpxXUnLPyTqs1xAc4LNhWsnb4yK17Ha+jx6je9dUNw/Zm9x5bt5xzs9ut3exKW0kX0+7HrHgXy56rOxd46RX4oqQ6x7lPZmrq04FdmTQHajrnA6da6VWkcgB+nq1MrmhYKJw72fhjTo3VqTlnh9JKyTzRbtVq7ZOZIBd8wFo8M293bd1GNj6xvAq2bjnnPHDFWfUUx5BFwJomY7ZrfZ1dc/bZnFtbd+ny8eJznLP+kvwBQ6tUHCfJZdM5TxKX74dwV9PHNVO8AbUv7Zlzb/YCr+7vvlxIuCk15zw+jTbhddvYZ+kFtjEXxLPTODhmtg3VblJbt5xzHrhWm7Bfjj5wWQS8c8eLn9Y13Kl5RufW3luilY+nmeOcNUqd2PNMHZbOpZ3dTee8X3vGg66B2gHYT7SSFG+W7qNgzrUSkDY154pO8Bxvim5FyjYWgnh3s5foDiyrTcvFKXdsz+KHbd1yznngWqMqisBlEfCOfqtieoWi6wo7q3NxGGV2HrOdqz4ubSThazp3PaxfZVyJfXA0Ti/iAwD6jefonLcmN54b8vFwrd4N21gI4v2b8ea0zqSTRipsheZhlJET1i3rnAWulVL/aRv7wOURsGbNDyE5snykr0md2Tlr68u7S2c755JWGYaLtJyzckEzN+qoHYCPs6gP8PDy5HAO5+icF6sa3+WPsjWGbFQF8RJ9bIHwpur6tduxy1K+IsE+sKRzHrj6h7y3YQhcHgEv7IX7zQZr9gWiMzsXzzxtF57tnHfQVhmqBi3nPMdotb131A7Ai2xFPS5SDn48R+e2w7rGoHa/Jq3MsS6IrYx1Ns/Y6uMdPEEsL4KtXNI5D1y9QdxT8SFwRQRsSMp00bK2oS3s7M75ONJhYPcc57yKeNE6bBMswx9aDRrObVvFrfpwc0rtAPxJkvpHzbGkkfocnYvfXe0288JZ8wayrYUg3jEc0zlP9Otj0+1yH5e9amHlss554Opj072GNASuiICPrrvhgzWH5uGzO+dRTSudM52zZHH8FI0P1OmPo+Gct9s3Gyg7qgfgZbbaYfmPJXXa83TOe6hqiVm8mM0byD5YCOIpcldP9ApKbZyxJ06jMoitXdK5GLhaO+AocEUEPOu95YO7h26wc3DO68RJ78gs57zoNG5fK5ow68759RvdvSOqB+DDMD6M8+t1H6iUtPqep3Nee6tdaC+U1HP7gG0uPufV9i7VdAOvjZOgT16AGdVObO2yznngTsdjs9d98HQSuDICVsX4YlWlpC/mHJzzqG4NVaRZzvkNWGk7sChZJSdQdS6+wqHV2zNQPwCP0Luy6nrgr8F7m1TxztO5+ETy6ej9GF4W+tC+gWx7LsiVooDgedvbMneNj2uPDmU152Lg3pR1nQOrGmeBKyPgN4WldkmT6jk4F2/Y4aaa5ZxlB7UHVL0629UrK84d+s9kJccG9QN44sp+zE0+dOWyR4bP1Tl/+n5yLY/xQXy5zYzWbdueCbJupbTkzDwJmvyVi3tkx195E9aKzsXAvc2/71MlcKMIxCE5aQ2i4tzNzdMvX7N0aK5zXoEfCg8znFs352tdV95s142DKJ1bf/bQPllJpyo0DsBr/ZOTZBTazi/L64vE81ydi80lk8nDxIwH3kzSHH8bsB0SQXYue9dXWg+K9+GHX8Mprd/03LxWObH1SzvXB+7yEPudP/xg8sCNItA3jKWjZUvnvFyVFXnnOueJ71DMsiPf8DfS9vjx1sahR7ymFRNwd+6RffLR3nW/vwPX59VZA43Q7XRvyTq5+mv/ydGV/T9uW141JS8hn69zsX405ePFp3ePjl5+vt+1F32cdQPZHt8sBFNuf40qHacJ5nZ6Sjemp/R4rzul2o1tG5Z3rg/c6bebP54cHe3/8TDeqkXgRhFwvaakqWHpXHyFXlpCmO+ct6f3x2pHPsI229Wst0h5+SbmNe7ciONxPGo0Qre27m3qY4p9z9m5eGpjZirngow4zpu11zsdSqpPzdqW5Z1b2/Ea8piiNjuOgD+DlHd0l87FZDTNuuc757X+vnWt7ly4hj70pV4J8G2x5bzu3KwXCqe0Qrd2YEdfcq3smjpv59a67C7j+NbsYoKXogp+lk/9r1d12Kp3uNi2FZxbO6i8hjnUSOPmjnEEvFEj/83SOa+MZ89/z3cuNuF0VTO7ZCNCju6NhI0XyPkd65mrFxEzvtxO0+eZNEM3LTt4yTfh9NXo0p+7c2uHj0bX7Pq89+gNBYqezV+V3tUHo3if3C9rshHbuopz08CN8ojj8ZvfxxHwRo2+PcIonfO2jKwTPXfO8omygfBJSOiOO+ceVKI1OQ3PO1gm3Hpo63O4LKfxStzrCgzTZGjr7cY/u3Me3c8I4SnyoIGX97yFwTi9/qvSwG51ynroZ1ENTcfRnY1Eu++X5ifZP9IwftnauH65ZemDR0mH4sm3X60eXCt4HzdeNhGYEzhvyDROvz6vtPJUImC9lXnOZu9QPBlSkIOQAZ9mw65y58L7Z8fndHB0dNS4tzI+1T7cEd5sOzu7WZTD2V909PjXtGby6vLug8YxV89xPnM+tv5i9/69vVt3dp+1G+VW5cruzekpXbr8uHVKzpzAzNt+oQvcfmOvSgRqQblQ2HJlv5hypXAO4L8OzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6Bmsl/ALTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoEanAM1OAdqcA7U4ByowTlQg3OgBudADc6BGpwDNTgHanAO1OAcqME5UINzoAbnQA3OgRqcAzU4B2pwDtTgHKjBOVCDc6AG50ANzoGW//zn/wAUJ5AdVkpu8wAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnsAAAJ7CAMAAACs6qelAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADGUExURQAAAP///8/Pz4ODg2BgYIeHh9fX1+Pj44+Pj39/f5+fn6+vr7+/v9vb27e3t+vr6/f392xsbJubm9PT06Ojo/Pz87u7u3R0dFhYWEBAQCAgIAgICBQUFCwsLERERMfHx/v7++fn52hoaIuLi5OTk7Ozs+/v78vLyxwcHDQ0NJeXl3h4eN/f36urq0hISAQEBAwMDHx8fFxcXDg4ODw8PHBwcCgoKExMTGRkZBgYGCQkJMPDw6enpxAQEDAwMFBQUFRUVAAAABad2v8AAABCdFJOU///////////////////////////////////////////////////////////////////////////////////////AEQWEAAAAAAJcEhZcwAADsIAAA7CARUoSoAAAB2aSURBVHhe7ZxpW9TI14dBcQFBUMEFXFgUdQZtdRT3ceb7f6l/cs5JUlsa57n0+b257xdeJt2dpKvuOnVqaVb+BdCAe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK3AMVuAcqcA9U4B6owD1QgXugAvdABe6BCtwDFbgHKnAPVOAeqMA9UIF7oAL3QAXugQrcAxW4BypwD1TgHqjAPVCBe6AC90AF7oEK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"},function(e,t,a){e.exports=a.p+"static/media/Glyph.5993ac4e.png"},function(e,t,a){e.exports=a.p+"static/media/Map.292f5a52.png"},function(e,t,a){e.exports=a.p+"static/media/DuergarMale.3d9b37b3.png"},function(e,t,a){e.exports=a.p+"static/media/Birdman.ddcd6b44.png"},function(e,t,a){e.exports=a.p+"static/media/Daggers.4859a4fe.png"},function(e,t,a){e.exports=a.p+"static/media/TrollSkull.d2dd64ab.png"},function(e,t,a){e.exports=a.p+"static/media/Crimson Brush.04b7b847.png"},function(e,t,a){e.exports=a.p+"static/media/Book.7bb750a3.png"},function(e,t,a){e.exports=a.p+"static/media/Chair.f219050b.png"},function(e,t,a){e.exports=a.p+"static/media/Chest.c13a46b1.png"},function(e,t,a){e.exports=a.p+"static/media/Pumpkin.3e3f323e.png"},function(e,t,a){e.exports=a.p+"static/media/Wall.2977fb54.png"},function(e,t,a){e.exports=a.p+"static/media/Cake.f5c12594.png"},function(e,t,a){e.exports=a.p+"static/media/Jack.06daf12d.png"},function(e,t,a){e.exports=a.p+"static/media/Marty.f4855d67.png"},function(e,t,a){e.exports=a.p+"static/media/Harvey.785616bf.png"},function(e,t,a){e.exports=a.p+"static/media/rug.655cb4e1.png"},function(e,t,a){e.exports=a.p+"static/media/Tabaxi Mummy.19aa8c76.png"},function(e,t,a){e.exports=a.p+"static/media/Gravedigger.e2bd769d.png"},function(e,t,a){e.exports=a.p+"static/media/Dog.d1d7d8aa.png"},function(e,t){e.exports="data:image/png;base64,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"},function(e,t,a){e.exports=a.p+"static/media/bird.964af789.png"},function(e,t,a){e.exports=a.p+"static/media/Ram.9cd9a94b.png"},function(e,t,a){e.exports=a.p+"static/media/Sheep.711f4666.png"},function(e,t,a){e.exports=a.p+"static/media/Sheep2.59cefe38.png"},function(e,t,a){e.exports=a.p+"static/media/Wizard.3691ff2d.png"},function(e,t,a){e.exports=a.p+"static/media/Blue Woman.9b4329ca.png"},function(e,t,a){e.exports=a.p+"static/media/White Woman.beecb9f4.png"},function(e,t,a){e.exports=a.p+"static/media/Heart Woman.8fa06750.png"},function(e,t,a){e.exports=a.p+"static/media/Lizardfolk.7c7d2fde.png"},function(e,t,a){e.exports=a.p+"static/media/Screaming.afa347b0.png"},function(e,t,a){e.exports=a.p+"static/media/Skeletal.8a2e243e.png"},function(e,t,a){e.exports=a.p+"static/media/Specter.75c7e9e6.png"},function(e,t,a){e.exports=a.p+"static/media/Wraith.628cf9f9.png"},function(e,t,a){e.exports=a.p+"static/media/Wraith2.1484f2e0.png"},function(e,t,a){e.exports=a.p+"static/media/Blood Splatter.c6521ec8.png"},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(517)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=(a(386),a(8)),l=a(9),c=a(12),u=a(11),p=(a(387),a(22)),d=a(14),m=a(567),f=a(568),h=a(555),g=a(522),y=a(558),b=a(195),v=a.n(b),A=a(196),E=a.n(A);function T(e){return{type:"LOGOUT",payload:e}}function D(e){return{type:"SET_WORLDS",payload:e}}function w(e){return{type:"SET_TEMPLATES",payload:e}}function k(e){return{type:"SET_ALL_USERS",payload:e}}function x(e){return{type:"ADD_AND_SELECT_WORLD",payload:e}}function I(e){return{type:"UPDATE_WORLD",payload:e}}function S(e){return{type:"SET_PUBLIC_WORLDS",payload:e}}function C(e){return{type:"SELECT_WORLD",payload:e}}function O(e){return{type:"SET_ATTRIBUTES",payload:e}}function N(e){return{type:"SET_TYPES",payload:e}}function P(e){return{type:"ADD_TYPE",payload:e}}function W(e){return{type:"SET_THINGS",payload:e}}function M(e){return{type:"ADD_THING",payload:e}}function j(e){return{type:"UPDATE_TYPE",payload:e}}function V(e){return{type:"UPDATE_SELECTED_TYPE",payload:e}}function L(e){return{type:"UPDATE_THING",payload:e}}function F(e){return{type:"UPDATE_SELECTED_THING",payload:e}}function B(e){return{type:"TOGGLE_MENU",payload:e}}function _(e){return{type:"TOGGLE_LOGIN",payload:e}}function z(e){return{type:"NOT_FROM_LOGIN",payload:e}}function q(e){return{type:"SET_FOLLOWING_WORLDS",payload:e}}var U=a(553),R=a(593),H=a(10),K=a(2),X=a.n(K),G=a(3);function Z(e){this.name="UnauthorizedError",this.message=e}Z.prototype=new Error;var Q=function(){var e;return{getInstance:function(){return e||(e=new Y),e}}}(),Y=function e(){var t=this;Object(o.a)(this,e),this.logErrorReason=function(e){return console.log("Response error reason:",e),Promise.reject(e)},this.checkStatus=function(e){if(e.status>=200&&e.status<300)return e;if(401===e.status){var t=new Z(e.statusText);return t.response=e,Promise.reject(t)}var a=new Error(e.statusText);return a.response=e,Promise.reject(a)},this.getVersion=Object(G.a)(X.a.mark((function e(){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/version");case 3:return a=e.sent,e.abrupt("return",t.processResponse(a));case 7:return e.abrupt("return",{version:"0.0.1"});case 8:case"end":return e.stop()}}),e)}))),this.getAllUsers=Object(G.a)(X.a.mark((function e(){var a,n=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=5;break}return e.abrupt("return",t.getAllUsersFromAPI());case 5:if(null===(a=t.getSessionData("allUsers"))){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",t.getAllUsersFromAPI());case 11:case"end":return e.stop()}}),e)}))),this.getAllUsersFromAPI=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/user/getAllUsers");case 3:return a=e.sent,n=t.processResponse(a,null,"allUsers"),e.abrupt("return",n);case 8:return e.abrupt("return",[{_id:-1,OwnerID:-1,Name:"Alice in Wonderland",Public:!0}]);case 9:case"end":return e.stop()}}),e)}))),this.login=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return n&&(r={body:a,expiresAt:"never"},localStorage.setItem("loginUser",JSON.stringify(r))),e.next=4,t.postData("/api/user/login",a);case 4:return i=e.sent,e.abrupt("return",t.processResponse(i,null,"user",n));case 8:return e.abrupt("return",{_id:"-1",email:"fake@fakemail.com",username:"Liar Liar"});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.logout=function(){var e=Object(G.a)(X.a.mark((function e(a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=4;break}return e.next=3,t.postData("/api/user/logout");case 3:localStorage.removeItem("user");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/user/register",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.confirmEmail=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/user/confirmEmail",{code:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return",{_id:"-1",email:"fake@fakemail.com",username:"Liar Liar"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendReset=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/user/sendReset",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.checkResetPasswordCode=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/user/checkResetPasswordCode",{code:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.resetPassword=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/user/resetPassword",{code:a,newPassword:n});case 3:return r=e.sent,e.abrupt("return",t.processResponse(r));case 7:return e.abrupt("return",{_id:"-1",email:"fake@fakemail.com",username:"Liar Liar"});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.emailTest=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/user/emailTest",a);case 3:return n=e.sent,e.abrupt("return",t.processResponse(n));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateUser=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/user/update",a);case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/user/update",a);case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",{_id:"-1",email:"fake@fakemail.com",username:"Liar Liar"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createTemplate=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/createTemplate",{template:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/createTemplate",{template:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTemplates=Object(G.a)(X.a.mark((function e(){var a,n=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=5;break}return e.abrupt("return",t.getTemplatesFromAPI());case 5:if(null===(a=t.getSessionData("templates"))){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",t.getTemplatesFromAPI());case 11:case"end":return e.stop()}}),e)}))),this.getTemplatesFromAPI=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getTemplates/");case 3:return a=e.sent,n=function(){var e=Object(G.a)(X.a.mark((function e(){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getTemplates/");case 4:return a=e.sent,e.abrupt("return",t.processResponse(a,null,"templates"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(a,n,"templates"));case 8:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Alice"}]);case 9:case"end":return e.stop()}}),e)}))),this.getWorlds=Object(G.a)(X.a.mark((function e(){var a,n,r,i,s,o=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>0&&void 0!==o[0]&&o[0],e.prev=1,e.next=4,t.getPublicWorlds(a);case 4:return n=e.sent,e.next=7,t.getWorldsForUser(a);case 7:return r=e.sent,e.next=10,t.getTemplates(a);case 10:return i=e.sent,e.next=13,t.getAllUsers(a);case 13:return s=e.sent,e.abrupt("return",{publicWorlds:n,userWorlds:r,templates:i,allUsers:s});case 17:return e.prev=17,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:e.t0});case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),this.getWorldsForUser=Object(G.a)(X.a.mark((function e(){var a,n=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=5;break}return e.abrupt("return",t.getWorldsForUserFromAPI());case 5:if(null===(a=t.getSessionData("worlds"))){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",t.getWorldsForUserFromAPI());case 11:case"end":return e.stop()}}),e)}))),this.getWorldsForUserFromAPI=Object(G.a)(X.a.mark((function e(){var a,n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=9;break}return e.next=3,t.fetchData("/api/world/getWorldsForUser");case 3:return a=e.sent,n=function(){var e=Object(G.a)(X.a.mark((function e(){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getWorldsForUser");case 4:return a=e.sent,e.abrupt("return",t.processResponse(a,null,"worlds"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=t.processResponse(a,n,"worlds"),e.abrupt("return",r);case 9:return e.abrupt("return",[{_id:-1,OwnerID:-1,Name:"Alice in Wonderland",Public:!0}]);case 10:case"end":return e.stop()}}),e)}))),this.getPublicWorlds=Object(G.a)(X.a.mark((function e(){var a,n=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=5;break}return e.abrupt("return",t.getPublicWorldsFromAPI());case 5:if(null===(a=t.getSessionData("publicWorlds"))){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",t.getPublicWorldsFromAPI());case 11:case"end":return e.stop()}}),e)}))),this.getPublicWorldsFromAPI=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getPublicWorlds");case 3:return a=e.sent,n=function(){var e=Object(G.a)(X.a.mark((function e(){var a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getPublicWorlds");case 4:return a=e.sent,e.abrupt("return",t.processResponse(a,null,"publicWorlds"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(a,n,"publicWorlds"));case 8:return e.abrupt("return",[{_id:-1,OwnerID:-1,Name:"Alice in Wonderland",Public:!0}]);case 9:case"end":return e.stop()}}),e)}))),this.getWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r,i,s,o,l,c=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,e.next=4,t.getAttributesForWorld(a,n);case 4:return r=(r=e.sent).attributes,e.next=8,t.getTypesForWorld(a,n);case 8:return i=e.sent,e.next=11,t.getThingsForWorld(a,n);case 11:return s=e.sent,o={},l={},r.forEach((function(e){e.TypeIDs=[],o[e._id]=e,l[e.Name]=e})),i.forEach((function(e){e.Supers=[],e.SuperIDs.forEach((function(t){e.Supers=e.Supers.concat(i.filter((function(e){return e._id===t})))})),e.AttributesArr=[],e.Attributes.forEach((function(t){var a=o[t.attrID];void 0===a||(a.TypeIDs.push(e._id),e.AttributesArr.push({index:e.AttributesArr.length,Name:a.Name.trim(),AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,attrID:t.attrID,TypeIDs:a.TypeIDs}))}));var t={};void 0!==e.Defaults&&e.Defaults.forEach((function(e){t[e.attrID]=e})),e.DefaultsHash=t})),s.forEach((function(e){e.Types=[],e.TypeIDs.forEach((function(t){e.Types=e.Types.concat(i.filter((function(e){return e._id===t})))}))})),e.abrupt("return",{attributes:r,attributesByID:o,attributesByName:l,types:i,things:s});case 20:return e.prev=20,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:e.t0});case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),this.getWorldByTypeID=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r,i,s,o,l,c,u=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],e.prev=1,e.next=4,t.getWorldIDByTypeID(a);case 4:return r=(r=e.sent).worldID,e.next=8,t.getAttributesForWorld(r,n);case 8:return i=(i=e.sent).attributes,e.next=12,t.getTypesForWorld(r,n);case 12:return s=e.sent,e.next=15,t.getThingsForWorld(r,n);case 15:return o=e.sent,l={},c={},i.forEach((function(e){e.TypeIDs=[],l[e._id]=e,c[e.Name]=e})),s.forEach((function(e){e.Supers=[],e.SuperIDs.forEach((function(t){e.Supers=e.Supers.concat(s.filter((function(e){return e._id===t})))})),e.AttributesArr=[],e.Attributes.forEach((function(t){var a=l[t.attrID];void 0===a||(a.TypeIDs.push(e._id),e.AttributesArr.push({index:e.AttributesArr.length,Name:a.Name.trim(),AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,attrID:t.attrID,TypeIDs:a.TypeIDs}))}));var t={};void 0!==e.Defaults&&e.Defaults.forEach((function(e){t[e.attrID]=e})),e.DefaultsHash=t})),o.forEach((function(e){e.Types=[],e.TypeIDs.forEach((function(t){e.Types=e.Types.concat(s.filter((function(e){return e._id===t})))}))})),e.abrupt("return",{worldID:r,attributes:i,attributesByID:l,attributesByName:c,types:s,things:o});case 24:return e.prev=24,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:e.t0});case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}(),this.getWorldIDByTypeID=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getWorldIDByTypeID/".concat(a));case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getWorldIDByTypeID/".concat(a));case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Character"}]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWorldByThingID=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r,i,s,o,l,c,u=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],e.prev=1,e.next=4,t.getWorldIDByThingID(a);case 4:return r=(r=e.sent).worldID,e.next=8,t.getAttributesForWorld(r,n);case 8:return i=(i=e.sent).attributes,e.next=12,t.getTypesForWorld(r,n);case 12:return s=e.sent,e.next=15,t.getThingsForWorld(r,n);case 15:return o=e.sent,l={},c={},i.forEach((function(e){e.TypeIDs=[],l[e._id]=e,c[e.Name]=e})),s.forEach((function(e){e.Supers=[],e.SuperIDs.forEach((function(t){e.Supers=e.Supers.concat(s.filter((function(e){return e._id===t})))})),e.AttributesArr=[],e.Attributes.forEach((function(t){var a=l[t.attrID];void 0===a||(a.TypeIDs.push(e._id),e.AttributesArr.push({index:e.AttributesArr.length,Name:a.Name.trim(),AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,attrID:t.attrID,TypeIDs:a.TypeIDs}))}));var t={};void 0!==e.Defaults&&e.Defaults.forEach((function(e){t[e.attrID]=e})),e.DefaultsHash=t})),o.forEach((function(e){e.Types=[],e.TypeIDs.forEach((function(t){e.Types=e.Types.concat(s.filter((function(e){return e._id===t})))}))})),e.abrupt("return",{worldID:r,attributes:i,attributesByID:l,attributesByName:c,types:s,things:o});case 24:return e.prev=24,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{error:e.t0});case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}(),this.getWorldIDByThingID=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getWorldIDByThingID/".concat(a));case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getWorldIDByThingID/".concat(a));case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Character"}]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/createWorld",{world:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/createWorld",{world:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.deleteData("/api/world/deleteWorld",{worldID:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.deleteData("/api/world/deleteWorld",{worldID:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/updateWorld",{world:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/updateWorld",{world:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.generateCollabLink=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/generateCollabLink",{worldID:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/generateCollabLink",{worldID:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addNewCollaborator=function(){var e=Object(G.a)(X.a.mark((function e(a,n,r){var i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/addNewCollaborator",{worldID:a,userID:n,email:r});case 3:return i=e.sent,s=function(){var e=Object(G.a)(X.a.mark((function e(){var i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/addNewCollaborator",{worldID:a,userID:n,email:r});case 4:return i=e.sent,e.abrupt("return",t.processResponse(i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(i,s));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.emailCollaborator=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/emailCollaborator",{worldID:a,email:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/emailCollaborator",{worldID:a,email:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.deleteCollab=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.deleteData("/api/world/deleteCollab",{worldID:a,collabID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.deleteData("/api/world/deleteCollab",{worldID:a,collabID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.updateCollaboratorPermission=function(){var e=Object(G.a)(X.a.mark((function e(a,n,r){var i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/updateCollaboratorPermission",{worldID:a,collabID:n,editPermission:r});case 3:return i=e.sent,s=function(){var e=Object(G.a)(X.a.mark((function e(){var i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/updateCollaboratorPermission",{worldID:a,collabID:n,editPermission:r});case 4:return i=e.sent,e.abrupt("return",t.processResponse(i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(i,s));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.checkCollabID=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/world/checkCollabID",{worldID:a,collabID:n});case 3:return r=e.sent,e.abrupt("return",t.processResponse(r));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.requestToCollaborate=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/requestToCollaborate",{worldID:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/requestToCollaborate",{worldID:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.declineCollabInvite=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.deleteData("/api/world/declineCollabInvite",{worldID:a,collabID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.deleteData("/api/world/declineCollabInvite",{worldID:a,collabID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.acceptCollabInvite=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/acceptCollabInvite",{worldID:a,collabID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/acceptCollabInvite",{worldID:a,collabID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.acceptCollabRequest=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/acceptCollabRequest",{worldID:a,collabID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/acceptCollabRequest",{worldID:a,collabID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.selectWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/selectWorld",{worldID:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/selectWorld",{worldID:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAttributesForWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getAttributesForWorldFromAPI(a));case 5:if(null===(n=t.getSessionData("attributes_".concat(a)))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getAttributesForWorldFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAttributesForWorldFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getAttributesForWorld/".concat(a));case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getAttributesForWorld/".concat(a));case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null,"attributes_".concat(a)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r,"attributes_".concat(a)));case 8:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Character"}]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAttribute=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getAttribute/".concat(a,"/").concat(n));case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getAttribute/".concat(a,"/").concat(n));case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return",{_id:-1,worldID:-1,Name:"Character",Description:"",Attributes:{}});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.createAttribute=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/createAttribute",{attribute:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/createAttribute",{attribute:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.upsertAttributes=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/upsertAttributes",{worldID:a,attributes:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/upsertAttributes",{worldID:a,attributes:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getTypesForWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getTypesForWorldFromAPI(a));case 5:if(null===(n=t.getSessionData("types_".concat(a)))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getTypesForWorldFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTypesForWorldFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=11;break}return e.next=3,t.fetchData("/api/world/getTypesForWorld/".concat(a));case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getTypesForWorld/".concat(a));case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null,"types_".concat(a)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,t.processResponse(n,r,"types_".concat(a));case 7:return i=e.sent,e.abrupt("return",t.cleanEditDT(i.types));case 11:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Character"}]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getType=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getType/".concat(a,"/").concat(n));case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getType/".concat(a,"/").concat(n));case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return",{_id:-1,worldID:-1,Name:"Character",Description:"",Attributes:{}});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.createType=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/createType",{type:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/createType",{type:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteType=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.deleteData("/api/world/deleteType",{worldID:a,typeID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.deleteData("/api/world/deleteType",{worldID:a,typeID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.updateType=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/updateType",{type:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/updateType",{type:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getThingsForWorld=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getThingsForWorldFromAPI(a));case 5:if(null===(n=t.getSessionData("things_".concat(a)))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getThingsForWorldFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getThingsForWorldFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=11;break}return e.next=3,t.fetchData("/api/world/getThingsForWorld/".concat(a));case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getThingsForWorld/".concat(a));case 4:return n=e.sent,e.abrupt("return",t.processResponse(n,null,"things_".concat(a)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,t.processResponse(n,r,"things_".concat(a));case 7:return i=e.sent,e.abrupt("return",t.cleanEditDT(i.things));case 11:return e.abrupt("return",[{_id:-1,worldID:-1,Name:"Alice"}]);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.cleanEditDT=function(e){return e.forEach((function(e){e.EditDT=Date.parse(e.EditDT)})),e},this.getThing=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.fetchData("/api/world/getThing/".concat(a,"/").concat(n));case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.fetchData("/api/world/getThing/".concat(a,"/").concat(n));case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return",{_id:-1,worldID:-1,Types:[-1],Name:"Alice",Description:""});case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.createThing=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/createThing",{thing:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/createThing",{thing:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteThing=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.deleteData("/api/world/deleteThing",{worldID:a,thingID:n});case 3:return r=e.sent,i=function(){var e=Object(G.a)(X.a.mark((function e(){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.deleteData("/api/world/deleteThing",{worldID:a,thingID:n});case 4:return r=e.sent,e.abrupt("return",t.processResponse(r));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(r,i));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.updateThing=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/updateThing",{thing:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/updateThing",{thing:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return","success");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getComments=function(){var e=Object(G.a)(X.a.mark((function e(a,n,r){var i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.fetchData("/api/world/getComments/".concat(a,"/").concat(n,"/").concat(r));case 3:return i=e.sent,e.abrupt("return",t.processResponse(i));case 7:return e.abrupt("return",{_id:-1,worldID:-1,Types:[-1],Name:"Alice",Description:""});case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.addComment=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/addComment",{comment:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/addComment",{comment:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateComment=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.patchData("/api/world/updateComment",{comment:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.patchData("/api/world/updateComment",{comment:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getViews=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=11;break}return e.next=3,t.fetchData("/api/world/getViews/".concat(a,"/").concat(n));case 3:return r=e.sent,e.next=6,t.processResponse(r);case 6:return(i=e.sent).forEach((function(e){e.ViewDT=Date.parse(e.ViewDT)})),e.abrupt("return",i);case 11:return e.abrupt("return",{_id:-1,worldID:-1,Types:[-1],Name:"Alice",Description:""});case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.upsertView=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=8;break}return e.next=3,t.postData("/api/world/upsertView",{view:a});case 3:return n=e.sent,r=function(){var e=Object(G.a)(X.a.mark((function e(){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relogin();case 2:return e.next=4,t.postData("/api/world/upsertView",{view:a});case 4:return n=e.sent,e.abrupt("return",t.processResponse(n));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",t.processResponse(n,r));case 8:return e.abrupt("return",-1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetchData=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},n),{},{headers:Object(H.a)({Accept:"application/json"},n.headers)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"POST",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.putData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PUT",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.patchData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PATCH",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.deleteData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"DELETE",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.processResponse=function(){var e=Object(G.a)(X.a.mark((function e(t){var a,n,r,i,s,o,l=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:null,n=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]&&l[3],e.next=5,t.json();case 5:if(i=e.sent,200===t.status){e.next=10;break}throw Error(i.message);case 10:if(void 0===i.error||null===a){e.next=14;break}return e.abrupt("return",a());case 14:return null!==n&&(s=new Date,r?s="never":s.setHours(s.getHours()+1),o={expiresAt:s,body:i},localStorage.setItem(n,JSON.stringify(o))),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.processResponseProgress=function(){var e=Object(G.a)(X.a.mark((function e(t){var a,n,r,i,s,o,l,c,u,p,d,m,f,h,g,y,b,v,A,E=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=E.length>1&&void 0!==E[1]?E[1]:null,n=E.length>2&&void 0!==E[2]?E[2]:null,r=E.length>3&&void 0!==E[3]&&E[3],i=t.body.getReader(),200===t.status){e.next=11;break}return e.next=7,t.json();case 7:throw s=e.sent,Error(s.message);case 11:o=0,l=[],c=null,e.prev=14;case 15:return e.next=18,i.read();case 18:if(u=e.sent,p=u.done,d=u.value,!p){e.next=23;break}return e.abrupt("break",27);case 23:l.push(d),o+=d.length,e.next=15;break;case 27:for(m=new Uint8Array(o),f=0,h=0,g=l;h<g.length;h++)y=g[h],m.set(y,f),f+=y.length;c=new TextDecoder("utf-8").decode(m),e.next=36;break;case 33:return e.prev=33,e.t0=e.catch(14),e.abrupt("return",a());case 36:if(null!==c){e.next=40;break}return e.abrupt("return",a());case 40:return b=JSON.parse(c),null!==n&&(v=new Date,r?v="never":v.setHours(v.getHours()+1),A={expiresAt:v,finalResult:b},localStorage.setItem(n,JSON.stringify(A))),e.abrupt("return",b);case 43:case"end":return e.stop()}}),e,null,[[14,33]])})));return function(t){return e.apply(this,arguments)}}(),this.relogin=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===(a=t.getSessionData("loginUser"))){e.next=7;break}return e.next=5,t.postData("/api/user/login",a);case 5:n=e.sent,t.processResponse(n,null,"user",!0);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),this.getSessionData=function(e){var t=localStorage.getItem(e);if(null!==t){var a=JSON.parse(t);if(void 0!==a.expiresAt&&("never"===a.expiresAt||a.expiresAt>new Date))return a.body}return null},this.real=!0},J=Q,$=a(19),ee=a(15),te=(a(159),a(557)),ae=a(173),ne=a(183),re=a(184),ie=a(559),se=a(560),oe=a(592),le=a(561),ce=a(563),ue=a(564),pe=a(129),de=a.n(pe),me=a(192),fe=a.n(me),he=a(193),ge=a.n(he),ye=a(27),be=a(548),ve=a(550),Ae=a(551),Ee=a(552),Te=a(76),De=a(187),we=a.n(De);function ke(e){return r.a.createElement(we.a,{url:"https://youtu.be/kksVfoN2bR8",width:"100%"})}var xe=Object(be.a)({root:{}});function Ie(e){var t=xe();return r.a.createElement(ve.a,{className:t.root},r.a.createElement(Ae.a,null,r.a.createElement(Ee.a,null,r.a.createElement(Te.a,{gutterBottom:!0,variant:"h5",component:"h2"},e.title),r.a.createElement(ke,{url:"urlGoesHere.mov"}),r.a.createElement(Te.a,{variant:"body2",color:"textSecondary",component:"p"},e.description))))}var Se=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={version:"0",redirectTo:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.fromLogin&&this.props.notFromLogin(),null!==this.state.redirectTo?r.a.createElement(ye.a,{to:this.state.redirectTo}):r.a.createElement("div",null,r.a.createElement("h3",null,"Author's Notebook"),r.a.createElement(Ie,{title:"Getting Started",description:"This video explains the basics of how to use the website and its tools.  It covers the basic concepts, navigation, creating a project, importing templates, creating types, creating attributes, and creating things."}))}}]),a}(n.Component),Ce=Object(d.b)((function(e){return{fromLogin:e.app.fromLogin}}),(function(e){return{notFromLogin:function(){return e(z({}))}}}))(Se),Oe=a(17),Ne=a(556),Pe=a(554),We=a(150),Me=a.n(We),je=a(151),Ve=a.n(je),Le=a(191),Fe=a.n(Le),Be=a(174),_e=(a(411),a(190)),ze=a.n(_e),qe=a(90),Ue=a.n(qe),Re=a(149),He=a.n(Re),Ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.editor=null,n.editingArea=null,n.value=null,n.refInput=null,n.selection=null,n.lastDeltaChangeSet=null,n.regenerationSnapshot={},n.unprivilegedEditor=null,n.onEditorChange=function(e,t,a,r){"text-change"===e?n.onEditorChangeText(n.editor.root.innerHTML,t,r,n.unprivilegedEditor):"selection-change"===e&&n.onEditorChangeSelection(t,r,n.unprivilegedEditor)};var i=n.isControlled()?e.value:e.defaultValue;return n.value=null!==i&&void 0!==i?i:"",n.refInput=r.a.createRef(),n}return Object(l.a)(a,[{key:"validateProps",value:function(e){if(r.a.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(r.a.Children.count(e.children)){var t=r.a.Children.only(e.children);if(null!==t&&"textarea"===t.type)throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}},{key:"shouldComponentUpdate",value:function(e,t){var a=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var n,r=this.getEditorContents(),i=null!==(n=e.value)&&void 0!==n?n:"";this.isEqualValue(i,r)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,!e.readOnly),[].concat(Object(ee.a)(this.cleanProps),Object(ee.a)(this.dirtyProps)).some((function(t){return!Ue()(e[t],a.props[t])}))}},{key:"shouldComponentRegenerate",value:function(e){var t=this;return this.dirtyProps.some((function(a){return!Ue()(e[a],t.props[a])}))}},{key:"componentDidMount",value:function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}},{key:"componentWillUnmount",value:function(){this.destroyEditor()}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),r=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:r},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var i=this.regenerationSnapshot,s=i.delta,o=i.selection;delete this.regenerationSnapshot,this.instantiateEditor();var l=this.editor;l.setContents(s),Xe((function(){return a.setEditorSelection(l,o)}))}}},{key:"instantiateEditor",value:function(){this.editor||(this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig()))}},{key:"destroyEditor",value:function(){this.editor&&(this.unhookEditor(this.editor),delete this.editor)}},{key:"isControlled",value:function(){return"value"in this.props}},{key:"getEditorConfig",value:function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}}},{key:"getEditor",value:function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}},{key:"createEditor",value:function(e,t){var a=new He.a(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(a,t.tabIndex),this.hookEditor(a),a}},{key:"hookEditor",value:function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}},{key:"unhookEditor",value:function(e){e.off("editor-change",this.onEditorChange)}},{key:"getEditorContents",value:function(){return this.value}},{key:"getEditorSelection",value:function(){return this.selection}},{key:"isDelta",value:function(e){return e&&e.ops}},{key:"isEqualValue",value:function(e,t){return this.isDelta(e)&&this.isDelta(t)?Ue()(e.ops,t.ops):Ue()(e,t)}},{key:"setEditorContents",value:function(e,t){var a=this;this.value=t;var n=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),Xe((function(){return a.setEditorSelection(e,n)}))}},{key:"setEditorSelection",value:function(e,t){if(this.selection=t,t){var a=e.getLength();t.index=Math.max(0,Math.min(t.index,a-1)),t.length=Math.max(0,Math.min(t.length,a-1-t.index)),e.setSelection(t)}}},{key:"setEditorTabIndex",value:function(e,t){var a;(null===e||void 0===e||null===(a=e.scroll)||void 0===a?void 0:a.domNode)&&(e.scroll.domNode.tabIndex=t)}},{key:"setEditorReadOnly",value:function(e,t){t?e.disable():e.enable()}},{key:"makeUnprivilegedEditor",value:function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t),setSelection:t.setSelection.bind(t)}}},{key:"getEditingArea",value:function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=s.a.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e}},{key:"renderEditingArea",value:function(){var e=this,t=this.props,a=t.children,n=t.preserveWhitespace,i={key:this.state.generation,ref:function(t){e.editingArea=t}};return r.a.Children.count(a)?r.a.cloneElement(r.a.Children.only(a),i):n?r.a.createElement("pre",i):r.a.createElement("div",i)}},{key:"render",value:function(){var e,t=this;return r.a.createElement("div",{ref:this.refInput,id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill ".concat(null!==(e=this.props.className)&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onBlur:function(e){void 0!==t.props.onBlur2&&t.props.onBlur2()}},this.renderEditingArea())}},{key:"onEditorChangeText",value:function(e,t,a,n){if(this.editor){var r=this.isDelta(this.value)?n.getContents():n.getHTML();r!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=r,this.props.onChange(e,t,a,n))}}},{key:"onEditorChangeSelection",value:function(e,t,a){if(this.editor){var n=this.getEditorSelection(),r=!n&&e,i=n&&!e;Ue()(e,n)||(this.selection=e,void 0!==this.props.onChangeSelection&&this.props.onChangeSelection(e,t,a),r?void 0!==this.props.onFocus&&this.props.onFocus(e,t,a):i&&void 0!==this.props.onBlur&&this.props.onBlur(n,t,a))}}},{key:"focus",value:function(){this.editor&&this.editor.focus()}},{key:"blur",value:function(){this.editor&&(this.selection=null,this.editor.blur())}}]),a}(r.a.Component);function Xe(e){Promise.resolve().then(e)}Ke.displayName="React Quill",Ke.Quill=He.a,Ke.defaultProps={theme:"snow",modules:{},readOnly:!1};var Ge=Ke,Ze={toolbar:[[],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},Qe=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],Ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).handleKeyDown=function(e){var t=r.state,a=t.helperVisible,n=t.options,i=t.selection,s=r.props.onKeyDown;if(a)switch(e.keyCode){case 27:e.preventDefault(),r.resetHelper();break;case 38:e.preventDefault(),r.setState({selection:(n.length+i-1)%n.length});break;case 40:e.preventDefault(),r.setState({selection:(i+1)%n.length});break;case 14:case 13:case 9:e.preventDefault(),r.handleSelection(i);break;default:s(e)}else s(e)},r.setValue=function(e){r.setState({value:e},(function(t){r.handleChange(e)}))},r.sanitizeConf={allowedTags:["b","i","em","strong","a","p","h1"],allowedAttributes:{a:["href"]}},r.sanitize=function(e){r.setState({html:ze()(r.state.html,r.sanitizeConf)},e)},r.state={helperVisible:!1,left:0,matchLength:0,matchStart:0,options:[],selection:0,top:0,value:e.value},r.recentValue=e.defaultValue,r.refInput=Object(n.createRef)(),r}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.options,a=this.state.caret;t.length!==e.options.length&&this.updateHelper(this.recentValue,a,t)}},{key:"getMatch",value:function(e,t,a){for(var n=this.props,r=n.trigger,i=n.matchAny,s=n.regex,o=new RegExp(s),l=r.length,c=r.match(o),u=e[t-1];">"===u;){for(;"<"!==u;)t--,u=e[t-1];t--,u=e[t-1]}"\t"===u&&(t--,u=e[t-1]);for(var p=t-1;p>=0;--p){var d=e.substring(p,t).match(o),m=-1;if(l>0){var f=c?p:p-l+1;if(f<0)return null;if(this.isTrigger(e,f)&&(m=f+l),!d&&m<0)return null}else{if(d&&p>0)continue;if(t-(m=0===p&&d?0:p+1)===0)return null}if(m>=0){var h=function(){var n=e.substring(m,t),r=a.filter((function(e){var t=e.Display.toLowerCase().indexOf(n.toLowerCase());return-1!==t&&(i||0===t)})),s=n.length;return{v:{matchStart:m,matchLength:s,options:r}}}();if("object"===typeof h)return h.v}}return null}},{key:"isTrigger",value:function(e,t){var a=this.props.trigger;return!a||!a.length||e.substr(t,a.length)===a}},{key:"handleChange",value:function(e){var t=this.props,a=t.onChange,n=t.options,r=t.spaceRemovers,i=t.spacer,s=t.value,o=this.recentValue,l=void 0===e.target||void 0===e.target.value?this.state.value:e.target.value,c=-1;if(0===o.length)c=l.length-1;else if(0===l.length)c=0;else{var u=o.trim(),p=l.trim();if("&nbsp;"===u.substring(u.length-6)&&(u=u.substring(0,u.length-6)),"&nbsp;"===p.substring(p.length-6)&&(p=p.substring(0,p.length-6)),u!==p)for(var d=1;d<=Math.min(p.length,u.length);d++)if(p.length<d||u.length<d||p[p.length-d]!==u[u.length-d]){c=p.length-d;break}}var m=c+1;if(l.length||this.setState({helperVisible:!1}),this.recentValue=l,this.setState({caret:m,value:e}),!l.length||!m)return a(e);if(this.enableSpaceRemovers&&r.length&&l.length>2&&i.length){for(var f=0;f<Math.max(o.length,l.length);++f)if(o[f]!==l[f]){if(f>=2&&l[f-1]===i&&-1===r.indexOf(l[f-2])&&-1!==r.indexOf(l[f])&&this.getMatch(l.substring(0,f-2),m-3,n)){var h="".concat(l.slice(0,f-1)).concat(l.slice(f,f+1)).concat(l.slice(f-1,f)).concat(l.slice(f+1));return this.refInput.current.value=h,s||this.setState({value:h}),a(h)}break}this.enableSpaceRemovers=!1}return this.updateHelper(l,m,n),s||this.setState({value:e}),a(e)}},{key:"handleSelection",value:function(e){var t=this.state,a=t.matchStart,n=t.matchLength,r=t.options,i="<a href='/".concat(r[e].suggestionType,"/details/").concat(r[e]._id,'\' rel="noopener noreferrer" target="_blank">').concat(r[e].Display,"</a>"),s=this.recentValue,o=s.substring(0,a-1),l=s.substring(a+n);""===l&&(i+="&nbsp;"),this.setState({value:"".concat(o).concat(i).concat(l)});for(var c=0,u=0,p=o;u<o.length;){var d=p.indexOf("<");if(d>-1){d>0&&(c+=d),u+=d;var m=(p=p.substring(d)).indexOf(">");if(-1===m)throw Error("What the Pizza Sauce");u+=m+1,p=p.substring(m+1)}else p.length>0&&(u+=p.length,c+=p.length,p="");if(0===p.length&&u<o.length)throw Error("OMGOSH")}c+=r[e].Display.length,this.updateCaretPosition(c)}},{key:"updateCaretPosition",value:function(e){var t=this;setTimeout((function(){var a=t.refInput.current,n=a.getEditor(),r=a.makeUnprivilegedEditor(n),i=r.getLength(),s={index:Math.max(0,Math.min(e,i-1)),length:0};r.setSelection(s)}),500)}},{key:"updateHelper",value:function(e,t,a){var n=this.getMatch(e,t,a);if(n){var r=this.refInput.current.refInput.current.clientHeight,i=this.props,s=i.minChars,o=i.onRequestOptions,l=i.requestOnlyIfNoOptions;n.matchLength>=s&&(n.options.length>1||1===n.options.length&&n.options[0].Display.length!==n.matchLength)?this.setState(Object(H.a)({helperVisible:!0,top:r,left:0},n)):(l&&n.options.length||o(e.substr(n.matchStart,n.matchLength)),this.resetHelper())}else this.resetHelper()}},{key:"resetHelper",value:function(){this.setState({helperVisible:!1,selection:0})}},{key:"renderAutocompleteList",value:function(){var e=this,t=this.state,a=t.helperVisible,n=t.left,i=t.matchStart,s=t.matchLength,o=t.options,l=t.selection,c=t.top,u=t.value;if(!a)return null;var p=this.props,d=p.maxOptions,m=p.offsetX,f=p.offsetY;if(0===o.length)return null;if(l>=o.length)return this.setState({selection:0}),null;var h=0===d?o.length:d,g=o.slice(0,h).map((function(t,a){var n=t.Display.toLowerCase().indexOf(u.substr(i,s).toLowerCase());return r.a.createElement("li",{className:a===l?"active":null,key:t.Display,onClick:function(){e.handleSelection(a)},onMouseEnter:function(){e.setState({selection:a})}},t.Display.slice(0,n),r.a.createElement("strong",null,t.Display.substr(n,s)),t.Display.slice(n+s))}));return r.a.createElement("ul",{className:"react-autocomplete-input",style:{left:n+m,top:c+f}},g)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Ge,{theme:"snow",modules:Ze,formats:Qe,value:this.state.value,onChange:function(t){e.setValue(t)},onBlur:function(t){void 0!==e.props.onBlur&&e.props.onBlur(e.state.value.trim())},onBlur2:function(t){void 0!==e.props.onBlur&&e.props.onBlur(e.state.value.trim())},onKeyDown:this.handleKeyDown,ref:this.refInput}),this.renderAutocompleteList())}}]),a}(r.a.Component);Ye.defaultProps={Component:"textarea",defaultValue:"",disabled:!1,maxOptions:6,onBlur:function(){},onChange:function(){},onKeyDown:function(){},onRequestOptions:function(){},options:[],regex:"^[A-Za-z0-9\\-_]+$",matchAny:!1,minChars:0,requestOnlyIfNoOptions:!0,spaceRemovers:[",",".","!","?"],spacer:" ",trigger:"@",offsetX:0,offsetY:-10,value:null};var Je=Ye;var $e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getValue=function(){return n.state.value},n.state={value:e.Value},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=void 0===this.props.displayName?this.props.fieldName:this.props.displayName;return void 0!==this.props.options?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ne.a,{htmlFor:"text_field_".concat(this.props.fieldName)},t)),r.a.createElement(U.a,{item:!0},r.a.createElement(Je,{id:"text_field_".concat(this.props.fieldName),name:"text_field_".concat(this.props.fieldName),type:"text",autoComplete:"Off",error:this.props.message,value:this.state.value,onChange:function(t){e.setState({value:t}),void 0!==e.props.onChange&&e.props.onChange(t)},onKeyDown:function(t){void 0!==e.props.onKeyPress&&e.props.onKeyPress(t)},onBlur:function(t){void 0!==e.props.onBlur&&e.props.onBlur(e.state.value)},options:this.props.options}))):r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_".concat(this.props.fieldName)},t),void 0!==this.props.multiline&&this.props.multiline?r.a.createElement(re.a,{id:"text_field_".concat(this.props.fieldName),name:"text_field_".concat(this.props.fieldName),type:"text",autoComplete:"Off",multiline:!0,error:void 0!==this.props.message&&""!==this.props.message,value:this.state.value,onChange:function(t){e.setState({value:t.target.value})},onBlur:function(t){e.props.onBlur(e.state.value.trim())},labelWidth:this.props.labelWidth,fullWidth:!0}):r.a.createElement(re.a,{id:"text_field_".concat(this.props.fieldName),name:"text_field_".concat(this.props.fieldName),type:"text",autoComplete:"Off",error:void 0!==this.props.message&&""!==this.props.message,value:this.state.value,onChange:function(t){e.setState({value:t.target.value})},onBlur:function(t){e.props.onBlur(e.state.value.trim())},labelWidth:this.props.labelWidth,fullWidth:!0}),r.a.createElement(Be.a,null,this.props.message))}}]),a}(n.Component),et=Object(d.b)((function(e){return{}}),(function(e){return{}}))($e),tt=Object(be.a)({root:{}}),at=function(e,t,a){if(null!==a.user){a.changeWaiting(!0),void 0!==e.votes[a.user._id]&&e.votes[a.user._id]!==t?delete e.votes[a.user._id]:e.votes[a.user._id]=t;var n=Object(H.a)({},a.rootComment);delete n.user,n.replies=[],a.rootComment.replies.forEach((function(e){n.replies.push(nt(e))})),a.api.updateComment(n).then((function(e){void 0===e.error?a.api.getComments(a.world._id,a.objectType,a.object._id).then((function(e){e.comments.forEach((function(e){rt(e,a)})),a.changeComments(e.comments),a.changeWaiting(!1)})):console.log(e.error),a.changeWaiting(!1)})).catch((function(e){return console.log(e)}))}},nt=function e(t){var a=Object(H.a)({},t);delete a.user,delete a.voteSum,a.replies=[];for(var n=0;n<t.replies.length;n++)a.replies.push(e(t.replies[n]));return a},rt=function e(t,a){t.user=a.allUsers.filter((function(e){return e._id===t.userID}))[0],void 0!==t.user&&null!==t.user||(t.user={_id:t.userID,username:"Unknown"}),t.time=new Date(t.time),t.voteSum=Object.values(t.votes).reduce((function(e,t){return e+t}),0),t.replies.forEach((function(t){e(t,a)}))};function it(e){var t=tt(),a=Object(n.useState)(""),i=Object(Oe.a)(a,2),s=i[0],o=i[1],l=Object(n.useState)(!1),c=Object(Oe.a)(l,2),u=c[0],p=c[1];return r.a.createElement(U.a,{container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ve.a,{className:t.root},r.a.createElement(Ee.a,null,r.a.createElement(Te.a,{variant:"body2",color:"textSecondary"},e.comment.user.username,": ",e.comment.time.toLocaleDateString()," ",e.comment.time.toLocaleTimeString()),r.a.createElement(Te.a,{component:"p"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.comment.text}}))),r.a.createElement(Pe.a,{disableSpacing:!0},null===e.user||1!==e.comment.votes[e.user._id]?r.a.createElement(h.a,{"aria-label":"upvote comment",onClick:function(t){null!==e.user&&(e.world.Owner===e.user._id||void 0!==e.world.Collaborators&&0===e.world.Collaborators.filter((function(t){return t.userID===e.user._id&&"collab"===t.type})).length)&&at(e.comment,1,e)}},r.a.createElement(Me.a,null)):r.a.createElement(h.a,{"aria-label":"upvote comment",color:"primary",onClick:function(e){}},r.a.createElement(Me.a,null)),r.a.createElement("span",{style:{fontWeight:"bold",color:null===e.user||void 0===e.comment.votes[e.user._id]?"black":1===e.comment.votes[e.user._id]?"blue":-1===e.comment.votes[e.user._id]?"red":"black"}},e.comment.voteSum),null===e.user||-1!==e.comment.votes[e.user._id]?r.a.createElement(h.a,{"aria-label":"downvote comment",onClick:function(t){null!==e.user&&(e.world.Owner===e.user._id||void 0!==e.world.Collaborators&&0===e.world.Collaborators.filter((function(t){return t.userID===e.user._id&&"collab"===t.type})).length)&&at(e.comment,-1,e)}},r.a.createElement(Ve.a,null)):r.a.createElement(h.a,{"aria-label":"downvote comment",color:"secondary",onClick:function(e){}},r.a.createElement(Ve.a,null)),r.a.createElement(h.a,{style:{marginLeft:"auto"},onClick:function(t){null!==e.user&&(e.world.Owner===e.user._id||void 0!==e.world.Collaborators&&0===e.world.Collaborators.filter((function(t){return t.userID===e.user._id&&"collab"===t.type})).length)&&p(!u)},"aria-label":"reply"},r.a.createElement(Fe.a,null))))),e.comment.replies.length>0&&r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:2},"\xa0"),r.a.createElement(U.a,{item:!0,xs:10,container:!0,spacing:0,direction:"column"},e.comment.replies.map((function(t,a){return r.a.createElement(U.a,{item:!0,key:a,style:{marginTop:"4px"}},r.a.createElement(it,{comment:t,user:e.user,world:e.world,object:e.object,objectType:e.objectType,api:e.api,rootComment:e.rootComment,allUsers:e.allUsers,changeComments:function(t){e.changeComments(t)},changeWaiting:function(t){e.changeWaiting(t)},suggestions:e.suggestions}))})))),u&&r.a.createElement(U.a,{item:!0},r.a.createElement(et,{Value:s,fieldName:"New Reply",multiline:!0,onChange:function(e){o(e)},onKeyPress:function(t){"Enter"!==t.key||t.shiftKey||function(e,t,a,n){if(null!==t.user){t.changeWaiting(!0);var r,i=Object(H.a)({},t.rootComment);t.comment.replies.push({time:new Date,user:t.user,userID:t.user._id,text:(r=e,r.endsWith("<p><br></p>")&&(r=r.substring(0,r.length-11)),r),votes:{},voteSum:0,replies:[]}),n(""),a(!1),t.changeWaiting(!0);var s=Object(H.a)({},i);delete s.user,s.replies=[],i.replies.forEach((function(e){s.replies.push(nt(e))})),t.api.updateComment(s).then((function(e){void 0===e.error?t.api.getComments(t.world._id,t.objectType,t.object._id).then((function(e){e.comments.forEach((function(e){rt(e,t)})),t.changeComments(e.comments),t.changeWaiting(!1)})):console.log(e.error),t.changeWaiting(!1)})).catch((function(e){return console.log(e)}))}}(s,e,p,o)},options:e.suggestions,labelWidth:110})))}function st(e){var t=Object(n.useState)(""),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=Object(n.useState)(!1),l=Object(Oe.a)(o,2),c=l[0],u=l[1],p=Object(n.useState)([]),d=Object(Oe.a)(p,2),m=d[0],f=d[1],h=Object(n.useState)(!0),g=Object(Oe.a)(h,2),y=g[0],b=g[1];return y&&e.allUsers.length>0&&(b(!1),setTimeout((function(){e.api.getComments(e.world._id,e.objectType,e.object._id).then((function(t){t.comments.forEach((function(t){!function e(t,a){t.user=a.filter((function(e){return e._id===t.userID}))[0],void 0!==t.user&&null!==t.user||(t.user={_id:t.userID,username:"Unknown"}),t.time=new Date(t.time),t.voteSum=Object.values(t.votes).reduce((function(e,t){return e+t}),0),t.replies.forEach((function(t){e(t,a)}))}(t,e.allUsers)})),f(t.comments)}))}),500)),r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},"General"!==e.objectType&&r.a.createElement(U.a,{item:!0},r.a.createElement("b",null,"Comments:")),m.map((function(t,a){return r.a.createElement(U.a,{item:!0,key:a,container:!0,spacing:1,direction:"column"},r.a.createElement(it,{comment:t,rootComment:t,user:e.user,world:e.world,object:e.object,objectType:e.objectType,allUsers:e.allUsers,api:e.api,changeComments:function(e){f(e)},changeWaiting:u,suggestions:e.suggestions}))})),"General"===e.objectType&&0===m.length?r.a.createElement(U.a,{item:!0},"No discussions yet"):0===m.length&&r.a.createElement(U.a,{item:!0},"No comments yet"),!c&&r.a.createElement(U.a,{item:!0},null!==e.user&&(e.world.Owner===e.user._id||void 0!==e.world.Collaborators&&0===e.world.Collaborators.filter((function(t){return t.userID===e.user._id&&"collab"===t.type})).length)?r.a.createElement(et,{Value:i,fieldName:"New Comment",multiline:!0,onChange:function(e){s(e)},onBlur:function(e){s(e)},options:e.suggestions,labelWidth:110}):null!==e.user&&"General"===e.objectType?r.a.createElement(et,{Value:i,fieldName:"New Discussion",multiline:!0,onBlur:function(e){s(e)},options:e.suggestions,labelWidth:110}):null===e.user&&"General"===e.objectType?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"fake_comments_label"},"You have to log in to start a discussion"),r.a.createElement(re.a,{id:"fake_comments_label",name:"fake_comments_label",type:"text",autoComplete:"Off",disabled:!0,fullWidth:!0})):r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"fake_comments_label"},"You have to log in to leave comments"),r.a.createElement(re.a,{id:"fake_comments_label",name:"fake_comments_label",type:"text",autoComplete:"Off",disabled:!0,fullWidth:!0}))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:c||""===i,onClick:function(t){!function(e,t,a,n,r,i){a(!0);var s,o={_id:null,time:new Date,userID:t.user._id,worldID:t.world._id,objectType:t.objectType,objectID:t.object._id,text:(s=e,s.endsWith("<p><br></p>")&&(s=s.substring(0,s.length-11)),s),votes:{},replies:[]};t.api.addComment(o).then((function(e){if(void 0===e.error){o._id=e.commentID,o.user=t.user,o.voteSum=0;var s=Object(ee.a)(n);s.push(o),r(s),i("")}else console.log(e.error);a(!1)})).catch((function(e){return console.log(e)}))}(i,e,u,m,f,s)}},c?"Please Wait":"Submit")))}var ot=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.fromLogin&&this.props.notFromLogin(),r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement("h3",null,"General Discussion Board")),r.a.createElement(U.a,{item:!0},"This is a place where anyone can discuss anything related to writing in general, or to look for collaborators, or something to collaborate on."),r.a.createElement(U.a,{item:!0},"I plan to add filtering capabilities in the future."),r.a.createElement(U.a,{item:!0},r.a.createElement(st,{user:this.props.user,allUsers:this.props.allUsers,object:{_id:"General"},objectType:"General",world:{_id:"General"},api:this.api,onChange:this.commentsChange})))}}]),a}(n.Component),lt=Object(d.b)((function(e){return{publicWorlds:e.app.publicWorlds,user:e.app.user,fromLogin:e.app.fromLogin,templates:e.app.templates,allUsers:e.app.allUsers,userSuggestions:e.app.userSuggestions,worldSuggestions:e.app.worldSuggestions}}),(function(e){return{notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))}}}))(ot),ct=[{path:"/",name:"Home",icon:fe.a,component:Ce},{path:"/discussion",name:"Discussion",icon:ge.a,component:lt}];var ut=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleFollow=function(e,t){var a=Object(ee.a)(n.props.followingWorlds);if(t)a.push(e);else{var r=a.indexOf(e);a.splice(r,1)}if(null!==n.props.user){var i=Object(H.a)({},n.props.user);i.followingWorlds=a,n.props.setFollowingWorlds(a),n.api.updateUser(i)}else n.props.setFollowingWorlds(a)},n.handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.state={browse:!1,Filter:""},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.api.getWorlds(!0).then((function(t){e.props.setPublicWorlds(t.publicWorlds.worlds),e.props.setTemplates(t.templates.templates),e.props.setAllUsers(t.allUsers),null!==e.props.user&&(void 0===t.userWorlds.worlds?e.props.logout():e.props.setWorlds(t.userWorlds.worlds))}))}},{key:"links",value:function(){var e=this;return r.a.createElement("div",null,ct.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:t.path,onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(e.props.width,"px")},className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},"string"===typeof t.icon?r.a.createElement(te.a,{className:"marginLeft"},t.icon):r.a.createElement(t.icon,{className:"marginLeft"}),"\xa0",r.a.createElement(y.a,{primary:t.name,className:"marginLeft"}))))})))}},{key:"publicWorlds",value:function(){var e=this,t=[],a=[];return void 0!==this.props.publicWorlds&&null!==this.props.publicWorlds&&void 0===this.props.publicWorlds.error&&this.props.publicWorlds.forEach((function(n){e.state.browse?(""===e.state.Filter||n.Name.toLowerCase().includes(e.state.Filter.toLowerCase()))&&(e.props.followingWorlds.includes(n._id)?t.push(n):a.push(n)):e.props.followingWorlds.includes(n._id)&&t.push(n)})),this.state.browse?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"filter"},"Filter"),r.a.createElement(re.a,{id:"filter",name:"Filter",type:"text",autoComplete:"Off",value:this.state.Filter,onChange:this.handleUserInput,labelWidth:43,fullWidth:!0}))),r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,t.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(e.props.width-80,"px")},className:"MySmallerButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(a){e.toggleFollow(t._id,!1)}},r.a.createElement(le.a,null)))})),a.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(e.props.width-80,"px")},className:"MySmallerButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(a){e.toggleFollow(t._id,!0)}},r.a.createElement(de.a,null)))}))))):t.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(e.props.width,"px")},className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))))}))}},{key:"myWorlds",value:function(){var e=this;return null===this.props.user||void 0===this.props.user||void 0===this.props.worlds?"":this.props.worlds.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(e.props.width,"px")},className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(ie.a,null,this.links(),r.a.createElement(g.a,null,r.a.createElement(y.a,{display:"none",primary:"Public Projects"}),r.a.createElement(oe.a,{title:"Browse Public Projects"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({browse:!e.state.browse})}},r.a.createElement(ce.a,null)))),this.publicWorlds(),null!==this.props.user&&r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"My Projects"})),null!==this.props.user&&r.a.createElement(g.a,{className:"curvedButton"},r.a.createElement(p.b,{to:"/project/create",onClick:function(t){e.props.toggleMenu()},style:{width:"".concat(this.props.width,"px")},className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(ue.a,null),r.a.createElement(y.a,{primary:"Create New"})))),this.myWorlds())}}]),a}(n.Component),pt=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,user:e.app.user,followingWorlds:e.app.followingWorlds,width:e.app.width}}),(function(e){return{setWorlds:function(t){return e(D(t))},setPublicWorlds:function(t){return e(S(t))},setTemplates:function(t){return e(w(t))},setAllUsers:function(t){return e(k(t))},setFollowingWorlds:function(t){return e(q(t))},toggleMenu:function(){return e(B({}))},logout:function(){return e(T({}))}}}))(ut),dt=a(7),mt=a(362),ft=a(566),ht=a(565),gt=Object(dt.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(mt.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))}));function yt(e){var t=r.a.useState(null),a=Object(Oe.a)(t,2),n=a[0],i=a[1];return r.a.createElement("span",{className:"float-right blue whiteFont"},r.a.createElement(g.a,{"aria-controls":"user-menu","aria-haspopup":"true",style:{cursor:"pointer"},onClick:function(e){i(e.currentTarget)},className:"curvedButton float-right"},r.a.createElement(ht.a,null),r.a.createElement(y.a,{primary:" ".concat(e.username)})),r.a.createElement(gt,{id:"customized-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(e){i(null)}},r.a.createElement(ft.a,{onClick:function(e){i(null)}},r.a.createElement(p.b,{to:"/User/Profile",style:{color:"black"}},r.a.createElement(y.a,{primary:"Profile"}))),r.a.createElement(ft.a,{style:{color:"black"},onClick:function(t){void 0!==e.onLogout&&e.onLogout(),i(null)}},r.a.createElement(y.a,{primary:"Logout"}))))}var bt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.loadFromStorage()}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(U.a,{container:!0,spacing:0},r.a.createElement(U.a,{item:!0,xs:!0},r.a.createElement(h.a,{style:{color:"white"},"aria-label":"Menu",onClick:function(t){e.props.toggleMenu()}},r.a.createElement(v.a,null))),r.a.createElement(U.a,{item:!0,xs:!0},r.a.createElement(g.a,{className:"curvedButton"},r.a.createElement(y.a,{primary:null===this.props.selectedWorld?"Welcome!":this.props.selectedWorld.Name}))),r.a.createElement(U.a,{item:!0,xs:!0},null===this.props.user||void 0===this.props.user.username?r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){e.props.toggleLogin()},className:"float-right blue whiteFont"},r.a.createElement(g.a,{className:"curvedButton float-right"},r.a.createElement(E.a,null),r.a.createElement(y.a,{primary:" Login/Register"}))):r.a.createElement(yt,{username:this.props.user.username,onLogout:function(t){e.api.logout().then((function(t){e.props.logout()}))}})))),this.props.mobileMenuOpen&&r.a.createElement(R.a,{display:{xs:"inline",sm:"none"}},r.a.createElement(pt,null)))}}]),a}(n.Component),vt=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,user:e.app.user,selectedWorld:e.app.selectedWorld,mobileMenuOpen:!e.app.menuOpen}}),(function(e){return{setWorlds:function(t){return e(D(t))},loadFromStorage:function(){return e({type:"LOAD_FROM_STORAGE",payload:{}})},toggleMenu:function(){return e(B({}))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},redirectTo:function(t){return e({type:"REDIRECT_TO",payload:t})}}}))(bt),At=a(197),Et=a.n(At),Tt=a(570);var Dt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleFollow=function(e,t){var a=Object(ee.a)(n.props.followingWorlds);if(t)a.push(e);else{var r=a.indexOf(e);a.splice(r,1)}if(null!==n.props.user){var i=Object(H.a)({},n.props.user);i.followingWorlds=a,n.props.setFollowingWorlds(a),n.api.updateUser(i)}else n.props.setFollowingWorlds(a)},n.handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.state={browse:!1,Filter:""},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.api.getWorlds(!0).then((function(t){e.props.setPublicWorlds(t.publicWorlds.worlds),e.props.setTemplates(t.templates.templates),e.props.setAllUsers(t.allUsers),null!==e.props.user&&(void 0===t.userWorlds.worlds?e.props.logout():e.props.setWorlds(t.userWorlds.worlds))}))}},{key:"links",value:function(){return ct.map((function(e,t){return r.a.createElement(g.a,{key:t,className:"curvedButton"},r.a.createElement(p.b,{to:e.path,className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},"string"===typeof e.icon?r.a.createElement(te.a,{className:"marginLeft"},e.icon):r.a.createElement(e.icon,{className:"marginLeft"}),"\xa0",r.a.createElement(y.a,{primary:e.name,className:"marginLeft"}))))}))}},{key:"brand",value:function(){return r.a.createElement(p.b,{to:"/",className:"BlackTextButton",activeClassName:"active"},r.a.createElement(g.a,null,r.a.createElement("img",{src:Et.a,alt:"logo",className:"App-logo"}),r.a.createElement(y.a,{primary:this.props.logoText})))}},{key:"publicWorlds",value:function(){var e=this,t=[],a=[];return void 0!==this.props.publicWorlds&&null!==this.props.publicWorlds&&void 0===this.props.publicWorlds.error&&this.props.publicWorlds.forEach((function(n){e.state.browse?(""===e.state.Filter||n.Name.toLowerCase().includes(e.state.Filter.toLowerCase()))&&(e.props.followingWorlds.includes(n._id)?t.push(n):a.push(n)):e.props.followingWorlds.includes(n._id)&&t.push(n)})),this.state.browse?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"filter"},"Filter"),r.a.createElement(re.a,{id:"filter",name:"Filter",type:"text",autoComplete:"Off",value:this.state.Filter,onChange:this.handleUserInput,labelWidth:43,fullWidth:!0}))),r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,t.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),className:"MySmallerButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(a){e.toggleFollow(t._id,!1)}},r.a.createElement(le.a,null)))})),a.map((function(t,a){return r.a.createElement(g.a,{key:a,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(t._id),className:"MySmallerButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:t.Name,className:"marginLeft"}))),r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(a){e.toggleFollow(t._id,!0)}},r.a.createElement(de.a,null)))}))))):t.map((function(e,t){return r.a.createElement(g.a,{key:t,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(e._id),className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"}))))}))}},{key:"myWorlds",value:function(){return null===this.props.user||void 0===this.props.user||void 0===this.props.worlds?"":this.props.worlds.map((function(e,t){return r.a.createElement(g.a,{key:t,className:"curvedButton"},r.a.createElement(p.b,{to:"/project/details/".concat(e._id),className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(y.a,{primary:e.Name,className:"marginLeft"}))))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(ie.a,null,this.brand(),r.a.createElement(Tt.a,{light:!0}),this.links(),r.a.createElement(g.a,null,r.a.createElement(y.a,{display:"none",primary:"Public Projects"}),r.a.createElement(oe.a,{title:"Browse Public Projects"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({browse:!e.state.browse})}},r.a.createElement(ce.a,null)))),this.publicWorlds(),null!==this.props.user&&r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"My Projects"})),null!==this.props.user&&r.a.createElement(g.a,{className:"curvedButton"},r.a.createElement(p.b,{to:"/project/create",className:"MyButton",activeClassName:"active"},r.a.createElement(g.a,{button:!0},r.a.createElement(ue.a,null),r.a.createElement(y.a,{primary:"Create New"})))),this.myWorlds())}}]),a}(n.Component),wt=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,user:e.app.user,followingWorlds:e.app.followingWorlds}}),(function(e){return{setWorlds:function(t){return e(D(t))},setPublicWorlds:function(t){return e(S(t))},setFollowingWorlds:function(t){return e(q(t))},setTemplates:function(t){return e(w(t))},setAllUsers:function(t){return e(k(t))},logout:function(){return e(T({}))}}}))(Dt),kt=a(31);var xt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;void 0!==r[t]&&r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.validateField=function(e){var t=null,a=!0,r="";switch(e){case"username":(t=n.state.username).length<2?(a=!1,r="Username is too short"):0!==n.props.allUsers.filter((function(e){return e.username===t&&e._id!==n.props.user._id})).length&&(a=!1,r="This Username is taken");break;case"email":r=(a=null!==(t=n.state.email).match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid",a&&t!==n.props.user.email&&(r="You will be sent a confirmation email at your new email upon submission.  Please use the link.")}return{valid:a,message:r}},n.validateForm=function(e){var t=n.validateField("username"),a=n.validateField("email"),r=t.valid&&a.valid,i=n.state.fieldValidation;i.Name=t,n.setState({formValid:r,fieldValidation:i},e)},n.onSubmit=function(){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},n.submitThroughAPI=function(){var e={_id:n.props.user._id,username:n.state.username.trim(),email:n.state.email.trim()};n.api.updateUser(e).then((function(e){if(null===e.user){var t=n.state.fieldValidation;t.loginError={message:e.error,valid:!1,show:!0},n.setState({fieldValidation:t,waiting:!1})}else n.props.userLogin(e.user),n.api.getWorldsForUser(e.user._id).then((function(e){n.props.setWorlds(e.worlds),n.props.onLogin(e.user)}))}))},n.load=function(){setTimeout((function(){n.setState({redirectTo:null,message:"Loading..."},n.finishLoading)}),500)},n.finishLoading=function(){n.props.fromLogin&&n.props.notFromLogin(),n.setState({username:n.props.user.username,email:n.props.user.email,loaded:!0,message:""})},n.state={username:"",email:"",fieldValidation:{username:{valid:!0,message:""},email:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1,loaded:!1},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.state.loaded||this.load(),null!==this.state.redirectTo?r.a.createElement(ye.a,{to:this.state.redirectTo}):null===this.props.user?r.a.createElement("span",null,"Please log in to be able to access your profile."):r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: User Profile")),r.a.createElement(U.a,{item:!0},r.a.createElement("h2",null,"User Profile")),r.a.createElement(U.a,{item:!0},"Username: ",this.props.user.username),r.a.createElement(U.a,{item:!0},"Email: ",this.props.user.email),r.a.createElement(U.a,{item:!0},"I'll add more profile elements here as the website grows"))}}]),a}(n.Component),It=Object(d.b)((function(e){return{types:e.app.types,user:e.app.user,fromLogin:e.app.fromLogin,allUsers:e.app.allUsers}}),(function(e){return{setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},notFromLogin:function(){return e(z({}))},setAllUsers:function(t){return e(k(t))}}}))(xt),St=a(571),Ct=a(58),Ot=a.n(Ct),Nt=a(59),Pt=a.n(Nt),Wt=a(41),Mt=a.n(Wt),jt=a(75),Vt=a.n(jt);var Lt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.updateIndexExpandedPanel(n.props.indexExpandedPanel!==e&&e)},n.state={redirectTo:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"renderListForType",value:function(e){var t=this,a=this.props.things.filter((function(t){return t.TypeIDs.includes(e._id)}));return r.a.createElement("div",{className:"Things"},r.a.createElement(ie.a,{style:{width:"240px"}},r.a.createElement(g.a,null,r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){t.setState({redirectTo:"/thing/create/type_id_".concat(e._id)})}},r.a.createElement(ue.a,null),"Create New ".concat(e.Name))),a.map((function(e,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){t.setState({redirectTo:"/thing/details/".concat(e._id)})}},e.Name))}))))}},{key:"render",value:function(){var e=this;if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});var t=this.props.things.filter((function(e){return 0===e.Types.filter((function(e){return e.Major})).length})),a=null!==this.props.selectedWorld&&null!==this.props.user&&(this.props.selectedWorld.Owner===this.props.user._id||this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type&&t.editPermission})).length>0);return r.a.createElement("div",null,r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"TYPES"===this.props.indexExpandedPanel?r.a.createElement(oe.a,{title:"Collapse Types"},r.a.createElement(Ne.a,{onClick:function(t){e.handleChange("TYPES")}},r.a.createElement(Ot.a,null))):r.a.createElement(oe.a,{title:"Expand Types"},r.a.createElement(Ne.a,{onClick:function(t){e.handleChange("TYPES")}},r.a.createElement(Pt.a,null))),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},this.props.types.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length>0?r.a.createElement("span",null,"Types (",this.props.types.length,") (",this.props.types.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length," ",r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Mt.a,alt:"Needs Work"}),")"):r.a.createElement("span",null,"Types (",this.props.types.length,")")),a&&r.a.createElement(oe.a,{title:"Create New Type"},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(t){e.setState({redirectTo:"/type/create"})}},r.a.createElement(ue.a,null)))),"TYPES"===this.props.indexExpandedPanel&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,{style:{maxWidth:"380px"}},this.props.types.map((function(t,n){return r.a.createElement(g.a,{key:n},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:8},r.a.createElement(oe.a,{title:"Details for ".concat(t.Name)},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},t.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),"\xa0"),t.Name))),a&&r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Create New ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/thing/create/type_id_".concat(t._id)})}},r.a.createElement(ue.a,null)))),a&&r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Edit ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/type/edit/".concat(t._id)})}},r.a.createElement(St.a,null))))))})))),this.props.types.filter((function(e){return e.Major})).map((function(t,n){var i=e.props.things.filter((function(e){return e.TypeIDs.includes(t._id)}));return r.a.createElement(U.a,{key:n,item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},e.props.indexExpandedPanel===t._id?r.a.createElement(oe.a,{title:"Collapse ".concat(void 0===t.PluralName||""===t.PluralName?"".concat(t.Name,"s"):t.PluralName)},r.a.createElement(Ne.a,{onClick:function(a){e.handleChange(t._id)}},r.a.createElement(Ot.a,null))):r.a.createElement(oe.a,{title:"Expand ".concat(void 0===t.PluralName||""===t.PluralName?"".concat(t.Name,"s"):t.PluralName)},r.a.createElement(Ne.a,{onClick:function(a){e.handleChange(t._id)}},r.a.createElement(Pt.a,null))),r.a.createElement(oe.a,{title:"Details for ".concat(t.Name)},r.a.createElement(Ne.a,{variant:"contained",color:"primary",style:{width:"220px"},onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},i.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length>0?r.a.createElement("span",null,t.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),"\xa0"),void 0===t.PluralName||""===t.PluralName?"".concat(t.Name,"s "):"".concat(t.PluralName," "),"(",i.length,") (",i.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length," ",r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),")"):r.a.createElement("span",null,t.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),"\xa0"),void 0===t.PluralName||""===t.PluralName?"".concat(t.Name,"s "):"".concat(t.PluralName," "),"(",i.length,")"))),a&&r.a.createElement("span",null,r.a.createElement(oe.a,{title:"Create New ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/thing/create/type_id_".concat(t._id)})}},r.a.createElement(ue.a,null))),r.a.createElement(oe.a,{title:"Edit ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/type/edit/".concat(t._id)})}},r.a.createElement(St.a,null))))),e.props.indexExpandedPanel===t._id&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,{style:{maxWidth:"380px"}},i.map((function(t,n){return r.a.createElement(g.a,{key:n},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:10},r.a.createElement(oe.a,{title:"Details for ".concat(t.Name)},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t._id)})}},t.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),"\xa0"),t.Name))),a&&r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Edit ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/thing/edit/".concat(t._id)})}},r.a.createElement(St.a,null))))))})))))})),r.a.createElement(U.a,{item:!0},"OTHER"===this.props.indexExpandedPanel?r.a.createElement(oe.a,{title:"Collapse Other Things"},r.a.createElement(Ne.a,{onClick:function(t){e.handleChange("OTHER")}},r.a.createElement(Ot.a,null))):r.a.createElement(oe.a,{title:"Expand Other Things"},r.a.createElement(Ne.a,{onClick:function(t){e.handleChange("OTHER")}},r.a.createElement(Pt.a,null))),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},t.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length>0?r.a.createElement("span",null,"Other Things (",t.length,") (",t.filter((function(e){return void 0!==e.NeedsWork&&e.NeedsWork})).length," ",r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Mt.a,alt:"Needs Work"}),")"):r.a.createElement("span",null,"Other Things (",t.length,")")),a&&r.a.createElement(oe.a,{title:"Create New Thing"},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(t){e.setState({redirectTo:"/thing/create"})}},r.a.createElement(ue.a,null)))),"OTHER"===this.props.indexExpandedPanel&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,{style:{maxWidth:"380px"}},t.map((function(t,n){return r.a.createElement(g.a,{key:n},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:10},r.a.createElement(oe.a,{title:"Details for ".concat(t.Name)},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t._id)})}},t.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"20px",marginBottom:"-4px"},src:Vt.a,alt:"Needs Work"}),"\xa0"),t.Name))),a&&r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Edit ".concat(t.Name)},r.a.createElement(se.a,{size:"small",color:"primary",style:{marginLeft:"8px"},onClick:function(a){e.setState({redirectTo:"/thing/edit/".concat(t._id)})}},r.a.createElement(St.a,null))))))}))))))}}]),a}(n.Component),Ft=Object(d.b)((function(e){return{things:e.app.things,types:e.app.types,selectedWorld:e.app.selectedWorld,user:e.app.user,indexExpandedPanel:e.app.indexExpandedPanel}}),(function(e){return{updateIndexExpandedPanel:function(t){return e({type:"UPDATE_INDEX_EXPANDED_PANEL",payload:t})}}}))(Lt),Bt=a(572),_t=a(573),zt=a(591),qt=a(589);function Ut(e){var t=e.type,a=e.types,n=e.things;void 0===t.typeID&&(t.typeID=t._id),a.forEach((function(e){void 0===e.typeID&&(e.typeID=e._id)})),n.forEach((function(e){void 0===e.thingID&&(e.thingID=e._id)}));var i=t.Defaults.filter((function(e){return""!==e.DefaultValue||e.DefaultListValues.length>0})),s=a.filter((function(e){return t.SuperIDs.includes(e.typeID)}));return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},t.Name),s.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement("div",{style:{marginLeft:"10px"}},"Super Types (",s.map((function(e,t){return r.a.createElement("span",{key:t},t>0&&r.a.createElement("span",null,",\xa0"),e.Name)})),")")),t.Attributes.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement("div",{style:{marginLeft:"10px"}},"Attributes (",t.Attributes.map((function(t,n){var i=e.attributesByID[t.attrID];if(void 0!==i){var s="";return s="Type"===i.AttributeType?"Type - ".concat(a.filter((function(e){return e.typeID===i.DefinedType}))[0].Name):"List"===i.AttributeType?"Type"===i.ListType?"List: Type - ".concat(a.filter((function(e){return e.typeID===i.DefinedType}))[0].Name):"List: ".concat(i.ListType):i.AttributeType,r.a.createElement("span",{key:n},n>0&&r.a.createElement("span",null,",\xa0"),i.Name,"\xa0(",s,")")}return r.a.createElement("span",{key:n})})),")")),void 0!==i&&i.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement("div",{style:{marginLeft:"10px"}},"Defaults (",i.map((function(t,a){var i=e.attributesByID[t.attrID];if(void 0!==i){var s="";if("Type"===i.AttributeType)s=e.thing.filter((function(e){return e.thingID===t.DefaultValue}))[0].Name;else if("List"===i.AttributeType)for(var o=function(e){if("Type"===i.ListType){var a=n.filter((function(a){return a.thingID===t.DefaultListValues[e]}))[0];void 0!==a&&(e>0&&(s+=", "),s+=a.Name)}else e>0&&(s+=", "),s+=t.DefaultListValues[e]},l=0;l<t.DefaultListValues.length;l++)o(l);else s=t.DefaultValue;return r.a.createElement("span",{key:a},a>0&&r.a.createElement("span",null,",\xa0"),i.Name,"\xa0(",s,")")}return r.a.createElement("span",{key:a})})),")")))}function Rt(e){var t=e.types.filter((function(t){return e.thing.TypeIDs.includes(t.typeID)})),a=e.thing,n=e.things;return void 0===a.typeID&&(a.thingID=a._id),t.forEach((function(e){void 0===e.typeID&&(e.typeID=e._id)})),n.forEach((function(e){void 0===e.thingID&&(e.thingID=e._id)})),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},a.Name),t.length>0&&r.a.createElement(U.a,{item:!0},"Types (",t.map((function(e,t){return r.a.createElement("span",{key:t},t>0&&r.a.createElement("span",null,",\xa0"),e.Name)})),")"),r.a.createElement(U.a,{item:!0},"Attributes (",a.Attributes.map((function(t,a){var i=e.attributesByID[t.attrID],s="";if("Type"===i.AttributeType)s=n.filter((function(e){return e.thingID===t.Value}))[0].Name;else if("List"===i.AttributeType)for(var o=function(e){e>0&&(s+=", "),"Type"===i.ListType?s+=n.filter((function(a){return a.thingID===t.ListValues[e]}))[0].Name:s+=t.ListValues[e]},l=0;l<t.ListValues.length;l++)o(l);else s=t.Value;return r.a.createElement("span",{key:a},a>0&&r.a.createElement("span",null,",\xa0"),i.Name,"\xa0(",s,")")})),")"))}var Ht=function e(t,a,n,r,i){var s=Object(H.a)({},i);if(!s.typeIDs.includes(t._id)){s.typeIDs.push(t._id);for(var o=function(i){if(!s.typeIDs.includes(t.SuperIDs[i])){var o=a.filter((function(e){return e._id===t.SuperIDs[i]}));o.length>0&&(o=o[0],s=e(o,a,n,r,s))}},l=0;l<t.SuperIDs.length;l++)o(l);for(var c=function(i){var o=r[t.Attributes[i].attrID];if(void 0!==o&&("Type"===o.AttributeType||"List"===o.AttributeType&&"Type"===o.ListType)&&!s.typeIDs.includes(o.DefinedType)){var l=a.filter((function(e){return e._id===o.DefinedType}));l.length>0&&(l=l[0],s=e(l,a,n,r,s))}},u=0;u<t.Attributes.length;u++)c(u);if(void 0!==t.Defaults&&null!==t.Default)for(var p=function(e){var i=r[t.Defaults[e].attrID];if("Type"===i.AttributeType){if(!s.thingIDs.includes(t.Defaults[e].DefaultValue)){var o=n.filter((function(a){return a._id===t.Defaults[e].DefaultValue}));o.length>0&&(o=o[0],s=Xt(o,a,n,r,s))}}else if("List"===i.AttributeType&&"Type"===i.ListType)for(var l=function(i){if(!s.thingIDs.includes(t.Defaults[e].DefaultListValues[i])){var o=n.filter((function(a){return a._id===t.Defaults[e].DefaultListValues[i]}));o.length>0&&(o=o[0],s=Xt(o,a,n,r,s))}},c=0;c<t.Defaults[e].DefaultListValues.length;c++)l(c)},d=0;d<t.Defaults.length;d++)p(d)}return s},Kt=function e(t,a,n,r,i){var s=Object(H.a)({},i),o=s.typeIDs.indexOf(t._id);if(o>-1){s.typeIDs.splice(o,1);for(var l=a.filter((function(e){return e.SuperIDs.includes(t._id)})),c=0;c<l.length;c++){var u=l[c];u.length>0&&(s=e(u=u[0],a,n,r,s))}for(var p=a.filter((function(e){return void 0!==e.ReferenceIDs&&e.ReferenceIDs.includes(t._id)})),d=0;d<p.length;d++){s=e(p[d],a,n,r,s)}for(var m=n.filter((function(e){return e.TypeIDs.includes(t._id)})),f=0;f<m.length;f++){var h=m[f];s=Gt(h,a,n,r,s)}}return s},Xt=function e(t,a,n,r,i){var s=Object(H.a)({},i);if(!s.thingIDs.includes(t._id)){s.thingIDs.push(t._id);for(var o=function(e){var i=t.TypeIDs[e];if(!s.typeIDs.includes(i)){var o=a.filter((function(e){return e._id===i}));o.length>0&&(o=o[0],s=Ht(o,a,n,r,s))}},l=0;l<t.TypeIDs.length;l++)o(l);for(var c=function(i){var o=r[t.Attributes[i].attrID];if(("Type"===o.AttributeType||"List"===o.AttributeType&&"Type"===o.ListType)&&!s.typeIDs.includes(o.DefinedType)){var l=a.filter((function(e){return e._id===o.DefinedType}));l.length>0&&(l=l[0],s=Ht(l,a,n,r,s))}if("Type"===o.AttributeType){var c=t.Attributes[i];if(!s.thingIDs.includes(c.Value)){var u=n.filter((function(e){return e._id===c.Value}));u.length>0&&(u=u[0],s=e(u,a,n,r,s))}}else"List"===o.AttributeType&&"Type"===o.ListType&&function(){for(var o=t.Attributes[i],l=function(t){if(!s.thingIDs.includes(o.ListValues[t])){var i=n.filter((function(e){return e._id===o.ListValues[t]}));i.length>0&&(i=i[0],s=e(i,a,n,r,s))}},c=0;c<o.ListValues.length;c++)l(c)}()},u=0;u<t.Attributes.length;u++)c(u)}return s},Gt=function e(t,a,n,r,i){var s=Object(H.a)({},i),o=s.thingIDs.indexOf(t._id);if(o>-1){s.thingIDs.splice(o,1);for(var l=a.filter((function(e){return e.Defaults.filter((function(e){return e.DefaultValue===t._id||e.DefaultListValues.includes(t._id)})).length>0})),c=0;c<l.length;c++){var u=l[c];s=Kt(u,a,n,r,s)}for(var p=n.filter((function(e){return void 0!==e.ReferenceIDs&&e.ReferenceIDs.includes(t._id)})),d=0;d<p.length;d++){s=e(p[d],a,n,r,s)}}return s};function Zt(e){var t=0===e.templates.filter((function(t){return t.Name===e.world.Name})).length,a=Object(n.useState)(e.world.Name),i=Object(Oe.a)(a,2),s=i[0],o=i[1],l=Object(n.useState)(""),c=Object(Oe.a)(l,2),u=c[0],p=c[1],d=Object(n.useState)(t?"":"This Template Name is already in use"),m=Object(Oe.a)(d,2),f=m[0],h=m[1],y=Object(n.useState)(!1),b=Object(Oe.a)(y,2),v=b[0],A=b[1],E=Object(n.useState)({typeIDs:[],thingIDs:[]}),T=Object(Oe.a)(E,2),D=T[0],w=T[1],k=Object(n.useState)(t),x=Object(Oe.a)(k,2),I=x[0],S=x[1],C=Object(n.useState)(""),O=Object(Oe.a)(C,2),N=O[0],P=O[1],W=Object(n.useState)({}),M=Object(Oe.a)(W,2),j=M[0],V=M[1],L=Object(n.useState)({}),F=Object(Oe.a)(L,2),B=F[0],_=F[1],z=e.things.filter((function(e){return 0===e.Types.length})),q=z.filter((function(e){return D.thingIDs.includes(e._id)}));return r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Create a template for use in other projects based on this one. The template will be usable by any user."),r.a.createElement(U.a,{item:!0},r.a.createElement(et,{Value:s,fieldName:"Template Name",message:f,onBlur:function(t){o(t),S(function(e,t,a){var n=0===t.templates.filter((function(t){return t.Name===e})).length;return a(n?"":"This Template Name is already in use"),n}(t,e,h))},labelWidth:110})),r.a.createElement(U.a,{item:!0,style:{color:"red"}},u),r.a.createElement(U.a,{item:!0},"Choose which data you want to include in the template. Dependencies will automatically be checked/unchecked as appropriate."),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:v,onClick:function(t){A(!0);for(var a=Object(H.a)({},D),n=0;n<e.types.length;n++)a=Ht(e.types[n],e.types,e.things,e.attributesByID,a);w(a),A(!1)}},v?r.a.createElement("span",null,"Please Wait"):r.a.createElement("span",null,r.a.createElement(qt.a,{disabled:!0,checked:"checked",color:"default"})," All Types"))),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:v,onClick:function(t){A(!0);var a=[];e.types.forEach((function(e){a.push(e._id)}));var n=[];e.things.forEach((function(e){n.push(e._id)})),w({typeIDs:a,thingIDs:n}),A(!1)}},v?r.a.createElement("span",null,"Please Wait"):r.a.createElement("span",null,r.a.createElement(qt.a,{disabled:!0,checked:"checked",color:"default"})," All"))),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{style:{marginLeft:"4px"},variant:"contained",color:"primary",disabled:v,onClick:function(e){w({typeIDs:[],thingIDs:[]})}},v?r.a.createElement("span",null,"Please Wait"):r.a.createElement("span",null,r.a.createElement(qt.a,{color:"default",disabled:!0})," All")))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(R.a,{style:{height:"300px",overflowY:"scroll",overflowX:"hidden"}},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},e.types.map((function(t,a){var n=e.things.filter((function(e){return e.TypeIDs.includes(t._id)})),i=n.filter((function(e){return D.thingIDs.includes(e._id)}));return r.a.createElement(U.a,{key:a,item:!0,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},N===t._id?r.a.createElement(Ne.a,{onClick:function(e){P("")}},r.a.createElement(Ot.a,null)):r.a.createElement(Ne.a,{onClick:function(e){P(t._id)}},r.a.createElement(Pt.a,null)),r.a.createElement(qt.a,{checked:D.typeIDs.includes(t._id),onChange:function(a){if(!v){A(!0);var n=Object(H.a)({},D);n=a.target.checked?Ht(t,e.types,e.things,e.attributesByID,n):Kt(t,e.types,e.things,e.attributesByID,n),w(n),A(!1)}},name:"include_type_".concat(t._id),color:"primary"}),r.a.createElement(Ne.a,{style:{width:"200px"},variant:"contained",color:"primary",onClick:function(e){V(t),_({})}},"".concat(t.Name," (").concat(i.length,"/").concat(n.length,")")),r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:v,style:{marginLeft:"4px"},onClick:function(t){A(!0);var a=Object(H.a)({},D);n.forEach((function(t){a=Xt(t,e.types,e.things,e.attributesByID,a)})),w(a),A(!1)}},v?r.a.createElement("span",null,"Please Wait"):r.a.createElement("span",null,r.a.createElement(qt.a,{disabled:!0,checked:"checked",color:"default"})," All"))),N===t._id&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,{style:{marginLeft:"50px",maxWidth:"380px"}},n.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(qt.a,{checked:D.thingIDs.includes(t._id),onChange:function(a){if(!v){A(!0);var n=Object(H.a)({},D);n=a.target.checked?Xt(t,e.types,e.things,e.attributesByID,n):Gt(t,e.types,e.things,e.attributesByID,n),w(n),A(!1)}},name:"include_thing_".concat(t._id),color:"primary"}),r.a.createElement(Ne.a,{style:{width:"200px"},variant:"contained",color:"primary",onClick:function(e){V({}),_(t)}},"".concat(t.Name)))})))))})),z.length>0&&r.a.createElement(U.a,{item:!0},"OTHER"===N?r.a.createElement(Ne.a,{onClick:function(e){P("")}},r.a.createElement(Ot.a,null)):r.a.createElement(Ne.a,{onClick:function(e){P("OTHER")}},r.a.createElement(Pt.a,null)),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},"Other Things (".concat(q.length,"/").concat(z.length,")"))),"OTHER"===N&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,{style:{maxWidth:"380px"}},z.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:10},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){V({}),_(e)}},e.Name))))}))))))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(R.a,{style:{height:"300px",overflowY:"scroll",overflowX:"hidden"}},void 0!==j._id?r.a.createElement(Ut,{type:j,types:e.types,things:e.things,attributesByID:e.attributesByID}):void 0!==B._id&&r.a.createElement(Rt,{thing:B,types:e.types,things:e.things,attributesByID:e.attributesByID})))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:v||!I||0===D.typeIDs.length,onClick:function(t){A(!0),function(e,t,a,n,r){r(!0);var i={_id:null,Name:e.trim(),typeIDs:t.typeIDs,thingIDs:t.thingIDs,worldID:a.world._id};a.api.createTemplate(i).then((function(e){void 0===e.error?(n("Success"),setTimeout((function(){r(!1),a.onSave()}),500)):(n(e.error),r(!1))})).catch((function(e){return console.log(e)}))}(s,D,e,p,A)}},v?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){void 0!==e.onCancel&&null!==e.onCancel&&e.onCancel()}},"Cancel"))))}function Qt(e){var t=Object(H.a)({},e.dingus),a={};return void 0!==e.Attributes&&(t.Attributes=Object(ee.a)(e.Attributes)),t.Attributes.forEach((function(e){void 0===e.attrID&&(e.attrID=e._id),a[e.attrID]=e})),void 0!==e.Types&&(t.Types=Object(ee.a)(e.Types),t.Types.forEach((function(e){void 0===e.typeID&&(e.typeID=e._id)}))),void 0===t.Types&&(t.Types=[]),void 0!==e.Things&&(t.Things=Object(ee.a)(e.Things),t.Things.forEach((function(e){void 0===e.thingID&&(e.thingID=e._id)}))),void 0===t.Things&&(t.Things=[]),r.a.createElement(U.a,{item:!0,xs:9,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},t.Name),r.a.createElement(U.a,{item:!0},"Types:"),t.Types.map((function(e,n){return r.a.createElement(Ut,{key:n,type:e,types:t.Types,things:t.Things,attributesByID:a})})),void 0!==t.Things&&t.Things.length>0&&r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},"Things:"),t.Things.map((function(e,n){return r.a.createElement(Rt,{key:n,thing:e,types:t.Types,things:t.Things,attributesByID:a})}))))}function Yt(e){var t=Object(n.useState)({}),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=Object(n.useState)(void 0===e.selectedTemplateIDs?[]:e.selectedTemplateIDs),l=Object(Oe.a)(o,2),c=l[0],u=l[1];return r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Click a template to view its contents. Select the templates you want to import into your project. Any which have types or attributes with the same names (either with each other or with what you already have in your project), we will try to merge them if possible. If it's not, then we will append the names of them with the names of the templates they came from, and you can resolve it yourself afterward."),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:3},"Templates:",r.a.createElement(ie.a,null,e.templates.map((function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(qt.a,{checked:c.includes(e._id),onChange:function(t){var a=Object(ee.a)(c);a.push(e._id),u(a)},name:"include_template_".concat(e._id),color:"primary"}),r.a.createElement(oe.a,{title:"Details for ".concat(e.Name)},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){s(e)}},e.Name)))})))),void 0!==i._id&&r.a.createElement(Qt,{dingus:i})),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:0===c.length,onClick:function(t){e.onSubmit(c)}},"OK")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){void 0!==e.onCancel&&null!==e.onCancel&&e.onCancel()}},"Cancel"))))}var Jt=a(200),$t=a.n(Jt),ea=a(199),ta=a.n(ea);var aa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).takeNextStep=function(){n.state.play&&!n.state.stepInProgress&&n.setState({stepInProgress:!0},n.reallyTakeNextStep)},n.reallyTakeNextStep=function(){var e=n.state.importingTypes,t=e.filter((function(e){return"Pending"===e.status}));if(t.length>0)(t=t[0]).status="Importing",n.setState({importingTypes:e},n.dumbImportType);else if(n.state.importingAttributes.filter((function(e){return"Pending"===e.status})).length>0)n.setState({attributesStatus:"Importing"},n.upsertAttributes);else{var a=n.state.importingThings,r=a.filter((function(e){return"Pending"===e.status}));if(r.length>0){r=r[0];var i=n.props.things.filter((function(e){return e.Name.trim().toLowerCase()===r.Name.trim().toLowerCase()}));if(i.length>0){i=i[0],r.thing=i,r.status="More Pending";var s=n.state.thingMap;s[r.templateThing.thingID]=i,n.setState({importingThings:a,thingMap:s,stepInProgress:!1},n.takeNextStep)}else r.status="Importing",n.setState({importingThings:a},n.dumbImportThing)}else(t=e.filter((function(e){return"More Pending"===e.status}))).length>0?((t=t[0]).status="Importing",n.setState({importingTypes:e},n.importType)):(r=a.filter((function(e){return"More Pending"===e.status}))).length>0?((r=r[0]).status="Importing",n.setState({importingThings:a},n.importThing)):n.props.onComplete&&n.props.onComplete()}},n.upsertAttributes=function(){var e=n.state.importingAttributes.filter((function(e){return"Pending"===e.status})),t=n.state.typeMap,a=n.state.attributeMap,r=n.state.template.Name,i=[];e.forEach((function(e){var s=!1,o=Object(H.a)({},e.templateAttribute);o.worldID=n.props.selectedWorldID,delete o.attrID,("Type"===o.AttributeType||"List"===o.AttributeType&&"Type"===o.ListType)&&(o.DefinedType=t[o.DefinedType]._id);var l=n.props.attributesByName[o.Name];if(void 0!==l)if(o.AttributeType!==l.AttributeType||"List"===o.AttributeType&&o.ListType!==l.ListType)o.Name+=" From Template (".concat(r,")"),s=!0;else{if(o._id=l._id,"Options"===o.AttributeType||"List"===o.AttributeType&&"Options"===o.ListType){var c=o.Options;o.Options=l.Options,c.forEach((function(e){o.Options.includes(e)||(o.Options.push(e),s=!0)}))}s||(e.status="Imported"),e.attribute=o,a[e.templateAttribute.attrID]=o}else s=!0;s&&i.push(o)})),i.length>0?n.api.upsertAttributes(n.props.selectedWorldID,i).then((function(t){e.forEach((function(e){var n=t.attributes[e.templateAttribute.Name],s=i.filter((function(t){return t.Name===e.templateAttribute.Name}));void 0!==n&&null!==n||(n=t.attributes["".concat(e.templateAttribute.Name," From Template (").concat(r,")")],s=i.filter((function(t){return t.Name==="".concat(e.templateAttribute.Name," From Template (").concat(r,")")}))),(s=s[0])._id=n,e.status="Imported",e.attribute=s,a[e.templateAttribute.attrID]=s})),n.setState({importingAttributes:e,attributeMap:a,stepInProgress:!1,attributesStatus:"Imported"},n.takeNextStep)})):n.setState({importingAttributes:e,attributesStatus:"Imported",attributeMap:a,stepInProgress:!1},n.takeNextStep)},n.dumbImportType=function(){var e=n.state.importingTypes,t=e.filter((function(e){return"Importing"===e.status}))[0],a=n.props.types.filter((function(e){return e.Name.trim().toLowerCase()===t.templateType.Name.trim().toLowerCase()}));if(a.length>0)a=a[0],n.api.updateType(a).then((function(r){if(void 0===r.error){t.type=a,t.status="More Pending";var i=n.state.typeMap;i[t.templateType.typeID]=a,n.setState({importingTypes:e,typeMap:i,stepInProgress:!1},n.takeNextStep)}else console.log(r.error)}));else{var r={_id:null,Name:t.templateType.Name,Description:t.templateType.Description,SuperIDs:[],AttributesArr:[],Attributes:[],worldID:n.props.selectedWorldID,Major:t.templateType.Major,EditUserID:n.props.user._id};n.api.createType(r).then((function(a){if(void 0===a.error){r._id=a.typeID,t.type=r,t.status="More Pending";var i=n.state.typeMap;i[t.templateType.typeID]=r,n.setState({importingTypes:e,typeMap:i,stepInProgress:!1},n.takeNextStep)}else console.log(a.error)}))}},n.dumbImportThing=function(){var e=n.state.importingThings,t=e.filter((function(e){return"Importing"===e.status}))[0],a={_id:null,Name:t.templateThing.Name,Description:t.templateThing.Description,worldID:n.props.selectedWorldID,TypeIDs:[],Attributes:[],ReferenceIDs:[],EditUserID:n.props.user._id};n.api.createThing(a).then((function(r){if(void 0===r.error){a._id=r.thingID,t.thing=a,t.status="More Pending";var i=n.state.thingMap;i[t.templateThing.thingID]=a,n.setState({importingThings:e,thingMap:i,stepInProgress:!1},n.takeNextStep)}else console.log(r.error)}))},n.importType=function(){var e=n.state.typeMap,t=n.state.attributeMap,a=n.state.thingMap,r=n.state.importingTypes,i=r.filter((function(e){return"Importing"===e.status}))[0],s=n.props.types.filter((function(e){return e.Name===i.templateType.Name}));s.length>0?(s=s[0],i.templateType.SuperIDs.forEach((function(t){var a=e[t]._id;s.SuperIDs.includes(a)||s.SuperIDs.push(a)})),i.templateType.Attributes.forEach((function(e){var a=t[e.attrID];0===s.Attributes.filter((function(e){return e.attrID===a._id})).length&&s.Attributes.push({attrID:a._id,index:s.Attributes.length})})),i.templateType.Defaults.forEach((function(e){var n=t[e.attrID],r=s.Defaults.filter((function(e){return e.attrID===n._id}));0===r.length?s.Defaults.push({attrID:n._id,DefaultValue:e.DefaultValue,DefaultListValues:e.DefaultListValues}):"List"===n.AttributeType&&(r=r[0],"Type"===n.ListType?e.DefaultListValues.forEach((function(e){var t=a[e]._id;r.DefaultListValues.includes(t)||r.DefaultListValues.push(t)})):e.DefaultListValues.forEach((function(e){r.DefaultListValues.includes(e)||r.DefaultListValues.push(e)})))})),n.api.updateType(s).then((function(e){void 0===e.error?(i.status="Imported",n.setState({importingTypes:r,stepInProgress:!1},n.takeNextStep)):console.log(e.error)}))):(s=i.type,i.templateType.SuperIDs.forEach((function(t){s.SuperIDs.push(e[t]._id)})),i.templateType.Attributes.forEach((function(e){s.Attributes.push({attrID:t[e.attrID]._id,index:s.Attributes.length})})),void 0!==s.Defaults&&null!==s.Defaults||(s.Defaults=[]),i.templateType.Defaults.forEach((function(e){var n=t[e.attrID],r=e.DefaultValue,i=e.DefaultListValues;"Type"===n.AttributeType?r=a[r]._id:"List"===n.AttributeType&&"Type"===n.ListType&&(i=[],e.DefaultListValues.forEach((function(e){i.push(a[e]._id)}))),s.Defaults.push({attrID:n._id,DefaultValue:r,DefaultListValues:i})})),n.api.updateType(s).then((function(e){void 0===e.error?(i.status="Imported",n.setState({importingTypes:r,stepInProgress:!1},n.takeNextStep)):console.log(e.error)})))},n.importThing=function(){var e=n.state.typeMap,t=n.state.attributeMap,a=n.state.thingMap,r=n.state.importingThings,i=r.filter((function(e){return"Importing"===e.status}))[0],s=n.props.things.filter((function(e){return e.Name===i.templateThing.Name}));s.length>0?(s=s[0],i.templateThing.TypeIDs.forEach((function(t){var a=e[t]._id;s.TypeIDS.includes(a)||s.TypeIDs.push(a)})),i.templateThing.Attributes.forEach((function(e){var n=t[e.attrID],r=e.Value,i=e.ListValues;if(s.Attributes.filter((function(e){return e.attrID===n._id})).length>0){if("List"===n.AttributeType){var o=s.Attributes.filter((function(e){return e.attrID===n._id}))[0];i=o.ListValues,e.ListValues.forEach((function(e){if("Type"===n.ListType){var t=a[e]._id;i.includes(t)||(i.push(t),s.ReferenceIDs.push(t))}else i.includes(e)||i.push(e)}))}}else"Type"===n.AttributeType?(r=a[e.Value]._id,s.ReferenceIDs.push(r)):"List"===n.AttributeType&&"Type"===n.ListType&&(i=[],e.ListValues.forEach((function(e){i.push(a[e]._id),s.ReferenceIDs.push(a[e]._id)}))),s.Attributes.push({attrID:n._id,index:s.Attributes.length,Value:r,ListValues:i})})),n.api.updateThing(s).then((function(e){void 0===e.error?(i.status="Imported",n.setState({importingThings:r,stepInProgress:!1},n.takeNextStep)):console.log(e.error)}))):(s=i.thing,i.templateThing.TypeIDs.forEach((function(t){s.TypeIDs.push(e[t]._id)})),i.templateThing.Attributes.forEach((function(e){var n=t[e.attrID],r=e.Value,i=e.ListValues;"Type"===n.AttributeType?(r=a[e.Value]._id,s.ReferenceIDs.push(r)):"List"===e.AttributeType&&"Type"===e.ListType&&(i=[],e.ListValues.forEach((function(e){i.push(a[e]._id),s.ReferenceIDs.push(a[e]._id)}))),s.Attributes.push({attrID:n.attrID,index:e.index,Value:r,ListValues:i})})),n.api.updateThing(s).then((function(e){void 0===e.error?(i.status="Imported",n.setState({importingThings:r,stepInProgress:!1},n.takeNextStep)):console.log(e.error)})))},n.state={templateID:null,template:null,importingTypes:[],importingAttributes:[],attributesStatus:"Pending",importingThings:[],play:!0,stepInProgress:!1},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;if(this.props.templateID!==this.state.templateID){var t=this.props.templates.filter((function(t){return t._id===e.props.templateID}));if(t.length>0){t=t[0];var a=[];t.Types.forEach((function(e){a.push({status:"Pending",templateType:e,type:null})}));var n=[];t.Attributes.forEach((function(e){n.push({status:"Pending",templateAttribute:e,attribute:null})}));var i=[];void 0!==t.Things&&null!==t.Things&&t.Things.forEach((function(e){i.push({status:"Pending",templateThing:e,thing:null})})),this.setState({templateID:this.props.templateID,template:t,importingTypes:a,importingAttributes:n,attributesStatus:"Pending",importingThings:i,play:!0,typeMap:{},attributeMap:{},thingMap:{},stepInProgress:!1},this.takeNextStep)}}return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,this.state.play?r.a.createElement(h.a,{"aria-label":"Pause Import",onClick:function(t){e.setState({play:!1})}},r.a.createElement(ta.a,null)):r.a.createElement(h.a,{"aria-label":"Pause Import",onClick:function(t){e.setState({play:!0},e.takeNextStep)}},r.a.createElement($t.a,null))))),r.a.createElement(U.a,{item:!0},"Importing ",this.props.templates.filter((function(t){return t._id===e.props.templateID}))[0].Name,".  Please Wait."),r.a.createElement(U.a,{item:!0},"Types:"),this.state.importingTypes.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},e.templateType.Name),r.a.createElement(U.a,{item:!0,xs:6,style:{color:"Importing"===e.status?"blue":"Imported"===e.status?"green":"grey"}},e.status))})),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},"Attributes:"),r.a.createElement(U.a,{item:!0,xs:6,style:{color:"Importing"===this.state.attributesStatus?"blue":"Imported"===this.state.attributesStatus?"green":"grey"}},this.state.attributesStatus)),this.state.importingThings.length>0&&r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Things:"),this.state.importingThings.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},e.templateThing.Name),r.a.createElement(U.a,{item:!0,xs:6,style:{color:"Importing"===e.status?"blue":"Imported"===e.status?"green":"grey"}},e.status))}))))}}]),a}(n.Component),na=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,user:e.app.user,fromLogin:e.app.fromLogin,templates:e.app.templates,types:e.app.types,things:e.app.things,attributesByName:e.app.attributesByName,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions}}),(function(e){return{selectWorld:function(t){return e(C(t))},addAndSelectWorld:function(t){return e(x(t))},updateWorld:function(t){return e(I(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},logout:function(){return e(T({}))}}}))(aa);var ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).delete=function(e){n.api.deleteWorld(n.props.selectedWorldID).then((function(e){void 0===e.error?n.api.getWorlds(!0).then((function(e){n.props.setPublicWorlds(e.publicWorlds.worlds),n.props.setWorlds(e.userWorlds.worlds),n.props.setTemplates(e.templates.templates),n.props.setAllUsers(e.allUsers),n.props.selectWorld(null),n.setState({modalOpen:!1,redirectTo:"/"})})):n.setState({waiting:!1,message:e.error})}))},n.getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},n.load=function(e){n.props.fromLogin&&n.props.notFromLogin(),n.state.templateMode||n.state.importMode?n.setState({loading:!0,templateMode:!1,importMode:!1},(function(t){n.props.selectWorld(e),n.api.getWorld(e).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),null!==n.props.user&&void 0!==n.props.user?n.loadViews():n.setState({loading:!1,recentTypeChanges:[],recentThingChanges:[]})}))})):n.setState({loading:!0},(function(t){n.props.selectWorld(e),n.api.getWorld(e).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),null!==n.props.user&&void 0!==n.props.user?n.loadViews():n.setState({loading:!1,recentTypeChanges:[],recentThingChanges:[]})}))}))},n.loadViews=function(){n.state.loading?n.api.getViews(n.props.selectedWorldID,n.props.user._id).then((function(e){var t=e.filter((function(e){return"Type"===e.objectType})),a=n.props.types.filter((function(e){return e.EditUserID!==n.props.user._id&&t.filter((function(t){return t.objectID===e._id&&t.ViewDT<e.EditDT})).length>0})),r=e.filter((function(e){return"Type"===e.objectType})),i=n.props.things.filter((function(e){return e.EditUserID!==n.props.user._id&&r.filter((function(t){return t.objectID===e._id&&t.ViewDT<e.EditDT})).length>0}));n.setState({loading:!1,recentTypeChanges:a,recentThingChanges:i})})):n.setState({loading:!0,templateMode:!1,importMode:!1},(function(e){n.api.getViews(n.props.selectedWorldID,n.props.user._id).then((function(e){var t=e.filter((function(e){return"Type"===e.objectType})),a=n.props.types.filter((function(e){return e.EditUserID!==n.props.user._id&&t.filter((function(t){return t.objectID===e._id&&t.ViewDT<e.EditDT})).length>0})),r=e.filter((function(e){return"Type"===e.objectType})),i=n.props.things.filter((function(e){return e.EditUserID!==n.props.user._id&&r.filter((function(t){return t.objectID===e._id&&t.ViewDT<e.EditDT})).length>0}));n.setState({loading:!1,recentTypeChanges:a,recentThingChanges:i})}))}))},n.requestToCollaborate=function(){n.api.requestToCollaborate(n.props.selectedWorldID).then((function(e){var t=n.props.selectedWorld;t.Collaborators.push(e),n.props.updatePublicWorldForCollab(t)}))},n.respondToInvite=function(){var e=n.props.selectedWorld.Collaborators.filter((function(e){return e.userID===n.props.user._id&&"invite"===e.type}))[0];n.setState({redirectTo:"/project/collaborate/".concat(n.props.selectedWorldID,"/").concat(e.collabID)})},n.updateTemplates=function(){n.api.getTemplates().then((function(e){n.props.setTemplates(e.templates),n.setState({templateMode:!1})}))},n.state={world:null,modalOpen:!1,redirectTo:null,templateMode:!1,importMode:!1,selectedTemplateIDs:[],expandRecentChanges:!0},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getAttributes",value:function(){var e=this;this.api.getAttributesForWorld(this.props.selectedWorldID).then((function(t){void 0!==t&&void 0===t.error&&(e.props.setAttributes(t.attributes),e.getTypes())}))}},{key:"getTypes",value:function(){var e=this;this.api.getTypesForWorld(this.props.selectedWorldID).then((function(t){if(void 0!==t&&void 0===t.error){var a=t.types,n=[];a.forEach((function(t){t.Supers=[],t.SuperIDs.forEach((function(e){t.Supers=t.Supers.concat(a.filter((function(t){return t._id===e})))})),t.AttributesArr=[],t.Attributes.forEach((function(a){var r=e.props.attributesByID[a.attrID];r.TypeIDs.push(t._id),n.push(r),t.AttributesArr.push({index:t.AttributesArr.length,Name:r.Name,AttributeType:r.AttributeType,Options:r.Options,DefinedType:r.DefinedType,ListType:r.ListType,attrID:a.attrID,TypeIDs:a.TypeIDs})}));var r={};void 0!==t.Defaults&&t.Defaults.forEach((function(e){r[e.attrID]=e})),t.DefaultsHash=r})),e.props.updateAttributes(n),e.props.setTypes(a),e.getThings()}}))}},{key:"getThings",value:function(){var e=this;this.api.getThingsForWorld(this.props.selectedWorldID).then((function(t){if(void 0!==t&&void 0===t.error){var a=t.things;a.forEach((function(t){t.Types=[],t.TypeIDs.forEach((function(a){t.Types=t.Types.concat(e.props.types.filter((function(e){return e._id===a})))}))})),e.props.setThings(a)}}))}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;if(!(this.props.worlds.length>0||this.props.publicWorlds.length>0)||null!==this.props.selectedWorldID&&this.props.selectedWorldID===t){if(void 0===this.state.recentTypeChanges&&null!==this.props.user&&void 0!==this.props.user)return this.loadViews(),r.a.createElement("span",null,"Loading");if(this.state.loading)return r.a.createElement("span",null,"Loading");if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user){if(null===this.props.selectedWorld||this.props.selectedWorld.Public||this.props.selectedWorld.Owner===this.props.user._id||0!==this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type})).length){if(this.state.templateMode)return r.a.createElement(Zt,{world:this.props.selectedWorld,types:this.props.types,things:this.props.things,attributesByID:this.props.attributesByID,templates:this.props.templates,onSave:function(t){e.updateTemplates()},onCancel:function(t){e.setState({templateMode:!1})},api:this.api});if(this.state.importMode)return r.a.createElement(Yt,{templates:this.props.templates,onSubmit:function(t){setTimeout((function(){e.setState({selectedTemplateIDs:t,importMode:!1})}),500)},onCancel:function(t){e.setState({importMode:!1})}});if(this.state.selectedTemplateIDs.length>0)return r.a.createElement(na,{templateID:this.state.selectedTemplateIDs[0],onComplete:function(a){e.api.getWorld(t,!0).then((function(t){e.props.setAttributes(t.attributes),e.props.setTypes(t.types),e.props.setThings(t.things),setTimeout((function(){var t=Object(ee.a)(e.state.selectedTemplateIDs);t.shift(),e.setState({selectedTemplateIDs:t})}),500)}))},onCancel:function(t){e.setState({selectedTemplateIDs:[]})}});var a=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},null!==this.props.selectedWorld&&r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: ".concat(this.props.selectedWorld.Name))),r.a.createElement(U.a,{item:!0,xs:12,sm:8,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement("h2",null,this.props.selectedWorld.Name)),r.a.createElement(U.a,{item:!0},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.selectedWorld.Description}})),r.a.createElement(U.a,{item:!0},r.a.createElement(R.a,{display:{xs:"none",sm:"block"}},r.a.createElement(Ft,null)))),null!==this.props.user&&r.a.createElement(U.a,{item:!0,xs:12,sm:4},this.props.selectedWorld.Owner===this.props.user._id?r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Edit ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/edit/".concat(e.props.selectedWorldID)})}},r.a.createElement(St.a,null)))),r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Edit Collaborators"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/collaborators/".concat(e.props.selectedWorldID)})}},r.a.createElement(Bt.a,null)))),r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Delete ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement(_t.a,null)))))),r.a.createElement(g.a,null,r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.setState({templateMode:!0})}},"Create a Template")),r.a.createElement(g.a,null,r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.setState({importMode:!0})}},"Import Templates"))):r.a.createElement(ie.a,null,void 0!==this.props.selectedWorld.Collaborators&&0===this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id})).length?r.a.createElement(g.a,null,this.props.selectedWorld.AcceptingCollaborators&&r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.requestToCollaborate,type:"button"},"Request to Collaborate")):this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"request"===t.type})).length>0?r.a.createElement(g.a,null,"Waiting on Collaboration Request"):this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"invite"===t.type})).length>0&&r.a.createElement(g.a,null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.respondToInvite,type:"button"},"You've been invited to Collaborate"))),void 0!==this.state.recentTypeChanges&&this.state.recentTypeChanges.length+this.state.recentThingChanges.length>0&&r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},this.state.expandRecentChanges?r.a.createElement(oe.a,{title:"Collapse Recent Changes"},r.a.createElement(Ne.a,{onClick:function(t){e.setState({expandRecentChanges:!1})}},r.a.createElement(Ot.a,null))):r.a.createElement(oe.a,{title:"Expand Recent Changes"},r.a.createElement(Ne.a,{onClick:function(t){e.setState({expandRecentChanges:!0})}},r.a.createElement(Pt.a,null))),r.a.createElement("span",{className:"MuiTypography-root MuiListItemText-primary MuiTypography-body1"},"Recent Changes (",this.state.recentTypeChanges.length+this.state.recentThingChanges.length,")")),this.state.expandRecentChanges&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,this.state.recentTypeChanges.map((function(t,a){var n=e.props.allUsers.filter((function(e){return e._id===t.EditUserID}));return n=n.length>0?n[0]:{username:"Unknown"},r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})},type:"button"},t.Name," (",new Date(t.EditDT).toDateString(),", ",n.username,")"))}))),r.a.createElement(ie.a,null,this.state.recentThingChanges.map((function(t,a){var n=e.props.allUsers.filter((function(e){return e._id===t.EditUserID}));return n=n.length>0?n[0]:null,r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t._id)})},type:"button"},t.Name," (",t.EditDT,", ",n.username,")"))})))))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(R.a,{display:{xs:"block",sm:"none"}},r.a.createElement(Ft,null))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(st,{user:this.props.user,allUsers:this.props.allUsers,object:this.props.selectedWorld,objectType:"World",world:this.props.selectedWorld,api:this.api,onChange:this.commentsChange,suggestions:a}))),r.a.createElement(zt.a,{"aria-labelledby":"delete-thing-modal","aria-describedby":"delete-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Are you sure you want to delete ",null!==this.props.selectedWorld?this.props.selectedWorld.Name:"","?"),r.a.createElement(U.a,{item:!0},"(All external references to it will be left alone and may not work correctly)"),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}return r.a.createElement(ye.a,{to:"/"})}return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login")}return this.load(t),r.a.createElement("span",null,"Loading")}}]),a}(n.Component),ia=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,publicWorlds:e.app.publicWorlds,types:e.app.types,things:e.app.things,user:e.app.user,attributesByID:e.app.attributesByID,attributesByName:e.app.attributesByName,fromLogin:e.app.fromLogin,templates:e.app.templates,allUsers:e.app.allUsers,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions}}),(function(e){return{selectWorld:function(t){return e(C(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},setWorlds:function(t){return e(D(t))},setTemplates:function(t){return e(w(t))},setAllUsers:function(t){return e(k(t))},setPublicWorlds:function(t){return e(S(t))},updatePublicWorldForCollab:function(t){return e({type:"UPDATE_PUBLIC_WORLD_COLLAB",payload:t})},setAttributes:function(t){return e(O(t))},updateAttributes:function(t){return e({type:"UPDATE_ATTRIBUTES",payload:t})},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))}}}))(ra),sa=a(575),oa=a(574);var la=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;void 0!==r[t]&&r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.a11yProps=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},n.validateField=function(e){var t=n.state[e],a=!0,r="";switch(e){case"Name":(a=null!==t.match(/^[a-zA-Z0-9 ]*$/i))?t.length<4?(a=!1,r="Project Name is too short"):(a=0===n.props.worlds.filter((function(e){return e.Name===t&&e._id!==n.state._id})).length)||(r="This Project Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Project Names";break;case"inviteEmail":r=(a=null!==t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid"}return{valid:a,message:r}},n.validateForm=function(e){var t=n.validateField("Name"),a=t.valid,r=n.state.fieldValidation;r.Name=t,n.setState({formValid:a,fieldValidation:r},e)},n.onSubmit=function(){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},n.cleanWYSIWYG=function(e){return e.endsWith("<p><br></p>")&&(e=e.substring(0,e.length-11)),e},n.submitThroughAPI=function(){var e={_id:n.state._id,Name:n.state.Name.trim(),Description:n.cleanWYSIWYG(n.state.Description.trim()),Public:n.state.Public,AcceptingCollaborators:n.state.AcceptingCollaborators,Owner:n.props.user._id};null===e._id?n.api.createWorld(e).then((function(t){void 0!==t.error?n.setState({message:t.error},(function(){n.props.logout()})):(e._id=t.worldID,n.props.addAndSelectWorld(e),void 0===n.state.tempSelectedTemplateIDs||0===n.state.tempSelectedTemplateIDs.length?n.setState({waiting:!1,redirectTo:"/project/details/".concat(t.worldID)}):n.setState({selectedTemplateIDs:n.state.tempSelectedTemplateIDs,tempSelectedTemplateIDs:[]}))})).catch((function(e){return console.log(e)})):n.api.updateWorld(e).then((function(t){void 0!==t.error?n.setState({message:t.error},(function(){n.props.logout()})):(n.props.updateWorld(e),void 0===n.state.tempSelectedTemplateIDs||0===n.state.tempSelectedTemplateIDs.length?n.setState({waiting:!1,redirectTo:"/project/details/".concat(n.props.selectedWorldID)}):n.setState({selectedTemplateIDs:n.state.tempSelectedTemplateIDs,tempSelectedTemplateIDs:[]}))})).catch((function(e){return console.log(e)}))},n.load=function(e){setTimeout((function(){n.props.selectedWorldID!==e&&n.props.selectWorld(e),n.setState({_id:e,redirectTo:null,loaded:!1},n.finishLoading)}),500)},n.finishLoading=function(){null===n.state._id?n.setState({Name:"",Description:"",AcceptingCollaborators:!1,Public:!1,loaded:!0}):(n.props.selectWorld(n.state._id),n.api.selectWorld(n.state._id).then((function(e){n.api.getWorld(n.props.selectedWorldID).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),n.setState({Name:n.props.selectedWorld.Name,Description:void 0===n.props.selectedWorld.Description?"":n.props.selectedWorld.Description,AcceptingCollaborators:void 0!==n.props.selectedWorld.AcceptingCollaborators&&n.props.selectedWorld.AcceptingCollaborators,Public:n.props.selectedWorld.Public,loaded:!0})}))})))},n.state={Name:"",Description:"",Public:!1,AcceptingCollaborators:!1,fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,loaded:!0,importMode:!1,selectedTemplateIDs:[],tempSelectedTemplateIDs:[]},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;this.props.fromLogin&&this.props.notFromLogin();var t=this.props.match.params.id;if(void 0===t&&(t=null),this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading...");if(this.state.loaded){if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null!==this.props.selectedWorld&&null===this.props.user)return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login");if(null===this.state._id||null===this.props.selectedWorld||null!==this.props.user&&this.props.selectedWorld.Owner===this.props.user._id){if(this.state.importMode)return r.a.createElement(Yt,{templates:this.props.templates,selectedTemplateIDs:this.state.tempSelectedTemplateIDs,onSubmit:function(t){e.setState({tempSelectedTemplateIDs:t,importMode:!1})},onCancel:function(t){e.setState({importMode:!1})}});if(this.state.selectedTemplateIDs.length>0)return r.a.createElement(na,{templateID:this.state.selectedTemplateIDs[0],onComplete:function(t){e.api.getWorld(e.props.selectedWorldID,!0).then((function(t){e.props.setAttributes(t.attributes),e.props.setTypes(t.types),e.props.setThings(t.things),setTimeout((function(){var t=Object(ee.a)(e.state.selectedTemplateIDs);t.shift(),t.length>0?e.setState({selectedTemplateIDs:t}):e.setState({waiting:!1,redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}),500)}))},onCancel:function(t){e.setState({selectedTemplateIDs:[]})}});var a=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(kt.a,null,r.a.createElement("title",null,null===this.state._id?"Author's Notebook: Create New World":"Author's Notebook: Edit ".concat(this.props.selectedWorld.Name))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:1},null!==this.props.selectedWorld&&r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name," Details")},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:11},r.a.createElement("h2",null,null===this.state._id?"Create New Project":"Edit Project"))),r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"name"},"Name"),r.a.createElement(re.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(U.a,{item:!0},r.a.createElement(et,{Value:this.state.Description,fieldName:"Description",multiline:!0,onBlur:function(t){e.setState({Description:t})},labelWidth:82,options:a})),r.a.createElement(U.a,{item:!0},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:this.state.Public,onChange:this.handleUserInput,name:"Public",color:"primary"}),label:"Public"}),this.state.Public?r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:this.state.AcceptingCollaborators,onChange:this.handleUserInput,name:"AcceptingCollaborators",color:"primary"}),label:"Accepting Collaborator Requests"}):""),r.a.createElement(U.a,{item:!0},this.state.message),void 0!==this.state.tempSelectedTemplateIDs&&this.state.tempSelectedTemplateIDs.length>0&&r.a.createElement(U.a,{item:!0},"Templates will be imported on submit"),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,color:"primary",disabled:this.state.waiting,onClick:function(t){e.setState({importMode:!0})},type:"submit"},"Import Templates")),r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,color:"primary",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.setState({redirectTo:null===e.state._id?"/":"/project/details/".concat(e.state._id)})},type:"button"},"Cancel"))),r.a.createElement(U.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))))}return r.a.createElement(ye.a,{to:"/"})}return r.a.createElement("span",null,"Loading...")}}]),a}(n.Component),ca=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,user:e.app.user,fromLogin:e.app.fromLogin,templates:e.app.templates,types:e.app.types,attributesByName:e.app.attributesByName,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions}}),(function(e){return{selectWorld:function(t){return e(C(t))},addAndSelectWorld:function(t){return e(x(t))},updateWorld:function(t){return e(I(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},logout:function(){return e(T({}))}}}))(la),ua=a(576),pa=a(73),da=a.n(pa),ma=a(74),fa=a.n(ma),ha=a(577),ga=a(363);var ya=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.state.email&&(n.validateField("email"),n.validateField("password"),n.setState({remember:!0}))},n.handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.handleClickShowPassword=function(){n.setState({showPassword:!n.state.showPassword})},n.handleMouseDownPassword=function(e){e.preventDefault()},n.validateField=function(e){var t=!0,a="",r=n.state[e];switch(e){case"email":a=(t=null!==r.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid";break;case"password":a=(t=r.length>=6)?"":"Password is too short";break;case"confirmEmail":a=(t=r===n.state.email)?"":"Confirm Email doesn't match Email";break;case"confirmPassword":a=(t=r===n.state.password)?"":"Confirm Password doesn't match Password";break;case"username":a=(t=r.length>=2)?"":"Username is too short",t&&0!==n.props.allUsers.filter((function(e){return e.username===r})).length&&(t=!1,a="This Username is taken")}return{valid:t,message:a}},n.validateForm=function(e){var t=n.validateField("email"),a={valid:!0,message:""},r={valid:!0,message:""},i={valid:!0,message:""},s={valid:!0,message:""};switch(n.state.formMode){case"Login":r=n.validateField("password");break;case"Register":a=n.validateField("confirmEmail"),r=n.validateField("password"),i=n.validateField("confirmPassword"),s=n.validateField("username")}var o=t.valid&&r.valid&&a.valid&&i.valid&&s.valid,l=n.state.fieldValidation;l.email=t,l.password=r,l.confirmEmail=a,l.confirmPassword=i,l.username=s,n.setState({formValid:o,fieldValidation:l},e)},n.onSubmit=function(){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},n.submitThroughAPI=function(){var e={email:n.state.email.trim(),password:n.state.password,username:n.state.username.trim(),followingWorlds:n.props.followingWorlds};"login"===n.state.formMode?n.api.login(e,n.state.remember).then((function(e){if(null===e.user){var t=n.state.fieldValidation;t.loginError={message:e.error,valid:!1,show:!0},n.setState({fieldValidation:t,waiting:!1})}else n.props.userLogin(e.user),n.api.getWorldsForUser(e.user._id).then((function(e){n.props.setWorlds(e.worlds),n.props.onLogin(e.user)}))})).catch((function(e){return console.log(e)})):"register"===n.state.formMode?n.api.register(e).then((function(e){void 0===e.error?n.setState({message:e.message,formMode:"login",fieldValidation:{email:{valid:!0,message:""},password:{valid:!0,message:""},confirmEmail:{valid:!0,message:""},confirmPassword:{valid:!0,message:""},username:{valid:!0,message:""}},waiting:!1},(function(e){n.api.getAllUsers(!0).then((function(e){n.props.setAllUsers(e)}))})):n.setState({message:e.error,waiting:!1})})).catch((function(e){return console.log(e)})):"password"===n.state.formMode&&n.api.sendReset(e).then((function(e){n.setState({message:e.message,formMode:"login",fieldValidation:{email:{valid:!0,message:""},password:{valid:!0,message:""},confirmEmail:{valid:!0,message:""},confirmPassword:{valid:!0,message:""},username:{valid:!0,message:""}},waiting:!1})})).catch((function(e){return console.log(e)}))},n.loginClick=function(){n.setState({formMode:"login"})},n.registerClick=function(){n.setState({formMode:"register"})},n.passwordClick=function(){n.setState({formMode:"password"})};var r=new ga.a,i=r.get("email"),s=r.get("password");return n.state={formMode:"login",email:void 0===i?"":i,password:void 0===s?"":s,confirmEmail:"",confirmPassword:"",fieldValidation:{email:{valid:!0,message:""},password:{valid:!0,message:""},confirmEmail:{valid:!0,message:""},confirmPassword:{valid:!0,message:""},username:{valid:!0,message:""}},formValid:!1,remember:!1,message:"",username:""},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return null===this.props.allUsers?(this.api.getAllUsers(!0).then((function(t){e.props.setAllUsers(t)})),r.a.createElement("div",null)):"login"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"email"},"Email"),r.a.createElement(re.a,{id:"email",name:"email",type:"email",error:!this.state.fieldValidation.email.valid,value:this.state.email,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.email.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(re.a,{id:"outlined-adornment-password",name:"password",type:this.state.showPassword?"text":"password",value:this.state.password,error:!this.state.fieldValidation.password.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(da.a,null):r.a.createElement(fa.a,null))),labelWidth:70,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.password.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:this.state.remember,onChange:this.handleUserInput,name:"remember",color:"primary"}),label:"Stay Signed In"}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(ha.a,{onClick:this.registerClick},"Register")," ",r.a.createElement(ha.a,{onClick:this.passwordClick},"Forgot Password")),r.a.createElement("div",{className:"float-right"},r.a.createElement(Ne.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):"register"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Register"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"username"},"Username"),r.a.createElement(re.a,{id:"username",name:"username",type:"text",value:this.state.username,error:!this.state.fieldValidation.username.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:80,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.username.message))))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"email"},"Email"),r.a.createElement(re.a,{id:"email",name:"email",type:"email",value:this.state.email,error:!this.state.fieldValidation.email.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.email.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"confirmEmail"},"Confirm Email"),r.a.createElement(re.a,{id:"confirmEmail",name:"confirmEmail",type:"email",error:!this.state.fieldValidation.confirmEmail.valid,value:this.state.confirmEmail,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:100,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.confirmEmail.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(re.a,{id:"outlined-adornment-password",name:"password",type:this.state.showPassword?"text":"password",value:this.state.password,error:!this.state.fieldValidation.password.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(da.a,null):r.a.createElement(fa.a,null))),labelWidth:70,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.password.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"confirm-password"},"Confirm Password"),r.a.createElement(re.a,{id:"confirm-password",name:"confirmPassword",type:this.state.showPassword?"text":"password",value:this.state.confirmPassword,error:!this.state.fieldValidation.confirmPassword.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(da.a,null):r.a.createElement(fa.a,null))),labelWidth:130,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.confirmPassword.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(ha.a,{onClick:this.loginClick},"Login")," ",r.a.createElement(ha.a,{onClick:this.passwordClick},"Forgot Password")," "),r.a.createElement("div",{className:"float-right"},r.a.createElement(Ne.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):"password"===this.state.formMode?r.a.createElement("div",null,r.a.createElement("h2",null,"Forgot Password?"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"email"},"Email"),r.a.createElement(re.a,{id:"email",name:"email",type:"email",value:this.state.email,error:!this.state.fieldValidation.email.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:40,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.email.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-left"},r.a.createElement(ha.a,{onClick:this.registerClick},"Register")," ",r.a.createElement(ha.a,{onClick:this.loginClick},"Login")),r.a.createElement("div",{className:"float-right"},r.a.createElement(Ne.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):void 0}}]),a}(n.Component),ba=Object(d.b)((function(e){return{user:e.app.user,loginError:e.app.loginError,followingWorlds:e.app.followingWorlds,allUsers:e.app.allUsers}}),(function(e){return{userLogin:function(t){return e({type:"LOGIN",payload:t})},setWorlds:function(t){return e(D(t))},setFollowingWorlds:function(t){return e(q(t))},setAllUsers:function(t){return e(k(t))}}}))(ya);var va=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){},n.accept=function(){null===n.props.user?n.setState({waiting:!1,accepted:!0}):n.setState({waiting:!0},n.submitAccept)},n.submitAccept=function(){n.api.acceptCollabInvite(n.state.worldID,n.state.collabID).then((function(e){n.setState({waiting:!1,accepted:!0},n.getWorlds)}))},n.getWorlds=function(){n.api.getWorldsForUser().then((function(e){void 0!==e.worlds&&n.props.setWorlds(e.worlds),n.refreshWorld()}))},n.refreshWorld=function(){n.api.getWorld(n.state.worldID,!0).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things)}))},n.onLoginAccept=function(e){n.setState({waiting:!0},n.submitAccept)},n.decline=function(){n.setState({waiting:!0},n.submitDecline)},n.submitDecline=function(){n.api.declineCollabInvite(n.state.worldID,n.state.collabID).then((function(e){n.setState({waiting:!1,accepted:!1},n.refreshWorld)}))},n.state={worldID:null,collabID:null,codeValid:!1,accepted:null,message:"Please wait.  Validating code.",world:null},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;if(null===this.state.collabID){var t=this.props.match.params,a=t.worldID,n=t.collabID;return setTimeout((function(){e.api.checkCollabID(a,n).then((function(t){void 0!==t.error?e.setState({collabID:n,worldID:a,codeValid:!1,message:t.error}):e.setState({collabID:n,worldID:a,world:t.world,codeValid:!0,message:""})}))}),500),r.a.createElement("div",null,r.a.createElement("h2",null,this.state.message))}return this.state.codeValid?null===this.state.accepted?r.a.createElement(U.a,{container:!0,spacing:1},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("h2",null,"You've been invited to collaborate on ",this.state.world.Name)),r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.accept,type:"button"},"Accept")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{className:"w-200",variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.decline,type:"button"},"Decline")))):this.state.accepted?null===this.props.user?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement("h2",null,"Please log in (or register and then log in if you're new) so we can add you as a collaborator on ",this.state.world.Name,".")),r.a.createElement(U.a,{item:!0},r.a.createElement(ba,{onLogin:this.onLoginAccept}))):r.a.createElement(U.a,{container:!0,spacing:1},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement("h2",null,"Congratulations! You can now collaborate on ",this.state.world.Name))):r.a.createElement(U.a,{container:!0,spacing:1},r.a.createElement(U.a,{item:!0,xs:12},"Okay.  Well, we hope you enjoy working on other projects.")):r.a.createElement("div",null,r.a.createElement("h2",null,this.state.message))}}]),a}(n.Component),Aa=Object(d.b)((function(e){return{user:e.app.user}}),(function(e){return{setWorlds:function(t){return e(D(t))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))}}}))(va),Ea=a(587),Ta=a(578),Da=a(588),wa=a(579),ka=a(580);function xa(e){var t=e.children,a=e.value,n=e.index;return r.a.createElement("div",null,a===n&&r.a.createElement(R.a,{p:3},t))}var Ia=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;void 0!==r[t]&&r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.a11yProps=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},n.validateField=function(e){var t=n.state[e],a=!0,r="";switch(e){case"inviteEmail":r=(a=null!==t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid"}return{valid:a,message:r}},n.addNewCollaborator=function(){n.setState({waiting:!0},(function(){var e=this;this.api.addNewCollaborator(this.props.selectedWorldID,this.state.selectedUser._id,this.state.selectedUser.email).then((function(t){if(void 0===t.error){var a=Object(ee.a)(e.state.Collaborators);a.push(t);var n=e.props.selectedWorld;n.Collaborators=a,e.props.updateWorld(n),e.setState({Collaborators:a,inviteMessage:"Invite Sent",selectedUser:"",waiting:!1})}else e.setState({message:t.error,waiting:!1},(function(){e.props.logout()}))}))}))},n.emailCollaborator=function(){if(n.validateField("inviteEmail")){n.setState({waiting:!0},(function(){var e=this;this.api.emailCollaborator(this.props.selectedWorldID,this.state.inviteEmail).then((function(t){if(void 0===t.error){var a=Object(ee.a)(e.state.Collaborators);a.push(t);var n=e.props.selectedWorld;n.Collaborators=a,e.props.updateWorld(n),e.setState({Collaborators:a,inviteMessage:"Email Sent",inviteEmail:"",waiting:!1})}else e.setState({message:t.error,waiting:!1},(function(){e.props.logout()}))}))}))}},n.updateCollaboratorPermission=function(e,t){e.editPermission=t,n.setState({waiting:!0},(function(){var a=this;this.api.updateCollaboratorPermission(this.props.selectedWorldID,e.collabID,t).then((function(n){if(void 0===n.error){var r=Object(ee.a)(a.state.Collaborators);r.filter((function(t){return t.collabID===e.collabID}))[0].editPermission=t;var i=a.props.selectedWorld;i.Collaborators=r,a.props.updateWorld(i),a.setState({Collaborators:r,waiting:!1})}else a.setState({message:n.error,waiting:!1},(function(){a.props.logout()}))}))}))},n.generateCollabLink=function(){n.setState({waiting:!0},(function(){var e=this;this.api.generateCollabLink(this.props.selectedWorldID).then((function(t){if(void 0===t.error){var a=Object(ee.a)(e.state.Collaborators);a.push(t);var n=e.props.selectedWorld;n.Collaborators=a,e.props.updateWorld(n),e.setState({collabLink:t.collabLink,collabLinkCopied:!1,Collaborators:a,waiting:!1})}else e.setState({message:t.error,waiting:!1},(function(){e.props.logout()}))}))}))},n.deleteCollab=function(e){n.setState({waiting:!0},(function(){var t=this;this.api.deleteCollab(this.props.selectedWorldID,e.collabID).then((function(a){if(void 0===a.error){var n=t.state.Collaborators.filter((function(t){return t.collabID!==e.collabID})),r=t.props.selectedWorld;r.Collaborators=n,t.props.updateWorld(r),t.setState({collabLink:a.collabLink,collabLinkCopied:!1,Collaborators:n,waiting:!1})}else t.setState({message:a.error,waiting:!1},(function(){t.props.logout()}))}))}))},n.acceptCollab=function(e){n.setState({waiting:!0},(function(){var t=this;this.api.acceptCollabRequest(this.props.selectedWorldID,e.collabID).then((function(a){if(void 0===a.error){var n=Object(ee.a)(t.state.Collaborators);n.filter((function(t){return t.collabID===e.collabID}))[0].type="collab";var r=t.props.selectedWorld;r.Collaborators=n,t.props.updateWorld(r),t.setState({Collaborators:n,waiting:!1})}else t.setState({message:a.error,waiting:!1},(function(){t.props.logout()}))}))}))},n.copyCollabLink=function(){n.generatedLink.children[0].select(),document.execCommand("copy"),n.setState({collabLinkCopied:!0})},n.load=function(e){n.props.fromLogin&&n.props.notFromLogin(),setTimeout((function(){n.setState({_id:e,loaded:!1},n.finishLoading)}),500)},n.finishLoading=function(){n.api.selectWorld(n.state._id),n.props.selectWorld(n.state._id),n.api.getWorld(n.state._id).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),0===n.props.allUsers.length?n.api.getAllUsers().then((function(e){n.props.setAllUsers(e),n.setState({loaded:!0},n.actuallyFinishLoading)})):n.setState({loaded:!0},n.actuallyFinishLoading)}))},n.actuallyFinishLoading=function(){var e=n.props.worlds.filter((function(e){return e._id===n.state._id}));e.length>0&&(e=e[0],n.setState({Name:e.Name,Public:e.Public,AcceptingCollaborators:void 0!==e.AcceptingCollaborators&&null!==e.AcceptingCollaborators&&e.AcceptingCollaborators,Collaborators:void 0===e.Collaborators?[]:e.Collaborators}))},n.state={_id:null,Collaborators:[],fieldValidation:{inviteEmail:{valid:!0,message:""}},message:"",redirectTo:null,newCollaborators:!1,newCollabTab:0,collabTab:0,collabLink:null,collabLinkCopied:!1,selectedUser:"",inviteEmail:"",inviteMessage:"",waiting:!1},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;this.props.fromLogin&&this.props.notFromLogin();var t=this.props.match.params.id;if(void 0===t&&(t=null),this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading...");if(this.state.loaded){if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null!==this.props.selectedWorld&&null===this.props.user)return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login");if(null!==this.props.selectedWorld&&this.props.selectedWorld.Owner!==this.props.user._id)return r.a.createElement(ye.a,{to:"/"});var a=this.state.Collaborators.filter((function(e){return"collab"===e.type})),n=this.state.Collaborators.filter((function(e){return"invite"===e.type})),i=this.state.Collaborators.filter((function(e){return"request"===e.type})),s=this.props.allUsers.filter((function(t){return t._id!==e.props.selectedWorld.Owner&&0===e.state.Collaborators.filter((function(e){return e.userID===t._id})).length})).map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e.username)}));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(kt.a,null,r.a.createElement("title",null,null===this.state._id?"Author's Notebook: Create New World":"Author's Notebook: Edit ".concat(this.props.selectedWorld.Name," Collaborators"))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:1},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name," Details")},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:11},r.a.createElement("h2",null,"Edit Collaborators"))),r.a.createElement(U.a,{item:!0},r.a.createElement(g.a,{style:{maxWidth:"200px"}},r.a.createElement(y.a,{primary:"Collaborators"}),this.state.newCollaborators?r.a.createElement(oe.a,{title:"Manage Existing Collaborators"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({newCollaborators:!1})}},r.a.createElement(oa.a,null))):r.a.createElement(oe.a,{title:"Add New Collaborators"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({newCollaborators:!0})}},r.a.createElement(ue.a,null))))),this.state.newCollaborators?r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(m.a,{position:"static"},r.a.createElement(Ea.a,{value:this.state.newCollabTab,onChange:function(t,a){e.setState({newCollabTab:a,inviteMessage:""})},"aria-label":"Add Collaborator Method"},r.a.createElement(Ta.a,Object.assign({label:"Find Existing User"},this.a11yProps(0))),r.a.createElement(Ta.a,Object.assign({label:"Invite via Email"},this.a11yProps(1))),r.a.createElement(Ta.a,Object.assign({label:"Get an Invite Link"},this.a11yProps(2))))),r.a.createElement(xa,{value:this.state.newCollabTab,index:0},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"user-select",id:"user-select-label"},"Select a User"),r.a.createElement(Da.a,{labelId:"user-select-label",id:"user-select",value:this.state.selectedUser,onChange:function(t){e.setState({selectedUser:t.target.value,inviteMessage:""})},labelWidth:90},s))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:""===this.state.selectedUser||this.state.waiting,onClick:this.addNewCollaborator},"Send Invite"),this.state.inviteMessage))),r.a.createElement(xa,{value:this.state.newCollabTab,index:1},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"inviteEmail"},"Collaborator Email"),r.a.createElement(re.a,{id:"inviteEmail",name:"inviteEmail",type:"email",autoComplete:"Off",error:!this.state.fieldValidation.inviteEmail.valid,value:this.state.inviteEmail,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:140,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.inviteEmail.message))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.emailCollaborator},"Send Invite"),this.state.inviteMessage))),r.a.createElement(xa,{value:this.state.newCollabTab,index:2},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Generate a single use link to send someone yourself"),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.generateCollabLink},"Generate Link")),null!==this.state.collabLink&&r.a.createElement(U.a,{item:!0},r.a.createElement(re.a,{id:"generatedLink",name:"generatedLink",ref:function(t){return e.generatedLink=t},type:"text",multiline:!0,value:this.state.collabLink,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"copy to clipboard",onClick:this.copyCollabLink,edge:"end"},r.a.createElement(wa.a,null))),labelWidth:70,fullWidth:!0}),this.state.collabLinkCopied&&r.a.createElement("span",{style:{fontColor:"red"}},"Link Copied to Clipboard")))))):r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(m.a,{position:"static"},r.a.createElement(Ea.a,{value:this.state.collabTab,onChange:function(t,a){e.setState({collabTab:a})},"aria-label":"Collaborators"},r.a.createElement(Ta.a,Object.assign({label:"Collaborators (".concat(a.length,")")},this.a11yProps(0))),r.a.createElement(Ta.a,Object.assign({label:"Invites (".concat(n.length,")")},this.a11yProps(1))),r.a.createElement(Ta.a,Object.assign({label:"Requests (".concat(i.length,")")},this.a11yProps(2))))),r.a.createElement(xa,{value:this.state.collabTab,index:0},r.a.createElement(U.a,{container:!0,spacing:3,direction:"column"},a.map((function(t,a){return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direcion:"row",key:a},r.a.createElement(U.a,{item:!0,xs:12,sm:3},e.props.allUsers.filter((function(e){return e._id===t.userID}))[0].username),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:t.editPermission,disabled:e.state.waiting,onChange:function(a){e.updateCollaboratorPermission(t,a.target.checked)},color:"primary"}),label:"Full Permissions"})),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(oe.a,{title:"Remove Collaborator"},r.a.createElement(se.a,{size:"small",color:"primary",disabled:e.state.waiting,onClick:function(a){e.deleteCollab(t)}},r.a.createElement(_t.a,null)))))})))),r.a.createElement(xa,{value:this.state.collabTab,index:1},r.a.createElement(U.a,{container:!0,spacing:3,direction:"column"},n.map((function(t,a){var n=e.props.allUsers.filter((function(e){return e._id===t.userID}));return n=0===n.length?null:n[0],r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row",key:a},r.a.createElement(U.a,{item:!0,xs:12,sm:9,container:!0,spacing:1,direction:"column"},null!==n&&r.a.createElement(U.a,{item:!0},"Username: ",n.username),""!==t.email&&r.a.createElement(U.a,{item:!0},"Email: ",t.email),r.a.createElement(U.a,{item:!0},"Invite Link: ",t.collabLink)),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(oe.a,{title:"Delete Invite"},r.a.createElement(se.a,{size:"small",color:"primary",disabled:e.state.waiting,onClick:function(a){e.deleteCollab(t)}},r.a.createElement(_t.a,null)))))})))),r.a.createElement(xa,{value:this.state.collabTab,index:2},r.a.createElement(U.a,{container:!0,spacing:3,direction:"column"},i.map((function(t,a){return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direcion:"row",key:a},r.a.createElement(U.a,{item:!0,xs:12,sm:6},e.props.allUsers.filter((function(e){return e._id===t.userID}))[0].username),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(oe.a,{title:"Accept Request"},r.a.createElement(se.a,{size:"small",color:"primary",disabled:e.state.waiting,onClick:function(a){e.acceptCollab(t)}},r.a.createElement(ka.a,null)))),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(oe.a,{title:"Delete Request"},r.a.createElement(se.a,{size:"small",color:"primary",disabled:e.state.waiting,onClick:function(a){e.deleteCollab(t)}},r.a.createElement(_t.a,null)))))})))))),r.a.createElement(U.a,{item:!0},this.state.message),r.a.createElement(U.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))))}return r.a.createElement("span",null,"Loading...")}}]),a}(n.Component),Sa=Object(d.b)((function(e){return{selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,worlds:e.app.worlds,user:e.app.user,fromLogin:e.app.fromLogin,allUsers:e.app.allUsers}}),(function(e){return{updateWorld:function(t){return e(I(t))},selectWorld:function(t){return e(C(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},setAllUsers:function(t){return e(k(t))}}}))(Ia);var Ca=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},n.delete=function(e){n.api.deleteType(n.props.selectedWorldID,n.state._id).then((function(e){void 0===e.error?n.api.getWorld(n.props.selectedWorldID,!0).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),n.setState({redirectTo:"/project/details/".concat(n.props.selectedWorldID)})})):n.setState({waiting:!1,message:e.error},(function(){n.props.logout()}))}))},n.load=function(e){setTimeout((function(){n.setState({_id:e,redirectTo:null,loaded:!1},n.finishLoading)}),500)},n.finishLoading=function(){n.props.fromLogin&&n.props.notFromLogin();var e=n.state._id;void 0!==e?n.props.selectedWorldID?n.api.getWorld(n.props.selectedWorldID).then((function(t){if(n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));a.length>0?(a=a[0],null!==n.props.user&&void 0!==n.props.user&&n.api.upsertView({userID:n.props.user._id,worldID:n.props.selectedWorldID,objectType:"Type",objectID:a._id}),n.props.updateSelectedType(a),n.setState({loaded:!0})):n.setState({message:"Invalid ID",loaded:!0})}else n.props.updateSelectedType({_id:null,Name:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}})})):n.api.getWorldByTypeID(e).then((function(t){if(n.props.selectWorld(t.worldID),n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));a.length>0?(a=a[0],n.props.updateSelectedType(a),n.setState({loaded:!0})):n.setState({message:"Invalid ID",loaded:!0})}else n.props.updateSelectedType({_id:null,Name:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}})})):n.props.updateSelectedType({_id:null,Name:"",Description:"",Supers:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1})},n.redirectToNext=function(){for(var e=0;n.props.types[e]._id!==n.props.selectedType._id;)e++;++e===n.props.types.length&&(e=0),n.setState({redirectTo:"/type/details/".concat(n.props.types[e]._id)})},n.state={_id:null,fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,modalOpen:!1},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;if(this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading");if(this.state.loaded){if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user){if(null===this.props.selectedWorld||this.props.selectedWorld.Public||this.props.selectedWorld.Owner===this.props.user._id||0!==this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type})).length){if(void 0===this.props.selectedType||null===this.props.selectedType)return r.a.createElement("span",null,"Loading");var a=this.props.types.filter((function(t){return void 0!==t.ReferenceIDs&&t.ReferenceIDs.includes(e.state._id)})),n=[];this.props.selectedType.Supers.forEach((function(e){e.AttributesArr.forEach((function(e){0===n.filter((function(t){return t.attrID===e.attrID})).length&&n.push(e)}))}));var i=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},null!==this.props.selectedWorld&&r.a.createElement("div",null,r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: ".concat(this.props.selectedWorld.Name))),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:8,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:1},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:11},r.a.createElement("h2",null,this.props.selectedType.Name))),r.a.createElement(U.a,{item:!0},r.a.createElement("h3",null,this.props.selectedType.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"50px"},src:Mt.a,alt:"Needs Work"})," Needs Work"))),r.a.createElement(U.a,{item:!0},r.a.createElement("h3",null,this.props.selectedType.Major&&"Major Type")),r.a.createElement(U.a,{item:!0},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.selectedType.Description}}))),r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(ie.a,null,null!==this.props.user&&null!==this.props.selectedWorld&&(this.props.selectedWorld.Owner===this.props.user._id||this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type&&t.editPermission})).length>0)&&r.a.createElement(g.a,null,r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Create New ".concat(this.props.selectedType.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/thing/create/type_id_".concat(e.state._id)})}},r.a.createElement(ue.a,null)))),r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Edit ".concat(this.props.selectedType.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/type/edit/".concat(e.state._id)})}},r.a.createElement(St.a,null)))),r.a.createElement(U.a,{item:!0,xs:4,sm:12},r.a.createElement(oe.a,{title:"Delete ".concat(this.props.selectedType.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement(_t.a,null)))))),r.a.createElement(g.a,null,r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next Type"})))))),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:8,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},"Attributes"),r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,null!==this.props.selectedType&&void 0!==this.props.selectedType&&n.map((function(t,a){var n=e.props.types.filter((function(e){return e._id===t.DefinedType}));n=0===n.length?{Name:""}:n[0];var i=e.props.selectedType.DefaultsHash[t.attrID];return r.a.createElement(g.a,{key:a},r.a.createElement(y.a,null,t.Name,":\xa0","Options"===t.AttributeType?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&" (Default: ".concat(i.DefaultValue,")")):"Type"===t.AttributeType?r.a.createElement("span",null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t.DefinedType)})}},r.a.createElement(y.a,{primary:n.Name})),void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&e.props.things.filter((function(e){return i.DefaultValue===e._id})).length>0&&" (Default: ".concat(e.props.things.filter((function(e){return e._id===i.DefaultValue}))[0].Name,")")):"List"===t.AttributeType?r.a.createElement("span",null,"List:\xa0","Options"===t.ListType?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),")")):"Type"===t.ListType?r.a.createElement("span",null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t.DefinedType)})}},r.a.createElement(y.a,{primary:n.Name})),void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&e.props.things.filter((function(e){return i.DefaultListValues.includes(e._id)})).length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(t,a){var n=e.props.things.filter((function(e){return e._id===t}));return 0===n.length?r.a.createElement("span",{key:a}):(n=n[0],r.a.createElement("span",{key:a},0===a?" ":", ",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t)})}},r.a.createElement(y.a,{primary:n.Name}))))})),")")):r.a.createElement("span",null,t.ListType,void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),")"))):"True/False"===t.AttributeType?r.a.createElement("span",null,t.AttributeType,void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue?" (Default: ".concat(i.DefaultValue,")"):" (Default: False)"):r.a.createElement("span",null,t.AttributeType,void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&" (Default: ".concat(i.DefaultValue,")"))))})),null!==this.props.selectedType&&void 0!==this.props.selectedType&&this.props.selectedType.AttributesArr.map((function(t,a){var n=e.props.types.filter((function(e){return e._id===t.DefinedType}));n=0===n.length?{Name:""}:n[0];var i=e.props.selectedType.DefaultsHash[t.attrID];return r.a.createElement(g.a,{key:a},r.a.createElement(y.a,null,t.Name,":\xa0","Options"===t.AttributeType?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&" (Default: ".concat(i.DefaultValue,")")):"Type"===t.AttributeType?r.a.createElement("span",null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t.DefinedType)})}},r.a.createElement(y.a,{primary:n.Name})),void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&e.props.things.filter((function(e){return i.DefaultValue===e._id})).length>0&&" (Default: ".concat(e.props.things.filter((function(e){return e._id===i.DefaultValue}))[0].Name,")")):"List"===t.AttributeType?r.a.createElement("span",null,"List:\xa0","Options"===t.ListType?r.a.createElement("span",null,"Options:",t.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),")")):"Type"===t.ListType?r.a.createElement("span",null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t.DefinedType)})}},r.a.createElement(y.a,{primary:n.Name})),void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&e.props.things.filter((function(e){return i.DefaultListValues.includes(e._id)})).length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(t,a){var n=e.props.things.filter((function(e){return e._id===t}));return 0===n.length?r.a.createElement("span",{key:a}):(n=n[0],r.a.createElement("span",{key:a},0===a?" ":", ",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t)})}},r.a.createElement(y.a,{primary:n.Name}))))})),")")):r.a.createElement("span",null,t.ListType,void 0!==i&&void 0!==i.DefaultListValues&&i.DefaultListValues.length>0&&r.a.createElement("span",null,"\xa0(Defaults:",i.DefaultListValues.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)})),")"))):"True/False"===t.AttributeType?r.a.createElement("span",null,t.AttributeType,void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue?" (Default: ".concat(i.DefaultValue,")"):" (Default: False)"):r.a.createElement("span",null,t.AttributeType,void 0!==i&&void 0!==i.DefaultValue&&""!==i.DefaultValue&&" (Default: ".concat(i.DefaultValue,")"))))}))))),r.a.createElement(U.a,{item:!0,xs:12,sm:4,container:!0,spacing:0,direction:"column"},this.props.selectedType.Supers.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Super Types"})),this.props.selectedType.Supers.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))),this.props.subTypes.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Sub Types"})),this.props.subTypes.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))),a.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Referenced in:"})),a.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))),this.props.instances.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Instances"})),this.props.instances.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(st,{user:this.props.user,allUsers:this.props.allUsers,object:this.props.selectedType,objectType:"Type",world:this.props.selectedWorld,api:this.api,onChange:this.commentsChange,suggestions:i})),r.a.createElement(zt.a,{"aria-labelledby":"delete-type-modal","aria-describedby":"delete-type-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Are you sure you want to delete"," ",this.props.selectedType.Name,"?"),r.a.createElement(U.a,{item:!0},"(All references to it will be left alone and may not work correctly)"),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel"))))))))}return r.a.createElement(ye.a,{to:"/"})}return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login")}return r.a.createElement("span",null,"Loading")}}]),a}(n.Component),Oa=Object(d.b)((function(e){var t=e.app.selectedType,a=null===t?[]:e.app.types.filter((function(e){return e.SuperIDs.includes(t._id)})),n=null===t?[]:e.app.things.filter((function(e){return e.TypeIDs.includes(t._id)}));return{selectedPage:e.app.selectedPage,selectedType:t,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,subTypes:a,instances:n,user:e.app.user,things:e.app.things,attributesByID:e.app.attributesByID,attributesByName:e.app.attributesByName,fromLogin:e.app.fromLogin,allUsers:e.app.allUsers,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions}}),(function(e){return{updateSelectedType:function(t){return e(V(t))},addType:function(t){return e(P(t))},updateType:function(t){return e(j(t))},setTypes:function(t){return e(N(t))},setAttributes:function(t){return e(O(t))},setAllUsers:function(t){return e(k(t))},setThings:function(t){return e(W(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},selectWorld:function(t){return e(C(t))}}}))(Ca),Na=a(102),Pa=a.n(Na),Wa=a(53),Ma=a(57),ja=a.n(Ma),Va=function(e,t){var a=t.attribute;a.DefinedType=e.target.value,"new"===e.target.value?t.onNewType(a):t.onChange(a)},La=function(e,t){var a=t.attribute;a.Options=e,t.onChange(a)};function Fa(e){var t=Object(n.useState)(e.attribute.Name),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=["Text","Number","True/False","Options","Type","List"],l=["Text","Options","Type"],c=void 0===e.attribute.AttributeType||null===e.attribute.AttributeType||""===e.attribute.AttributeType?o[0]:e.attribute.AttributeType,u=void 0===e.attribute.ListType||""===e.attribute.ListType?l[0]:e.attribute.ListType,p=void 0===e.attribute.DefinedType||""===e.attribute.DefinedType?"":e.attribute.DefinedType,d=void 0===e.attribute.FromTypeIDs?[]:e.types.filter((function(t){return e.attribute.FromTypeIDs.includes(t._id)}));return r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,sm:3,xs:12},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"AttrName_".concat(e.attribute.attrID,"_").concat(e.attribute.index)},"Name"),r.a.createElement(re.a,{disabled:e.disabled,id:"AttrName_".concat(e.attribute.attrID,"_").concat(e.attribute.index),name:"AttrName_".concat(e.attribute.attrID,"_").concat(e.attribute.index),type:"text",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a=e.attribute;a.Name=i,e.onChange(a)},labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,e.message))),r.a.createElement(U.a,{item:!0,sm:3,xs:12},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"attribute-type",id:"attribute-type-label"},"Attribute Type"),r.a.createElement(Da.a,{labelId:"attribute-type-label",id:"attribute-type",disabled:e.disabled,value:c,onChange:function(t){!function(e,t){var a=t.attribute;a.AttributeType=e.target.value,a.ListType="Text",t.onChange(a)}(t,e)},fullWidth:!0,labelWidth:100},o.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)}))))),r.a.createElement(U.a,{item:!0,sm:3,xs:12},"Options"===c?r.a.createElement(ja.a,{variant:"outlined",disabled:e.disabled,defaultValue:e.attribute.Options,onChange:function(t){return La(t,e)}}):"Type"===c?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"definedType",id:"definedType-label"},"Defined Type"),r.a.createElement(Da.a,{labelId:"definedType-label",id:"definedType",disabled:e.disabled,value:p,onChange:function(t){Va(t,e)},fullWidth:!0,labelWidth:100},r.a.createElement(ft.a,{value:"new"},"+ Create New Type"),e.types.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)})))):"List"===c?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"list-type",id:"list-type-label"},"List Type"),r.a.createElement(Da.a,{labelId:"list-type-label",id:"list-type",disabled:e.disabled,value:u,onChange:function(t){!function(e,t){var a=t.attribute;a.ListType=e.target.value,t.onChange(a)}(t,e)},fullWidth:!0,labelWidth:70},l.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)}))))),"Type"===e.attribute.ListType?r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"definedType",id:"definedType-label"},"Defined Type"),r.a.createElement(Da.a,{labelId:"definedType-label",id:"definedType",disabled:e.disabled,value:p,onChange:function(t){Va(t,e)},fullWidth:!0,labelWidth:100},r.a.createElement(ft.a,{value:"new"},"+ Create New Type"),e.types.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))):"Options"===e.attribute.ListType?r.a.createElement(U.a,{item:!0},r.a.createElement(ja.a,{variant:"outlined",disabled:e.disabled,defaultValue:e.attribute.Options,onChange:function(t){return La(t,e)}})):""):""),r.a.createElement(U.a,{item:!0,xs:3},1===d.length?"From Type: ".concat(d[0].Name):d.length>1?r.a.createElement("span",null,"From Types:",d.map((function(e,t){return r.a.createElement("span",{key:t},t>0&&", ",e.Name)}))):r.a.createElement(oe.a,{title:"Delete Attribute"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){return e.onDelete(e.attribute)}},r.a.createElement(_t.a,null)))))}function Ba(e){var t=Object(n.useState)(e.def.DefaultValue),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=""===e.attribute.AttributeType?"Text":e.attribute.AttributeType,l="Type"!==o||void 0===e.def.DefaultValue||""===e.def.DefaultValue?"":e.def.DefaultValue,c=[],u=[];if("List"===o&&"Options"===e.attribute.ListType)e.attribute.Options.forEach((function(e){c.push({Name:e})})),e.def.DefaultListValues.forEach((function(e){u.push({Name:e})}));else if("List"===o&&"Type"===e.attribute.ListType){var p=e.types.filter((function(t){return t._id===e.attribute.DefinedType}))[0];c.push({Name:"+ Create New ".concat(p.Name),_id:"new"}),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.DefinedType)})).forEach((function(e){c.push({Name:e.Name,_id:e._id})})),c.filter((function(t){return e.def.DefaultListValues.includes(t._id)})).forEach((function(e){u.push(e)}))}return r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12},"Text"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"attribute_name_".concat(e.attribute.attrID)},e.attribute.Name," Default Value"),r.a.createElement(re.a,{id:"attribute_name_".concat(e.attribute.attrID),name:"attribute_name_".concat(e.attribute.attrID),type:"text",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a=e.def;a.DefaultValue=i,e.onChange(a)},labelWidth:9*e.attribute.Name.length+100,fullWidth:!0}),r.a.createElement(Be.a,null,e.message)):"Number"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"numField"},e.attribute.Name," Default Value"),r.a.createElement(re.a,{id:"numField",name:"numField",type:"number",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a=e.def;a.DefaultValue=i,e.onChange(a)},labelWidth:9*e.attribute.Name.length+100,fullWidth:!0}),r.a.createElement(Be.a,null,e.message)):"True/False"===o?r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:"True"===e.def.DefaultValue,onChange:function(t){var a=e.def;a.DefaultValue=t.target.checked?"True":"False",e.onChange(a)},color:"primary"}),label:"".concat(e.attribute.Name," Default True")}):"Options"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"options-select",id:"options-select-label"},e.attribute.Name," Default Value"),r.a.createElement(Da.a,{labelId:"options-select-label",id:"options-select",value:i,onChange:function(e){s(e.target.value)},onBlur:function(t){var a=e.def;a.DefaultValue=i,e.onChange(a)},fullWidth:!0,labelWidth:9*e.attribute.Name.length+100},e.attribute.Options.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)})))):"Type"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"type-select",id:"type-select-label"},e.attribute.Name," Default Value"),r.a.createElement(Da.a,{labelId:"type-select-label",id:"type-select",value:l,onChange:function(t){!function(e,t){var a=t.attribute;"new"===e.target.value?t.onNewThing(a):(a.DefaultValue=e.target.value,t.onChange(a))}(t,e)},fullWidth:!0,labelWidth:9*e.attribute.Name.length+100},r.a.createElement(ft.a,{value:"new"},"+ Create New"," ",e.types.filter((function(t){return t._id===e.attribute.DefinedType}))[0].Name),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.DefinedType)})).map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)})))):"List"===o?r.a.createElement("span",null,"Text"===e.attribute.ListType?r.a.createElement(ja.a,{placeholder:"".concat(e.attribute.Name," Default Values"),variant:"outlined",defaultValue:e.def.DefaultListValues,onChange:function(t){return function(e,t){var a=t.def;a.DefaultListValues=e,t.onChange(a)}(t,e)}}):"Options"===e.attribute.ListType?r.a.createElement(Wa.Multiselect,{placeholder:"".concat(e.attribute.Name," Default Values"),options:c,selectedValues:u,onSelect:function(t,a){!function(e,t){var a=t.def;a.DefaultListValues.push(e.Name),t.onChange(a)}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.def;a.DefaultListValues=[],e.forEach((function(e){a.DefaultListValues.push(e.Name)})),t.onChange(a)}(t,e)},displayValue:"Name"}):"Type"===e.attribute.ListType?r.a.createElement(Wa.Multiselect,{placeholder:"".concat(e.attribute.Name," Default Values"),options:c,selectedValues:u,onSelect:function(t,a){!function(e,t){if("new"===e._id)setTimeout((function(){var e=t.attribute;t.onNewThing(e)}),500);else{var a=t.def;a.DefaultListValues.push(e._id),t.onChange(a)}}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.def;a.DefaultListValues=[],e.forEach((function(e){a.DefaultListValues.push(e._id)})),t.onChange(a)}(t,e)},displayValue:"Name"}):""):""))}var _a=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).newAttribute=function(){var e=n.props.selectedType;e.AttributesArr.push({index:e.AttributesArr.length,attrID:"null_".concat(Pa()()),Name:"",AttributeType:"Text",Options:[],DefinedType:"",ListType:""}),n.props.updateSelectedType(e)},n.changeAttribute=function(e){var t=n.props.selectedType;t.AttributesArr[e.index]={index:e.index,attrID:e.attrID,Name:e.Name,AttributeType:e.AttributeType,Options:e.Options,DefinedType:e.DefinedType,ListType:e.ListType},n.props.updateSelectedType(t)},n.changeDefault=function(e){var t=n.props.selectedType;t.DefaultsHash[e.attrID]={attrID:e.attrID,DefaultValue:e.DefaultValue,DefaultListValues:e.DefaultListValues,FromTypeIDs:e.FromTypeIDs},n.props.updateSelectedType(t)},n.blurAttribute=function(e){},n.deleteAttribute=function(e){var t=n.props.selectedType,a=[];t.AttributesArr.forEach((function(t){t.index!==e.index&&(t.index>e.index&&t.index--,a.push(t))})),t.AttributesArr=[];var r=Object(H.a)({},t.DefaultsHash);void 0!==r[e.attrID]&&delete r[e.attrID],t.DefaultsHash={},n.props.updateSelectedType(t),setTimeout((function(){t.AttributesArr=a,t.DefaultsHash=r,n.props.updateSelectedType(t)}),500)},n.addNewType=function(e){n.props.addNewType(e)},n.addNewThing=function(e){n.props.addNewThing(e)},n.state={message:"",waiting:!1,defaultsMode:!1},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[];return this.props.selectedType.SuperIDs.forEach((function(a){var n=e.props.types.filter((function(e){return e._id===a}));n.length>0&&(n=n[0]).AttributesArr.forEach((function(e){var a=t.filter((function(t){return t.attrID===e.attrID}));0===a.length?(e.FromTypeIDs=[n._id],t.push(e)):(a=a[0]).FromTypeIDs.push(n._id)}))})),r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,null!==this.props.selectedType&&void 0!==this.props.selectedType&&t.map((function(t,a){var n=e.props.selectedType.DefaultsHash[t.attrID];return void 0===n&&(n={attrID:t.attrID,DefaultValue:"",DefaultListValues:[]}),r.a.createElement(g.a,{key:a},e.props.defaultsMode?r.a.createElement(Ba,{typeID:e.props.selectedType._id,attribute:t,def:n,onChange:e.changeDefault,types:e.props.types,things:e.props.things,onNewThing:e.addNewThing}):r.a.createElement(Fa,{typeID:e.props.selectedType._id,disabled:!0,attribute:t,types:e.props.types,things:e.props.things,onNewType:e.addNewType}))})),null!==this.props.selectedType&&void 0!==this.props.selectedType&&this.props.selectedType.AttributesArr.map((function(t,a){var n=e.props.selectedType.DefaultsHash[t.attrID];return void 0===n&&(n={attrID:t.attrID,DefaultValue:"",DefaultListValues:[]}),r.a.createElement(g.a,{key:a},e.props.defaultsMode?r.a.createElement(Ba,{typeID:e.props.selectedType._id,attribute:t,def:n,onChange:e.changeDefault,onBlur:e.blurAttribute,types:e.props.types,things:e.props.things,onNewThing:e.addNewThing}):r.a.createElement(Fa,{typeID:e.props.selectedType._id,attribute:t,onChange:e.changeAttribute,onDelete:e.deleteAttribute,onBlur:e.blurAttribute,types:e.props.types,things:e.props.things,onNewType:e.addNewType}))})))))}}]),a}(n.Component),za=Object(d.b)((function(e){return{selectedType:e.app.selectedType,types:e.app.types,things:e.app.things,selectedWorldID:e.app.selectedWorldID}}),(function(e){return{updateSelectedType:function(t){return e(V(t))},addType:function(t){return e(P(t))},addThing:function(t){return e(M(t))}}}))(_a);function qa(e){var t=Object(n.useState)(""),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=Object(n.useState)(""),l=Object(Oe.a)(o,2),c=l[0],u=l[1],p=Object(n.useState)(!1),d=Object(Oe.a)(p,2),m=d[0],f=d[1];return r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Just give the new Type a name."),r.a.createElement(U.a,{item:!0},"(You can do the rest later.)"),r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"name"},"Name"),r.a.createElement(re.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:""!==c,value:i,onChange:function(e){s(e.target.value)},onBlur:function(t){!function(e,t,a){a(0===t.types.filter((function(t){return t.Name===e})).length?"":"This Type Name is already in use")}(i,e,u)},labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,c))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:m,onClick:function(t){f(!0),function(e,t,a,n,r){var i={_id:null,Name:e.trim(),Description:"",SuperIDs:[],AttributesArr:[],Attributes:[],worldID:t.selectedWorldID,Major:!1,NeedsWork:!0,EditUserID:(void 0).props.user._id};t.api.createType(i).then((function(e){void 0!==e.typeID?(i._id=e.typeID,i.Supers=[],t.addType&&t.addType(i),r(!1),t.onSave&&(a(""),t.onSave(i))):void 0!==e.error&&(r(!1),n(e.error),t.logout())})).catch((function(e){return console.log(e)}))}(i,e,s,u,f)}},m?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){void 0!==e.onCancel&&null!==e.onCancel&&e.onCancel()}},"Cancel"))))}function Ua(e){var t=Object(n.useState)(""),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=Object(n.useState)(""),l=Object(Oe.a)(o,2),c=l[0],u=l[1],p=Object(n.useState)(!1),d=Object(Oe.a)(p,2),m=d[0],f=d[1];return r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Just give the new ",void 0===e.newThingType.Name?"Thing":e.newThingType.Name," a name."),r.a.createElement(U.a,{item:!0},"(You can do the rest later.)"),r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"name"},"Name"),r.a.createElement(re.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:""!==c,value:i,onChange:function(e){s(e.target.value)},onBlur:function(t){!function(e,t,a){a(0===t.things.filter((function(t){return t.Name===e})).length?"":"This Thing Name is already in use")}(i,e,u)},labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,c))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:m,onClick:function(t){f(!0),function(e,t,a,n,r){r(!0);var i={_id:null,Name:e.trim(),Description:"",TypeIDs:void 0===t.newThingType?[]:[t.newThingType._id],Attributes:[],worldID:t.selectedWorldID,ReferenceIDs:[],NeedsWork:!0,EditUserID:(void 0).props.user._id};t.api.createThing(i).then((function(e){void 0!==e.thingID?(i._id=e.thingID,i.Types=void 0===t.newThingType?[]:[t.newThingType],i.AttributesArr=[],t.addThing(i),setTimeout((function(){a(""),r(!1),t.onSave(i)}),500)):void 0!==e.error&&(n(e.error),r(!1),t.logout())})).catch((function(e){return console.log(e)}))}(i,e,s,u,f)}},m?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){void 0!==e.onCancel&&null!==e.onCancel&&e.onCancel()}},"Cancel"))))}var Ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).resetForm=function(){setTimeout((function(){void 0!==n.props.match.params.id?n.setState({resetting:!1,loaded:!0,redirectTo:"/type/create"}):n.setState({resetting:!1,loaded:!0})}),500)},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;void 0!==r[t]&&r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.validateField=function(e){var t=null,a=!0,r="";switch(e){case"Name":(a=null!==(t=n.props.selectedType[e]).match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(a=!1,r="Type Name is too short"):(a=0===n.props.types.filter((function(e){return e.Name===t&&e._id!==n.state._id})).length)||(r="This Type Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Type Names";break;case"AttributesArr":a=!0,t=n.props.selectedType[e],r="";for(var i=0;i<t.length;i++){var s=n.props.attributesByName[t[i].Name];if(void 0!==s&&s._id!==t[i].attrID){a=!1,r="An attribute with the name '".concat(t[i].Name,"' already exists");break}if(("Type"===t[i].AttributeType||"List"===t[i].AttributeType&&"Type"===t[i].ListType)&&(void 0===t[i].DefinedType||null===t[i].DefinedType||""===t[i].DefinedType)){a=!1,r="A Defined Type must be selected for ".concat(t[i].Name,".");break}if(("Options"===t[i].AttributeType||"List"===t[i].AttributeType&&"Options"===t[i].ListType)&&(void 0===t[i].Options||null===t[i].Options||0===t[i].Options.length)){a=!1,r="At least one Option must be set for ".concat(t[i].Name,".");break}}break;case"Attributes":a=!0,t=n.props.selectedType[e],r="";for(var o=0;o<t.length;o++){var l=n.props.attributesByName[t[o].Name];if(void 0!==l&&l._id!==t[o].attrID){a=!1,r="An attribute with this name already exists";break}if(("Type"===t[o].AttributeType||"List"===t[o].AttributeType&&"Type"===t[o].ListType)&&(void 0===t[o].DefinedType||null===t[o].DefinedType||""===t[o].DefinedType)){a=!1,r="A Defined Type must be selected for ".concat(t[o].Name,".");break}if(("Options"===t[o].AttributeType||"List"===t[o].AttributeType&&"Options"===t[o].ListType)&&(void 0===t[o].Options||null===t[o].Options||0===t[o].Options.length)){a=!1,r="At least one Option must be set for ".concat(t[o].Name,".");break}}}return{valid:a,message:r}},n.validateForm=function(e){var t=n.validateField("Name"),a=n.validateField("AttributesArr"),r=t.valid&&a.valid,i=n.state.fieldValidation;i.Name=t,i.AttributesArr=a,n.setState({formValid:r,fieldValidation:i},e)},n.onSubmit=function(e){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0,addMore:e},this.submitThroughAPI)}))},n.cleanWYSIWYG=function(e){return e.endsWith("<p><br></p>")&&(e=e.substring(0,e.length-11)),e},n.submitThroughAPI=function(){var e=n.props.selectedType.Supers.map((function(e){return e._id})),t=n.props.selectedType.AttributesArr.map((function(e){return{_id:e.attrID,Name:e.Name.trim(),AttributeType:e.AttributeType,Options:e.Options,DefinedType:e.DefinedType,ListType:e.ListType}}));n.api.upsertAttributes(n.props.selectedWorldID,t).then((function(t){var a=[];n.props.selectedType.AttributesArr.forEach((function(e){var n=e.attrID.includes("null")?t.attributes[e.Name]:e.attrID;a.push({attrID:n,index:e.index})}));var r={_id:n.state._id,Name:n.props.selectedType.Name.trim(),PluralName:void 0===n.props.selectedType.PluralName?"":n.props.selectedType.PluralName.trim(),Description:n.cleanWYSIWYG(n.props.selectedType.Description),SuperIDs:e,Attributes:a,Defaults:[],worldID:n.props.selectedWorld._id,Major:n.props.selectedType.Major,NeedsWork:n.props.selectedType.NeedsWork,ReferenceIDs:[],DefaultReferenceIDs:[],EditUserID:n.props.user._id};n.props.selectedType.AttributesArr.filter((function(e){return"Type"===e.AttributeType||"List"===e.AttributeType&&"Type"===e.ListType})).forEach((function(e){r.ReferenceIDs.includes(e.DefinedType)||r.ReferenceIDs.push(e.DefinedType)})),n.props.selectedType.Supers.forEach((function(e){e.AttributesArr.filter((function(e){return"Type"===e.AttributeType||"List"===e.AttributeType&&"Type"===e.ListType})).forEach((function(e){r.ReferenceIDs.includes(e.DefinedType)||r.ReferenceIDs.push(e.DefinedType)}))})),Object.keys(n.props.selectedType.DefaultsHash).forEach((function(e){var t=n.props.selectedType.DefaultsHash[e];r.Defaults.push({attrID:e,FromTypeID:t.FromTypeID,DefaultValue:t.DefaultValue,DefaultListValues:t.DefaultListValues})})),null===r._id?n.api.createType(r).then((function(e){void 0!==e.typeID?n.api.getWorld(n.props.selectedWorldID,!0).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),"add"===n.state.addMore?(n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({_id:null,fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""},Attributes:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1,addMore:!1,resetting:!0,loaded:!1},n.resetForm)):"next"===n.state.addMore?n.redirectToNext():n.setState({waiting:!1,redirectTo:"/project/details/".concat(n.props.selectedWorld._id)})})):void 0!==e.error&&n.setState({waiting:!1,message:e.error},(function(){n.props.logout()}))})).catch((function(e){return console.log(e)})):n.api.updateType(r).then((function(e){void 0===e.error?n.api.getWorld(n.props.selectedWorldID,!0).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),"add"===n.state.addMore?(n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({_id:null,fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""},Attributes:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1,addMore:!1,resetting:!0,loaded:!1},n.resetForm)):"next"===n.state.addMore?n.redirectToNext():n.setState({waiting:!1,redirectTo:"/project/details/".concat(n.props.selectedWorld._id)})})):n.setState({waiting:!1,message:e.error},(function(){n.props.logout()}))})).catch((function(e){return console.log(e)}))}))},n.supersChange=function(e,t){for(var a=[],r=0;r<t.length;r++){var i=t[r];a.push(i),a=a.concat(i.Supers)}var s=n.props.selectedType;s.Supers=a,n.props.updateSelectedType(s)},n.addSuper=function(e,t){var a=n.props.selectedType;a.SuperIDs.push(t._id),t.Supers.forEach((function(t){0===e.filter((function(e){return e._id===t._id})).length&&(e.push(t),a.SuperIDs.push(t._id))}));var r=[];e.forEach((function(e){r=r.concat(a.AttributesArr.filter((function(t){return t.TypeIDs.includes(e._id)})))})),a.AttributesArr=a.AttributesArr.filter((function(e){return 0===r.filter((function(t){return t.attrID===e.attrID})).length})),a.Supers=e,n.props.updateSelectedType(a)},n.newAttribute=function(){var e=n.props.selectedType;e.AttributesArr.push({index:e.AttributesArr.length,attrID:"null_".concat(Pa()()),Name:"",AttributeType:"Text",Options:[],DefinedType:"",ListType:"",TypeIDs:[]}),n.props.updateSelectedType(e)},n.addSelectedAttribute=function(){var e=n.props.attributesByID[n.state.browseAttributesSelected],t=n.props.selectedType;t.AttributesArr.push({index:t.AttributesArr.length,attrID:e._id,Name:e.Name,AttributeType:e.AttributeType,Options:e.Options,DefinedType:e.DefinedType,ListType:e.ListType,TypeIDs:e.TypeIDs}),n.props.updateSelectedType(t),n.setState({browseAttributesSelected:"",browseTypesSelected:""})},n.addBrowsedType=function(e){var t=n.props.selectedType,a=n.props.types.filter((function(t){return t._id===e}))[0];t.SuperIDs.push(a._id);var r=t.Supers;r.push(a),a.Supers.forEach((function(e){0===r.filter((function(t){return t._id===e._id})).length&&(r.push(e),t.SuperIDs.push(e._id))}));var i=[];r.forEach((function(e){i=i.concat(t.AttributesArr.filter((function(t){return t.TypeIDs.includes(e._id)})))})),t.AttributesArr=t.AttributesArr.filter((function(e){return 0===i.filter((function(t){return t.attrID===e.attrID})).length})),t.Supers=[],n.props.updateSelectedType(t),setTimeout((function(){t.Supers=r,n.props.updateSelectedType(t),n.setState({browseAttributesSelected:"",browseTypesSelected:""})}),500)},n.removeSuper=function(e,t){for(var a=[],r=[],i=[t._id],s=n.props.selectedType,o=function(e){var o=n.props.types.filter((function(t){return t._id===s.Supers[e]._id}))[0];o._id===t._id||o.SuperIDs.includes(t._id)?i.push(o._id):(a.push(o),r.push(o._id))},l=0;l<s.Supers.length;l++)o(l);s.Supers=[],s.SuperIDs=[],n.props.updateSelectedType(s),n.setState({loaded:!1}),setTimeout((function(){s.Supers=a,s.SuperIDs=r,n.props.updateSelectedType(s),n.setState({loaded:!0})}),500)},n.redirectToNext=function(){var e=0;if(void 0===n.props.selectedType||null!==n.props.selectedType._id){for(;n.props.types[e]._id!==n.props.selectedType._id;)e++;e++}e===n.props.types.length&&(e=0),n.setState({waiting:!1,redirectTo:"/type/edit/".concat(n.props.types[e]._id)})},n.load=function(e){setTimeout((function(){n.setState({_id:e,redirectTo:null,loaded:!1,message:"Loading..."},n.finishLoading)}),500)},n.finishLoading=function(){var e=n.state._id;n.props.fromLogin?(n.props.notFromLogin(),n.setState({_id:e,loaded:!0,message:""})):n.props.selectedWorldID?n.api.getWorld(n.props.selectedWorldID).then((function(t){if(n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));if(a.length>0){a=a[0],n.api.upsertView({userID:n.props.user._id,worldID:n.props.selectedWorldID,objectType:"Type",objectID:a._id});var r=n.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));a.Supers=r,n.props.updateSelectedType(a),n.setState({_id:e,loaded:!0,message:""})}else n.api.getWorld(n.props.selectedWorldID,!0).then((function(t){if(n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));if(a.length>0){a=a[0];var r=n.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));a.Supers=r,n.props.updateSelectedType(a),n.setState({_id:e,loaded:!0,message:""})}else n.setState({message:"Invalid ID: ".concat(e),loaded:!0})}else n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({message:"",loaded:!0})}))}else n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({message:"",loaded:!0})})):n.api.getWorldByTypeID(e).then((function(t){if(n.props.selectWorld(t.worldID),n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));if(a.length>0){a=a[0];var r=n.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));a.Supers=r,n.props.updateSelectedType(a),n.setState({_id:e,loaded:!0,message:""})}else n.api.getWorld(n.props.selectedWorldID,!0).then((function(t){if(n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),null!==e){var a=t.types.filter((function(t){return t._id===e}));if(a.length>0){a=a[0];var r=n.props.types.filter((function(e){return a.SuperIDs.includes(e._id)}));a.Supers=r,n.props.updateSelectedType(a),n.setState({_id:e,loaded:!0,message:""})}else n.setState({message:"Invalid ID: ".concat(e),loaded:!0})}else n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({message:"",loaded:!0})}))}else n.props.updateSelectedType({_id:null,Name:"",PluralName:"",Description:"",Supers:[],SuperIDs:[],AttributesArr:[],Attributes:[],Major:!1,NeedsWork:!1,DefaultsHash:{}}),n.setState({message:"",loaded:!0})}))},n.changeDefault=function(e){var t=n.props.selectedType;t.DefaultsHash[e.attrID]={attrID:e.attrID,DefaultValue:e.DefaultValue,DefaultListValues:e.DefaultListValues,FromTypeIDs:e.FromTypeIDs},n.props.updateSelectedType(t)},n.newAttribute=function(){var e=n.props.selectedType;e.AttributesArr.push({index:e.AttributesArr.length,attrID:"null_".concat(Pa()()),Name:"",AttributeType:"Text",Options:[],DefinedType:"",ListType:""}),n.props.updateSelectedType(e)},n.changeAttribute=function(e){var t=n.props.selectedType;t.AttributesArr[e.index]={index:e.index,attrID:e.attrID,Name:e.Name,AttributeType:e.AttributeType,Options:e.Options,DefinedType:e.DefinedType,ListType:e.ListType},n.props.updateSelectedType(t)},n.deleteAttribute=function(e){var t=n.props.selectedType,a=[];t.AttributesArr.forEach((function(t){t.index!==e.index&&(t.index>e.index&&t.index--,a.push(t))})),t.AttributesArr=[];var r=Object(H.a)({},t.DefaultsHash);void 0!==r[e.attrID]&&delete r[e.attrID],t.DefaultsHash={},n.props.updateSelectedType(t),setTimeout((function(){t.AttributesArr=a,t.DefaultsHash=r,n.props.updateSelectedType(t)}),500)},n.renderAttributes=function(){return r.a.createElement(za,{defaultsMode:n.state.defaultsMode,addNewType:function(e){n.setState({typeModalOpen:!0,putTypeOnAttribute:e})},addNewThing:function(e){n.setState({thingModalOpen:!0,newThingType:n.props.types.filter((function(t){return t._id===e.DefinedType}))[0],putThingOnAttribute:e})}})},n.state={_id:void 0,Major:!1,fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""},Attributes:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1,addMore:"",resetting:!1,browseAttributes:!1,browseAttributesSelected:"",browseTypesSelected:"",newThingType:{}},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;if(void 0===t&&(t=null),this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading...");if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user){if(null===this.props.selectedWorld||this.props.selectedWorld.Public||this.props.selectedWorld.Owner===this.props.user._id||0!==this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type&&t.editPermission})).length){if(null===this.props.selectedType||this.props.selectedType._id!==t)return r.a.createElement("span",null,this.state.message);if(this.state.typeModalOpen)return r.a.createElement(qa,{types:this.props.types,selectedWorldID:this.props.selectedWorldID,onCancel:function(t){e.setState({typeModalOpen:!1})},addType:function(t){e.props.addType(t)},onSave:function(t){var a=e.props.selectedType;a.AttributesArr.filter((function(t){return t.attrID===e.state.putTypeOnAttribute.attrID}))[0].DefinedType=t._id,e.props.updateSelectedType(a),e.setState({typeModalOpen:!1})},api:this.api,logout:function(){e.props.logout()}});if(this.state.thingModalOpen)return r.a.createElement(Ua,{things:this.props.things,newThingType:this.state.newThingType,selectedWorldID:this.props.selectedWorldID,onCancel:function(t){e.setState({thingModalOpen:!1})},addThing:function(t){e.props.addThing(t)},onSave:function(t){e.setState({thingModalOpen:!1},(function(a){var n=e.props.selectedType,r=n.AttributesArr.filter((function(t){return t.attrID===e.state.putThingOnAttribute.attrID}))[0],i=e.props.selectedType.DefaultsHash[r.attrID];void 0===i&&(i={attrID:r.attrID,DefaultValue:"",DefaultListValues:[]}),"Type"===r.AttributeType?i.DefaultValue=t._id:i.DefaultListValues.push(t._id),e.props.updateSelectedType(n)}))},api:this.api,logout:function(){e.props.logout()}});var a=this.props.height-(this.props.width>600?260:300),n=void 0===this.props.types||null===this.state._id?this.props.types:this.props.types.filter((function(t){return t._id!==e.state._id})),i=[],s=[],o="";this.state.browseAttributes&&(Object.keys(this.props.attributesByID).forEach((function(t){var a=e.props.attributesByID[t];if(!a.TypeIDs.includes(e.props.selectedType._id)&&0===e.props.selectedType.AttributesArr.filter((function(e){return e.attrID===a._id})).length){for(var n=!1,r=0;r<e.props.selectedType.Supers.length;r++)if(a.TypeIDs.includes(e.props.selectedType.Supers[r]._id)){n=!0;break}n||i.push({_id:a._id,Name:a.Name})}})),""!==this.state.browseAttributesSelected&&(o=this.props.attributesByID[this.state.browseAttributesSelected].Name,s=this.props.types.filter((function(t){return e.props.attributesByID[e.state.browseAttributesSelected].TypeIDs.includes(t._id)}))));var l=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},null===this.props.selectedWorld?"":r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: ".concat(this.props.selectedWorld.Name))),this.props.types.length>1?r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:5,sm:7},r.a.createElement("h4",null,null===this.state._id?"Create New Type":"Edit Type")),r.a.createElement(U.a,{item:!0,xs:5,sm:3},r.a.createElement(g.a,null,r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next Type"}))))):r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:10},r.a.createElement("h4",null,null===this.state._id?"Create New Type":"Edit Type"))),!this.state.resetting&&r.a.createElement(U.a,{item:!0,style:{height:"".concat(a,"px"),overflowY:"scroll",overflowX:"hidden"}},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},this.state.loaded&&r.a.createElement(et,{Value:this.props.selectedType.Name,fieldName:"Name",message:this.state.fieldValidation.Name.message,onBlur:function(t){var a=e.props.selectedType;a.Name=t,e.props.updateSelectedType(a),e.validateForm()},labelWidth:43})),r.a.createElement(U.a,{item:!0},this.state.loaded&&r.a.createElement(et,{Value:this.props.selectedType.PluralName,fieldName:"PluralName",displayName:"Plural Name",onBlur:function(t){var a=e.props.selectedType;a.PluralName=t,e.props.updateSelectedType(a),e.validateForm()},labelWidth:85})),r.a.createElement(U.a,{item:!0},this.state.loaded&&r.a.createElement(et,{Value:this.props.selectedType.Description,fieldName:"Description",multiline:!0,onBlur:function(t){var a=e.props.selectedType;a.Description=t,e.props.updateSelectedType(a)},labelWidth:82,options:l})),r.a.createElement(U.a,{item:!0},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{icon:r.a.createElement("img",{style:{opacity:"0.5",height:"30px"},src:Mt.a,alt:"No Work Planned"}),checkedIcon:r.a.createElement("img",{style:{height:"30px"},src:Mt.a,alt:"Needs Work"}),checked:this.props.selectedType.NeedsWork,onChange:function(t){var a=t.target.checked,n=e.props.selectedType;n.NeedsWork=a,e.props.updateSelectedType(n)},name:"NeedsWork"}),label:"Needs Work"})),r.a.createElement(U.a,{item:!0},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:this.props.selectedType.Major,onChange:function(t){var a=t.target.checked,n=e.props.selectedType;n.Major=a,e.props.updateSelectedType(n)},name:"Major",color:"primary"}),label:"Major Type"})),r.a.createElement(U.a,{item:!0},r.a.createElement(Wa.Multiselect,{placeholder:"Super Types",options:n,selectedValues:this.props.selectedType.Supers,onSelect:this.addSuper,onRemove:this.removeSuper,displayValue:"Name"})),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement("span",null,"Attributes\xa0",r.a.createElement(oe.a,{title:"Add New Attribute"},r.a.createElement("span",null,r.a.createElement(se.a,{size:"small",color:"primary",disabled:this.state.defaultsMode,onClick:function(t){e.newAttribute()}},r.a.createElement(ue.a,null)))),r.a.createElement(oe.a,{title:"Browse Additional Attributes"},r.a.createElement("span",null,r.a.createElement(se.a,{size:"small",color:"primary",disabled:this.state.defaultsMode,onClick:function(t){e.setState({browseAttributes:!e.state.browseAttributes})}},r.a.createElement(ce.a,null)))))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(t){e.setState({defaultsMode:!e.state.defaultsMode})}},this.state.defaultsMode?"Set Attribute Types":"Set Defaults"))),this.state.browseAttributes&&r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"browseForAttributes",id:"browseForAttributes-label"},"Browse Attributes"),r.a.createElement(Da.a,{labelId:"browseForAttributes-label",id:"browseForAttributes",value:this.state.browseAttributesSelected,onChange:function(t){e.setState({browseAttributesSelected:t.target.value})},fullWidth:!0,labelWidth:130},i.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:""===this.state.browseAttributesSelected,onClick:function(t){e.addSelectedAttribute()},type:"submit"},"Add Attribute")),1===s.length?r.a.createElement(U.a,{style:{color:"red"},item:!0,xs:12,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12},"This Attribute is also found on the Type '",s[0].Name,"'.  You may want to add '",s[0].Name,"' as a Super Type instead of adding the Attribute."),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(t){e.addBrowsedType(s[0]._id)},type:"submit"},"Add ",s[0].Name))):s.length>1&&r.a.createElement(U.a,{style:{color:"red"},item:!0,xs:12,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12},"This Attribute is also found on other Types.  You may want to add one as a Super Type instead of adding the Attribute."),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"browseTypesWithAttribute",id:"browseTypesWithAttribute-label"},"Browse Types with ",o),r.a.createElement(Da.a,{labelId:"browseTypesWithAttribute-label",id:"browseTypesWithAttribute",value:this.state.browseTypesSelected,onChange:function(t){e.setState({browseTypesSelected:t.target.value})},fullWidth:!0,labelWidth:140+9*o.length},s.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:""===this.state.browseTypesSelected,onClick:function(t){e.addBrowsedType(e.state.browseTypesSelected)},type:"submit"},"Add Type")))),r.a.createElement(U.a,{item:!0},this.state.loaded&&this.renderAttributes()),r.a.createElement(U.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))),r.a.createElement(U.a,{item:!0,style:{color:"red"}},this.state.message))),this.props.types.length>0?r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("next")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Edit Next")),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("add")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Create Another")),r.a.createElement(U.a,{item:!0,xs:6,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("")},type:"submit"},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6,sm:3},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){null===e.props.selectedType._id?e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/type/details/".concat(e.props.selectedType._id)})},type:"button"},"Cancel"))):r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("add")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Create Another")),r.a.createElement(U.a,{item:!0,xs:6,sm:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("")},type:"submit"},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6,sm:4},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){null===e.props.selectedType._id?e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/type/details/".concat(e.props.selectedType._id)})},type:"button"},"Cancel")))))}return r.a.createElement(ye.a,{to:"/"})}return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login")}}]),a}(n.Component),Ha=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,selectedType:e.app.selectedType,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,things:e.app.things,user:e.app.user,attributesByID:e.app.attributesByID,attributesByName:e.app.attributesByName,fromLogin:e.app.fromLogin,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions,width:e.app.width,height:e.app.height}}),(function(e){return{updateSelectedType:function(t){return e(V(t))},addType:function(t){return e(P(t))},updateType:function(t){return e(j(t))},addAttributes:function(t){return e({type:"ADD_ATTRIBUTES",payload:t})},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},notFromLogin:function(){return e(z({}))},addThing:function(t){return e(M(t))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},selectWorld:function(t){return e(C(t))}}}))(Ra),Ka=a(18),Xa=a(585),Ga=a(586),Za=a(583),Qa=a(584),Ya=a(581),Ja=a(595),$a=a(582),en=a(594),tn=a(365),an=[];function nn(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function rn(e){var t=e.classes,a=e.order,n=e.orderBy,i=e.onRequestSort,s=e.columnMap;return r.a.createElement(Ya.a,null,r.a.createElement($a.a,null,s.map((function(e){return r.a.createElement(Za.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(en.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(s=e.id,function(e){i(e,s)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var s}))))}var sn=Object(be.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Ka.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),on=function(e){var t=sn(),a=e.label;return r.a.createElement(f.a,null,r.a.createElement(Te.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},a))},ln=Object(be.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function cn(e){var t=[{id:"Name",numeric:!1,disablePadding:!0,label:"Name"},{id:"Description",numeric:!1,disablePadding:!0,label:"Description"}];an=[],e.things.forEach((function(a){var n={_id:a._id,Name:a.Name,Description:a.Description};a.Attributes.forEach((function(a){var r=e.attributesByID[a.attrID];if("Type"===r.AttributeType){var i=e.allThings.filter((function(e){return e._id===a.Value}));i.length>0&&(i=i[0],n[a.attrID]=i.Name)}else"List"===r.AttributeType?(n[a.attrID]="","Type"===r.ListType?a.ListValues.forEach((function(t){var r=e.allThings.filter((function(e){return e._id===t}));r.length>0&&(r=r[0],n[a.attrID]+=(n[a.attrID].length>0?", ":"")+r.Name)})):a.ListValues.forEach((function(e){n[a.attrID]+=(n[a.attrID].length>0?", ":"")+e}))):n[a.attrID]=a.Value;0===t.filter((function(e){return e.id===a.attrID})).length&&t.push({id:r._id,numeric:"Number"===r.Type,disablePadding:!0,label:r.Name})})),an.push(n)}));var a=ln(),n=r.a.useState("asc"),i=Object(Oe.a)(n,2),s=i[0],o=i[1],l=r.a.useState("Name"),c=Object(Oe.a)(l,2),u=c[0],p=c[1],d=r.a.useState([]),m=Object(Oe.a)(d,2),f=m[0],h=m[1],g=r.a.useState(0),b=Object(Oe.a)(g,2),v=b[0],A=b[1],E=r.a.useState(5),T=Object(Oe.a)(E,2),D=T[0],w=T[1];return r.a.createElement("div",{className:a.root},r.a.createElement(R.a,{display:{xs:"none",sm:"block"}},r.a.createElement(tn.a,{className:a.paper},r.a.createElement(on,{label:e.label}),r.a.createElement(Qa.a,null,r.a.createElement(Xa.a,{className:a.table,"aria-labelledby":"tableTitle",size:"small","aria-label":"enhanced table"},r.a.createElement(rn,{classes:a,numSelected:f.length,order:s,orderBy:u,onSelectAllClick:function(e){if(e.target.checked){var t=an.map((function(e){return e.name}));h(t)}else h([])},onRequestSort:function(e,t){o(u===t&&"asc"===s?"desc":"asc"),p(t)},rowCount:an.length,columnMap:t}),r.a.createElement(Ga.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(an,function(e,t){return"desc"===e?function(e,a){return nn(e,a,t)}:function(e,a){return-nn(e,a,t)}}(s,u)).slice(v*D,v*D+D).map((function(a,n){var i,s=(i=a.name,-1!==f.indexOf(i));return r.a.createElement($a.a,{hover:!0,role:"checkbox","aria-checked":s,tabIndex:-1,key:n,selected:s},t.map((function(t,n){return r.a.createElement(Za.a,{key:n},"Name"===t.id?r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(t){e.buttonClick(a._id)}},r.a.createElement(y.a,{primary:a.Name})):r.a.createElement("span",null,a[t.id]))})))}))))),an.length>5&&r.a.createElement(Ja.a,{rowsPerPageOptions:[5,10,25],component:"div",count:an.length,rowsPerPage:D,page:v,onChangePage:function(e,t){A(t)},onChangeRowsPerPage:function(e){w(parseInt(e.target.value,10)),A(0)}}))),r.a.createElement(R.a,{display:{xs:"block",sm:"none"}},e.label,":",e.things.map((function(t,a){return r.a.createElement(Ne.a,{key:a,style:{marginLeft:"4px"},variant:"contained",color:"primary",onClick:function(a){e.buttonClick(t._id)}},r.a.createElement(y.a,{primary:t.Name}))}))))}var un=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getModalStyle=function(){var e=Math.round(window.innerHeight/2)-50,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},n.delete=function(e){n.setState({waiting:!0},n.finishDelete)},n.finishDelete=function(e){n.api.deleteThing(n.props.selectedWorldID,n.state._id).then((function(e){void 0===e.error?n.api.getWorld(n.props.selectedWorldID,!0).then((function(e){n.props.setAttributes(e.attributes),n.props.setTypes(e.types),n.props.setThings(e.things),n.setState({waiting:!1,redirectTo:"/project/details/".concat(n.props.selectedWorldID)})})):n.setState({waiting:!1,message:e.error},(function(){n.props.logout()}))}))},n.redirectToNext=function(){for(var e=null===n.state.majorType?n.props.things:n.props.things.filter((function(e){return e.TypeIDs.includes(n.state.majorType._id)})),t=0;e[t]._id!==n.props.selectedThing._id;)t++;++t===e.length&&(t=0),n.setState({waiting:!1,redirectTo:"/thing/details/".concat(e[t]._id)})},n.load=function(e){setTimeout((function(){n.setState({_id:e,redirectTo:null,loaded:!1},n.finishLoading)}),500)},n.finishLoading=function(){n.props.fromLogin&&n.props.notFromLogin();var e=n.state._id;n.props.selectedWorldID?n.api.getWorld(n.props.selectedWorldID).then((function(t){if(n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),void 0!==e){var a=t.things.filter((function(t){return t._id===e}));if(0===a.length)n.setState({message:"Invalid Thing ID",loaded:!0});else if(a=a[0],null!==n.props.user&&void 0!==n.props.user&&n.api.upsertView({userID:n.props.user._id,worldID:n.props.selectedWorldID,objectType:"Thing",objectID:a._id}),a.AttributesArr=[],a.Attributes.forEach((function(e){var t=n.props.attributesByID[e.attrID];a.AttributesArr.push({index:a.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,TypeIDs:t.TypeIDs})})),n.props.updateSelectedThing(a),null===n.state.majorType){var r=a.Types.filter((function(e){return e.Major}));r.length>0?(r=r[0],n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,majorType:r,loaded:!0})):n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,loaded:!0})}else n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,loaded:!0})}else n.props.updateSelectedThing({_id:null,Name:"",Description:"",Types:[],Attributes:[],AttributesArr:[]}),n.setState({loaded:!0})})):n.api.getWorldByThingID(e).then((function(t){if(n.props.selectWorld(t.worldID),n.props.setAttributes(t.attributes),n.props.setTypes(t.types),n.props.setThings(t.things),void 0!==e){var a=t.things.filter((function(t){return t._id===e}));if(0===a.length)n.setState({message:"Invalid Thing ID",loaded:!0});else if((a=a[0]).AttributesArr=[],a.Attributes.forEach((function(e){var t=n.props.attributesByID[e.attrID];a.AttributesArr.push({index:a.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,TypeIDs:t.TypeIDs})})),n.props.updateSelectedThing(a),null===n.state.majorType){var r=a.Types.filter((function(e){return e.Major}));r.length>0?(r=r[0],n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,majorType:r,loaded:!0})):n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,loaded:!0})}else n.setState({Name:a.Name,Description:a.Description,_id:e,Types:a.Types,loaded:!0})}else n.props.updateSelectedThing({_id:null,Name:"",Description:"",Types:[],Attributes:[],AttributesArr:[]}),n.setState({loaded:!0})}))},n.state={_id:null,Name:"",Description:"",Types:[],AttributesArr:[],fieldValidation:{Name:{valid:!0,message:""},AttributesArr:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,modalOpen:!1,majorType:null},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;if(this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading");if(this.state.loaded){if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user){if(null===this.props.selectedWorld||this.props.selectedWorld.Public||this.props.selectedWorld.Owner===this.props.user._id||0!==this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type})).length){var a=this.props.things.filter((function(t){return void 0!==t.ReferenceIDs&&t.ReferenceIDs.includes(e.state._id)})),n=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions));return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},null===this.props.selectedWorld?"":r.a.createElement("div",null,r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: ".concat(this.props.selectedWorld.Name))),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:8,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:1},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:11},r.a.createElement("h2",null,this.state.Name))),r.a.createElement(U.a,{item:!0},r.a.createElement("h3",null,this.props.selectedThing.NeedsWork&&r.a.createElement("span",null,r.a.createElement("img",{style:{height:"50px"},src:Mt.a,alt:"Needs Work"})," Needs Work"))),r.a.createElement(U.a,{item:!0},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.Description}}))),r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(ie.a,null,null!==this.props.user&&null!==this.props.selectedWorld&&(this.props.selectedWorld.Owner===this.props.user._id||this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type&&t.editPermission})).length>0)&&r.a.createElement(g.a,null,r.a.createElement(R.a,{display:{xs:"block",sm:"none"},width:1},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:3},"\xa0"),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(oe.a,{title:"Edit ".concat(this.state.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/thing/edit/".concat(e.state._id)})}},r.a.createElement(St.a,null)))),r.a.createElement(U.a,{item:!0,xs:5},r.a.createElement(oe.a,{title:"Delete ".concat(this.state.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement(_t.a,null)))))),r.a.createElement(R.a,{display:{xs:"none",sm:"block"}},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(oe.a,{title:"Edit ".concat(this.state.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/thing/edit/".concat(e.state._id)})}},r.a.createElement(St.a,null)))),r.a.createElement(U.a,{item:!0},r.a.createElement(oe.a,{title:"Delete ".concat(this.state.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({modalOpen:!0})}},r.a.createElement(_t.a,null))))))),r.a.createElement(g.a,null,null===this.state.majorType?r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next"})):r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next ".concat(this.state.majorType.Name)})))))),r.a.createElement(U.a,{item:!0,container:!0,spacing:0,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:8},"Attributes",r.a.createElement(ie.a,null,null!==this.props.selectedThing&&void 0!==this.props.selectedThing&&this.props.selectedThing.AttributesArr.map((function(t,a){return r.a.createElement(g.a,{key:a},"Type"===t.AttributeType&&""!==t.Value?r.a.createElement(cn,{attributesByID:e.props.attributesByID,label:t.Name,things:e.props.things.filter((function(e){return e._id===t.Value})),allThings:e.props.things}):"List"===t.AttributeType&&"Type"===t.ListType?r.a.createElement(cn,{attributesByID:e.props.attributesByID,label:t.Name,things:e.props.things.filter((function(e){return t.ListValues.includes(e._id)})),allThings:e.props.things,buttonClick:function(t){e.setState({redirectTo:"/thing/details/".concat(t)})}}):"List"===t.AttributeType?r.a.createElement("span",null,t.Name,":\xa0",t.ListValues.map((function(e,t){return r.a.createElement("span",{key:t},t>0?", ".concat(e):"".concat(e))}))):r.a.createElement("span",null,t.Name,":\xa0",t.Value))})))),r.a.createElement(U.a,{item:!0,xs:12,sm:4,container:!0,spacing:0,direction:"column"},this.state.Types.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Types"})),this.state.Types.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))),a.length>0&&r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{primary:"Referenced in:"})),a.map((function(t,a){return r.a.createElement(g.a,{key:a},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/thing/details/".concat(t._id)})}},r.a.createElement(y.a,{primary:t.Name})))})))))),null!==this.props.selectedThing&&r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(st,{user:this.props.user,allUsers:this.props.allUsers,object:this.props.selectedThing,objectType:"Thing",world:this.props.selectedWorld,api:this.api,onChange:this.commentsChange,suggestions:n})),r.a.createElement(zt.a,{"aria-labelledby":"delete-thing-modal","aria-describedby":"delete-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Are you sure you want to delete ",this.state.Name,"?"),r.a.createElement(U.a,{item:!0},"(All references to it will be left alone and may not work correctly)"),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.delete},"Yes")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel"))))))))}return r.a.createElement(ye.a,{to:"/"})}return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login")}return r.a.createElement("span",null,"Loading")}}]),a}(n.Component),pn=Object(d.b)((function(e){var t=e.app.selectedThing;return{selectedPage:e.app.selectedPage,selectedThing:t,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,types:e.app.types,things:e.app.things,user:e.app.user,attributesByID:e.app.attributesByID,fromLogin:e.app.fromLogin,allUsers:e.app.allUsers,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions}}),(function(e){return{updateSelectedThing:function(t){return e(F(t))},addThing:function(t){return e(M(t))},updateThing:function(t){return e(L(t))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},setAllUsers:function(t){return e(k(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},selectWorld:function(t){return e(C(t))}}}))(un),dn=a(201),mn=a.n(dn);function fn(e){var t=Object(n.useState)(e.attribute.Value),a=Object(Oe.a)(t,2),i=a[0],s=a[1],o=""===e.attribute.AttributeType?"Text":e.attribute.AttributeType,l=[],c=[];if("List"===o&&"Options"===e.attribute.ListType)e.attribute.Options.forEach((function(e){l.push({Name:e})})),e.attribute.ListValues.forEach((function(e){c.push({Name:e})}));else if("List"===o&&"Type"===e.attribute.ListType){var u=e.types.filter((function(t){return t._id===e.attribute.DefinedType}))[0];void 0!==u&&(l.push({Name:"+ Create New ".concat(u.Name),_id:"new"}),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.DefinedType)})).forEach((function(e){l.push({Name:e.Name,_id:e._id})})),l.filter((function(t){return e.attribute.ListValues.includes(t._id)})).forEach((function(e){c.push(e)})))}return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:11},"Text"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"attribute_name_".concat(e.attribute.attrID)},e.attribute.Name),r.a.createElement(re.a,{id:"attribute_name_".concat(e.attribute.attrID),name:"attribute_name_".concat(e.attribute.attrID),type:"text",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,attrID:e.attribute.attrID,Name:e.attribute.Name,AttributeType:e.attribute.AttributeType,Options:e.attribute.Options,DefinedType:e.attribute.DefinedType,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},labelWidth:9*e.attribute.Name.length,fullWidth:!0,multiline:!0}),r.a.createElement(Be.a,null,e.message)):"Number"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"numField"},e.attribute.Name),r.a.createElement(re.a,{id:"numField",name:"numField",type:"number",error:e.error,value:i,autoComplete:"off",onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,attrID:e.attribute.attrID,Name:e.attribute.Name,AttributeType:e.attribute.AttributeType,Options:e.attribute.Options,DefinedType:e.attribute.DefinedType,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},labelWidth:9*e.attribute.Name.length,fullWidth:!0}),r.a.createElement(Be.a,null,e.message)):"True/False"===o?r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{checked:"True"===e.attribute.Value,onChange:function(t){var a=e.attribute;a.Value=t.target.checked?"True":"False",e.onChange(a)},color:"primary"}),label:e.attribute.Name}):"Options"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"options-select",id:"options-select-label"},e.attribute.Name),r.a.createElement(Da.a,{labelId:"options-select-label",id:"options-select",value:i,onChange:function(e){s(e.target.value)},onBlur:function(t){var a={index:e.attribute.index,attrID:e.attribute.attrID,Name:e.attribute.Name,AttributeType:e.attribute.AttributeType,Options:e.attribute.Options,DefinedType:e.attribute.DefinedType,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},fullWidth:!0,labelWidth:9*e.attribute.Name.length},e.attribute.Options.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)})))):"Type"===o?r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"type-select",id:"type-select-label"},e.attribute.Name),r.a.createElement(Da.a,{labelId:"type-select-label",id:"type-select",value:i,onChange:function(t){!function(e,t,a){if("new"===e.target.value){var n=t.attribute;t.onNewThing(n)}else a(e.target.value)}(t,e,s)},onBlur:function(t){var a={index:e.attribute.index,attrID:e.attribute.attrID,Name:e.attribute.Name,AttributeType:e.attribute.AttributeType,Options:e.attribute.Options,DefinedType:e.attribute.DefinedType,ListType:e.attribute.ListType,FromTypes:e.attribute.FromTypes,Value:i,ListValues:e.attribute.ListValues};e.onChange(a)},fullWidth:!0,labelWidth:9*e.attribute.Name.length},r.a.createElement(ft.a,{value:"new"},"+ Create New"," ",e.types.filter((function(t){return t._id===e.attribute.DefinedType}))[0].Name),e.things.filter((function(t){return t.TypeIDs.includes(e.attribute.DefinedType)})).map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)})))):"List"===o?r.a.createElement("span",null,"Text"===e.attribute.ListType?r.a.createElement(ja.a,{placeholder:e.attribute.Name,variant:"outlined",fullWidth:!0,defaultValue:e.attribute.ListValues,onChange:function(t){return function(e,t){var a=t.attribute;a.ListValues=e,t.onChange(a)}(t,e)},blurBehavior:"add"}):"Options"===e.attribute.ListType?r.a.createElement(Wa.Multiselect,{placeholder:e.attribute.Name,options:l,selectedValues:c,onSelect:function(t,a){!function(e,t){var a=t.attribute;a.ListValues.push(e.Name),t.onChange(a)}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.attribute;a.ListValues=[],e.forEach((function(e){a.ListValues.push(e.Name)})),t.onChange(a)}(t,e)},displayValue:"Name"}):"Type"===e.attribute.ListType?r.a.createElement(Wa.Multiselect,{placeholder:e.attribute.Name,options:l,selectedValues:c,onSelect:function(t,a){!function(e,t){if("new"===e._id){var a=t.attribute;t.onNewThing(a)}else{var n=t.attribute;n.ListValues.push(e._id),t.onChange(n)}}(a,e)},onRemove:function(t,a){!function(e,t){var a=t.attribute;a.ListValues=[],e.forEach((function(e){a.ListValues.push(e._id)})),t.onChange(a)}(t,e)},displayValue:"Name"}):""):""),r.a.createElement(U.a,{item:!0,xs:1},r.a.createElement(mn.a,{style:{cursor:"pointer"},onClick:function(t){e.infoModal(e.attribute)}})))}var hn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).newAttribute=function(){var e=n.props.selectedThing;e.AttributesArr.push({index:e.AttributesArr.length,_id:null,Name:"",AttributeType:"Text",Options:[],DefinedType:"",ListType:"Text",FromTypes:[],Value:"",ListValues:[],FromTypeIDs:[],TypeIDs:[]}),n.props.updateSelectedThing(e)},n.changeAttribute=function(e){var t=n.props.selectedThing,a=t.AttributesArr.filter((function(t){return t.attrID===e.attrID}))[0];a.Value=e.Value,a.ListValues=e.ListValues,n.props.updateSelectedThing(t)},n.blurAttribute=function(e){},n.deleteAttribute=function(e){var t=n.props.selectedThing;t.AttributesArr.splice(e.index,1),t.AttributesArr.forEach((function(e){e.index>n.state.infoAttribute.index&&e.index--})),n.props.updateSelectedThing(t)},n.optionsChange=function(e,t){},n.addNewThing=function(e){n.props.addNewThing(e)},n.infoModal=function(e){n.props.onInfo(e)},n.getModalStyle=function(){var e=Math.round(window.innerHeight/2)-100,t=Math.round(window.innerWidth/2)-200;return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(".concat(t,"px, ").concat(e,"px)")}},n.handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;void 0!==r[t]&&r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.validateField=function(e){var t=null,a=!0,r="";switch(e){case"Name":(a=null!==(t=n.state[e]).match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(a=!1,r="Thing Name is too short"):(a=0===n.props.things.filter((function(e){return e.Name===t&&e._id!==n.state._id})).length)||(r="This Thing Name is already in use"):r="Only Letters, Numbers, and Spaces allowed in Thing Names"}return{valid:a,message:r}},n.validateForm=function(e){var t=n.validateField("Name"),a=t.valid,r=n.state.fieldValidation;r.Name=t,n.setState({formValid:a,fieldValidation:r},e)},n.saveNewThing=function(){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},n.submitThroughAPI=function(){var e=n.props.types.filter((function(e){return e._id===n.state.newThingType._id||n.state.newThingType.SuperIDs.includes(e._id)})),t=e.map((function(e){return e._id})),a={_id:n.state._id,Name:n.state.Name.trim(),Description:"",TypeIDs:t,Attributes:[],worldID:n.props.selectedWorldID,EditUserID:n.props.user._id};n.api.createThing(a).then((function(t){void 0!==t.thingID?(a._id=t.thingID,a.Types=e,a.AttributesArr=[],n.props.addThing(a),n.state.modalSubmit(a),n.setState({waiting:!1,modalOpen:!1})):void 0!==t.error&&n.setState({waiting:!1,message:t.error},(function(){n.props.logout()}))})).catch((function(e){return console.log(e)}))},n.state={modalOpen:!1,infoModalOpen:!1,Name:"",fieldValidation:{Name:{valid:!0,message:""}},formValid:!1,message:"",waiting:!1,newThingType:null},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},null!==this.props.selectedThing&&void 0!==this.props.selectedThing&&this.props.selectedThing.AttributesArr.map((function(t,a){return r.a.createElement(fn,{key:a,thingID:e.props.selectedThing._id,attribute:t,onChange:e.changeAttribute,onDelete:e.deleteAttribute,onBlur:e.blurAttribute,things:e.props.things,types:e.props.types,onNewThing:e.addNewThing,infoModal:e.infoModal})})),r.a.createElement(zt.a,{"aria-labelledby":"new-thing-modal","aria-describedby":"new-thing-modal-description",open:this.state.modalOpen,onClose:function(t){e.setState({modalOpen:!1})}},r.a.createElement("div",{style:this.getModalStyle(),className:"paper"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Just give the new ",null===this.state.newThingType?"":this.state.newThingType.Name," a name."),r.a.createElement(U.a,{item:!0},"(You can do the rest later.)"),r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"name"},"Name"),r.a.createElement(re.a,{id:"name",name:"Name",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.Name.valid,value:this.state.Name,onChange:this.handleUserInput,onBlur:this.inputBlur,labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.Name.message))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.saveNewThing},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({modalOpen:!1})}},"Cancel")))))))}}]),a}(n.Component),gn=Object(d.b)((function(e){return{selectedThing:e.app.selectedThing,things:e.app.things,types:e.app.types,selectedWorldID:e.app.selectedWorldID}}),(function(e){return{updateSelectedThing:function(t){return e(F(t))},addThing:function(t){return e(M(t))},logout:function(){return e(T({}))}}}))(hn);var yn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).createThingFromType=function(e){var t=[];t.push(e),e.Supers.forEach((function(e){if(0===t.filter((function(t){return t._id===e._id})).length){var a=r.props.types.filter((function(t){return t._id===e._id}));a.length>0&&t.push(a[0])}}));var a={_id:null,Name:"",Description:"",NeedsWork:!1,Types:[],Attributes:[]},n=[];t.forEach((function(e){for(var t=function(t){var r=Object(H.a)({},e.Attributes[t]),i=a.Attributes.filter((function(e){return e.attrID===r.attrID}));0===i.length?(r.FromTypeIDs=[e._id],r.index=e.Attributes.length+n.length,n.push(r)):(void 0!==(i=i[0]).FromTypeIDs&&null!==i.FromTypeIDs||(i.FromTypeIDs=[]),i.FromTypeIDs.push(e._id))},r=0;r<e.Attributes.length;r++)t(r)})),t.forEach((function(e){n.forEach((function(t){void 0===e.DefaultsHash[t.attrID]||void 0===e.DefaultsHash[t.attrID].DefaultValue?(t.Value="",t.ListValues=[]):(t.Value=e.DefaultsHash[t.attrID].DefaultValue,t.ListValues=e.DefaultsHash[t.attrID].DefaultListValues)}))}));var i=[].concat(Object(ee.a)(a.Attributes),n);a.Attributes=i,a.AttributesArr=[],a.Attributes.forEach((function(e){var t=r.props.attributesByID[e.attrID];a.AttributesArr.push({index:a.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:t.TypeIDs})})),a.Types=t,r.props.updateSelectedThing(a),r.setState({_id:null,loaded:!0,majorType:e})},r.resetForm=function(){setTimeout((function(){var e=r.props.match.params.id;void 0===e||e.includes("type_id_")?r.setState({resetting:!1},r.finishResettingForm):null===r.state.majorType?r.setState({resetting:!1,redirectTo:"/thing/create"}):r.setState({resetting:!1,redirectTo:"/thing/create/type_id_".concat(r.state.majorType._id)})}),500)},r.finishResettingForm=function(){var e=r.props.match.params.id;if(void 0!==e&&e.includes("type_id_")){var t=e.substring(8),a=r.props.types.filter((function(e){return e._id===t}));a.length>0?(a=a[0],r.createThingFromType(a)):r.setState({message:"Invalid Type"})}},r.handleInfoAttrNameChange=function(e){var t=r.state.infoAttribute;t.Name=e.target.value,r.setState({infoAttribute:t})},r.inputBlur=function(e){var t=e.target.name,a=r.validateField(t),n=r.state.fieldValidation;void 0===n[t]||n[t].valid===a.valid&&n[t].message===a.message||(n[t].valid=a.valid,n[t].message=a.message,r.setState({fieldValidation:n}))},r.inputBlur2=function(e){var t="infoAttributeName",a=r.validateField(t),n=r.state.fieldValidation;void 0===n[t]||n[t].valid===a.valid&&n[t].message===a.message||(n[t].valid=a.valid,n[t].message=a.message,r.setState({fieldValidation:n}))},r.addSelectedAttribute=function(){var e=r.props.selectedThing,t=r.props.attributesByID[r.state.browseAttributesSelected],a=e.Attributes,n=e.AttributesArr;a.push({attrID:r.state.browseAttributesSelected,Value:"",ListValues:[],index:a.length,FromTypeIDs:[]}),n.push({attrID:r.state.browseAttributesSelected,index:n.length,Value:"",ListValues:[],Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,FromTypeIDs:[],TypeIDs:t.TypeIDs}),e.Attributes=[],e.AttributesArr=[],r.props.updateSelectedThing(e),setTimeout((function(){e.Attributes=a,e.AttributesArr=n,r.props.updateSelectedThing(e),r.setState({browseAttributesSelected:""})}),500)},r.validateField=function(e){var t=null,a=!0,n="";switch(e){case"Name":t=r.props.selectedThing[e].trim(),(a=null!==t.match(/^[a-zA-Z0-9 ]*$/i))?t.length<2?(a=!1,n="Thing Name is too short"):(a=0===r.props.things.filter((function(e){return e.Name===t&&e._id!==r.state._id})).length)||(n="This Thing Name is already in use"):n="Only Letters, Numbers, and Spaces allowed in Thing Names";break;case"infoAttributeName":if(t=r.state.infoAttribute.Name.trim(),a=null!==t.match(/^[a-zA-Z0-9 ]*$/i))if(t.length<2)a=!1,n="Attribute Name is too short";else{var i=r.props.attributesByName[t];(a=void 0===i||i._id===r.state.infoAttribute.attrID)||(n="There is another Attribute with this name.")}else n="Only Letters, Numbers, and Spaces allowed in Attribute Names";break;case"AttributesArr":a=!0,(t=r.props.selectedThing[e]).forEach((function(e){a&&t.filter((function(t){return t.Name===e.Name})).length>1&&(a=!1)})),n=a?"":"Attribute Names must be unique"}return{valid:a,message:n}},r.validateForm=function(e){var t=r.validateField("Name"),a=r.validateField("AttributesArr"),n=t.valid&&a.valid,i=r.state.fieldValidation;i.Name=t,i.Attributes=a,r.setState({formValid:n,fieldValidation:i},e)},r.validateAttrForm=function(e){var t=r.validateField("infoAttributeName"),a=r.state.fieldValidation;a.infoAttributeName=t,r.setState({fieldValidation:a},e)},r.onSubmit=function(e){r.validateForm((function(){this.state.formValid&&this.setState({waiting:!0,addMore:e},this.submitThroughAPI)}))},r.submitThroughAPI=function(){var e=r.props.selectedThing.Types.map((function(e){return e._id})),t={_id:r.state._id,Name:r.props.selectedThing.Name.trim(),Description:r.props.selectedThing.Description.trim(),NeedsWork:r.props.selectedThing.NeedsWork,TypeIDs:e,Attributes:[],worldID:r.props.selectedWorld._id,ReferenceIDs:[],EditUserID:r.props.user._id};r.props.selectedThing.AttributesArr.forEach((function(e){t.Attributes.push({attrID:e.attrID,index:e.index,Value:e.Value.trim(),ListValues:e.ListValues}),"Type"===e.AttributeType&&(t.ReferenceIDs.includes(e.Value)||t.ReferenceIDs.push(e.Value)),"List"===e.AttributeType&&"Type"===e.ListType&&e.ListValues.forEach((function(e){t.ReferenceIDs.includes(e)||t.ReferenceIDs.push(e)}))})),null===t._id?r.api.createThing(t).then((function(e){void 0===e.error?r.api.getWorld(r.props.selectedWorldID,!0).then((function(e){r.props.setAttributes(e.attributes),r.props.setTypes(e.types),r.props.setThings(e.things),"add"===r.state.addMore?(r.props.updateSelectedThing({_id:null,Name:"",Description:"",NeedsWork:!1,Types:null===r.state.majorType?[]:[r.state.majorType],Attributes:[],AttributesArr:[]}),r.setState({_id:null,fieldValidation:{Name:{valid:!0,message:""},Attributes:{valid:!0,message:""}},formValid:!1,message:"",waiting:!1,resetting:!0},r.resetForm)):"next"===r.state.addMore?r.redirectToNext():r.setState({waiting:!1,redirectTo:"/project/details/".concat(r.props.selectedWorld._id)})})):r.setState({message:e.error},(function(){r.props.logout()}))})).catch((function(e){return console.log(e)})):r.api.updateThing(t).then((function(e){void 0===e.error?r.api.getWorld(r.props.selectedWorldID,!0).then((function(e){r.props.setAttributes(e.attributes),r.props.setTypes(e.types),r.props.setThings(e.things),"add"===r.state.addMore?(r.props.updateSelectedThing({_id:null,Name:"",Description:"",NeedsWork:!1,Types:null===r.state.majorType?[]:[r.state.majorType],Attributes:[],AttributesArr:[]}),r.setState({fieldValidation:{Name:{valid:!0,message:""},Attributes:{valid:!0,message:""}},formValid:!1,message:"",waiting:!1,addMore:!1,resetting:!0},r.resetForm)):"next"===r.state.addMore?r.redirectToNext():r.setState({waiting:!1,redirectTo:"/project/details/".concat(r.props.selectedWorld._id)})})):r.setState({message:e.error},(function(){r.props.logout()}))})).catch((function(e){return console.log(e)}))},r.typesChange=function(e,t){for(var a=[],n=0;n<t.length;n++){var i=t[n];a.push(i),a=a.concat(i.Types)}var s=r.props.selectedThing;s.Types=a,r.props.updateSelectedThing(s)},r.addType=function(e,t){var a=r.props.selectedThing,n={};n[t._id]=t,t.Supers.forEach((function(t){if(0===e.filter((function(e){return e._id===t._id})).length){var a=r.props.types.filter((function(e){return e._id===t._id}));a.length>0&&0===e.filter((function(e){return e._id===a[0]._id})).length&&(e.push(a[0]),n[a[0]._id]=a[0])}0===r.props.selectedThing.Types.filter((function(e){return e._id===t._id})).length&&(n[t._id]=t)}));var i=[];Object.keys(n).forEach((function(e){var t=n[e];t.Attributes.forEach((function(e){var n=Object(H.a)({},e),r=a.Attributes.filter((function(e){return e.attrID===n.attrID}));0===r.length?(n.FromTypeIDs=[t._id],n.index=t.Attributes.length+i.length,i.push(n)):(void 0!==(r=r[0]).FromTypeIDs&&null!==r.FromTypeIDs||(r.FromTypeIDs=[]),r.FromTypeIDs.push(t._id))}))})),Object.keys(n).forEach((function(e){var t=n[e];i.forEach((function(e){void 0===t.DefaultsHash||void 0===t.DefaultsHash[e.attrID]||void 0===t.DefaultsHash[e.attrID].DefaultValue?(e.Value="",e.ListValues=[]):(void 0===e.Value&&(e.Value="",e.ListValues=[]),""===e.Value&&(e.Value=t.DefaultsHash[e.attrID].DefaultValue),t.DefaultsHash[e.attrID].DefaultListValues.forEach((function(t){e.ListValues.includes(t)||e.ListValues.push(t)})))}))}));var s=[].concat(Object(ee.a)(a.Attributes),i);a.Types=e,a.Attributes=s,a.AttributesArr=[];var o=[];a.Attributes.forEach((function(e){var t=r.props.attributesByID[e.attrID];o.push({index:a.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:t.TypeIDs})})),r.props.updateSelectedThing(a),setTimeout((function(){a.Attributes=s,a.AttributesArr=o,r.props.updateSelectedThing(a)}),500)},r.addType2=function(e){var t=r.props.selectedThing.Types;t.push(e);var a=[e],n=r.props.selectedThing;e.Supers.forEach((function(e){if(0===t.filter((function(t){return t._id===e._id})).length){var n=r.props.types.filter((function(t){return t._id===e._id}));n.length>0&&0===t.filter((function(e){return e._id===n[0]._id})).length&&(t.push(n[0]),a.push(n[0]))}0===r.props.selectedThing.Types.filter((function(t){return t._id===e._id})).length&&a.push(e)}));var i=[];a.forEach((function(e){e.Attributes.forEach((function(t){var a=Object(H.a)({},t),r=n.Attributes.filter((function(e){return e.attrID===a.attrID}));0===r.length?(a.FromTypeIDs=[e._id],a.index=e.Attributes.length+i.length,i.push(a)):(void 0!==(r=r[0]).FromTypeIDs&&null!==r.FromTypeIDs||(r.FromTypeIDs=[]),r.FromTypeIDs.push(e._id))}))})),a.forEach((function(e){i.forEach((function(t){void 0===e.DefaultsHash||void 0===e.DefaultsHash[t.attrID]||void 0===e.DefaultsHash[t.attrID].DefaultValue?(t.Value="",t.ListValues=[]):(t.Value=e.DefaultsHash[t.attrID].DefaultValue,t.ListValues=e.DefaultsHash[t.attrID].DefaultListValues)}))}));var s=[].concat(Object(ee.a)(n.Attributes),i);r.setState({resetting:!0}),n.Types=t,n.Attributes=s,n.AttributesArr=[];var o=[];n.Attributes.forEach((function(e){var t=r.props.attributesByID[e.attrID];o.push({index:n.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:t.TypeIDs})})),r.props.updateSelectedThing(n),setTimeout((function(){n.Attributes=s,n.AttributesArr=o,r.props.updateSelectedThing(n),r.setState({resetting:!1,infoAttribute:null})}),500)},r.selectNewTypeForAttribute=function(e){if("new"===e.target.value){r.setState({typeModalOpen:!0,modalSubmit:function(e){this.setState({newTypeForAttribute:e._id})}})}else r.setState({newTypeForAttribute:e.target.value})},r.saveInfoAttribute=function(){r.validateAttrForm((function(){this.state.fieldValidation.infoAttributeName.valid&&this.setState({waiting:!0},this.submitAttributeThroughAPI)}))},r.deleteInfoAttribute=function(){var e=r.props.selectedThing;e.AttributesArr.splice(r.state.infoAttribute.index,1),e.AttributesArr.forEach((function(e){e.index>r.state.infoAttribute.index&&e.index--})),r.setState({infoAttribute:null},(function(){this.props.updateSelectedThing(e)}))},r.cleanWYSIWYG=function(e){return e.endsWith("<p><br></p>")&&(e=e.substring(0,e.length-11)),e},r.submitAttributeThroughAPI=function(){var e=[{_id:r.state.infoAttribute.attrID,Name:r.state.infoAttribute.Name.trim(),AttributeType:r.state.infoAttribute.AttributeType,Options:r.state.infoAttribute.Options,DefinedType:r.state.infoAttribute.DefinedType,ListType:r.state.infoAttribute.ListType}];r.api.upsertAttributes(r.props.selectedWorldID,e).then((function(e){void 0===e.error?r.api.getWorld(r.props.selectedWorldID,!0).then((function(t){r.props.setAttributes(t.attributes),r.props.setTypes(t.types),r.props.setThings(t.things);var a=r.state.infoAttribute;""!==r.state.newTypeForAttribute&&(a.TypeIDs.push(r.state.newTypeForAttribute),a.FromTypeIDs.push(r.state.newTypeForAttribute));var n=r.props.selectedThing;if(null===a.attrID){a.attrID=e.attributes[a.Name];var i={attrID:a.attrID,index:n.Attributes.length,Value:"",ListValues:[]};n.Attributes.push(i),n.AttributesArr.push({attrID:a.attrID,index:i.index,Value:"",ListValues:[],Name:a.Name,AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,FromTypeIDs:a.FromTypeIDs,TypeIDs:a.TypeIDs})}else{var s=n.AttributesArr.filter((function(e){return e.attrID===a.attrID}))[0];s.Name=a.Name,s.AttributeType=a.AttributeType,s.Options=a.Options,s.DefinedType=a.DefinedType,s.ListType=a.ListType,s.FromTypeIDs=a.FromTypeIDs,s.TypeIDs=a.TypeIDs}if(0===a.FromTypeIDs.length)r.props.updateSelectedThing(n),r.setState({infoAttribute:null,waiting:!1});else{var o=r.props.types.filter((function(e){return e._id===a.FromTypeIDs[0]}))[0],l={_id:o._id,Name:o.Name,Description:r.cleanWYSIWYG(o.Description),NeedsWork:o.NeedsWork,SuperIDs:o.SuperIDs,Attributes:o.Attributes,Defaults:o.Defaults,worldID:r.props.selectedWorld._id,Major:o.Major,ReferenceIDs:o.ReferenceIDs,DefaultReferenceIDs:o.DefaultReferenceIDs,EditUserID:r.props.user._id};l.Attributes.push({attrID:a.attrID,index:l.Attributes.length}),r.api.updateType(l).then((function(e){if(void 0===e.error){l.Supers=[],l.SuperIDs.forEach((function(e){l.Supers=l.Supers.concat(r.props.types.filter((function(t){return t._id===e})))})),l.AttributesArr=[],l.Attributes.forEach((function(e){var t=r.props.attributesByID[e.attrID];l.AttributesArr.push({index:l.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID})}));var t={};void 0!==l.Defaults&&l.Defaults.forEach((function(e){t[e.attrID]=e})),l.DefaultsHash=t,r.props.updateType(l),r.setState({infoAttribute:null,waiting:!1},(function(){this.addType2(l)}))}else r.setState({waiting:!1,message:e.error},(function(){r.props.logout()}))})).catch((function(e){return console.log(e)}))}})):r.setState({message:e.error,waiting:!1},(function(){r.props.logout()}))}))},r.removeType=function(e,t){var a=[],n=[];r.props.selectedThing.Types.forEach((function(e){e._id===t._id||e.SuperIDs.includes(t._id)?n.push(e._id):a.push(e)}));var i=r.props.selectedThing,s=Object(ee.a)(i.Attributes);s.forEach((function(e){var t=[];e.FromTypeIDs.forEach((function(e){n.includes(e)||t.push(e)})),e.FromTypeIDs=t})),i.Types=a,i.Attributes=s,i.AttributesArr=[],i.Attributes.forEach((function(e){var t=r.props.attributesByID[e.attrID];i.AttributesArr.push({index:i.AttributesArr.length,Name:t.Name,AttributeType:t.AttributeType,Options:t.Options,DefinedType:t.DefinedType,ListType:t.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:t.TypeIDs})})),r.props.updateSelectedThing(i)},r.redirectToNext=function(){var e=null===r.state.majorType?r.props.things:r.props.things.filter((function(e){return e.TypeIDs.includes(r.state.majorType._id)})),t=0;if(void 0===r.props.selectedThing||null!==r.props.selectedThing._id){for(;e[t]._id!==r.props.selectedThing._id;)t++;t++}t===e.length&&(t=0),r.setState({waiting:!1,redirectTo:"/thing/edit/".concat(e[t]._id)})},r.load=function(e){setTimeout((function(){r.setState({_id:e,redirectTo:null,loaded:!1},r.finishLoading)}),500)},r.finishLoading=function(){r.props.selectedWorldID?r.api.getWorld(r.props.selectedWorldID).then((function(e){if(r.props.setAttributes(e.attributes),r.props.setTypes(e.types),r.props.setThings(e.things),r.props.fromLogin)r.props.notFromLogin(),r.setState({loaded:!0,message:""});else if(null!==r.state._id){var t=e.things.filter((function(e){return e._id===r.state._id}));if(0===t.length)r.setState({message:"Invalid ID"});else{t=t[0],r.api.upsertView({userID:r.props.user._id,worldID:r.props.selectedWorldID,objectType:"Thing",objectID:t._id});var a=[];t.TypeIDs.forEach((function(e){a=a.concat(r.props.types.filter((function(t){return t._id===e})))}));var n=[];a.forEach((function(e){for(var a=function(a){var r=Object(H.a)({},e.Attributes[a]),i=t.Attributes.filter((function(e){return e.attrID===r.attrID}));0===i.length?(r.FromTypeIDs=[e._id],r.index=t.Attributes.length+n.length,n.push(r)):(void 0!==(i=i[0]).FromTypeIDs&&null!==i.FromTypeIDs||(i.FromTypeIDs=[]),i.FromTypeIDs.push(e._id))},r=0;r<e.Attributes.length;r++)a(r)})),a.forEach((function(e){n.forEach((function(t){void 0===e.DefaultsHash[t.attrID]||void 0===e.DefaultsHash[t.attrID].DefaultValue?(t.Value="",t.ListValues=[]):(t.Value=e.DefaultsHash[t.attrID].DefaultValue,t.ListValues=e.DefaultsHash[t.attrID].DefaultListValues)}))}));var i=[].concat(Object(ee.a)(t.Attributes),n);if(i.forEach((function(e){void 0===e.FromTypeIDs&&(e.FromTypeIDs=[])})),t.Attributes=i,t.AttributesArr=[],t.Attributes.forEach((function(e){var a=r.props.attributesByID[e.attrID];t.AttributesArr.push({index:t.AttributesArr.length,Name:a.Name,AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:a.TypeIDs})})),t.Types=a,r.props.updateSelectedThing(t),null===r.state.majorType){var s=t.Types.filter((function(e){return e.Major}));s.length>0?(s=s[0],r.setState({loaded:!0,majorType:s})):r.setState({loaded:!0})}else r.setState({loaded:!0})}}else{var o=r.props.match.params.id;if(void 0!==o&&o.includes("type_id_")){var l=o.substring(8),c=r.props.types.filter((function(e){return e._id===l}));c.length>0?(c=c[0],r.createThingFromType(c)):r.setState({message:"Invalid Type",loaded:!0})}else r.props.updateSelectedThing({_id:null,Name:"",Description:"",NeedsWork:!1,Types:[],Attributes:[],AttributesArr:[]}),r.setState({loaded:!0})}})):r.api.getWorldByThingID(r.state._id).then((function(e){if(r.props.selectWorld(e.worldID),r.props.setAttributes(e.attributes),r.props.setTypes(e.types),r.props.setThings(e.things),r.props.fromLogin)r.props.notFromLogin(),r.setState({loaded:!0,message:""});else if(null!==r.state._id){var t=e.things.filter((function(e){return e._id===r.state._id}));if(0===t.length)r.setState({message:"Invalid ID"});else{t=t[0];var a=[];t.TypeIDs.forEach((function(e){a=a.concat(r.props.types.filter((function(t){return t._id===e})))}));var n=[];a.forEach((function(e){for(var a=function(a){var r=Object(H.a)({},e.Attributes[a]),i=t.Attributes.filter((function(e){return e.attrID===r.attrID}));0===i.length?(r.FromTypeIDs=[e._id],r.index=t.Attributes.length+n.length,n.push(r)):(void 0!==(i=i[0]).FromTypeIDs&&null!==i.FromTypeIDs||(i.FromTypeIDs=[]),i.FromTypeIDs.push(e._id))},r=0;r<e.Attributes.length;r++)a(r)})),a.forEach((function(e){n.forEach((function(t){void 0===e.DefaultsHash[t.attrID]||void 0===e.DefaultsHash[t.attrID].DefaultValue?(t.Value="",t.ListValues=[]):(t.Value=e.DefaultsHash[t.attrID].DefaultValue,t.ListValues=e.DefaultsHash[t.attrID].DefaultListValues)}))}));var i=[].concat(Object(ee.a)(t.Attributes),n);if(i.forEach((function(e){void 0===e.FromTypeIDs&&(e.FromTypeIDs=[])})),t.Attributes=i,t.AttributesArr=[],t.Attributes.forEach((function(e){var a=r.props.attributesByID[e.attrID];t.AttributesArr.push({index:t.AttributesArr.length,Name:a.Name,AttributeType:a.AttributeType,Options:a.Options,DefinedType:a.DefinedType,ListType:a.ListType,attrID:e.attrID,Value:e.Value,ListValues:e.ListValues,FromTypeIDs:e.FromTypeIDs,TypeIDs:a.TypeIDs})})),t.Types=a,r.props.updateSelectedThing(t),null===r.state.majorType){var s=t.Types.filter((function(e){return e.Major}));s.length>0?(s=s[0],r.setState({loaded:!0,majorType:s})):r.setState({loaded:!0})}else r.setState({loaded:!0})}}else{var o=r.props.match.params.id;if(void 0!==o&&o.includes("type_id_")){var l=o.substring(8),c=r.props.types.filter((function(e){return e._id===l}));c.length>0?(c=c[0],r.createThingFromType(c)):r.setState({message:"Invalid Type",loaded:!0})}else r.props.updateSelectedThing({_id:null,Name:"",Description:"",NeedsWork:!1,Types:[],Attributes:[],AttributesArr:[]}),r.setState({loaded:!0})}}))},r.state={_id:void 0,fieldValidation:{Name:{valid:!0,message:""},Attributes:{valid:!0,message:""},infoAttributeName:{valid:!0,message:""}},formValid:!1,message:"",redirectTo:null,waiting:!1,addMore:"",resetting:!1,loaded:!0,errors:[],infoAttribute:null,typeModalOpen:!1,newTypeForAttribute:"",browseAttributes:!1,browseAttributesFilter:"",browseAttributesSelected:"",thingModalOpen:!1,newThingType:null,putThingOnAttribute:null,majorType:null},r.api=J.getInstance(),r.refDescription=Object(n.createRef)(),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"renderHeader",value:function(){var e="Thing";return this.props.selectedThing.Types.forEach((function(t){t.Major&&("Thing"===e?e=t.Name:e+="/"+t.Name)})),r.a.createElement("h4",null,null===this.state._id?"Create New ".concat(e):"Edit ".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;if((void 0===t||t.includes("type_id_"))&&(t=null),this.state._id!==t)return this.load(t),r.a.createElement("span",null,"Loading...");if(this.state.loaded){if(null!==this.state.redirectTo)return r.a.createElement(ye.a,{to:this.state.redirectTo});if(null===this.props.selectedWorld||this.props.selectedWorld.Public||null!==this.props.user){if(null===this.props.selectedWorld||this.props.selectedWorld.Public||this.props.selectedWorld.Owner===this.props.user._id||0!==this.props.selectedWorld.Collaborators.filter((function(t){return t.userID===e.props.user._id&&"collab"===t.type&&t.editPermission})).length){if(null===this.props.selectedThing||this.props.selectedThing._id!==t)return r.a.createElement("span",null,"Loading...");if(this.state.typeModalOpen)return r.a.createElement(qa,{types:this.props.types,selectedWorldID:this.props.selectedWorldID,onCancel:function(t){e.setState({typeModalOpen:!1})},addType:function(t){e.props.addType(t)},onSave:function(t){e.setState({typeModalOpen:!1,newTypeForAttribute:t._id})},api:this.api,logout:function(){e.props.logout()}});if(null!==this.state.infoAttribute){var a=this.props.types.filter((function(t){return e.state.infoAttribute.FromTypeIDs.includes(t._id)})),n=this.props.types.filter((function(t){return!e.state.infoAttribute.FromTypeIDs.includes(t._id)&&e.state.infoAttribute.TypeIDs.includes(t._id)}));if(0===a.length){if(0===n.length){return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,{style:{fontSize:"30px"}},"Attribute Info"),r.a.createElement(g.a,null,r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"infoAttributeName"},"Name"),r.a.createElement(re.a,{id:"infoAttributeName",name:"infoAttributeName",type:"text",autoComplete:"Off",error:!this.state.fieldValidation.infoAttributeName.valid,value:this.state.infoAttribute.Name,onChange:this.handleInfoAttrNameChange,onBlur:this.inputBlur2,labelWidth:43,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.infoAttributeName.message))),r.a.createElement(g.a,null,r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"attribute-type",id:"attribute-type-label"},"Attribute Type"),r.a.createElement(Da.a,{labelId:"attribute-type-label",id:"attribute-type",disabled:this.state.waiting,value:this.state.infoAttribute.AttributeType,onChange:function(t){var a=e.state.infoAttribute;a.AttributeType=t.target.value,e.setState({infoAttribute:a})},fullWidth:!0,labelWidth:100},["Text","Number","True/False","Options","Type","List"].map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)}))))),"List"===this.state.infoAttribute.AttributeType&&r.a.createElement(g.a,null,r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"list-type",id:"list-type-label"},"List Type"),r.a.createElement(Da.a,{labelId:"list-type-label",id:"list-type",disabled:this.state.waiting,value:this.state.infoAttribute.ListType,onChange:function(t){var a=e.state.infoAttribute;a.ListType=t.target.value,e.setState({infoAttribute:a})},fullWidth:!0,labelWidth:70},["Text","Options","Type"].map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)}))))),("Type"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Type"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"definedType",id:"definedType-label"},"Defined Type"),r.a.createElement(Da.a,{labelId:"definedType-label",id:"definedType",disabled:this.state.waiting,value:this.state.infoAttribute.DefinedType,onChange:function(t){var a=e.state.infoAttribute;if(a.DefinedType=t.target.value,"new"===t.target.value){e.setState({typeModalOpen:!0,modalSubmit:function(e){a.DefinedType=e._id,this.setState({typeModalOpen:!1,infoAttribute:a})}})}else e.setState({infoAttribute:a})},fullWidth:!0,labelWidth:100},r.a.createElement(ft.a,{value:"new"},"+ Create New Type"),this.props.types.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))),("Options"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Options"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,r.a.createElement(ja.a,{variant:"outlined",disabled:this.state.waiting,defaultValue:this.state.infoAttribute.Options,onChange:function(t){var a=e.state.infoAttribute;a.Options=t,e.setState({infoAttribute:a})}})),r.a.createElement(g.a,null,"Select a Type to add this attribute to, and to add to ",this.props.selectedThing.Name),r.a.createElement(g.a,null,r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"newTypeForAttribute",id:"newTypeForAttribute-label"},"Type For Attribute"),r.a.createElement(Da.a,{labelId:"newTypeForAttribute-label",id:"newTypeForAttribute",value:this.state.newTypeForAttribute,onChange:function(t){e.selectNewTypeForAttribute(t)},fullWidth:!0,labelWidth:125},r.a.createElement(ft.a,{value:"new"},"+ Create New Type"),this.props.types.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))),r.a.createElement(g.a,null,"Or you can also remove this attribute from ",this.props.selectedThing.Name),r.a.createElement(g.a,null,r.a.createElement(oe.a,{title:"Delete Attribute"},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.deleteInfoAttribute},r.a.createElement(_t.a,null)))))),r.a.createElement(U.a,{item:!0},this.state.message),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:this.state.waiting,onClick:this.saveInfoAttribute},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({infoAttribute:null})}},"Cancel"))))}return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,{style:{fontSize:"30px"}},"Attribute Info"),r.a.createElement(g.a,null,"Name: ",this.state.infoAttribute.Name),r.a.createElement(g.a,null,"Type: ",this.state.infoAttribute.AttributeType),"List"===this.state.infoAttribute.AttributeType&&r.a.createElement(g.a,null,"List Type: ",this.state.infoAttribute.ListType),("Type"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Type"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,"Defined Type:",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(t){e.setState({redirectTo:"/type/details/".concat(e.state.infoAttribute.DefinedType)})}},this.props.types.filter((function(t){return t._id===e.state.infoAttribute.DefinedType}))[0].Name)),("Options"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Options"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,"Options:",this.state.infoAttribute.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)}))),r.a.createElement(g.a,null,1===n.length?"Type associated with this attribute:":"Types associated with this attribute:",r.a.createElement(ie.a,null,n.map((function(t,a){return r.a.createElement("span",{key:a},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},t.Name),r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.addType2(t)}},"Add ",t.Name," to ",e.props.selectedThing.Name))})))))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",onClick:function(t){e.setState({infoAttribute:null})}},"Cancel")))}return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ie.a,null,r.a.createElement(g.a,{style:{fontSize:"30px"}},"Attribute Info"),r.a.createElement(g.a,null,"Name: ",this.state.infoAttribute.Name),r.a.createElement(g.a,null,"Type: ",this.state.infoAttribute.AttributeType),"List"===this.state.infoAttribute.AttributeType&&r.a.createElement(g.a,null,"List Type: ",this.state.infoAttribute.ListType),("Type"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Type"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,"Defined Type:",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(t){e.setState({redirectTo:"/type/details/".concat(e.state.infoAttribute.DefinedType)})}},this.props.types.filter((function(t){return t._id===e.state.infoAttribute.DefinedType}))[0].Name)),("Options"===this.state.infoAttribute.AttributeType||"List"===this.state.infoAttribute.AttributeType&&"Options"===this.state.infoAttribute.ListType)&&r.a.createElement(g.a,null,"Options:",this.state.infoAttribute.Options.map((function(e,t){return r.a.createElement("span",{key:t},0===t?" ":", ",e)}))),a.length>0&&r.a.createElement(g.a,null,1===a.length?"From Type:":"From Types:",a.map((function(t,a){return r.a.createElement("span",{key:a},0===a?" ":", ",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},t.Name))}))),n.length>0&&r.a.createElement(g.a,null,1===n.length?"Other Associated Type:":"Other Associated Types:",n.map((function(t,a){return r.a.createElement("span",{key:a},0===a?" ":", ",r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(a){e.setState({redirectTo:"/type/details/".concat(t._id)})}},t.Name))}))))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{variant:"contained",onClick:function(t){e.setState({infoAttribute:null})}},"Cancel")))}if(this.state.thingModalOpen)return r.a.createElement(Ua,{things:this.props.things,newThingType:this.state.newThingType,selectedWorldID:this.props.selectedWorldID,onCancel:function(t){e.setState({thingModalOpen:!1})},addThing:function(t){e.props.addThing(t)},onSave:function(t){var a=e.props.selectedThing,n=a.AttributesArr.filter((function(t){return t.attrID===e.state.putThingOnAttribute.attrID}))[0];"Type"===n.AttributeType?n.Value=t._id:n.ListValues.push(t._id),e.props.updateSelectedThing(a),e.setState({thingModalOpen:!1})},api:this.api,logout:function(){e.props.logout()}});var i=[];this.state.browseAttributes&&Object.keys(this.props.attributesByID).forEach((function(t){0===e.props.selectedThing.Attributes.filter((function(e){return e.attrID===t})).length&&i.push(e.props.attributesByID[t])}));var s=[].concat(Object(ee.a)(this.props.typeSuggestions),Object(ee.a)(this.props.thingSuggestions)),o=this.props.height-(this.props.width>600?260:300);return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:1,direction:"column"},null!==this.props.selectedWorld&&r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(kt.a,null,r.a.createElement("title",null,"Author's Notebook: ".concat(this.props.selectedWorld.Name))),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:2},r.a.createElement(oe.a,{title:"Back to ".concat(this.props.selectedWorld.Name)},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)})}},r.a.createElement(oa.a,null)))),r.a.createElement(U.a,{item:!0,xs:5,sm:7},this.renderHeader()),r.a.createElement(U.a,{item:!0,xs:5,sm:3},r.a.createElement(g.a,null,null===this.state.majorType&&this.props.things.length>1?r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next"})):null!==this.state.majorType&&this.props.things.filter((function(t){return t.TypeIDs.includes(e.state.majorType._id)})).length>1&&r.a.createElement(Ne.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(t){e.redirectToNext()}},r.a.createElement(y.a,{primary:"Next ".concat(this.state.majorType.Name)}))))),!this.state.resetting&&r.a.createElement(U.a,{item:!0,style:{height:"".concat(o,"px"),overflowY:"scroll",overflowX:"hidden"}},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},this.state.loaded&&r.a.createElement(et,{Value:this.props.selectedThing.Name,fieldName:"Name",message:this.state.fieldValidation.Name.message,onBlur:function(t){var a=e.props.selectedThing;a.Name=t,e.props.updateSelectedThing(a),e.validateForm()},labelWidth:43})),r.a.createElement(U.a,{item:!0},this.state.loaded&&r.a.createElement(et,{Value:this.props.selectedThing.Description,fieldName:"Description",multiline:!0,onBlur:function(t){var a=e.props.selectedThing;a.Description=t,e.props.updateSelectedThing(a)},options:s,labelWidth:82})),r.a.createElement(U.a,{item:!0},r.a.createElement(sa.a,{control:r.a.createElement(qt.a,{icon:r.a.createElement("img",{style:{opacity:"0.5",height:"30px"},src:Mt.a,alt:"No Work Planned"}),checkedIcon:r.a.createElement("img",{style:{height:"30px"},src:Mt.a,alt:"Needs Work"}),checked:this.props.selectedThing.NeedsWork,onChange:function(t){var a=t.target.checked,n=e.props.selectedThing;n.NeedsWork=a,e.props.updateSelectedThing(n)},name:"NeedsWork",color:"primary"}),label:"Needs Work"})),r.a.createElement(U.a,{item:!0},r.a.createElement(Wa.Multiselect,{placeholder:"Types",options:this.props.types,selectedValues:this.props.selectedThing.Types,onSelect:this.addType,onRemove:this.removeType,displayValue:"Name"})),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement("span",null,"Attributes\xa0",r.a.createElement(oe.a,{title:"Add New Attribute"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({infoAttribute:{index:e.props.selectedThing.AttributesArr.length,Name:"",AttributeType:"Text",Options:[],DefinedType:"",ListType:"",attrID:null,Value:"",ListValues:[],FromTypeIDs:[],TypeIDs:[]}})}},r.a.createElement(ue.a,null))),r.a.createElement(oe.a,{title:"Browse Additional Attributes"},r.a.createElement(se.a,{size:"small",color:"primary",onClick:function(t){e.setState({browseAttributes:!e.state.browseAttributes})}},r.a.createElement(ce.a,null))))),this.state.browseAttributes&&r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"browseForAttributes",id:"browseForAttributes-label"},"Browse Additional Attributes"),r.a.createElement(Da.a,{labelId:"browseForAttributes-label",id:"browseForAttributes",value:this.state.browseAttributesSelected,onChange:function(t){e.setState({browseAttributesSelected:t.target.value})},fullWidth:!0,labelWidth:200},i.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.Name)}))))),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:""===this.state.browseAttributesSelected,onClick:function(t){e.addSelectedAttribute()},type:"submit"},"Add Attribute"))),this.state.loaded&&r.a.createElement(gn,{addNewThing:function(t){e.setState({thingModalOpen:!0,newThingType:e.props.types.filter((function(e){return e._id===t.DefinedType}))[0],putThingOnAttribute:t})},onInfo:function(t){e.setState({infoAttribute:t})}}),r.a.createElement(Be.a,null,this.state.fieldValidation.Attributes.message)),r.a.createElement(U.a,{item:!0},this.state.message),r.a.createElement(U.a,{item:!0},this.state.errors.map((function(e,t){return r.a.createElement("div",{key:t},e)}))),r.a.createElement(U.a,{item:!0},Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))))),null===this.state.majorType&&this.props.things.length>0||null!==this.state.majorType&&this.props.things.filter((function(t){return t.TypeIDs.includes(e.state.majorType._id)})).length>0?r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("next")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Edit Next")),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("add")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Create Another")),r.a.createElement(U.a,{item:!0,xs:6,sm:3},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("")},type:"submit"},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6,sm:3},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){null===e.props.selectedThing._id?e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/thing/details/".concat(e.props.selectedThing._id)})},type:"button"},"Cancel"))):r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:12,sm:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("add")},type:"submit"},this.state.waiting?"Please Wait":"Submit and Create Another")),r.a.createElement(U.a,{item:!0,xs:6,sm:4},r.a.createElement(Ne.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){e.onSubmit("")},type:"submit"},this.state.waiting?"Please Wait":"Submit")),r.a.createElement(U.a,{item:!0,xs:6,sm:4},r.a.createElement(Ne.a,{variant:"contained",fullWidth:!0,disabled:this.state.waiting,onClick:function(t){null===e.props.selectedThing._id?e.setState({redirectTo:"/project/details/".concat(e.props.selectedWorldID)}):e.setState({redirectTo:"/thing/details/".concat(e.props.selectedThing._id)})},type:"button"},"Cancel")))))}return r.a.createElement(ye.a,{to:"/"})}return setTimeout((function(){e.props.toggleLogin()}),500),r.a.createElement("span",null,"Requires Login")}return r.a.createElement("span",null,"Loading...")}}]),a}(n.Component),bn=Object(d.b)((function(e){return{selectedPage:e.app.selectedPage,selectedThing:e.app.selectedThing,selectedWorld:e.app.selectedWorld,selectedWorldID:e.app.selectedWorldID,things:e.app.things,types:e.app.types,user:e.app.user,attributesByID:e.app.attributesByID,attributesByName:e.app.attributesByName,fromLogin:e.app.fromLogin,typeSuggestions:e.app.typeSuggestions,thingSuggestions:e.app.thingSuggestions,width:e.app.width,height:e.app.height}}),(function(e){return{updateSelectedThing:function(t){return e(F(t))},addThing:function(t){return e(M(t))},updateThing:function(t){return e(L(t))},updateType:function(t){return e(j(t))},addType:function(t){return e(P(t))},setAttributes:function(t){return e(O(t))},setTypes:function(t){return e(N(t))},setThings:function(t){return e(W(t))},notFromLogin:function(){return e(z({}))},toggleLogin:function(){return e(_({}))},logout:function(){return e(T({}))},selectWorld:function(t){return e(C(t))}}}))(yn),vn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){},n.handleUserInput=function(e){var t=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;n.setState(Object($.a)({},t,a))},n.inputBlur=function(e){var t=e.target.name,a=n.validateField(t),r=n.state.fieldValidation;r[t].valid!==a.valid&&(r[t].valid=a.valid,r[t].message=a.message,n.setState({fieldValidation:r}))},n.handleClickShowPassword=function(){n.setState({showPassword:!n.state.showPassword})},n.handleMouseDownPassword=function(e){e.preventDefault()},n.validateField=function(e){var t=!0,a="",r=n.state[e];switch(e){case"email":a=(t=null!==r.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i))?"":"Email is invalid";break;case"password":a=(t=r.length>=6)?"":"Password is too short";break;case"confirmEmail":a=(t=r===n.state.email)?"":"Confirm Email doesn't match Email";break;case"confirmPassword":a=(t=r===n.state.password)?"":"Confirm Password doesn't match Password";break;case"username":a=(t=r.length>=2)?"":"Username is too short"}return{valid:t,message:a}},n.validateForm=function(e){var t=n.validateField("password"),a=n.validateField("confirmPassword"),r=t.valid&&a.valid,i=n.state.fieldValidation;i.password=t,i.confirmPassword=a,n.setState({formValid:r,fieldValidation:i},e)},n.onSubmit=function(){n.validateForm((function(){this.state.formValid&&this.setState({waiting:!0},this.submitThroughAPI)}))},n.submitThroughAPI=function(){n.api.resetPassword(n.state.resetPasswordCode,n.state.password).then((function(e){n.setState({message:e.message,waiting:!1})})).catch((function(e){return console.log(e)}))},n.state={resetPasswordCode:null,codeValid:!1,password:"",confirmPassword:"",fieldValidation:{password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},formValid:!1,message:"Please wait.  Validating code."},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;if(null===this.state.resetPasswordCode){var t=this.props.match.params.id;return setTimeout((function(){e.api.checkResetPasswordCode(t).then((function(a){void 0!==a.error?e.setState({resetPasswordCode:t,codeValid:!1,message:a.error}):e.setState({resetPasswordCode:t,codeValid:!0,message:""})}))}),500),r.a.createElement("div",null,r.a.createElement("h2",null,"Reset Password"),this.state.message)}return this.state.codeValid?r.a.createElement("div",null,r.a.createElement("h2",null,"Reset Password"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"outlined-adornment-password"},"Password"),r.a.createElement(re.a,{id:"outlined-adornment-password",name:"password",type:this.state.showPassword?"text":"password",value:this.state.password,error:!this.state.fieldValidation.password.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(da.a,null):r.a.createElement(fa.a,null))),labelWidth:70,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.password.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 margined"},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"confirm-password"},"Confirm Password"),r.a.createElement(re.a,{id:"confirm-password",name:"confirmPassword",type:this.state.showPassword?"text":"password",value:this.state.confirmPassword,error:!this.state.fieldValidation.confirmPassword.valid,onChange:this.handleUserInput,onBlur:this.inputBlur,endAdornment:r.a.createElement(ua.a,{position:"end"},r.a.createElement(h.a,{"aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:this.handleMouseDownPassword,edge:"end"},this.state.showPassword?r.a.createElement(da.a,null):r.a.createElement(fa.a,null))),labelWidth:130,fullWidth:!0}),r.a.createElement(Be.a,null,this.state.fieldValidation.confirmPassword.message)))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"float-right"},r.a.createElement(Ne.a,{className:"w200",disabled:this.state.waiting,onClick:this.onSubmit,type:"submit"},this.state.waiting?"Please Wait":"Submit")))),this.state.message,Object.keys(this.state.fieldValidation).map((function(t,a){return void 0!==e.state.fieldValidation[t]&&e.state.fieldValidation[t].message.length>0?r.a.createElement("p",{className:"redFont",key:a},e.state.fieldValidation[t].message):""}))):r.a.createElement("div",null,r.a.createElement("h2",null,"Reset Password"),this.state.message)}}]),a}(n.Component),An=Object(d.b)()(vn),En=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){},n.state={confirmEmailCode:null,codeValid:!1,message:"Please wait.  Validating code."},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;if(null===this.state.confirmEmailCode){var t=this.props.match.params.id;setTimeout((function(){e.api.confirmEmail(t).then((function(a){void 0!==a.error?e.setState({confirmEmailCode:t,codeValid:!1,message:a.error}):e.setState({confirmEmailCode:t,codeValid:!0,message:a.message})}))}),500)}return r.a.createElement("div",null,r.a.createElement("h2",null,"Confirming Email"),this.state.message)}}]),a}(n.Component),Tn=Object(d.b)()(En);var Dn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={version:"0"},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{item:!0,xs:12,container:!0,spacing:0,direction:"column"},r.a.createElement(U.a,{item:!0,className:"h-100 margined"},this.props.loginOpen?r.a.createElement(ba,{onLogin:function(t){e.props.toggleLogin()}}):r.a.createElement(ye.d,null,r.a.createElement(ye.b,{exact:!0,path:"/",component:Ce}),r.a.createElement(ye.b,{exact:!0,path:"/home",component:Ce}),r.a.createElement(ye.b,{exact:!0,path:"/User/Profile",component:It}),r.a.createElement(ye.b,{exact:!0,path:"/User/resetPassword/:id",component:An}),r.a.createElement(ye.b,{exact:!0,path:"/User/confirmEmail/:id",component:Tn}),r.a.createElement(ye.b,{exact:!0,path:"/discussion",component:lt}),r.a.createElement(ye.b,{exact:!0,path:"/project/details/:id",component:ia}),r.a.createElement(ye.b,{exact:!0,path:"/project/create",component:ca}),r.a.createElement(ye.b,{exact:!0,path:"/project/edit/:id",component:ca}),r.a.createElement(ye.b,{exact:!0,path:"/project/collaborators/:id",component:Sa}),r.a.createElement(ye.b,{exact:!0,path:"/project/collaborate/:worldID/:collabID",component:Aa}),r.a.createElement(ye.b,{exact:!0,path:"/type/create",component:Ha}),r.a.createElement(ye.b,{exact:!0,path:"/type/details/:id",component:Oa}),r.a.createElement(ye.b,{exact:!0,path:"/type/edit/:id",component:Ha}),r.a.createElement(ye.b,{exact:!0,path:"/thing/create",component:bn}),r.a.createElement(ye.b,{exact:!0,path:"/thing/create/:id",component:bn}),r.a.createElement(ye.b,{exact:!0,path:"/thing/details/:id",component:pn}),r.a.createElement(ye.b,{exact:!0,path:"/thing/edit/:id",component:bn}))),r.a.createElement(U.a,{item:!0,style:{minHeight:"100px"}},"\xa0"))}}]),a}(n.Component),wn=Object(d.b)((function(e){return{loginOpen:e.app.loginOpen}}),(function(e){return{toggleLogin:function(){return e(_({}))}}}))(Dn),kn=(a(507),Object(d.b)((function(e){return{menuOpen:e.app.menuOpen,api:e.app.api}}),{setWidth:function(e){return{type:"SET_WIDTH",payload:e}},setHeight:function(e){return{type:"SET_HEIGHT",payload:e}},setAPI:function(e){return{type:"SET_API",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.state={version:"0",width:0,marginLeft:220,innerWidth:null},n.api=J.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"updateDimensions",value:function(){var e=window.innerWidth;this.props.setHeight(window.innerHeight),e>=600?(e-=200,this.props.setWidth(e),this.setState({width:e,marginLeft:220,innerWidth:window.innerWidth})):(this.props.setWidth(e),this.setState({width:e,marginLeft:0,innerWidth:window.innerWidth}))}},{key:"render",value:function(){return null===this.props.api&&this.props.setAPI(this.api),r.a.createElement(p.a,null,this.props.menuOpen&&r.a.createElement(R.a,{display:{xs:"none",sm:"inline"},className:"Sidebar"},r.a.createElement(wt,{className:"",logoText:"Author's Notebook"})),r.a.createElement(U.a,{container:!0},r.a.createElement(U.a,{item:!0,xs:12,style:{marginLeft:"".concat(this.props.menuOpen?this.state.marginLeft:0,"px"),width:"".concat(this.props.menuOpen?this.state.width:this.state.innerWidth,"px")}},r.a.createElement(vt,null)),r.a.createElement(U.a,{item:!0,xs:12,style:{marginLeft:"".concat(this.props.menuOpen?this.state.marginLeft+10:10,"px"),width:"".concat(this.props.menuOpen||!this.state.innerWidth?this.state.width-20:this.state.innerWidth-20,"px"),marginRight:"10px",marginTop:"10px"}},r.a.createElement(wn,null))))}}]),a}(n.Component))),xn=a(66),In=a(89),Sn={indexExpandedPanel:!1,api:null,articles:[],user:null,redirectToURL:null,loginError:"",worlds:[],publicWorlds:[],followingWorlds:[],selectedWorld:null,selectedWorldID:null,types:[],things:[],selectedType:null,attributesByID:{},attributesByName:{},selectedThing:null,loadIt:!0,menuOpen:!0,loginOpen:!1,fromLogin:!1,width:0,height:0,templates:[],allUsers:[],userSuggestions:[],collabSuggestions:[],worldSuggestions:[],typeSuggestions:[],thingSuggestions:[],views:[]};var Cn={app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;if("UPDATE_INDEX_EXPANDED_PANEL"===t.type)return Object.assign({},e,{indexExpandedPanel:t.payload});if("LOAD_FROM_STORAGE"===t.type){var a=JSON.parse(localStorage.getItem("user"));a=void 0!==a&&null!==a&&void 0!==a.body&&void 0!==a.body.user?a.body.user:null;var n=JSON.parse(localStorage.getItem("selectedWorld")),r=localStorage.getItem("selectedWorldID"),i=JSON.parse(localStorage.getItem("types")),s=JSON.parse(localStorage.getItem("things")),o=JSON.parse(localStorage.getItem("followingWorlds")),l=JSON.parse(localStorage.getItem("attributesByID")),c=JSON.parse(localStorage.getItem("attributesByName")),u=JSON.parse(localStorage.getItem("worldSuggestions")),p=JSON.parse(localStorage.getItem("userSuggestions")),d=JSON.parse(localStorage.getItem("collabSuggestions")),m=JSON.parse(localStorage.getItem("typeSuggestions")),f=JSON.parse(localStorage.getItem("thingSuggestions"));return Object.assign({},e,{user:a,selectedWorld:n,selectedWorldID:r,types:null===i?[]:i,things:null===s?[]:s,followingWorlds:null===o?[]:o,attributesByID:null===l?{}:l,attributesByName:null===c?{}:c,worldSuggestions:null===u?[]:u,userSuggestions:null===p?[]:p,collabSuggestions:null===d?[]:d,typeSuggestions:null===m?[]:m,thingSuggestions:null===f?[]:f})}if("SET_API"===t.type)return Object.assign({},e,{api:t.payload});if("ADD_ARTICLE"===t.type)return Object.assign({},e,{articles:e.articles.concat(t.payload)});if("LOGIN"===t.type)return localStorage.setItem("followingWorlds",JSON.stringify(t.payload.followingWorlds)),Object.assign({},e,{user:t.payload,followingWorlds:t.payload.followingWorlds});if("LOGOUT"===t.type)return Object.assign({},e,{user:null});if("REDIRECT_TO"===t.type)return Object.assign({},e,{redirectToURL:t.payload});if("SET_WORLDS"===t.type){if(void 0!==t.payload&&void 0===t.payload.error){if(null!==e.selectedWorldID&&null===e.selectedWorld){var h=t.payload.filter((function(t){return t._id===e.selectedWorldID}));if(h.length>0){var g=h[0];return localStorage.setItem("selectedWorld",JSON.stringify(g)),Object.assign({},e,{worlds:t.payload,selectedWorld:g})}return Object.assign({},e,{worlds:t.payload})}return Object.assign({},e,{worlds:t.payload})}return Object.assign({},e,{})}if("SET_PUBLIC_WORLDS"===t.type){if(void 0===t.payload.error){var y=[];if(t.payload.forEach((function(e){y.push({_id:e._id,suggestionType:"world",Display:"".concat(e.Name)})})),localStorage.setItem("worldSuggestions",JSON.stringify(y)),null!==e.selectedWorldID&&null===e.selectedWorld){var b=t.payload.filter((function(t){return t._id===e.selectedWorldID}));if(b.length>0){var v=b[0];return localStorage.setItem("selectedWorld",JSON.stringify(v)),Object.assign({},e,{publicWorlds:t.payload,selectedWorld:v,worldSuggestions:y})}return Object.assign({},e,{publicWorlds:t.payload,worldSuggestions:y})}return Object.assign({},e,{publicWorlds:t.payload,worldSuggestions:y})}return Object.assign({},e,{})}if("SET_TEMPLATES"===t.type)return Object.assign({},e,{templates:t.payload});if("SET_ALL_USERS"===t.type){var A=[];if(t.payload.forEach((function(e){A.push({_id:e._id,suggestionType:"user",Display:"".concat(e.username)})})),localStorage.setItem("userSuggestions",JSON.stringify(A)),null!==e.selectedWorld){var E=[];return t.payload.forEach((function(t){(e.selectedWorld.Owner===t._id||void 0!==e.selectedWorld.Collaborators&&null!==e.selectedWorld.Collaborators&&e.selectedWorld.Collaborators.filter((function(e){return e.userID===t._id})).length>0)&&E.push({_id:t._id,suggestionType:"user",Display:"".concat(t.username)})})),localStorage.setItem("collabSuggestions",JSON.stringify(E)),Object.assign({},e,{allUsers:t.payload,userSuggestions:A,collabSuggestions:E})}return Object.assign({},e,{allUsers:t.payload,userSuggestions:A})}if("ADD_WORLD"===t.type){if(t.payload.Public){var T=e.worlds.concat(t.payload),D=e.publicWorlds.concat(t.payload);return Object.assign({},e,{worlds:T,publicWorlds:D})}return Object.assign({},e,{worlds:e.worlds.concat(t.payload)})}if("ADD_AND_SELECT_WORLD"===t.type){if(t.payload.Public){var w=e.worlds.concat(t.payload),k=e.publicWorlds.concat(t.payload),x=t.payload;if(localStorage.setItem("selectedWorldID",t.payload._id),localStorage.setItem("selectedWorld",JSON.stringify(x)),e.allUsers.length>0){var I=[];return e.allUsers.forEach((function(e){x.Owner===e._id&&I.push({_id:e._id,suggestionType:"user",Display:"".concat(e.username)})})),localStorage.setItem("collabSuggestions",JSON.stringify(I)),Object.assign({},e,{selectedWorldID:t.payload._id,selectedWorld:x,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,collabSuggestions:I,worlds:w,publicWorlds:k})}return Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:x,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,worlds:w,publicWorlds:k})}var S=t.payload;if(localStorage.setItem("selectedWorldID",t.payload._id),localStorage.setItem("selectedWorld",JSON.stringify(S)),e.allUsers.length>0){var C=[];return e.allUsers.forEach((function(e){S.Owner===e._id&&C.push({_id:e._id,suggestionType:"user",Display:"".concat(e.username)})})),localStorage.setItem("collabSuggestions",JSON.stringify(C)),Object.assign({},e,{selectedWorldID:t.payload._id,selectedWorld:S,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,collabSuggestions:C,worlds:e.worlds.concat(t.payload)})}return Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:S,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,worlds:e.worlds.concat(t.payload)})}if("UPDATE_WORLD"===t.type){var O=Object(ee.a)(e.worlds),N=Object(ee.a)(e.publicWorlds),P=O.filter((function(e){return e._id===t.payload._id}))[0];P.Name=t.payload.Name,P.Description=t.payload.Description;var W=P.Public;if(P.Public=t.payload.Public,P.AcceptingCollaborators=t.payload.AcceptingCollaborators,P.Collaborators=t.payload.Collaborators,P.Public){if(W){var M=N.filter((function(e){return e._id===P._id}))[0];M.Name=P.Name}else N=N.concat(P);return Object.assign({},e,{worlds:O,publicWorlds:N})}return W?(N=N.filter((function(e){return e._id!==P._id})),Object.assign({},e,{worlds:O,publicWorlds:N})):Object.assign({},e,{worlds:O})}if("UPDATE_PUBLIC_WORLD_COLLAB"===t.type){var j=Object(ee.a)(e.publicWorlds),V=j.filter((function(e){return e._id===t.payload._id}))[0];return V.Collaborators=t.payload.Collaborators,Object.assign({},e,{publicWorlds:j})}if("SELECT_WORLD"===t.type){var L=e.worlds.filter((function(e){return e._id===t.payload}));if(0===L.length&&(L=e.publicWorlds.filter((function(e){return e._id===t.payload}))),L.length>0){if(L=L[0],localStorage.setItem("selectedWorldID",t.payload),localStorage.setItem("selectedWorld",JSON.stringify(L)),e.allUsers.length>0){var F=[];return e.allUsers.forEach((function(e){(L.Owner===e._id||void 0!==L.Collaborators&&null!==L.Collaborators&&L.Collaborators.filter((function(t){return t.userID===e._id})).length>0)&&F.push({_id:e._id,suggestionType:"user",Display:"".concat(e.username)})})),localStorage.setItem("collabSuggestions",JSON.stringify(F)),Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:L,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,collabSuggestions:F,thingSuggestions:[],typeSuggestions:[]})}return Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:L,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,thingSuggestions:[],typeSuggestions:[]})}return localStorage.setItem("selectedWorldID",t.payload),localStorage.removeItem("selectedWorld"),localStorage.removeItem("collabSuggestions"),Object.assign({},e,{selectedWorldID:t.payload,selectedWorld:null,attributesByID:{},attributesByName:{},types:[],things:[],selectedType:null,selectedThing:null,collabSuggestions:[],thingSuggestions:[],typeSuggestions:[]})}if("SET_ATTRIBUTES"===t.type){var B={},_={};return t.payload.forEach((function(e){B[e._id]=e,_[e.Name]=e})),localStorage.setItem("attributesByID",JSON.stringify(B)),localStorage.setItem("attributesByName",JSON.stringify(_)),Object.assign({},e,{attributesByID:B,attributesByName:_})}if("UPDATE_ATTRIBUTES"===t.type){var z=e.attributesByID,q=e.attributesByName;return t.payload.forEach((function(e){z[e._id]=e,q[e.Name]=e})),localStorage.setItem("attributesByID",JSON.stringify(z)),localStorage.setItem("attributesByName",JSON.stringify(q)),Object.assign({},e,{attributesByID:z,attributesByName:q})}if("ADD_ATTRIBUTES"===t.type){var U=e.attributesByID,R=e.attributesByName;return t.payload.forEach((function(e){U[e._id]=e,R[e.Name]=e})),localStorage.setItem("attributesByID",JSON.stringify(U)),localStorage.setItem("attributesByName",JSON.stringify(R)),Object.assign({},e,{attributesByID:U,attributesByName:R})}if("SET_TYPES"===t.type){localStorage.setItem("types",JSON.stringify(t.payload));var K=[];return t.payload.forEach((function(e){K.push({_id:e._id,suggestionType:"type",Display:"".concat(e.Name)})})),localStorage.setItem("typeSuggestions",JSON.stringify(K)),Object.assign({},e,{types:t.payload,typeSuggestions:K})}if("ADD_TYPE"===t.type){var X=e.types.concat(t.payload);localStorage.setItem("types",JSON.stringify(X));var G=[];return X.forEach((function(e){G.push({_id:e._id,suggestionType:"type",Display:"".concat(e.Name)})})),localStorage.setItem("typeSuggestions",JSON.stringify(G)),Object.assign({},e,{types:X,typeSuggestions:G})}if("SET_THINGS"===t.type){localStorage.setItem("things",JSON.stringify(t.payload));var Z=[];return t.payload.forEach((function(e){Z.push({_id:e._id,suggestionType:"thing",Display:"".concat(e.Name)}),e.Types.forEach((function(t){Z.push({_id:e._id,suggestionType:"thing",Display:"".concat(t.Name,"-").concat(e.Name)})}))})),localStorage.setItem("thingSuggestions",JSON.stringify(Z)),Object.assign({},e,{things:t.payload,thingSuggestions:Z})}if("ADD_THING"===t.type){var Q=e.things.concat(t.payload);localStorage.setItem("things",JSON.stringify(Q));var Y=[];return Q.forEach((function(e){Y.push({_id:e._id,suggestionType:"thing",Display:"".concat(e.Name)}),e.Types.forEach((function(t){Y.push({_id:e._id,suggestionType:"thing",Display:"".concat(t.Name,"-").concat(e.Name)})}))})),localStorage.setItem("thingSuggestions",JSON.stringify(Y)),Object.assign({},e,{things:Q})}if("UPDATE_SELECTED_TYPE"===t.type){var J=Object(H.a)(Object(H.a)({},t.payload),{},{changedAt:Date.now()});return Object.assign({},e,{selectedType:J})}if("UPDATE_TYPE"===t.type){var $=Object(ee.a)(e.types),te=$.filter((function(e){return e._id===t.payload._id}))[0];return te.Name=t.payload.Name,te.Description=t.payload.Description,te.Supers=t.payload.Supers,te.AttributesArr=t.payload.AttributesArr,te.Attributes=t.payload.Attributes,localStorage.setItem("types",JSON.stringify($)),Object.assign({},e,{types:$})}if("UPDATE_SELECTED_THING"===t.type){var ae=Object(H.a)(Object(H.a)({},t.payload),{},{changedAt:Date.now()});return Object.assign({},e,{selectedThing:ae})}if("UPDATE_THING"===t.type){var ne=Object(ee.a)(e.things),re=ne.filter((function(e){return e._id===t.payload._id}))[0];return re.Name=t.payload.Name,re.Description=t.payload.Description,re.Types=t.payload.Types,re.Attributes=t.payload.Attributes,localStorage.setItem("things",JSON.stringify(ne)),Object.assign({},e,{things:ne})}return"TOGGLE_MENU"===t.type?Object.assign({},e,{menuOpen:!e.menuOpen}):"TOGGLE_LOGIN"===t.type?Object.assign({},e,{fromLogin:e.loginOpen,loginOpen:!e.loginOpen}):"NOT_FROM_LOGIN"===t.type?Object.assign({},e,{fromLogin:!1}):"SET_WIDTH"===t.type?Object.assign({},e,{width:t.payload}):"SET_HEIGHT"===t.type?Object.assign({},e,{height:t.payload}):"SET_FOLLOWING_WORLDS"===t.type?(localStorage.setItem("followingWorlds",JSON.stringify(t.payload)),Object.assign({},e,{followingWorlds:t.payload})):"SET_VIEWS"===t.type?Object.assign({},e,{views:t.payload}):e},session:In.sessionReducer},On=Object(xn.b)(Cn),Nn=Object(xn.c)(On),Pn={refreshFromLocalStorage:!0,refreshOnCheckAuth:!0,redirectPath:"/home",driver:"COOKIES",validateSession:function(e){return!0}};In.sessionService.initSessionService(Nn,Pn).then((function(){return console.log("Redux React Session is ready and a session was refreshed from your storage")})).catch((function(){return console.log("Redux React Session is ready and there is no session in your storage")}));var Wn=Nn;a(514);var Mn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={version:"0",redirectTo:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.fromLogin&&this.props.notFromLogin(),null!==this.state.redirectTo?r.a.createElement(ye.a,{to:this.state.redirectTo}):r.a.createElement("div",null,r.a.createElement("h3",null,"Dead Simple Virtual Table Top"),r.a.createElement("p",null,"This is a Virtual Table Top I'm making for my friends and I to use for D&D."),r.a.createElement("p",null,"It will have two pages.  The DM page and the player page. There will be a canvas with zoom and pan capabilities. The canvas will have three layers.  The bottom layer is the map.  The middle layer is the token layer, and it will have tokens representing anything which can be interacted with. The top layer is the fog layer, and it will contain the fog of war as well as magical darkness."),r.a.createElement("p",null,"The canvas will make an X * Y grid, and the map layer will fill the grid.  Each token will have a numerical size representing the diameter of the object.  Small and Medium creatures will have a size of 1.  Large creatures will have a size of 2.  Etc.  If tokens are added to represent other objects with other shape types (ladders, ropes, etc), then for now they can be represented using multiple tokens."),r.a.createElement("p",null,"The fog of war will cover everything except for what the DM chooses to reveal.  It will be done by placing a 1x1 image over each square of the map that is covered by the fog of war. On the DM page these images will have 30% opacity."),r.a.createElement("p",null,"The player page will show whatever the DM page shows, except with opaque fog of war and no controls. (Later I might make it so the DM can set what the player page sees independantly of what they see.)"),r.a.createElement("p",null,"The DM page will have these abilities: Create a map (takes an image and X and Y values). Open a map. Pan/Zoom. Add/Remove tokens. Move tokens. Add/Remove fog of war."),r.a.createElement("p",null,r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"To do:"),r.a.createElement(U.a,{item:!0},"Get it into AWS so everyone can join on their own and I don't have to share my screen."),r.a.createElement(U.a,{item:!0},"Give each player their own credentials for logging in.  Associate player accounts with tokens.  Make it so the DM is able to give players control of their token, as well as take it back.  In that situation it's automatically in single select mode, and their token is the only one not locked."),r.a.createElement(U.a,{item:!0},"Low Priority:"),r.a.createElement(U.a,{item:!0},"Allow for rotation of tokens."),r.a.createElement(U.a,{item:!0},"Do tokens for things like sphere, cone, line effects."),r.a.createElement(U.a,{item:!0}))))}}]),a}(n.Component),jn=Object(d.b)((function(e){return{}}),(function(e){return{}}))(Mn),Vn=jn,Ln=a(50),Fn=a(51),Bn=function e(t,a,n,r,i){var s=this;Object(o.a)(this,e),this._id=void 0,this.name=void 0,this.selectedPlayMapID=void 0,this.turnPlayerID=void 0,this.lastUpdate=void 0,this.toDBObj=function(){return{_id:s._id,name:s.name,selectedPlayMapID:s.selectedPlayMapID,turnPlayerID:s.turnPlayerID}},this._id=t,this.name=a,this.selectedPlayMapID=n,this.turnPlayerID=r,this.lastUpdate=i},_n=a(202),zn=a.n(_n),qn=a(203),Un=a.n(qn),Rn=a(204),Hn=a.n(Rn),Kn=a(205),Xn=a.n(Kn),Gn=a(206),Zn=a.n(Gn),Qn=a(207),Yn=a.n(Qn),Jn=a(208),$n=a.n(Jn),er=a(209),tr=a.n(er),ar=a(210),nr=a.n(ar),rr=a(211),ir=a.n(rr),sr=a(212),or=a.n(sr),lr=a(213),cr=a.n(lr),ur=a(214),pr=a.n(ur),dr=a(215),mr=a.n(dr),fr=a(216),hr=a.n(fr),gr=a(217),yr=a.n(gr),br=a(218),vr=a.n(br),Ar=a(219),Er=a.n(Ar),Tr=a(220),Dr=a.n(Tr),wr=a(221),kr=a.n(wr),xr=a(222),Ir=a.n(xr),Sr=a(223),Cr=a.n(Sr),Or=a(224),Nr=a.n(Or),Pr=a(225),Wr=a.n(Pr),Mr=a(226),jr=a.n(Mr),Vr=a(227),Lr=a.n(Vr),Fr=a(228),Br=a.n(Fr),_r=a(229),zr=a.n(_r),qr=a(230),Ur=a.n(qr),Rr=a(231),Hr=a.n(Rr),Kr=a(232),Xr=a.n(Kr),Gr=a(233),Zr=a.n(Gr),Qr=a(234),Yr=a.n(Qr),Jr=a(235),$r=a.n(Jr),ei={BasementStudy:zn.a,CastleWall:Un.a,CaveLair:Hn.a,Crossroads:Xn.a,Farmstead:Zn.a,ForestLair:Yn.a,MonsterLair:$n.a,SnowVillage:tr.a,SwampLair:nr.a,Tavern:ir.a,UndergroundComplex:or.a,UrbanLair:cr.a,WagonTrailandShrine:pr.a,WaterfallCavern:mr.a,AbandonedWarehouse:hr.a,DaggerAlley:yr.a,UnderDaggerAlley:vr.a,TrollSkullAlleyBasement:Er.a,TrollSkullAlleyHouse:Dr.a,WeddingRing:kr.a,CragmawCastle:Ir.a,CragmawHideout:Cr.a,Phandalin:Nr.a,RedbrandHideout:Wr.a,RuinsOfThundertree:jr.a,SwordCoast:Lr.a,WaveEchoCave:Br.a,Waterdeep:zr.a,WaterdeepWithWards:Ur.a,Restaurant:Hr.a,CrimsonBrush:Xr.a,GraveyardPath:Zr.a,GraveyardPumpkinPatch:Yr.a,MausoleumCrypts:$r.a},ti=function e(t,a,n,r,i,s){Object(o.a)(this,e),this._id=void 0,this.name=void 0,this.category=void 0,this.file=void 0,this.gridWidth=void 0,this.gridHeight=void 0,this._id=t,this.name=a,this.category=n,this.file=ei[r],this.gridWidth=i,this.gridHeight=s},ai=a(236),ni=a.n(ai),ri=a(237),ii=a.n(ri),si=a(238),oi=a.n(si),li=a(239),ci=a.n(li),ui=a(240),pi=a.n(ui),di=a(241),mi=a.n(di),fi=a(242),hi=a.n(fi),gi=a(243),yi=a.n(gi),bi=a(244),vi=a.n(bi),Ai=a(245),Ei=a.n(Ai),Ti=a(246),Di=a.n(Ti),wi=a(247),ki=a.n(wi),xi=a(248),Ii=a.n(xi),Si=a(249),Ci=a.n(Si),Oi=a(250),Ni=a.n(Oi),Pi=a(251),Wi=a.n(Pi),Mi=a(252),ji=a.n(Mi),Vi=a(253),Li=a.n(Vi),Fi=a(254),Bi=a.n(Fi),_i=a(255),zi=a.n(_i),qi=a(256),Ui=a.n(qi),Ri=a(257),Hi=a.n(Ri),Ki=a(258),Xi=a.n(Ki),Gi=a(259),Zi=a.n(Gi),Qi=a(260),Yi=a.n(Qi),Ji=a(261),$i=a.n(Ji),es=a(262),ts=a.n(es),as=a(263),ns=a.n(as),rs=a(264),is=a.n(rs),ss=a(265),os=a.n(ss),ls=a(266),cs=a.n(ls),us=a(267),ps=a.n(us),ds=a(268),ms=a.n(ds),fs=a(269),hs=a.n(fs),gs=a(270),ys=a.n(gs),bs=a(271),vs=a.n(bs),As=a(272),Es=a.n(As),Ts=a(273),Ds=a.n(Ts),ws=a(274),ks=a.n(ws),xs=a(275),Is=a.n(xs),Ss=a(276),Cs=a.n(Ss),Os=a(277),Ns=a.n(Os),Ps=a(278),Ws=a.n(Ps),Ms=a(279),js=a.n(Ms),Vs=a(280),Ls=a.n(Vs),Fs=a(281),Bs=a.n(Fs),_s=a(282),zs=a.n(_s),qs=a(283),Us=a.n(qs),Rs=a(284),Hs=a.n(Rs),Ks=a(285),Xs=a.n(Ks),Gs=a(286),Zs=a.n(Gs),Qs=a(287),Ys=a.n(Qs),Js=a(288),$s=a.n(Js),eo=a(289),to=a.n(eo),ao=a(290),no=a.n(ao),ro=a(291),io=a.n(ro),so=a(292),oo=a.n(so),lo=a(293),co=a.n(lo),uo=a(294),po=a.n(uo),mo=a(295),fo=a.n(mo),ho=a(296),go=a.n(ho),yo=a(297),bo=a.n(yo),vo=a(298),Ao=a.n(vo),Eo=a(299),To=a.n(Eo),Do=a(300),wo=a.n(Do),ko=a(301),xo=a.n(ko),Io=a(302),So=a.n(Io),Co=a(303),Oo=a.n(Co),No=a(304),Po=a.n(No),Wo=a(305),Mo=a.n(Wo),jo=a(306),Vo=a.n(jo),Lo=a(307),Fo=a.n(Lo),Bo=a(308),_o=a.n(Bo),zo=a(309),qo=a.n(zo),Uo=a(310),Ro=a.n(Uo),Ho=a(311),Ko=a.n(Ho),Xo=a(312),Go=a.n(Xo),Zo=a(313),Qo=a.n(Zo),Yo=a(314),Jo=a.n(Yo),$o=a(315),el=a.n($o),tl=a(316),al=a.n(tl),nl=a(317),rl=a.n(nl),il=a(318),sl=a.n(il),ol=a(319),ll=a.n(ol),cl=a(320),ul=a.n(cl),pl=a(321),dl=a.n(pl),ml=a(322),fl=a.n(ml),hl=a(323),gl=a.n(hl),yl=a(324),bl=a.n(yl),vl=a(325),Al=a.n(vl),El=a(326),Tl=a.n(El),Dl=a(327),wl=a.n(Dl),kl=a(328),xl=a.n(kl),Il=a(329),Sl=a.n(Il),Cl=a(330),Ol=a.n(Cl),Nl=a(331),Pl=a.n(Nl),Wl=a(332),Ml=a.n(Wl),jl=a(333),Vl=a.n(jl),Ll=a(334),Fl=a.n(Ll),Bl=a(335),_l=a.n(Bl),zl=a(336),ql=a.n(zl),Ul=a(337),Rl=a.n(Ul),Hl=a(338),Kl=a.n(Hl),Xl=a(339),Gl=a.n(Xl),Zl=a(340),Ql=a.n(Zl),Yl=a(341),Jl=a.n(Yl),$l=a(342),ec=a.n($l),tc=a(343),ac=a.n(tc),nc=a(344),rc=a.n(nc),ic=a(345),sc=a.n(ic),oc=a(346),lc=a.n(oc),cc=a(347),uc=a.n(cc),pc=a(348),dc=a.n(pc),mc=a(349),fc=a.n(mc),hc=a(350),gc=a.n(hc),yc=a(351),bc=a.n(yc),vc=a(352),Ac=a.n(vc),Ec=a(353),Tc=a.n(Ec),Dc=a(354),wc=a.n(Dc),kc=a(355),xc=a.n(kc),Ic=a(356),Sc=a.n(Ic),Cc=a(357),Oc=a.n(Cc),Nc={Bald:ni.a,Bard:ii.a,BlondeHair:oi.a,BlondeWoman:ci.a,BlueSkin:pi.a,BlueSkin2:mi.a,DarkSkin:hi.a,DarkSkinF:yi.a,Dragonborn:vi.a,DragonbornFighter:Ei.a,DwarfMale:Di.a,ElvenFemale:ki.a,ElvenFighter:Ii.a,Eyebrows:Ci.a,Eyebrows2:Ni.a,Fedora:Wi.a,GnomeMale:ji.a,GoliathBarb:Li.a,GreyHair:Bi.a,HalflingMale:zi.a,Hood:Ui.a,Hood2:Hi.a,Human:Xi.a,HumanFemale:Zi.a,HumanFemale2:Yi.a,HumanFighterF:$i.a,HumanFighterM:ts.a,HumanMale:ns.a,HumanMale2:is.a,IDK:os.a,Knight:cs.a,OldWoman:ps.a,OldWoman2:ms.a,RedHair:hs.a,RedSkin:ys.a,Samurai:vs.a,Scarf:Es.a,TieflingFemale:Ds.a,Wizard:ks.a,Rat:Is.a,Wererat:Cs.a,Werewolf:Ns.a,RugOfSmothering:Ws.a,PitTrapWSpikes:js.a,SewerGrate:Ls.a,AirGenasiRangerF:Bs.a,AirGenasiRangerM:zs.a,Bugbear:Us.a,DrowArcher:Hs.a,DrowFighter:Xs.a,DrowFighter2:Zs.a,DrowRogue:Ys.a,DrowWitch:$s.a,GoblinArcher:to.a,GoblinRogue:no.a,GoblinSpearman:io.a,Hobgoblin:oo.a,HumanHexblade:co.a,TabaxiMonk:po.a,TieflingCleric:fo.a,TieflingPaladin:go.a,TieflingSwordsman:bo.a,WhiteDragonbornMage:Ao.a,SnowLeopard:To.a,Spider:wo.a,AshZombie:xo.a,Beholder:So.a,Beholder2:Oo.a,Cube:Po.a,Drider:Mo.a,FlameSkull:Vo.a,Skeleton:Fo.a,GreenDragon:_o.a,Zombie:qo.a,TwigBlight:Ro.a,Web:Ko.a,Vampire:Go.a,WereratKnife:Qo.a,WereratMage:Jo.a,WereratRogue:el.a,WereratRogue2:al.a,Werewolf2:rl.a,Werewolf3:sl.a,Werewolf4:ll.a,Clue1:ul.a,Clue2:dl.a,Clue3:fl.a,Glyph:gl.a,Map:bl.a,DuergarMale:Al.a,Birdman:Tl.a,Daggers:wl.a,TrollSkull:xl.a,CrimsonBrush:Sl.a,BookMimic:Ol.a,ChairMimic:Pl.a,ChestMimic:Ml.a,PumpkinMimic:Vl.a,WallMimic:Fl.a,CakeMimic:_l.a,Jack:ql.a,Marty:Rl.a,Harvey:Kl.a,TabaxiMummy:Ql.a,Rug:Gl.a,GraveDigger:Jl.a,Dog:ec.a,BeepBeep:ac.a,Bird:rc.a,Ram:sc.a,Sheep:lc.a,Sheep2:uc.a,GhostWizard:dc.a,GhostBlueWoman:fc.a,GhostWhiteWoman:gc.a,GhostHeartWoman:bc.a,GhostLizardfolk:Ac.a,GhostScreaming:Tc.a,GhostSkeletal:wc.a,Specter:xc.a,Wraith:Sc.a,Wraith2:Oc.a},Pc=function e(t,a,n){Object(o.a)(this,e),this._id=void 0,this.category=void 0,this.file=void 0,this._id=t,this.category=a,this.file=Nc[n]},Wc=function e(t,a,n,r,i){var s=this;Object(o.a)(this,e),this._id=void 0,this.campaignID=void 0,this.name=void 0,this.token=void 0,this.size=void 0,this.toDBObj=function(){return{_id:s._id,campaignID:s.campaignID,name:s.name,tokenID:s.token._id,size:s.size}},this._id=t,this.campaignID=a,this.name=n,this.token=r,this.size=i},Mc=function e(t,a,n,r,i,s,l,c,u,p){var d=this;Object(o.a)(this,e),this.id=void 0,this.name=void 0,this.token=void 0,this.x=void 0,this.y=void 0,this.size=void 0,this.stealth=void 0,this.bloodied=void 0,this.moving=void 0,this.owner=void 0,this.toDBObj=function(){return{id:d.id,name:d.name,tokenID:d.token?d.token._id:null,x:d.x,y:d.y,size:d.size,stealth:d.stealth,bloodied:d.bloodied,moving:d.moving,ownerID:d.owner?d.owner._id:null}},this.id=t,this.name=a,this.token=n,this.x=r,this.y=i,this.size=s,this.stealth=l,this.bloodied=c,this.moving=u,this.owner=p},jc=function e(t,a,n,r,i){var s=this;Object(o.a)(this,e),this.id=void 0,this.maskID=void 0,this.maskType=void 0,this.x=void 0,this.y=void 0,this.toClipPathPoint=function(e,t){var a=50*(s.x+e/2)-50,n=50*(s.y+t/2)-25;return"".concat(a,",").concat(n)},this.toDBObj=function(){return{id:s.id,x:s.x,y:s.y}},this.id=t,this.maskID=a,this.maskType=n,this.x=r,this.y=i},Vc=function e(t,a,n){var r=this;Object(o.a)(this,e),this.id=void 0,this.maskType=void 0,this.points=void 0,this.toClipPath=function(e,t){var a="";return r.points.forEach((function(n){a+=n.toClipPathPoint(e,t)+" "})),a},this.toDBObj=function(){var e=[];return r.points.forEach((function(t){e.push(t.toDBObj())})),{id:r.id,points:e}},this.id=t,this.maskType=a,this.points=n},Lc=function e(t,a,n,r,i,s,l,c,u,p,d,m){var f=this;Object(o.a)(this,e),this._id=void 0,this.campaignID=void 0,this.name=void 0,this.map=void 0,this.tokens=void 0,this.movingToken=void 0,this.lightMasks=void 0,this.darkMasks=void 0,this.fogMasks=void 0,this.zoom=void 0,this.dx=void 0,this.dy=void 0,this.toDBObj=function(){var e=[];f.tokens.forEach((function(t){e.push(t.toDBObj())}));var t=[];f.lightMasks.forEach((function(e){t.push(e.toDBObj())}));var a=[];f.darkMasks.forEach((function(e){a.push(e.toDBObj())}));var n=[];return f.fogMasks.forEach((function(e){n.push(e.toDBObj())})),{_id:f._id,campaignID:f.campaignID,name:f.name,mapID:f.map._id,playTokens:e,movingToken:null,lightMasks:t,darkMasks:a,fogMasks:n,zoom:f.zoom,dx:f.dx,dy:f.dy}},this._id=t,this.campaignID=a,this.name=n,this.map=r,this.tokens=i,this.movingToken=s,this.lightMasks=l,this.darkMasks=c,this.fogMasks=u,this.zoom=p,this.dx=d,this.dy=m},Fc=function e(t,a,n,r,i,s,l){var c=this;Object(o.a)(this,e),this._id=void 0,this.email=void 0,this.username=void 0,this.password=void 0,this.campaign=void 0,this.lastPing=void 0,this.refreshIndex=void 0,this.toDBObj=function(){return{_id:c._id,email:c.email,username:c.username,password:c.password,campaignID:c.campaign?c.campaign._id:null,refreshIndex:c.refreshIndex}},this._id=t,this.email=a,this.username=n,this.password=r,this.campaign=i,this.lastPing=s,this.refreshIndex=l};function Bc(e){this.name="UnauthorizedError",this.message=e}Bc.prototype=new Error;var _c=function(){var e;return{getInstance:function(){return e||(e=new zc),e}}}(),zc=function e(){var t=this;Object(o.a)(this,e),this.logErrorReason=function(e){return console.log("Response error reason:",e),Promise.reject(e)},this.checkStatus=function(e){if(e.status>=200&&e.status<300)return e;if(401===e.status){var t=new Bc(e.statusText);return t.response=e,Promise.reject(t)}var a=new Error(e.statusText);return a.response=e,Promise.reject(a)},this.getAllVTT=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i,s,o,l,c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCampaigns(a,n);case 2:return r=e.sent,e.next=5,t.getMaps(a,n);case 5:return i=e.sent,e.next=8,t.getTokens(a,n);case 8:return s=e.sent,e.next=11,t.getPlayMaps(a,n);case 11:return o=e.sent,e.next=14,t.getFavoriteTokens(a,n);case 14:return l=e.sent,e.next=17,t.getPlayers(n);case 17:return c=e.sent,e.abrupt("return",{campaigns:r.campaigns,maps:i.maps,tokens:s.tokens,playMaps:o.playMaps,favoriteTokens:l.favoriteTokens,players:c.players});case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getPlayers=Object(G.a)(X.a.mark((function e(){var a,n=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])){e.next=5;break}return e.abrupt("return",t.getPlayersFromAPI());case 5:if(null===(a=t.getSessionData("players"))){e.next=10;break}return e.abrupt("return",a);case 10:return e.abrupt("return",t.getPlayersFromAPI());case 11:case"end":return e.stop()}}),e)}))),this.getPlayersFromAPI=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getPlayers/");case 3:return a=e.sent,e.next=6,t.processResponse(a,null,"players");case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)}))),this.createPlayer=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createPlayer",{player:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deletePlayer=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deletePlayer",{playerID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updatePlayer=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updatePlayer",{player:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/login",{email:a,password:n});case 3:return r=e.sent,e.abrupt("return",t.processResponse(r,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.playerPing=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/playerPing",{playerID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMaps=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getMapsFromAPI(a));case 5:if(null===(n=t.getSessionData("maps"))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getMapsFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMapsFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getMaps/".concat(a));case 3:return n=e.sent,e.next=6,t.processResponse(n,null,"maps");case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createMap",{map:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deleteMap",{mapID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updateMap",{map:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTokens=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getTokensFromAPI(a));case 5:if(null===(n=t.getSessionData("tokens"))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getTokensFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTokensFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getTokens/".concat(a));case 3:return n=e.sent,e.next=6,t.processResponse(n,null,"tokens");case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createToken",{token:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deleteToken",{tokenID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updateToken",{token:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCampaigns=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getCampaignsFromAPI(a));case 5:if(null===(n=t.getSessionData("campaigns"))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getCampaignsFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCampaignsFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getCampaigns/".concat(a));case 3:return n=e.sent,e.next=6,t.processResponse(n,null,"campaigns");case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCampaign=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i,s,o=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:-1,e.next=3,t.postData("/api/vtt/getCampaign",{campaignID:a,lastUpdate:n,userID:r});case 3:return i=e.sent,e.next=6,t.processResponse(i);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.createCampaign=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createCampaign",{campaign:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteCampaign=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deleteCampaign",{campaignID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateCampaign=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updateCampaign",{campaign:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPlayMaps=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getPlayMapsFromAPI(a));case 5:if(null===(n=t.getSessionData("playMaps"))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getPlayMapsFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPlayMapsFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getPlayMaps/".concat(a));case 3:return n=e.sent,e.next=6,t.processResponse(n,null,"playMaps");case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPlayMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData("/api/vtt/getPlayMap/".concat(a));case 2:return n=e.sent,e.next=5,t.processResponse(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createPlayMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createPlayMap",{playMap:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deletePlayMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deletePlayMap",{playMapID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updatePlayMap=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updatePlayMap",{playMap:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFavoriteTokens=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=5;break}return e.abrupt("return",t.getFavoriteTokensFromAPI(a));case 5:if(null===(n=t.getSessionData("favoriteTokens"))){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",t.getFavoriteTokensFromAPI(a));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFavoriteTokensFromAPI=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=10;break}return e.next=3,t.fetchData("/api/vtt/getFavoriteTokens/".concat(a));case 3:return n=e.sent,e.next=6,t.processResponse(n,null,"favoriteTokens");case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",[{_id:-1,vttID:-1,Name:"Alice"}]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createFavoriteToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.postData("/api/vtt/createFavoriteToken",{favoriteToken:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteFavoriteToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.deleteData("/api/vtt/deleteFavoriteToken",{favoriteTokenID:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateFavoriteToken=function(){var e=Object(G.a)(X.a.mark((function e(a){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.real){e.next=7;break}return e.next=3,t.patchData("/api/vtt/updateFavoriteToken",{favoriteToken:a});case 3:return n=e.sent,e.abrupt("return",t.processResponse(n,null));case 7:return e.abrupt("return","success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetchData=function(){var e=Object(G.a)(X.a.mark((function e(a){var n,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},n),{},{headers:Object(H.a)({Accept:"application/json"},n.headers)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"POST",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.putData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PUT",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.patchData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PATCH",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.deleteData=function(){var e=Object(G.a)(X.a.mark((function e(a,n){var r,i=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,fetch("".concat(a),Object(H.a)(Object(H.a)({mode:"cors",credentials:"include"},r),{},{headers:Object(H.a)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"DELETE",body:JSON.stringify(n)})).then(t.checkStatus).catch(t.logErrorReason);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.processResponse=function(){var e=Object(G.a)(X.a.mark((function e(t){var a,n,r,i,s,o,l=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:null,n=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]&&l[3],e.next=5,t.json();case 5:if(i=e.sent,200===t.status){e.next=10;break}throw Error(i.message);case 10:if(void 0===i.error||null===a){e.next=14;break}return e.abrupt("return",a());case 14:return null!==n&&(s=new Date,r?s="never":s.setHours(s.getHours()+1),o={expiresAt:s,body:i},sessionStorage.setItem(n,JSON.stringify(o))),e.abrupt("return",i);case 16:case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.relogin=Object(G.a)(X.a.mark((function e(){var a,n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===(a=t.getSessionData("loginUser"))){e.next=7;break}return e.next=5,t.postData("/api/user/login",a);case 5:n=e.sent,t.processResponse(n,null,"user",!0);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),this.getSessionData=function(e){var t=sessionStorage.getItem(e);if(null!==t){var a=JSON.parse(t);if(void 0!==a.expiresAt&&("never"===a.expiresAt||a.expiresAt>new Date))return a.body}return null},this.real=!0},qc=_c,Uc=Object(d.b)((function(e){return{}}),{addCampaign:function(e){return{type:"ADD_PLAYMAP",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.renderHeader=function(){return r.a.createElement("div",{key:"header"},"Name the new Campaign.")},n.createCampaign=function(){n.setState({processing:!0},(function(){var e={name:n.state.name,selectedPlayMapID:"",turnPlayerID:null};n.api.createCampaign(e).then((function(e){if(void 0!==e&&void 0===e.error){var t=new Bn(e.campaignID,n.state.name,"",null,(new Date).toString());n.props.addCampaign(t),n.props.selectCampaign(t),n.setState({processing:!1})}}))}))},n.onBlur=function(){n.setState({name:n.state.name.trim()},(function(){}))},n.renderMain=function(){return r.a.createElement(U.a,{key:"main",container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_map_name"},"Campaign Name"),r.a.createElement(re.a,{id:"text_field_play_map_name",name:"text_field_play_map_name",type:"text",autoComplete:"Off",error:""!==n.state.error,value:n.state.name,onChange:function(e){n.setState({name:e.target.value})},onBlur:function(){n.onBlur()},labelWidth:120,fullWidth:!0}),r.a.createElement(Be.a,null,n.state.error))),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{disabled:n.state.processing||""===n.state.name,onClick:n.createCampaign,variant:"contained",color:"primary"},"Submit")))},n.state={name:"",error:"",processing:!1},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return[this.renderHeader(),this.renderMain()]}}]),a}(n.Component)),Rc=Object(d.b)((function(e){return{campaigns:e.app.campaigns}}),{})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).selectCampaign=function(e){n.setState({selectedCampaign:e})},n.loadCampaign=function(){null!==n.state.selectedCampaign&&n.props.selectCampaign(n.state.selectedCampaign)},n.renderMain=function(){return null===n.props.campaigns?r.a.createElement("div",{key:"main"},"I'm invisible"):r.a.createElement(U.a,{key:"main",style:{margin:4},container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0,style:{height:window.innerHeight-200,overflowY:"scroll"},container:!0,spacing:1,direction:"row"},n.renderMapList()),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{disabled:null===n.state.selectedCampaign,onClick:n.loadCampaign,variant:"contained",color:"primary"},"Submit")))},n.renderMapList=function(){return null!==n.props.campaigns?r.a.createElement(U.a,{item:!0,xs:6,container:!0,spacing:1,direction:"column"},"Select a Campaign",n.props.campaigns.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,onClick:function(){n.selectCampaign(e)},style:{backgroundColor:n.state.selectedCampaign&&n.state.selectedCampaign._id===e._id?"blue":"transparent",color:n.state.selectedCampaign&&n.state.selectedCampaign._id===e._id?"white":"black",cursor:"pointer"}},e.name)}))):r.a.createElement(U.a,{item:!0,xs:6},"I'm invisible!")},n.state={selectedCampaign:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return[this.renderMain()]}}]),a}(n.Component)),Hc=Object(d.b)((function(e){return{maps:e.app.maps,selectedCampaign:e.app.selectedCampaign}}),{addPlayMap:function(e){return{type:"ADD_PLAYMAP",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.renderHeader=function(){return r.a.createElement("div",{key:"header"},"Select a Map and give the PlayMap a name.")},n.selectMap=function(e){if(""===n.state.name){var t=new Date,a=(t.getMonth()+1).toString();1===a.length&&(a="0"+a);var r=t.getDate().toString();1===r.length&&(r="0"+r),n.setState({selectedMap:e,name:"".concat(e.name," ").concat(t.getFullYear()).concat(a).concat(r)})}else n.setState({selectedMap:e})},n.createPlayMap=function(){n.setState({processing:!0},(function(){if(n.state.selectedMap&&n.props.selectedCampaign){var e={mapID:n.state.selectedMap._id,campaignID:n.props.selectedCampaign._id,name:n.state.name,playTokens:[],lightMasks:[],darkMasks:[],fogMasks:[],zoom:1,dx:0,dy:0};n.api.createPlayMap(e).then((function(e){if(void 0!==e&&void 0===e.error&&n.state.selectedMap&&n.props.selectedCampaign){var t=new Lc(e.playMapID,n.props.selectedCampaign._id,n.state.name,n.state.selectedMap,[],null,[],[],[],1,0,0);n.props.addPlayMap(t),n.props.selectPlayMap(t),n.setState({processing:!1})}}))}}))},n.onBlur=function(){n.setState({name:n.state.name.trim()},(function(){}))},n.changeCategory=function(e){n.setState({selectedCategory:e.target.value})},n.renderCategorySelect=function(){return r.a.createElement(ae.a,{variant:"outlined"},r.a.createElement(ne.a,{id:"category"},"Category"),r.a.createElement(Da.a,{labelId:"category",id:"category",value:n.state.selectedCategory,onChange:n.changeCategory,label:"Category"},n.state.categories.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)}))))},n.renderMain=function(){return null===n.props.maps?r.a.createElement("div",{key:"main"},"I'm invisible"):r.a.createElement(U.a,{key:"main",container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_map_name"},"PlayMap Name"),r.a.createElement(re.a,{id:"text_field_play_map_name",name:"text_field_play_map_name",type:"text",autoComplete:"Off",error:""!==n.state.error,value:n.state.name,onChange:function(e){n.setState({name:e.target.value})},onBlur:function(){n.onBlur()},labelWidth:120,fullWidth:!0}),r.a.createElement(Be.a,null,n.state.error))),r.a.createElement(U.a,{item:!0,style:{height:window.innerHeight-200,overflowY:"scroll"},container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},n.renderCategorySelect()),r.a.createElement(U.a,{item:!0},n.renderMapList())),r.a.createElement(U.a,{item:!0,xs:6},n.renderSelectedMap())),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{disabled:n.state.processing||null===n.state.selectedMap||""===n.state.name,onClick:n.createPlayMap,variant:"contained",color:"primary"},"Submit")))},n.renderMapList=function(){return null!==n.props.maps?r.a.createElement(U.a,{item:!0,xs:6,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Select a Map"),n.props.maps.filter((function(e){return"all"===n.state.selectedCategory||n.state.selectedCategory===e.category})).map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,onClick:function(){n.selectMap(e)},style:{backgroundColor:n.state.selectedMap&&n.state.selectedMap._id===e._id?"blue":"transparent",color:n.state.selectedMap&&n.state.selectedMap._id===e._id?"white":"black",cursor:"pointer"}},e.name)}))):r.a.createElement(U.a,{item:!0,xs:6},"I'm invisible!")},n.renderSelectedMap=function(){return null!==n.state.selectedMap?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Grid Width: ",n.state.selectedMap.gridWidth),r.a.createElement(U.a,{item:!0},"Grid Height: ",n.state.selectedMap.gridHeight),r.a.createElement(U.a,{item:!0},r.a.createElement("img",{style:{width:"100%"},src:n.state.selectedMap.file,alt:"testing"}))):r.a.createElement("div",null)},n.state={name:"",selectedCategory:"all",categories:[],selectedMap:null,error:"",processing:!1},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){if(0===this.state.categories.length&&this.props.maps){var e=[];e.push("all"),this.props.maps.forEach((function(t){t.category&&!e.includes(t.category)&&e.push(t.category)})),this.setState({categories:e})}return[this.renderHeader(),this.renderMain()]}}]),a}(n.Component)),Kc=Object(d.b)((function(e){return{playMaps:e.app.playMaps,selectedCampaign:e.app.selectedCampaign}}),{})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).selectPlayMap=function(e){n.setState({selectedMap:e})},n.loadPlayMap=function(){null!==n.state.selectedMap&&n.props.selectPlayMap(n.state.selectedMap)},n.renderMain=function(){return null===n.props.playMaps?r.a.createElement("div",{key:"main"},"I'm invisible"):r.a.createElement(U.a,{key:"main",style:{margin:4},container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0,style:{height:window.innerHeight-200,overflowY:"scroll"},container:!0,spacing:1,direction:"row"},n.renderMapList(),n.renderSelectedMap()),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{disabled:null===n.state.selectedMap,onClick:n.loadPlayMap,variant:"contained",color:"primary"},"Submit")))},n.renderMapList=function(){return null!==n.props.playMaps?r.a.createElement(U.a,{item:!0,xs:6,container:!0,spacing:1,direction:"column"},"Select a Map",n.props.playMaps.filter((function(e){return e.campaignID===n.props.selectedCampaign._id})).map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,onClick:function(){n.selectPlayMap(e)},style:{backgroundColor:n.state.selectedMap&&n.state.selectedMap._id===e._id?"blue":"transparent",color:n.state.selectedMap&&n.state.selectedMap._id===e._id?"white":"black",cursor:"pointer"}},e.name)}))):r.a.createElement(U.a,{item:!0,xs:6},"I'm invisible!")},n.renderSelectedMap=function(){return null!==n.state.selectedMap&&"DM"===n.props.mode?r.a.createElement(U.a,{item:!0,xs:6,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"Grid Width: ",n.state.selectedMap.map.gridWidth),r.a.createElement(U.a,{item:!0},"Grid Height: ",n.state.selectedMap.map.gridHeight),r.a.createElement(U.a,{item:!0},r.a.createElement("img",{style:{width:"100%"},src:n.state.selectedMap.map.file,alt:"testing"}))):r.a.createElement(U.a,{item:!0,xs:6})},n.state={selectedMap:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return[this.renderMain()]}}]),a}(n.Component)),Xc=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getInitialState=function(){var t=e.props,a=t.pandx,n=t.pandy,r=t.zoom;return{dragData:{dx:a,dy:n,x:0,y:0},dragging:!1,matrixData:[r,0,0,r,a,n]}},e.panWrapper=void 0,e.panContainer=void 0,e.state=e.getInitialState(),e.onMouseDown=function(t){if(e.props.enableClick&&e.props.onClick&&e.props.onClick(t.pageX,t.pageY),e.props.enablePan){var a=e.state,n=a.matrixData,r=(a.dragData,{dx:n[4],dy:n[5],x:t.pageX,y:t.pageY});e.setState({dragData:r,dragging:!0}),e.panWrapper&&(e.panWrapper.style.cursor="move"),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.preventDefault()}},e.onMouseUp=function(){e.setState({dragging:!1}),e.panWrapper&&(e.panWrapper.style.cursor=""),!e.props.enableClick&&e.props.onPan&&e.props.onPan(e.state.matrixData[4],e.state.matrixData[5])},e.getNewMatrixData=function(t,a){var n=e.state,r=n.dragData,i=n.matrixData,s=r.x-t,o=r.y-a;return i[4]=r.dx-s,i[5]=r.dy-o,i},e.getNewMatrixData2=function(t,a){var n=Object(H.a)({},e.state.dragData),r=Object(H.a)({},e.state.matrixData),i=n.x-t,s=n.y-a;return r[4]=n.dx-i,r[5]=n.dy-s,r},e.onMouseMove=function(t){if(e.state.dragging){var a=e.getNewMatrixData(t.pageX,t.pageY);e.setState({matrixData:a}),e.panContainer&&(e.panContainer.style.transform="matrix(".concat(e.state.matrixData.toString(),")"))}else e.props.singleSelect&&e.props.onMouseMove&&e.props.onMouseMove(t.pageX,t.pageY)},e}return Object(l.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.state.matrixData,a=e.zoom,n=void 0===a?t[0]:a,r=e.pandx,i=void 0===r?t[4]:r,s=e.pandy,o=void 0===s?t[5]:s,l=Object(ee.a)(this.state.matrixData);t[0]!==n&&(l[0]=n||l[0],l[3]=n||l[3]),t[4]!==i&&(l[4]=i),t[5]!==o&&(l[5]=o),this.setState({matrixData:l})}},{key:"render",value:function(){var e=this;return n.createElement("div",{className:"pan-container ".concat(this.props.className||""),onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,style:{height:this.props.height,userSelect:"none",width:this.props.width,backgroundColor:"black"},ref:function(t){return e.panWrapper=t}},n.createElement("div",{ref:function(t){return t?e.panContainer=t:null},style:{transform:"matrix(".concat(this.state.matrixData.toString(),")")}},this.props.children))}}]),a}(n.PureComponent);Xc.defaultProps={enablePan:!0,enableClick:!1,singleSelect:!1,onPan:function(){},onClick:function(){},onMouseMove:function(){},pandx:0,pandy:0,zoom:1};var Gc=a(91),Zc=a.n(Gc),Qc=a(358),Yc=a.n(Qc);function Jc(){var e=Object(Ln.a)(["\n        ",";\n      "]);return Jc=function(){return e},e}function $c(){var e=Object(Ln.a)(["\n  font-size: 2rem;\n"]);return $c=function(){return e},e}function eu(){var e=Object(Ln.a)(["\n  background: dimgrey;\n  color: white;\n  height: ","px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n"]);return eu=function(){return e},e}function tu(){var e=Object(Ln.a)(["\n  position: fixed;\n  background: lightgray;\n  height: 100%;\n  left: 0;\n  z-index: 2;\n  cursor: pointer;\n  user-select: none;\n\n  > div {\n    padding: 15px;\n    &:hover {\n      background: darkgray;\n    }\n    &:active {\n      box-shadow: 1px 1px 1px inset;\n    }\n  }\n"]);return tu=function(){return e},e}function au(){var e=Object(Ln.a)(["\n  position: fixed;\n  background: lightgray;\n  height: 100%;\n  right: 0;\n  z-index: 2;\n  cursor: pointer;\n  user-select: none;\n\n  > div {\n    padding: 15px;\n    &:hover {\n      background: darkgray;\n    }\n    &:active {\n      box-shadow: 1px 1px 1px inset;\n    }\n  }\n"]);return au=function(){return e},e}function nu(){var e=Object(Ln.a)(["\n  height: calc(100vh - ","px);\n  width: 100vw;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1;\n"]);return nu=function(){return e},e}var ru=Object(Fn.a)(nu(),30),iu=Fn.b.div(au()),su=Fn.b.div(tu()),ou=Fn.b.div(eu(),30),lu=Fn.b.strong($c()),cu=Object(d.b)((function(e){return{selectedCampaign:e.app.selectedCampaign,campaigns:e.app.campaigns,selectedPlayer:e.app.selectedPlayer,players:e.app.players,playMaps:e.app.playMaps,selectedPlayMap:e.app.selectedPlayMap,tokens:e.app.tokens,favoriteTokens:e.app.favoriteTokens,maps:e.app.maps}}),{addFavoriteToken:function(e){return{type:"ADD_FAVORITETOKEN",payload:e}},updateFavoriteToken:function(e){return{type:"UPDATE_FAVORITETOKEN",payload:e}},updateCampaign:function(e){return{type:"UPDATE_CAMPAIGN",payload:e}},selectPlayMap:function(e){return{type:"SELECT_PLAYMAP",payload:e}},updatePlayMap:function(e){return{type:"UPDATE_PLAYMAP",payload:e}},setPlayers:function(e){return{type:"SET_PLAYERS",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.refresh=function(){(n.props.selectedPlayer||"DM"===n.props.mode)&&((n.props.selectedPlayer?n.props.selectedPlayer.refreshIndex:4)===n.getCurrentRefreshIndex()?"DM"===n.props.mode?n.api.getPlayers(!0).then((function(e){var t=n.props.campaigns,a=[];e.players.forEach((function(e){var n=t.filter((function(t){return t._id===e.campaignID})),r=null;1===n.length&&(r=n[0]),a.push(new Fc(e._id,e.email,e.username,e.password,r,new Date(Date.parse(e.lastPing)),e.refreshIndex))})),n.props.setPlayers(a),n.refreshCampaign()})):n.refreshCampaign():setTimeout(n.refresh,1e3*n.state.countdown))},n.refreshCampaign=function(){var e=n.props.selectedPlayer?n.props.selectedPlayer._id:-1;n.api.getCampaign(n.props.selectedCampaign._id,n.props.selectedCampaign.lastUpdate,e).then((function(e){if(e.noChanges){var t=!1;null!==n.props.selectedPlayer&&(n.props.selectedCampaign.turnPlayerID===n.props.selectedPlayer._id&&!n.state.singleSelect||n.props.selectedCampaign.turnPlayerID!==n.props.selectedPlayer._id&&n.state.singleSelect)&&(t=!0),n.setState({refreshing:!1,lastRefresh:new Date},(function(){t&&n.toggleSingleSelect(),setTimeout(n.refresh,4*n.state.countdown*1e3)}))}else{var a=Object(H.a)({},n.props.selectedCampaign);if(a.lastUpdate=e.lastUpdate,e.selectedPlayMapID!==n.props.selectedPlayMap._id){if("DM"!==n.props.mode){a.selectedPlayMapID=e.selectedPlayMapID,n.props.updateCampaign(a);var r=n.props.playMaps.filter((function(e){return e._id===a.selectedPlayMapID}));1===r.length&&n.props.selectPlayMap(r[0])}n.setState({lastRefresh:new Date},(function(){setTimeout(n.refresh,1e3*n.state.countdown)}))}else{var i=!1;e.turnPlayerID!==a.turnPlayerID&&(a.turnPlayerID=e.turnPlayerID),n.props.updateCampaign(a),null!==n.props.selectedPlayer&&(a.turnPlayerID===n.props.selectedPlayer._id&&!n.state.singleSelect||a.turnPlayerID!==n.props.selectedPlayer._id&&n.state.singleSelect)&&(i=!0),"DM"!==n.props.mode||a.turnPlayerID?n.api.getPlayMap(n.props.selectedPlayMap._id).then((function(e){var t=n.props.maps.filter((function(t){return t._id===e.mapID}));if(1===t.length){var r=t[0],s=[];"DM"===n.props.mode?(s=n.props.selectedPlayMap.tokens,e.playTokens.filter((function(e){return e.ownerID===a.turnPlayerID})).forEach((function(e){var t=s.filter((function(t){return e.id===t.id}));if(1===t.length){var a=t[0];a.x=e.x,a.y=e.y}}))):n.props.selectedPlayer&&n.props.selectedPlayer._id===a.turnPlayerID?(s=n.props.selectedPlayMap.tokens,e.playTokens.forEach((function(e){var t=s.filter((function(t){return e.id===t.id}));if(1===t.length){var a=t[0],r=n.props.players.filter((function(t){return t._id===e.ownerID})),i=null;1===r.length&&(i=r[0]);var o=n.props.tokens.filter((function(t){return t._id===e.tokenID})),l=null;1===o.length&&(l=o[0]),a.name=e.name,a.token=l,a.size=e.size,a.stealth=e.stealth,a.bloodied=e.bloodied,a.owner=i,(null===i||n.props.selectedPlayer&&i._id!==n.props.selectedPlayer._id)&&(a.x=e.x,a.y=e.y)}else if(0===t.length){var c=n.props.tokens.filter((function(t){return t._id===e.tokenID})),u=null;1===c.length&&(u=c[0]);var p=n.props.players.filter((function(t){return t._id===e.ownerID})),d=null;1===p.length&&(d=p[0]),s.push(new Mc(e.id,e.name,u,e.x,e.y,e.size,e.stealth,e.bloodied,e.moving,d))}}))):e.playTokens.forEach((function(e){var t=n.props.tokens.filter((function(t){return t._id===e.tokenID})),a=null;1===t.length&&(a=t[0]);var r=n.props.players.filter((function(t){return t._id===e.ownerID})),i=null;1===r.length&&(i=r[0]),s.push(new Mc(e.id,e.name,a,e.x,e.y,e.size,e.stealth,e.bloodied,e.moving,i))}));var o=[],l=[],c=[],u=0,p=0,d=0;"DM"===n.props.mode?(o=n.props.selectedPlayMap.lightMasks,l=n.props.selectedPlayMap.darkMasks,c=n.props.selectedPlayMap.fogMasks,u=n.props.selectedPlayMap.zoom,p=n.props.selectedPlayMap.dx,d=n.props.selectedPlayMap.dy):(e.lightMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"light",a.x,a.y))})),o.push(new Vc(e.id,"light",t))})),e.darkMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"dark",a.x,a.y))})),l.push(new Vc(e.id,"dark",t))})),e.fogMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"fog",a.x,a.y))})),c.push(new Vc(e.id,"fog",t))})),u=e.zoom,p=e.dx,d=e.dy);var m=new Lc(e._id,e.campaignID,e.name,r,s,e.movingToken,o,l,c,u,p,d);n.props.updatePlayMap(m),n.setState({refreshing:!1,lastRefresh:new Date},(function(){i&&n.toggleSingleSelect(),setTimeout(n.refresh,1e3*n.state.countdown)}))}else console.log("Something went wrong")})):n.setState({refreshing:!1,lastRefresh:new Date},(function(){i&&n.toggleSingleSelect(),setTimeout(n.refresh,1e3*n.state.countdown)}))}}}))},n.getCurrentRefreshIndex=function(){var e=(new Date).getSeconds();return Math.floor(e%12/2)},n.zoomIn=function(){if(n.props.selectedPlayMap){var e=n.props.selectedPlayMap;e.zoom+=.2,n.props.updatePlayMap(e),n.setState({lastRefresh:new Date})}},n.zoomOut=function(){if(n.props.selectedPlayMap){var e=n.props.selectedPlayMap;e.zoom-=.2,n.props.updatePlayMap(e),n.setState({lastRefresh:new Date})}},n.clearSelectAndHover=function(){if(n.state.singleSelect){var e=n.props.selectedPlayMap;e.tokens.filter((function(e){return e.moving})).forEach((function(e){e.moving=!1})),e.movingToken=null,n.props.updatePlayMap(e)}n.setState({mapMode:n.state.singleSelect?"select":n.state.mapMode,selected:[]})},n.toggleSingleSelect=function(){var e=n.props.selectedPlayMap;e.tokens.filter((function(e){return e.moving})).forEach((function(e){e.moving=!1})),e.movingToken=null,n.props.updatePlayMap(e),n.setState({singleSelect:!n.state.singleSelect,selected:[],mapMode:!n.state.singleSelect||n.state.shiftHeld?"select":"pan"})},n.addNewToken=function(){if(n.props.selectedPlayMap){var e=n.props.selectedPlayMap;if(n.state.selectedToken){var t=n.state.selectedToken;"none"===t._id&&(t=null);for(var a=0;a<n.state.tokenCount;a++)e.tokens.push(new Mc(e.tokens.length,n.state.tokenName.trim()+(a>0?" ".concat(a+1):""),t,a-Math.round(n.state.tokenCount/2),0,n.state.tokenSize,!1,!1,!1,null));n.props.updatePlayMap(e),n.setState({lastRefresh:new Date})}else if(n.state.selectedFavoriteToken){var r=n.state.selectedFavoriteToken;e.tokens.push(new Mc(e.tokens.length,n.state.tokenName.trim(),r.token,0,0,n.state.tokenSize,!1,!1,!1,null)),n.props.updatePlayMap(e),n.setState({lastRefresh:new Date})}}},n.deletePlayToken=function(e){if(n.props.selectedPlayMap){var t=n.props.selectedPlayMap;t.tokens=t.tokens.filter((function(t){return t.id!==e.id})),t.tokens.filter((function(t){return t.id>e.id})).forEach((function(e){e.id--})),n.props.updatePlayMap(t),n.setState({lastRefresh:new Date})}},n.adjustPlayToken=function(e,t,a,r,i,s,o,l){if(n.props.selectedPlayMap){var c=n.props.selectedPlayMap,u=e,p=c.tokens.filter((function(e){return e.id===u.id}));if(1===p.length){var d=p[0];d.name=t,d.size=a,d.x=r,d.y=i,d.stealth=s,d.bloodied=o,d.owner=l,n.props.updatePlayMap(c),n.setState({lastRefresh:new Date})}}},n.addNewFavorite=function(){if(n.state.selectedToken){var e=n.state.selectedToken,t={campaignID:n.props.selectedCampaign._id,name:n.state.tokenName,tokenID:e._id,size:n.state.tokenSize};n.api.createFavoriteToken(t).then((function(t){var a=new Wc(t.favoriteTokenID,n.props.selectedCampaign._id,n.state.tokenName,e,n.state.tokenSize);n.props.addFavoriteToken(a),n.setState({lastRefresh:new Date})}))}},n.deleteFavorite=function(e){if(n.props.selectedPlayMap){var t=n.props.selectedPlayMap;t.tokens=t.tokens.filter((function(t){return t.id!==e.id})),t.tokens.filter((function(t){return t.id>e.id})).forEach((function(e){e.id--})),n.props.updatePlayMap(t),n.setState({lastRefresh:new Date})}},n.adjustFavorite=function(e,t,a){var r=e,i=n.props.favoriteTokens.filter((function(e){return e._id===r._id}));if(1===i.length){var s=i[0];s.name=t,s.size=a,n.api.updateFavoriteToken(s.toDBObj()).then((function(){n.props.updateFavoriteToken(s),n.setState({lastRefresh:new Date})}))}},n.onPan=function(e,t){if(n.props.selectedPlayMap&&"DM"===n.props.mode){var a=n.props.selectedPlayMap;n.state.deselecting?n.setState({deselecting:!1}):n.state.shiftHeld||n.state.ctrlHeld||n.state.singleSelect?null!==n.state.hovered&&n.state.selected.includes(n.state.hovered)||n.state.hovered:(a.dx=e,a.dy=t,n.props.updatePlayMap(a),n.setState({lastRefresh:new Date}))}},n.onClick=function(e,t){if(n.props.selectedPlayMap){var a=n.props.selectedPlayMap;if(n.state.singleSelect){if(null===n.state.hovered)1===n.state.selected.length&&n.state.selected.forEach((function(r){if(r instanceof Mc){var i=r,s=a.tokens.filter((function(e){return e.id===i.id}));if(1===s.length){var o=s[0];o.x=Math.round((e-window.innerWidth/2-a.dx+25)/a.zoom/50),o.y=Math.round((t-window.innerHeight/2-a.dy-37.5)/a.zoom/50),"DM"===n.props.mode?(n.props.updatePlayMap(a),n.setState({lastRefresh:new Date,hovered:o})):n.api.updatePlayMap(a.toDBObj()).then((function(e){var t=n.props.selectedCampaign;t.lastUpdate=e.lastUpdate,n.props.updateCampaign(t),n.props.updatePlayMap(a),n.setState({lastRefresh:new Date,hovered:o})}))}}}));else if(0===n.state.selected.length&&n.state.hovered instanceof Mc){var r=n.state.selected;r.push(n.state.hovered);var i=n.state.hovered,s=n.props.selectedPlayMap,o=s.tokens.filter((function(e){return e.id===i.id}));if(1===o.length){var l=o[0];l.moving=!0,s.movingToken=new Mc(l.id,l.name,l.token,l.x,l.y,l.size,l.stealth,l.bloodied,!0,l.owner),n.props.updatePlayMap(s)}n.setState({selected:r,mapMode:"move"})}else if(n.state.hovered instanceof Mc&&n.state.selected.includes(n.state.hovered)){var c=n.props.selectedPlayMap;c.tokens.filter((function(e){return e.moving})).forEach((function(e){e.moving=!1})),c.movingToken=null,n.props.updatePlayMap(c);var u=n.state.selected.filter((function(e){return e!==n.state.hovered}));n.setState({selected:u,mapMode:"select"})}}else if("select"===n.state.mapMode){if(null===n.state.hovered);else if(n.state.selected.includes(n.state.hovered)){var p=n.state.selected.filter((function(e){return e!==n.state.hovered}));n.setState({selected:p})}else if(0===n.state.selected.length||n.state.shiftHeld){var d=n.state.selected;d.push(n.state.hovered),n.setState({selected:d})}}else"move"===n.state.mapMode&&1===n.state.selected.length&&n.state.selected.forEach((function(r){if(r instanceof Mc){var i=r,s=a.tokens.filter((function(e){return e.id===i.id}));if(1===s.length){var o=s[0];o.x=Math.round((e-window.innerWidth/2-a.dx+25)/a.zoom/50),o.y=Math.round((t-window.innerHeight/2-a.dy-37.5)/a.zoom/50),n.props.updatePlayMap(a),n.setState({lastRefresh:new Date,hovered:o})}}else if(r instanceof jc){var l=r,c=("light"===r.maskType?n.props.selectedPlayMap.lightMasks:"dark"===r.maskType?n.props.selectedPlayMap.darkMasks:n.props.selectedPlayMap.fogMasks).filter((function(e){return e.id===l.maskID}));if(1===c.length){var u=c[0].points.filter((function(e){return e.id===l.id}));if(1===u.length){var p=u[0];p.x=(e-window.innerWidth/2-a.dx+50)/a.zoom/50,p.y=(t-window.innerHeight/2-a.dy)/a.zoom/50,n.props.updatePlayMap(a),n.setState({lastRefresh:new Date,hovered:p})}}}}))}},n.onMouseMove=function(e,t){if(n.props.selectedPlayMap){var a=n.props.selectedPlayMap;if(n.state.singleSelect&&null===n.state.hovered&&a.movingToken){var r=a.movingToken;r.x=Math.round((e-window.innerWidth/2-a.dx+25)/a.zoom/50),r.y=Math.round((t-window.innerHeight/2-a.dy-37.5)/a.zoom/50),n.props.updatePlayMap(a),n.setState({lastRefresh:new Date})}}},n.renderFavoriteTokenList=function(e){return e?r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},n.props.favoriteTokens.filter((function(e){return e.campaignID===n.props.selectedCampaign._id})).map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_favorite_token_name_".concat(t)},"Name"),r.a.createElement(re.a,{id:"text_field_favorite_token_name_".concat(t),name:"text_field_favorite_token_name_".concat(t),type:"text",autoComplete:"Off",value:e.name,onChange:function(t){n.adjustFavorite(e,t.target.value,e.size)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_favorite_token_size_".concat(t)},"Size"),r.a.createElement(re.a,{id:"text_field_favorite_token_size_".concat(t),name:"text_field_favorite_token_size_".concat(t),type:"number",autoComplete:"Off",value:e.size,onChange:function(t){n.adjustFavorite(e,e.name,parseFloat(t.target.value))},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement("img",{src:e.token.file,style:{width:140},alt:e.name})),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){}},"Delete")))}))):r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},n.props.favoriteTokens.filter((function(e){return e.campaignID===n.props.selectedCampaign._id})).map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,xs:6,style:{cursor:"pointer",backgroundColor:null!==n.state.selectedFavoriteToken&&e._id===n.state.selectedFavoriteToken._id?"blue":"transparent"},onClick:function(){n.setState({selectedFavoriteToken:e,selectedToken:null,tokenName:e.name,tokenSize:e.size})}},r.a.createElement("img",{src:e.token.file,style:{width:140},alt:e.name}),e.name)})))},n.renderTokenList=function(){return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},n.props.tokens.filter((function(e){return"all"===n.state.selectedCategory||n.state.selectedCategory===e.category})).map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,xs:6,style:{cursor:"pointer",backgroundColor:null!==n.state.selectedToken&&e._id===n.state.selectedToken._id?"blue":"transparent"},onClick:function(){n.setState({selectedToken:e,selectedFavoriteToken:null})}},r.a.createElement("img",{src:e.file,style:{width:140},alt:e.file}))})))},n.renderPlayTokenList=function(){return r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},n.props.selectedPlayMap.tokens.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_name_".concat(t)},"Name"),r.a.createElement(re.a,{id:"text_field_play_token_name_".concat(t),name:"text_field_play_token_name_".concat(t),type:"text",autoComplete:"Off",value:e.name,onChange:function(t){n.adjustPlayToken(e,t.target.value,e.size,e.x,e.y,e.stealth,e.bloodied,e.owner)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_size_".concat(t)},"Size"),r.a.createElement(re.a,{id:"text_field_play_token_size_".concat(t),name:"text_field_play_token_size_".concat(t),type:"number",autoComplete:"Off",value:e.size,onChange:function(t){n.adjustPlayToken(e,e.name,parseFloat(t.target.value),e.x,e.y,e.stealth,e.bloodied,e.owner)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_x_".concat(t)},"X"),r.a.createElement(re.a,{id:"text_field_play_token_x_".concat(t),name:"text_field_play_token_x_".concat(t),type:"number",autoComplete:"Off",value:e.x,onChange:function(t){n.adjustPlayToken(e,e.name,e.size,parseInt(t.target.value),e.y,e.stealth,e.bloodied,e.owner)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_y_".concat(t)},"Y"),r.a.createElement(re.a,{id:"text_field_play_token_y_".concat(t),name:"text_field_play_token_y_".concat(t),type:"number",autoComplete:"Off",value:e.y,onChange:function(t){n.adjustPlayToken(e,e.name,e.size,e.x,parseInt(t.target.value),e.stealth,e.bloodied,e.owner)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(ae.a,{variant:"outlined"},r.a.createElement(ne.a,{id:"select_play_token_owner_label"},"Owner"),r.a.createElement(Da.a,{labelId:"select_play_token_owner_label",id:"select_play_token_owner",value:e.owner?e.owner._id:"null",onChange:function(t){var a=null;if("null"!==t.target.value){var r=n.props.players.filter((function(e){return e._id===t.target.value}));1===r.length&&(a=r[0])}n.adjustPlayToken(e,e.name,e.size,e.x,e.y,e.stealth,e.bloodied,a)},label:"Owner"},r.a.createElement(ft.a,{value:"null"},r.a.createElement("em",null,"None")),n.props.players.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.username)}))))),null!==e.token&&r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement("img",{src:e.token.file,style:{width:140},alt:e.name})),r.a.createElement(U.a,{item:!0,xs:3,container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{onClick:function(){n.adjustPlayToken(e,e.name,e.size,e.x,e.y,!e.stealth,e.bloodied,e.owner)}},e.stealth?"Stealthy":"Not")),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{onClick:function(){n.adjustPlayToken(e,e.name,e.size,e.x,e.y,e.stealth,!e.bloodied,e.owner)}},e.bloodied?"Bloodied":"Not"))),r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(Ne.a,{onClick:function(){n.deletePlayToken(e)}},"Delete")))})))},n.moveLMP=function(e,t,a){if(n.props.selectedPlayMap){var r=n.props.selectedPlayMap,i=("light"===e.maskType?r.lightMasks:"dark"===e.maskType?r.darkMasks:r.fogMasks).filter((function(t){return t.id===e.maskID}));if(1===i.length){var s=i[0].points.filter((function(t){return t.id===e.id}));if(1===s.length){var o=s[0];"x"===t?o.x=parseFloat(a):o.y=parseFloat(a)}}n.props.updatePlayMap(r),n.setState({lastRefresh:new Date})}},n.addNewPoint=function(e){if(n.props.selectedPlayMap){var t=n.props.selectedPlayMap,a=("light"===e.maskType?t.lightMasks:"dark"===e.maskType?t.darkMasks:t.fogMasks).filter((function(t){return t.id===e.id}));if(1===a.length){var r=a[0],i=r.points[0];r.points.push(new jc(r.points.length,r.id,r.maskType,i.x+1,i.y+1)),n.props.updatePlayMap(t),n.setState({lastRefresh:new Date})}}},n.deletePoint=function(e){if(n.props.selectedPlayMap){var t=n.props.selectedPlayMap,a=("light"===e.maskType?t.lightMasks:"dark"===e.maskType?t.darkMasks:t.fogMasks).filter((function(t){return t.id===e.maskID}));if(1===a.length){var r=a[0];r.points=r.points.filter((function(t){return t.id!==e.id})),r.points.filter((function(t){return t.id>e.id})).forEach((function(e){e.id--})),n.props.updatePlayMap(t),n.setState({lastRefresh:new Date})}}},n.deleteMask=function(e){if(n.props.selectedPlayMap){var t=n.props.selectedPlayMap,a="light"===e.maskType?t.lightMasks:"dark"===e.maskType?t.darkMasks:t.fogMasks;(a=a.filter((function(t){return t.id!==e.id}))).filter((function(t){return t.id>e.id})).forEach((function(e){e.id--})),"light"===e.maskType?t.lightMasks=a:"dark"===e.maskType?t.darkMasks=a:t.fogMasks=a,n.props.updatePlayMap(t),n.setState({lastRefresh:new Date})}},n.renderMaskList=function(){var e="light"===n.state.controlSubMode?n.props.selectedPlayMap.lightMasks:"dark"===n.state.controlSubMode?n.props.selectedPlayMap.darkMasks:n.props.selectedPlayMap.fogMasks;return r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},"light"===n.state.controlSubMode?"Light Masks":"dark"===n.state.controlSubMode?"Dark Masks":"Fog Masks"),e.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t,style:{cursor:"pointer",backgroundColor:null!==n.state.selectedMask&&e===n.state.selectedMask?"blue":"transparent"},container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0,onClick:function(){n.setState({selectedMask:e})}},e.toClipPath(n.props.selectedPlayMap.map.gridWidth,n.props.selectedPlayMap.map.gridHeight)),null!==n.state.selectedMask&&e===n.state.selectedMask&&r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"column"},e.points.map((function(e,t){return r.a.createElement(U.a,{item:!0,container:!0,key:t,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_lmp_x_".concat(t)},"X"),r.a.createElement(re.a,{id:"text_field_lmp_x_".concat(t),name:"text_field_lmp_x_".concat(t),type:"number",autoComplete:"Off",value:e.x,onChange:function(t){n.moveLMP(e,"x",t.target.value)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_lmp_y_".concat(t)},"Y"),r.a.createElement(re.a,{id:"text_field_lmp_y_".concat(t),name:"text_field_lmp_y_".concat(t),type:"number",autoComplete:"Off",value:e.y,onChange:function(t){n.moveLMP(e,"y",t.target.value)},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(Ne.a,{onClick:function(){n.deletePoint(e)}},"Delete")))})),r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{onClick:function(){n.addNewPoint(e)}},"Add New Point"),r.a.createElement(Ne.a,{onClick:function(){n.deleteMask(e)}},"Delete Mask"))))})))},n.addNewMask=function(){if(n.props.selectedPlayMap){var e=n.props.selectedPlayMap,t="light"===n.state.controlSubMode?e.lightMasks:"dark"===n.state.controlSubMode?e.darkMasks:e.fogMasks,a=[new jc(0,t.length,n.state.controlSubMode,0,0),new jc(1,t.length,n.state.controlSubMode,1,0),new jc(2,t.length,n.state.controlSubMode,1,1),new jc(3,t.length,n.state.controlSubMode,0,1)];t.push(new Vc(t.length,n.state.controlSubMode,a)),n.props.updatePlayMap(e),n.setState({lastRefresh:new Date})}},n.changeCategory=function(e){n.setState({selectedCategory:e.target.value})},n.renderControls=function(){return n.props.selectedPlayMap&&"DM"===n.props.mode?"tokens"===n.state.controlMode?r.a.createElement(iu,{style:{width:300}},r.a.createElement(ou,null,"Tokens"),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"add"})}},"Add")),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"edit"})}},"Edit")),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(ae.a,{variant:"outlined"},r.a.createElement(ne.a,{id:"category"},"Category"),r.a.createElement(Da.a,{labelId:"category",id:"category",value:n.state.selectedCategory,onChange:n.changeCategory,label:"Category"},n.state.categories.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e},e)})))))),"add"===n.state.controlSubMode?r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_name"},"Name"),r.a.createElement(re.a,{id:"text_field_play_token_name",name:"text_field_play_token_name",type:"text",autoComplete:"Off",value:n.state.tokenName,onChange:function(e){n.setState({tokenName:e.target.value})},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_size"},"Size"),r.a.createElement(re.a,{id:"text_field_play_token_size",name:"text_field_play_token_size",type:"number",autoComplete:"Off",value:n.state.tokenSize,onChange:function(e){n.setState({tokenSize:parseFloat(e.target.value)})},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_count"},"Count"),r.a.createElement(re.a,{id:"text_field_play_token_count",name:"text_field_play_token_count",type:"number",autoComplete:"Off",value:n.state.tokenCount,onChange:function(e){n.setState({tokenCount:Math.max(1,parseInt(e.target.value))})},labelWidth:40,fullWidth:!0})))),r.a.createElement(U.a,{item:!0},r.a.createElement("div",{style:{height:window.innerHeight-400,overflowX:"hidden",overflowY:"scroll"}},r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0,style:{cursor:"pointer",backgroundColor:null!==n.state.selectedToken&&"none"===n.state.selectedToken._id?"blue":"transparent"},onClick:function(){n.setState({selectedToken:new Pc("none","none","none"),selectedFavoriteToken:null})}},"Label Only"),("all"===n.state.selectedCategory||"favorites"===n.state.selectedCategory)&&r.a.createElement(U.a,{item:!0},n.renderFavoriteTokenList(!1)),"favorites"!==n.state.selectedCategory&&r.a.createElement(U.a,{item:!0},n.renderTokenList()))))):r.a.createElement(U.a,{container:!0,spacing:1,direction:"column",style:{height:window.innerHeight-300,overflowX:"hidden",overflowY:"scroll"}},n.renderPlayTokenList()),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},"add"===n.state.controlSubMode&&r.a.createElement(Ne.a,{onClick:n.addNewToken,variant:"contained",color:"primary",disabled:null===n.state.selectedToken&&null===n.state.selectedFavoriteToken},"Add New Token")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlMode:"main"})},variant:"contained",color:"primary"},"Close")))):"masks"===n.state.controlMode?r.a.createElement(iu,{style:{width:300}},r.a.createElement(ou,null,"Masks"),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"light"})}},"Light")),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"dark"})}},"Dark")),r.a.createElement(U.a,{item:!0,xs:4},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"fog"})}},"Fog"))),r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0,style:{height:window.innerHeight-280,overflowX:"hidden",overflowY:"scroll"}},n.renderMaskList()),r.a.createElement(U.a,{item:!0,container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:n.addNewMask,variant:"contained",color:"primary"},"Add New Mask")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlMode:"main"})},variant:"contained",color:"primary"},"Close"))))):"favorites"===n.state.controlMode?r.a.createElement(iu,{style:{width:300}},r.a.createElement(ou,null,"Favorites"),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"add"})}},"Add")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlSubMode:"edit"})}},"Edit"))),"add"===n.state.controlSubMode?r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_name"},"Name"),r.a.createElement(re.a,{id:"text_field_play_token_name",name:"text_field_play_token_name",type:"text",autoComplete:"Off",value:n.state.tokenName,onChange:function(e){n.setState({tokenName:e.target.value})},labelWidth:40,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(ae.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ne.a,{htmlFor:"text_field_play_token_size"},"Size"),r.a.createElement(re.a,{id:"text_field_play_token_size",name:"text_field_play_token_size",type:"number",autoComplete:"Off",value:n.state.tokenSize,onChange:function(e){n.setState({tokenSize:parseFloat(e.target.value)})},labelWidth:40,fullWidth:!0}))),r.a.createElement("div",{style:{height:window.innerHeight-400,overflowX:"hidden",overflowY:"scroll"}},n.renderTokenList())):r.a.createElement("div",{style:{height:window.innerHeight-300,overflowX:"hidden",overflowY:"scroll"}},n.renderFavoriteTokenList(!0)),r.a.createElement(U.a,{container:!0,spacing:1,direction:"row"},r.a.createElement(U.a,{item:!0,xs:6},"add"===n.state.controlSubMode&&r.a.createElement(Ne.a,{onClick:n.addNewFavorite,variant:"contained",color:"primary",disabled:""===n.state.tokenName||null===n.state.selectedToken},"Add New Favorite")),r.a.createElement(U.a,{item:!0,xs:6},r.a.createElement(Ne.a,{onClick:function(){n.setState({controlMode:"main"})},variant:"contained",color:"primary"},"Close")))):r.a.createElement(iu,null,r.a.createElement("div",{onClick:n.zoomIn},r.a.createElement(lu,null,"+")),r.a.createElement("div",{onClick:n.zoomOut},r.a.createElement(lu,null,"-")),r.a.createElement("div",{onClick:n.clearSelectAndHover},"pan"===n.state.mapMode?"P":"M"),r.a.createElement("div",{onClick:function(){n.setState({controlMode:"tokens",controlSubMode:"add"})}},"T"),r.a.createElement("div",{onClick:function(){n.setState({controlMode:"masks",controlSubMode:"light"})}},"L"),r.a.createElement("div",{onClick:function(){n.setState({controlMode:"favorites",controlSubMode:"add"})}},"F")):r.a.createElement("div",null)},n.renderPlayers=function(){if(n.props.selectedPlayMap&&"DM"===n.props.mode){var e=new Date((new Date).getTime()+-6e4);return r.a.createElement(su,null,r.a.createElement(U.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(U.a,{item:!0},r.a.createElement(Ne.a,{style:{backgroundColor:n.props.selectedCampaign&&null===n.props.selectedCampaign.turnPlayerID?"blue":"transparent"},onClick:function(){var e=Object(H.a)({},n.props.selectedCampaign);null!==e&&void 0!==e._id&&(e.turnPlayerID=null,n.props.updateCampaign(e),n.saveCampaign(),n.setState({lastRefresh:new Date}))}},r.a.createElement("div",{style:{margin:4}},"None"))),n.props.players.map((function(t,a){return r.a.createElement(U.a,{item:!0,key:a},r.a.createElement(Ne.a,{style:{backgroundColor:n.props.selectedCampaign&&n.props.selectedCampaign.turnPlayerID===t._id?"blue":"transparent"},onClick:function(){var e=Object(H.a)({},n.props.selectedCampaign);null!==e&&void 0!==e._id&&(e.turnPlayerID=t._id,n.props.updateCampaign(e),n.saveCampaign(),n.setState({lastRefresh:new Date}))}},r.a.createElement("div",{style:{margin:4,backgroundColor:t.lastPing<e?"red":"green"}},t.username)))}))))}return r.a.createElement("div",null)},n.saveCampaign=function(){n.api.updateCampaign(n.props.selectedCampaign.toDBObj()).then((function(e){var t=n.props.selectedCampaign;t.lastUpdate=e.lastUpdate,n.props.updateCampaign(t)}))},n.onKeyDown=function(e){"Shift"===e.key&&"DM"===n.props.mode?n.state.shiftHeld||n.setState({shiftHeld:!0,mapMode:"select"}):"Control"===e.key&&"DM"===n.props.mode?n.state.ctrlHeld||n.setState({ctrlHeld:!0,mapMode:n.state.shiftHeld?"select":"move"}):"t"===e.key&&"DM"===n.props.mode?n.toggleSingleSelect():"Alt"===e.key&&"DM"===n.props.mode?n.clearSelectAndHover():"w"===e.key?n.slideSelected(0,-1):"a"===e.key?n.slideSelected(-1,0):"s"===e.key?n.slideSelected(0,1):"d"===e.key&&n.slideSelected(1,0)},n.slideSelected=function(e,t){var a=n.props.selectedPlayMap;n.state.selected.forEach((function(n){if(n instanceof Mc){var r=n,i=a.tokens.filter((function(e){return e.id===r.id}));if(1===i.length){var s=i[0];s.x+=e,s.y+=t}}else if(n instanceof jc){var o=n;if("light"===o.maskType){var l=a.lightMasks.filter((function(e){return e.id===o.maskID}));if(1===l.length){var c=l[0].points.filter((function(e){return e.id===o.id}));if(1===c.length){var u=c[0];u.x+=e,u.y+=t}}}else if("dark"===o.maskType){var p=a.darkMasks.filter((function(e){return e.id===o.maskID}));if(1===p.length){var d=p[0].points.filter((function(e){return e.id===o.id}));if(1===d.length){var m=d[0];m.x+=e,m.y+=t}}}else if("fog"===o.maskType){var f=a.fogMasks.filter((function(e){return e.id===o.maskID}));if(1===f.length){var h=f[0].points.filter((function(e){return e.id===o.id}));if(1===h.length){var g=h[0];g.x+=e,g.y+=t}}}}})),"DM"===n.props.mode?(n.props.updatePlayMap(a),n.setState({lastRefresh:new Date})):n.api.updatePlayMap(a.toDBObj()).then((function(e){var t=n.props.selectedCampaign;t.lastUpdate=e.lastUpdate,n.props.updateCampaign(t),n.props.updatePlayMap(a),n.setState({lastRefresh:new Date})}))},n.onKeyUp=function(e){"Shift"===e.key&&"DM"===n.props.mode?n.state.shiftHeld&&n.setState({shiftHeld:!1,mapMode:n.state.ctrlHeld?"move":"pan"}):"Control"===e.key&&"DM"===n.props.mode&&n.state.ctrlHeld&&n.setState({ctrlHeld:!1,mapMode:n.state.shiftHeld?"select":"pan"})},n.state={mapMode:"pan",singleSelect:!1,selectedCategory:"all",categories:[],selected:[],hovered:null,shiftHeld:!1,ctrlHeld:!1,deselecting:!1,controlMode:"main",controlSubMode:"add",lastRefresh:new Date,tokenName:"",tokenSize:1,tokenCount:1,selectedToken:null,selectedFavoriteToken:null,selectedMask:null,countdown:1,refreshing:!1,running:!1},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))}},{key:"render",value:function(){var e=this;if(this.state.running){if("DM"===this.props.mode&&0===this.state.categories.length&&this.props.tokens){var t=[];return t.push("all"),t.push("favorites"),this.props.tokens.forEach((function(e){e.category&&!t.includes(e.category)&&t.push(e.category)})),this.setState({categories:t}),r.a.createElement("div",null,"Loading")}var a=Object(Fn.b)(Xc)(Jc(),ru);return r.a.createElement("div",null,this.renderControls(),this.renderPlayers(),r.a.createElement(a,{zoom:this.props.selectedPlayMap.zoom,pandx:this.props.selectedPlayMap.dx,pandy:this.props.selectedPlayMap.dy,onPan:this.onPan,onClick:this.onClick,onMouseMove:this.onMouseMove,enableClick:"pan"!==this.state.mapMode,singleSelect:this.state.singleSelect},r.a.createElement("div",{style:{position:"relative",left:-1*window.innerWidth/2+0,top:-1*window.innerHeight/2+25}},"DM"===this.props.mode?r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,opacity:.5,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight},src:this.props.selectedPlayMap.map.file,alt:"Fog of War"}):r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight},src:Zc.a,alt:"Fog of War"}),r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,clipPath:"url(#lightMask)"},src:this.props.selectedPlayMap.map.file,alt:"Light Mask"}),r.a.createElement("svg",{width:"0",height:"0"},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"lightMask"},this.props.selectedPlayMap.lightMasks.map((function(t,a){return r.a.createElement("polygon",{key:a,points:t.toClipPath(e.props.selectedPlayMap.map.gridWidth,e.props.selectedPlayMap.map.gridHeight)})}))))),r.a.createElement("svg",{width:"0",height:"0"},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"darkMask"},this.props.selectedPlayMap.darkMasks.map((function(t,a){return r.a.createElement("polygon",{key:a,points:t.toClipPath(e.props.selectedPlayMap.map.gridWidth,e.props.selectedPlayMap.map.gridHeight)})}))))),r.a.createElement("svg",{width:"0",height:"0"},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"fogMask"},this.props.selectedPlayMap.fogMasks.map((function(t,a){return r.a.createElement("polygon",{key:a,points:t.toClipPath(e.props.selectedPlayMap.map.gridWidth,e.props.selectedPlayMap.map.gridHeight)})}))))),"DM"===this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,clipPath:"url(#fogMask)"},src:Zc.a,alt:"Fog Mask 1"}),"DM"===this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,opacity:.3,clipPath:"url(#fogMask)"},src:this.props.selectedPlayMap.map.file,alt:"Fog Mask 2"}),"DM"===this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,opacity:.7,clipPath:"url(#darkMask)"},src:Zc.a,alt:"Dark Mask"}),this.props.selectedPlayMap.movingToken&&r.a.createElement("div",{style:{position:"absolute",left:50*this.props.selectedPlayMap.movingToken.x+window.innerWidth/2-25-25*this.props.selectedPlayMap.movingToken.size,top:50*this.props.selectedPlayMap.movingToken.y+window.innerHeight/2-25-25*this.props.selectedPlayMap.movingToken.size,width:50*this.props.selectedPlayMap.movingToken.size,height:50*this.props.selectedPlayMap.movingToken.size,opacity:.5}},null!==this.props.selectedPlayMap.movingToken.token&&r.a.createElement("img",{src:this.props.selectedPlayMap.movingToken.token.file,alt:"testing",style:{width:50*this.props.selectedPlayMap.movingToken.size,height:50*this.props.selectedPlayMap.movingToken.size}}),""!==this.props.selectedPlayMap.movingToken.name&&r.a.createElement("span",{style:{color:"black",fontWeight:"bold",backgroundColor:"white",fontSize:10*this.props.selectedPlayMap.movingToken.size}},this.props.selectedPlayMap.movingToken.name)),this.props.selectedPlayMap.tokens.map((function(t,a){return r.a.createElement("div",{key:a,style:{position:"absolute",left:50*t.x+window.innerWidth/2-25-25*t.size,top:50*t.y+window.innerHeight/2-25-25*t.size,width:50*t.size,height:50*t.size,backgroundColor:e.state.selected.includes(t)?"blue":"select"===e.state.mapMode&&("DM"===e.props.mode||e.props.selectedPlayer&&t.owner&&e.props.selectedPlayer._id===t.owner._id)?"grey":"transparent",opacity:t.stealth?"DM"===e.props.mode?.5:0:1},onMouseEnter:function(){("DM"===e.props.mode||e.props.selectedPlayer&&t.owner&&e.props.selectedPlayer._id===t.owner._id)&&e.setState({hovered:t})},onMouseLeave:function(){("DM"===e.props.mode||e.props.selectedPlayer&&t.owner&&e.props.selectedPlayer._id===t.owner._id)&&e.setState({hovered:null})}},null!==t.token&&r.a.createElement("img",{src:t.token.file,alt:"testing",style:{width:50*t.size,height:50*t.size,position:"absolute"}}),null!==t.token&&t.bloodied&&r.a.createElement("img",{src:Yc.a,alt:"testing",style:{width:50*t.size,height:50*t.size,position:"absolute",zIndex:3}}),""!==t.name&&null!==t.token&&r.a.createElement("span",{style:{color:"black",fontWeight:"bold",backgroundColor:"white",fontSize:10*t.size,position:"absolute",top:50*t.size}},t.name),""!==t.name&&null===t.token&&r.a.createElement("span",{style:{color:"black",fontWeight:"bold",backgroundColor:"white",fontSize:10*t.size}},t.name))})),"DM"!==this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,clipPath:"url(#fogMask)"},src:Zc.a,alt:"Fog Mask 1"}),"DM"!==this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,opacity:.5,clipPath:"url(#fogMask)"},src:this.props.selectedPlayMap.map.file,alt:"Fog Mask 2"}),"DM"!==this.props.mode&&r.a.createElement("img",{style:{position:"absolute",left:-25*this.props.selectedPlayMap.map.gridWidth+window.innerWidth/2,top:-25*this.props.selectedPlayMap.map.gridHeight+window.innerHeight/2-25,width:50*this.props.selectedPlayMap.map.gridWidth,height:50*this.props.selectedPlayMap.map.gridHeight,clipPath:"url(#darkMask)"},src:Zc.a,alt:"Dark Mask"}),"DM"===this.props.mode&&this.props.selectedPlayMap.lightMasks.map((function(t,a){return r.a.createElement("div",{key:a},t.points.map((function(t,a){return r.a.createElement("div",{key:a,style:{position:"absolute",left:50*t.x+window.innerWidth/2-60,top:50*t.y+window.innerHeight/2-60,width:20,height:20,backgroundColor:e.state.selected.includes(t)?"green":"yellow"},onMouseEnter:function(){e.setState({hovered:t})},onMouseLeave:function(){e.setState({hovered:null})}},t.id)})))})),"DM"===this.props.mode&&this.props.selectedPlayMap.darkMasks.map((function(t,a){return r.a.createElement("div",{key:a},t.points.map((function(t,a){return r.a.createElement("div",{key:a,style:{position:"absolute",left:50*t.x+window.innerWidth/2-60,top:50*t.y+window.innerHeight/2-60,width:20,height:20,backgroundColor:e.state.selected.includes(t)?"green":"purple",borderRadius:5},onMouseEnter:function(){e.setState({hovered:t})},onMouseLeave:function(){e.setState({hovered:null})}},t.id)})))})),"DM"===this.props.mode&&this.props.selectedPlayMap.fogMasks.map((function(t,a){return r.a.createElement("div",{key:a},t.points.map((function(t,a){return r.a.createElement("div",{key:a,style:{position:"absolute",left:50*t.x+window.innerWidth/2-60,top:50*t.y+window.innerHeight/2-60,width:20,height:20,backgroundColor:e.state.selected.includes(t)?"green":"grey",borderRadius:5},onMouseEnter:function(){e.setState({hovered:t})},onMouseLeave:function(){e.setState({hovered:null})}},t.id)})))})))))}return this.setState({running:!0},(function(){setTimeout(e.refresh,1e3*e.state.countdown)})),r.a.createElement("div",null,"Loading")}}]),a}(n.Component));function uu(){var e=Object(Ln.a)(["\n  background: dimgrey;\n  color: white;\n  height: ","px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n"]);return uu=function(){return e},e}var pu=Fn.b.div(uu(),50),du=Object(d.b)((function(e){return{tokens:e.app.tokens,players:e.app.players,selectedPlayMap:e.app.selectedPlayMap,selectedCampaign:e.app.selectedCampaign}}),{selectCampaign:function(e){return{type:"SELECT_CAMPAIGN",payload:e}},updateCampaign:function(e){return{type:"UPDATE_CAMPAIGN",payload:e}},selectPlayMap:function(e){return{type:"SELECT_PLAYMAP",payload:e}},updatePlayMap:function(e){return{type:"UPDATE_PLAYMAP",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.createCampaign=function(){n.setState({mode:"createCampaign"})},n.loadCampaign=function(){n.setState({mode:"loadCampaign"})},n.saveCampaign=function(){n.api.updateCampaign(n.props.selectedCampaign.toDBObj()).then((function(e){var t=n.props.selectedCampaign;t.lastUpdate=e.lastUpdate,n.props.updateCampaign(t)}))},n.selectCampaign=function(e){n.props.selectCampaign(e),""===e.selectedPlayMapID?n.setState({mode:"loadPlayMap"}):n.setState({mode:"main"})},n.createPlayMap=function(){n.setState({mode:"createPlayMap"})},n.loadPlayMap=function(){n.setState({mode:"loadPlayMap"})},n.savePlayMap=function(){n.api.updatePlayMap(n.props.selectedPlayMap.toDBObj()).then((function(e){var t=n.props.selectedCampaign;t.lastUpdate=e.lastUpdate,n.props.updateCampaign(t)}))},n.selectPlayMap=function(e){n.props.selectPlayMap(e),n.setState({mode:"main"})},n.useSelectedPlayMap=function(){var e=n.props.selectedCampaign;e.selectedPlayMapID=n.props.selectedPlayMap._id,n.api.updateCampaign(e.toDBObj()).then((function(t){e.lastUpdate=t.lastUpdate,n.props.updateCampaign(e),n.setState({mode:"main"})}))},n.renderHeader=function(){return r.a.createElement(pu,{key:"heading"},"Dead Simple VTT - DM Page",r.a.createElement(Ne.a,{onClick:n.createCampaign},"Create Campaign"),r.a.createElement(Ne.a,{onClick:n.loadCampaign},"Load Campaign"),n.renderControls())},n.renderControls=function(){return r.a.createElement("div",null,n.props.selectedCampaign&&r.a.createElement("div",null,r.a.createElement(Ne.a,{onClick:n.createPlayMap},"Create PlayMap"),r.a.createElement(Ne.a,{onClick:n.loadPlayMap},"Load PlayMap"),r.a.createElement(Ne.a,{onClick:n.savePlayMap,disabled:null===n.props.selectedPlayMap},"Save PlayMap"),r.a.createElement(Ne.a,{onClick:n.useSelectedPlayMap,disabled:null===n.props.selectedPlayMap},"Use PlayMap"),r.a.createElement(p.b,{to:"/vtt/player/".concat(n.props.selectedCampaign._id),target:"_blank",style:{color:"black"}},"Player Page")))},n.renderMain=function(){return"loadCampaign"===n.state.mode?r.a.createElement(Rc,{key:"main",mode:"DM",selectCampaign:n.selectCampaign}):"createCampaign"===n.state.mode?r.a.createElement(Uc,{key:"main",selectCampaign:n.selectCampaign}):"loadPlayMap"===n.state.mode?r.a.createElement(Kc,{key:"main",mode:"DM",selectPlayMap:n.selectPlayMap}):"createPlayMap"===n.state.mode?r.a.createElement(Hc,{key:"main",selectPlayMap:n.selectPlayMap}):n.props.selectedPlayMap?r.a.createElement(cu,{key:"main",mode:"DM"}):r.a.createElement("div",{key:"main",style:{margin:10}},"Load a Map to see it here")},n.state={mode:"loadCampaign",selectedTokenID:-1,hoveredTokenID:-1,deselecting:!1,lastRefresh:new Date,controlMode:"controls"},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return[this.renderHeader(),this.renderMain()]}}]),a}(n.Component));function mu(){var e=Object(Ln.a)(["\n  background: dimgrey;\n  color: white;\n  height: ","px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n"]);return mu=function(){return e},e}var fu=Fn.b.div(mu(),50),hu=Object(d.b)((function(e){return{tokens:e.app.tokens,selectedPlayMap:e.app.selectedPlayMap,playMaps:e.app.playMaps,players:e.app.players,maps:e.app.maps,campaigns:e.app.campaigns,selectedCampaign:e.app.selectedCampaign,selectedPlayer:e.app.selectedPlayer}}),{selectPlayMap:function(e){return{type:"SELECT_PLAYMAP",payload:e}},selectCampaign:function(e){return{type:"SELECT_CAMPAIGN",payload:e}},selectPlayer:function(e){return{type:"SELECT_PLAYER",payload:e}},updatePlayMap:function(e){return{type:"UPDATE_PLAYMAP",payload:e}},updateCampaign:function(e){return{type:"UPDATE_CAMPAIGN",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.endTurn=function(){var e=n.props.selectedCampaign;e.turnPlayerID=null,n.api.updateCampaign(e.toDBObj()).then((function(t){e.lastUpdate=t.lastUpdate,n.props.updateCampaign(e)}))},n.changePlayer=function(e){var t=n.props.players.filter((function(t){return t._id===e.target.value}));1===t.length&&n.props.selectPlayer(t[0])},n.renderHeader=function(){return r.a.createElement(fu,{key:"heading"},"Dead Simple VTT",n.props.selectedCampaign&&r.a.createElement("span",null,"\xa0-\xa0",n.props.selectedCampaign.name),n.props.selectedPlayer?r.a.createElement("span",null,"\xa0-\xa0",n.props.selectedPlayer.username):r.a.createElement("span",null,"\xa0-\xa0",r.a.createElement(ae.a,{variant:"outlined"},r.a.createElement(ne.a,{id:"player"},"Select a Player"),r.a.createElement(Da.a,{labelId:"player",id:"player",value:n.props.selectedPlayer,onChange:n.changePlayer,label:"Select a Player"},n.props.players.map((function(e,t){return r.a.createElement(ft.a,{key:t,value:e._id},e.username)}))))),n.props.selectedCampaign&&n.props.selectedPlayer&&n.props.selectedCampaign.turnPlayerID===n.props.selectedPlayer._id&&r.a.createElement("div",{style:{fontWeight:"bold"}},"\xa0It's your turn!",r.a.createElement(Ne.a,{onClick:n.endTurn},"End Turn")))},n.renderMain=function(){return n.props.selectedPlayMap?r.a.createElement(cu,{key:"main",mode:"Player"}):r.a.createElement("div",{key:"main",style:{margin:10}},"Load a Map to see it here")},n.load=function(e){setTimeout((function(){if(n.props.playMaps&&n.props.campaigns){var t=n.props.campaigns.filter((function(t){return t._id===e}));if(1===t.length){var a=t[0];n.props.selectCampaign(a)}}else n.load(e)}),1e3)},n.refresh=function(){n.setState({lastRefresh:new Date},(function(){setTimeout(n.refresh,1e3*n.state.countdown)}))},n.state={mode:"load",countdown:2,refreshing:!1,running:!1,lastRefresh:new Date},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;if(this.props.selectedPlayer&&this.props.selectedCampaign&&!this.state.running)return this.setState({running:!0},(function(){setTimeout(e.refresh,1e3*e.state.countdown)})),r.a.createElement("div",null,"Loading");if(null===this.props.selectedCampaign){var t=this.props.match.params.id;return this.load(t),r.a.createElement("div",null,"Loading")}return[this.renderHeader(),this.renderMain()]}}]),a}(n.Component)),gu=Object(d.b)((function(e){return{maps:e.app.maps}}),{setCampaigns:function(e){return{type:"SET_CAMPAIGNS",payload:e}},setMaps:function(e){return{type:"SET_MAPS",payload:e}},setPlayMaps:function(e){return{type:"SET_PLAYMAPS",payload:e}},setTokens:function(e){return{type:"SET_TOKENS",payload:e}},setFavoriteTokens:function(e){return{type:"SET_FAVORITETOKENS",payload:e}},setPlayers:function(e){return{type:"SET_PLAYERS",payload:e}}})(function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.createPlayToken=function(e,t,a){if(null===e||void 0===e)return null;var n=null,r=t.filter((function(t){return t._id===e.tokenID}));1===r.length&&(n=r[0]);var i=a.filter((function(t){return t._id===e.ownerID})),s=null;return 1===i.length&&(s=i[0]),new Mc(e.id,e.name,n,e.x,e.y,e.size,e.stealth,e.bloodied,e.moving,s)},n.state={version:"0"},n.api=qc.getInstance(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return null===this.props.maps?(this.api.getAllVTT(0,!0).then((function(t){if(void 0!==t&&void 0===t.error){var a=[];t.campaigns.forEach((function(e){a.push(new Bn(e._id,e.name,e.selectedPlayMapID,e.turnPlayerID,e.lastUpdate))})),e.props.setCampaigns(a);var n=[];t.players.forEach((function(e){var t=a.filter((function(t){return t._id===e.campaignID})),r=null;1===t.length&&(r=t[0]),n.push(new Fc(e._id,e.email,e.username,e.password,r,new Date(Date.parse(e.lastPing)),e.refreshIndex))})),e.props.setPlayers(n);var r=[];t.maps.forEach((function(e){r.push(new ti(e._id,e.name,e.category,e.fileName,e.gridWidth,e.gridHeight))})),e.props.setMaps(r);var i=[];t.tokens.forEach((function(e){i.push(new Pc(e._id,e.category,e.fileName))})),e.props.setTokens(i);var s=[];t.favoriteTokens.forEach((function(e){var t=i.filter((function(t){return t._id===e.tokenID}));if(1===t.length){var a=t[0];s.push(new Wc(e._id,e.campaignID,e.name,a,e.size))}})),e.props.setFavoriteTokens(s);var o=[];t.playMaps.forEach((function(t){var a=r.filter((function(e){return e._id===t.mapID}));if(1===a.length){var s=a[0],l=[];t.playTokens.forEach((function(t){var a=e.createPlayToken(t,i,n);a&&l.push(a)}));var c=e.createPlayToken(t.movingToken,i,n),u=[];t.lightMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"light",a.x,a.y))})),u.push(new Vc(e.id,"light",t))}));var p=[];t.darkMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"dark",a.x,a.y))})),p.push(new Vc(e.id,"dark",t))}));var d=[];t.fogMasks.forEach((function(e){var t=[];e.points.forEach((function(a){t.push(new jc(a.id,e.id,"fog",a.x,a.y))})),d.push(new Vc(e.id,"fog",t))})),o.push(new Lc(t._id,t.campaignID,t.name,s,l,c,u,p,d,t.zoom,t.dx,t.dy))}})),e.props.setPlayMaps(o)}})),r.a.createElement("div",{key:"main"},"Loading Data")):r.a.createElement(ye.d,null,r.a.createElement(ye.b,{exact:!0,path:"/vtt",component:Vn}),r.a.createElement(ye.b,{exact:!0,path:"/vtt/home",component:Vn}),r.a.createElement(ye.b,{exact:!0,path:"/vtt/dm",component:du}),r.a.createElement(ye.b,{path:"/vtt/player/:id",component:hu}))}}]),a}(n.Component));a(516);var yu=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).api=void 0,n.props=void 0,n.state={version:"0",width:0,innerWidth:0,marginLeft:220},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"updateDimensions",value:function(){}},{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(kt.a,null,r.a.createElement("link",{rel:"icon",id:"favicon",href:"/skullicon.ico"}),r.a.createElement("title",null,"Dead Simple VTT")),r.a.createElement(U.a,{container:!0},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(gu,null))))}}]),a}(n.Component),bu=Object(d.b)((function(e){return{}}),(function(e){return{}}))(yu),vu={maps:null,tokens:null,campaigns:null,players:null,playMaps:null,favoriteTokens:null,selectedCampaign:null,selectedPlayer:null,selectedPlayMap:null,isOn:!0};var Au={app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vu,t=arguments.length>1?arguments[1]:void 0;if("SET_MAPS"===t.type)return Object.assign({},e,{maps:t.payload});if("SET_TOKENS"===t.type)return Object.assign({},e,{tokens:t.payload});if("SET_CAMPAIGNS"===t.type)return Object.assign({},e,{campaigns:t.payload});if("SET_PLAYERS"===t.type)return Object.assign({},e,{players:t.payload});if("SET_PLAYMAPS"===t.type)return Object.assign({},e,{playMaps:t.payload});if("SET_FAVORITETOKENS"===t.type)return Object.assign({},e,{favoriteTokens:t.payload});if("ADD_MAP"===t.type){var a=e.maps;return a.push(t.payload),Object.assign({},e,{maps:a})}if("ADD_TOKEN"===t.type){var n=e.tokens;return n.push(t.payload),Object.assign({},e,{tokens:n})}if("ADD_CAMPAIGN"===t.type){var r=e.campaigns;return r.push(t.payload),Object.assign({},e,{campaigns:r})}if("ADD_PLAYER"===t.type){var i=e.players;return i.push(t.payload),Object.assign({},e,{players:i})}if("ADD_PLAYMAP"===t.type){var s=e.playMaps;return s.push(t.payload),Object.assign({},e,{playMaps:s})}if("ADD_FAVORITETOKEN"===t.type){var o=e.favoriteTokens;return o.push(t.payload),Object.assign({},e,{favoriteTokens:o})}if("UPDATE_MAP"===t.type){var l=e.maps,c=l.filter((function(e){return e._id===t.payload._id}));if(1===c.length){var u=c[0];u.name=t.payload.name,u.file=t.payload.file,u.gridWidth=t.payload.gridWidth,u.gridHeight=t.payload.gridHeight}return Object.assign({},e,{maps:l})}if("UPDATE_TOKEN"===t.type){var p=e.tokens,d=p.filter((function(e){return e._id===t.payload._id}));if(1===d.length){var m=d[0];m.file=t.payload.file}return Object.assign({},e,{tokens:p})}if("UPDATE_CAMPAIGN"===t.type){var f=e.campaigns,h=e.selectedCampaign,g=f.filter((function(e){return e._id===t.payload._id}));if(1===g.length){var y=g[0];y.name=t.payload.name,y.selectedPlayMapID=t.payload.selectedPlayMapID,y.turnPlayerID=t.payload.turnPlayerID,y.lastUpdate=t.payload.lastUpdate,h._id===y._id&&(h=y)}return Object.assign({},e,{campaigns:f,selectedCampaign:h})}if("UPDATE_PLAYER"===t.type){var b=e.players,v=e.selectedPlayer,A=b.filter((function(e){return e._id===t.payload._id}));if(1===A.length){var E=A[0];E.email=t.payload.email,E.username=t.payload.username,E.password=t.payload.password,E.campaign=t.payload.campaign,v._id===E._id&&(v=E)}return Object.assign({},e,{players:b,selectedPlayer:v})}if("UPDATE_PLAYMAP"===t.type){var T=e.playMaps,D=e.selectedPlayMap,w=T.filter((function(e){return e._id===t.payload._id}));if(1===w.length){var k=w[0];k.campaignID=t.payload.campaignID,k.name=t.payload.name,k.map=t.payload.map,k.tokens=t.payload.tokens,k.lightMasks=t.payload.lightMasks,k.darkMasks=t.payload.darkMasks,k.fogMasks=t.payload.fogMasks,k.zoom=t.payload.zoom,k.dx=t.payload.dx,k.dy=t.payload.dy,D._id===k._id&&(D=k)}return Object.assign({},e,{playMaps:T,selectedPlayMap:D})}if("UPDATE_FAVORITETOKEN"===t.type){var x=e.favoriteTokens,I=x.filter((function(e){return e._id===t.payload._id}));if(1===I.length){var S=I[0];S.file=t.payload.file}return Object.assign({},e,{favoriteTokens:x})}if("SELECT_CAMPAIGN"===t.type){var C=t.payload,O=e.selectedPlayMap;if(""===C.selectedPlayMapID)O=null;else if(e.playMaps&&(null===O||C.selectedPlayMapID!==O._id)){var N=e.playMaps.filter((function(e){return e._id===C.selectedPlayMapID}));O=1===N.length?N[0]:null}return Object.assign({},e,{selectedCampaign:C,selectedPlayMap:O})}return"SELECT_PLAYER"===t.type?Object.assign({},e,{selectedPlayer:t.payload}):"SELECT_PLAYMAP"===t.type?Object.assign({},e,{selectedPlayMap:t.payload}):"TOGGLE_IS_ON"===t.type?Object.assign({},e,{isOn:!e.isOn}):e},session:In.sessionReducer},Eu=Object(xn.b)(Au),Tu=Object(xn.c)(Eu),Du={refreshFromLocalStorage:!0,refreshOnCheckAuth:!0,redirectPath:"/home",driver:"COOKIES",validateSession:function(e){return!0}};In.sessionService.initSessionService(Tu,Du).then((function(){return console.log("Redux React Session is ready and a session was refreshed from your storage")})).catch((function(){return console.log("Redux React Session is ready and there is no session in your storage")}));var wu=Tu;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.location.href.includes("/vtt")?s.a.render(r.a.createElement(d.a,{store:wu},r.a.createElement(bu,null)),document.getElementById("root")):s.a.render(r.a.createElement(d.a,{store:Wn},r.a.createElement(kn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[381,1,2]]]);
//# sourceMappingURL=main.355da6f6.chunk.js.map